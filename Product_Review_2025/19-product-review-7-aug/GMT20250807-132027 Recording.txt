[Speaker 7] (6:45 - 6:49)
Привет, Семен. Как твои дела? Привет.

[Speaker 1] (6:50 - 6:51)
Ты нормально?

[Speaker 2] (6:56 - 6:56)
Тебя там как?

[Speaker 1] (6:57 - 10:03)
Как-то мы с тобой не пересекаемся последние недели две. Отменяли все звонки общие. Я тебя слышал последний раз на записи.

Так сейчас команда ебывает, чтобы устранить кучу проблем. Соответственно мы поотрезали все, что только можно отрезать, чтобы ребята сосредоточились. Вот эти звонки оставили и все.

А какие-то вопросы по дизайну, ребята напрямую к тебе идут. Насколько я знаю. Идут, да.

Но все-таки я чувствую себя отрезанным. Меня это беспокоит. Сейчас все немножко отрезаны.

С другой стороны, знаешь, люди никогда на работе сосредоточились. Вон там. Это фигачат фасилити, связи везде.

Одна из таких срочных, злободневных задач. Вот ребята документик ставили. Чисто такой, для отслеживания.

Типа что тегается, что не тегается? Или что фильтруется, а не фильтруется фасилити? Ну и атрибуция, и фильтрование, все это вместе.

То есть тупая имплементация сейчас идет. Да, но как бы странно, что она сейчас. Как будто бы давно уже было понятно, что это все надо.

И тут дождались, пока ни клюни, ни жареный петух. За то, как все резво побежали. Я сейчас это, кроме как с иронией, комментировать не могу.

Кстати, мне там Екатерина говорила, что ты там дизайнера нанимаешь, но у него там какие-то странноватые вопросы были. Не, у него ничего странноватого. Он уже просто себе купил билеты в отпуск.

И он волнуется, что не придется ли отменить отпуск теперь за это. И он на неделю хочет уехать в сентябре. Не хочет сдавать билеты.

Если они вообще возвратные у него, знаешь. Сейчас же такого добра тоже много. Я могу приехать вместо кого-то, если нужно.

Здравствуйте. А кто собрался отдыхать? Мне нравится такая инициатива.

А вдруг в Италию надо ехать? Так смотря куда, Италия тоже не маленькая.

[Speaker 3] (10:06 - 10:10)
Я могу поболеть за этого человека. Я ему очень хочу болеть.

[Speaker 7] (10:11 - 10:12)
Привет всем.

[Speaker 1] (10:23 - 10:41)
Маленький апдейт. Дэна, скорее всего, не будет. Поэтому сейчас предлагаю дождаться Алексея.

Быстренько пробежаться по апдейтам и идти дальше работать.

[Speaker 3] (10:41 - 11:17)
Пока не начали. У меня юбилейный вопрос в крови по Customer Preview. Customer Locations Preview.

Который скедулер. Он не горит, но его нужно все-таки сделать.

[Speaker 1] (11:17 - 11:41)
Да, он сделан. И я никак не могу его задемить Дэну. Вот если Дэн сегодня бы пришел, я бы задемил это.

В последний раз получилось у меня подемить Дэну это в пятницу. И этот как раз скедулер, превью скедулера не хватило времени. Прошлую пятницу.

Он ждет approval уже вторую неделю.

[Speaker 3] (11:43 - 11:44)
Четвертую, наверное, да.

[Speaker 1] (11:46 - 11:49)
Ну, я имею в виду с того момента, как мы закончили его рисовать.

[Speaker 3] (11:50 - 11:51)
Спасибо.

[Speaker 2] (12:46 - 12:51)
Игорь, привет. Тебе удалось вот эту табличку посмотреть?

[Speaker 1] (12:54 - 13:26)
Посмотреть удалось. Понять не очень. Саша там вроде писал.

А что непонятно? Ну, например, routes export. Что имеется в виду?

Это фитер не работает. Это данных нет. Это какие-то другие вещи.

Та же самая идея с create, edit, vehicle, capacity, profile. И другие.

[Speaker 4] (13:30 - 13:40)
Паша, давай вот верхнюю часть посмотрим. Со стороны бэкэнда. Поддержка фильтрации по facility.

[Speaker 1] (13:40 - 13:47)
А почему ты меня спрашиваешь? Смотрите, есть Саша Ковтунов.

[Speaker 4] (13:48 - 13:49)
Саша здесь тоже.

[Speaker 2] (13:50 - 13:57)
Я всех спрашиваю. Я всех спрашиваю. Я же копию всех поставил.

[Speaker 1] (14:03 - 15:11)
Алексей, давай быстренько, если нам надо что-то посмотреть, посмотрим. Что нужно всей команде видеть. Если нет, то я думаю, что надо просто людей распустить.

И с Сашей, с Александрами пообщаться. Тогда на бэкграунде просто хотел бы, Саша, чтобы ты посмотрел. Саша Ковтунов.

Правильно ли у нас у всех информация по статусу? Если будут вопросы, спишемся. Что непонятно.

Это что касается facilities. Тогда можно это вообще закрывать и все. А что закрывать почти?

Шейнг этого экрана. Спредшет. Да.

Я уже переключился и забыл, что расшарил. Дальше я шарю агенту, что мы хотим из такого быстренького посмотреть. Это...

Семен, а извините, Семен, ты говорил, да, чтобы она не будет? Да, я говорил. Скорее всего.

Я поэтому и говорю, что побыстрее посмотреть, да ребят отпустить.

[Speaker 2] (15:14 - 15:22)
Давай, Лер, может быть, коллективной мозгой сейчас посмотрим на эту дельту? Давайте на rounds.nation, да. Я тогда отключаюсь.

[Speaker 4] (15:27 - 15:31)
Тогда минут 15 потратим, сейчас быстренько продеремся и разойдемся.

[Speaker 2] (15:31 - 16:41)
Не помню еще правильно ли мы вообще все сообразили по поводу дельты. У нас здесь выводится дельта. Вот тут в левой части.

Давай сначала посмотрим, потом будем комментировать. Сначала мы считали... Игорь, убери курсор, пожалуйста.

Ага, спасибо. Первый наш подход был, это сколько actual процент от plant. И потом мы сразу же поняли практически, что это неправильно.

Теперь мы из plant вычитаем actual в абсолютных значениях, получаем дельту в абсолютном значении. И вот эту дельту мы уже смотрим, сколько она составляет процент от планированной. То есть, например, самая первая строка destination.

Actual 7, запланировано 9. Дельта между ними 2. И вот эти 2 составляют 22% от 9.

То есть мы как раз в процентах отображаем разницу между запланированным и актуальным.

[Speaker 4] (16:42 - 16:50)
На самом деле время, единственное пометки, где start time и end time, мы выводим дельту в минутах. Вы все попутали.

[Speaker 1] (16:50 - 17:37)
Здесь нам нужна дельта, а есть процентаж. Вов, можно дослушать? Процентаж не дельты делается.

Вов, можно дослушать? Хорошо. Можно дослушать.

Смотрите, у нас здесь есть два типа вычисления. Это проценты и это, например, start time, где мы эти проценты показать... Мы можем их вычислить, но это будет очень странное вычисление от duration.

То есть мы можем вот эти вот 13 минут, которые у нас... Мы их не можем в процентах показать. Это неправильно, их показывают в процентах.

Поэтому...

[Speaker 5] (17:37 - 17:40)
Можно, я Дэна писал и даже формулу давал.

[Speaker 2] (17:41 - 17:42)
Да формула там понятная.

[Speaker 5] (17:43 - 17:45)
И он сказал, I don't disagree, он сказал.

[Speaker 1] (17:45 - 17:54)
У него есть рассуждение на эту тему, но мне кажется, они сомнительны.

[Speaker 2] (17:54 - 18:05)
Поэтому мы здесь написали абсолютное значение, переназвали колонку как дельта. И дельта вычисляется как настоящая дельта.

[Speaker 5] (18:05 - 18:06)
Это неправильно.

[Speaker 1] (18:06 - 18:13)
Дэн хотел здесь переключать процент дельта. Если мы показываем процент, тогда это процент blend от actual.

[Speaker 2] (18:14 - 18:17)
Нет, это процент blend от actual.

[Speaker 1] (18:18 - 18:41)
Это бесполезно. Так это неправильно. Это прогресс.

Если мы показываем процент, то нужно показать прогресс. Сколько из actual'a blend'a потрачено. Вернее, сколько actual составляет blend.

Это прогресс, это проценты. А дельта это просто тупо разница между blend и actual.

[Speaker 2] (18:41 - 18:46)
Так вот у тебя в процентах разница между blend и actual. Вот она и есть.

[Speaker 1] (18:46 - 20:17)
А не нужна в процентах. Дельта в процентах никому не интересна. Интересен прогресс, и дельта абсолютная.

А дельта процент никому не нужен. Важен прогресс и дельта. Мы называем это дельтой.

Дельта это же отклонение. Дельта процент практической пользы особо не имеет. Но мы изначально так называем вообще эту задачу.

Смотрите, так в этом-то и путаница. Дельту можно выразить в процентах. В процентовке бывают две разные вещи.

Можно в процентовке выразить прогресс. Соотношение actual vs blend в процентах. Это очень важная метрика.

Она очень интересна всем. Для первой версии Дэн что попросил? Процентовку или дельту?

Он попросил процентовку. Процент blend vs actual. Он попросил такой процент.

Он не просил дельту в процентах. Да, у меня нарисован процент, и это прогресс. У нас везде по ТЗ идет дельта процент.

Везде. Давайте первый источник смотреть. Кто сказал, что нужно дельта в процентах?

Объясните мне. Поставьте себя на точку зрения пользователя. Скажите, зачем видеть дельту в процентах.

[Speaker 4] (20:18 - 20:27)
Перерывы. Запланировано было 15 минут на перекуры у водителя. Сколько он потратил?

[Speaker 1] (20:29 - 20:32)
175%. Сразу понятно, что это больше, чем надо.

[Speaker 2] (20:33 - 20:36)
Если ты здесь видишь...

[Speaker 1] (20:37 - 21:37)
Если ты видишь больше 100%, значит он перерасходовал. Если ты видишь меньше 100%, значит он недорасходовал. И это процент.

Это обычный прогресс. Значит, это не дельта. Это не дельта.

У нас везде слово дельта проскальпировано. Ребята, стоп. У нас есть первый источник.

Понедельник, 4 августа, 07 минут. Я не буду называть время, чтобы никого не сбивать. Slack.

Алексей, просто открой. Вот прямо список из Slack плова слова. Я просто не вижу имплемент the delta percent.

Я не вижу слово дельта. Я вижу процентную, но не вижу delta percent, понимаешь? Открой Slack и покажи мне, пожалуйста.

Вот, не видишь? Slack, пожалуйста, открой и покажи в Slack.

[Speaker 4] (21:37 - 21:39)
Есть в этом чате?

[Speaker 1] (21:40 - 22:35)
TeamLeads. Это TeamLeads. Ты там должен быть.

Да-да-да, сейчас, секунду. Я допускаю, что я это мегаслово немецкого типа пропустил. Но я вижу кое-что другое.

Дэн хотел переключатель между дельтой и процентами. Но он не хотел переключатель между дельтой и дельтопроцентами. Control-F и TeamLeads набери.

Так быстрее. Да-да-да. 4 августа.

Сегодня седьмое. А, еще пятое, да. Четвертое.

[Speaker 2] (22:38 - 22:40)
Четвертое августа. Идем.

[Speaker 1] (22:40 - 22:52)
Вот, у нас пошла полемика. Давай дальше. Вначале.

Вот, стоп, стоп, стоп, ниже. Чуть ниже, чуть ниже.

[Speaker 4] (22:53 - 22:53)
Еще?

[Speaker 1] (22:54 - 23:22)
Вот, фраза Дэна, которая начинается anything over 90%, это ниже. Нас интересует, что пишет Дэн. Ниже, картинку убирай.

Нас интересует, что пишет Дэн. Вот. Для первой версии процент допустим, без икон и так далее.

[Speaker 4] (23:29 - 23:32)
Это у нас выполнено, это есть.

[Speaker 1] (23:33 - 24:57)
Отлично. Вот, идем дальше. И тут уже расписано.

То есть, по сути, для первой версии нам процентовки с прогрессом, а не с дельтой, ну, выше крыши. Дальше уже будем интегрировать с Дэном. Переключатель добавлять, формулы вот эти вот, по мне так тоже странные, но окей, добавлять и так далее.

Речь шла только о переключателе между прогрессом в процентах и дельтой. Никто никогда не предлагал делать дельта процентов. Я, честно говоря, тоже немножко удивился, что у нас все превратилось в дельта процентов.

В том тикете обязательно должна быть ссылка сюда, на слаг, чтобы был шанс увидеть, что, ну блин, в тикете произошло искажение, и произошло серьезное искажение. А произошло оно из-за буквально одной строчки, которая относится только к unattributed. И, возможно, там Дэн пропустил OR между дельтой и процентами.

Может быть.

[Speaker 4] (24:59 - 25:03)
Или запятую. И все. И сразу меняется смысл.

[Speaker 1] (25:18 - 25:49)
И вот тут инструкция от Дэна. Ну, очень детальные и бьются на 2-3 версии. Ну вот.

Дальше Дэн переключается на фронт. На совершенно другую задачу.

[Speaker 2] (25:56 - 26:04)
Хорошо. Actual start time. Total plane route duration.

[Speaker 5] (26:10 - 26:11)
Это о том, как выражать start time в процентах.

[Speaker 2] (26:11 - 26:27)
И по этой формуле ты не получишь дельту, ты получишь вот этот вот прогресс. Причем прогресс от общего запланированного времени маршрута, который тогда каждый...

[Speaker 1] (26:27 - 26:37)
Вот эта вот штука — это delay. Это размер дилея при старте маршрута. Если delay масштабировать в пределах duration маршрута...

[Speaker 2] (26:37 - 26:43)
Но эта формула только под start time и end time? То ты получишь... Подожди.

Эта формула подходит под start time или под все?

[Speaker 1] (26:44 - 26:50)
Start time. Это задержка, насколько start time позже начался, чем ты раньше.

[Speaker 2] (26:50 - 26:54)
Еще раз. Эта формула подходит только для start time и end time или под все остальные поля?

[Speaker 1] (26:54 - 27:15)
Только под start time и end time. Все остальные поля гораздо проще. Все остальные поля.

Это actual делить на total умножить на 100%. Но причем это не процент получается, это какой-то коэффициент получается. Относительно очень.

В любом случае...

[Speaker 2] (27:15 - 27:38)
Вернемся в абсолютные числа. Давайте вот здесь на примере сервис. Отлично ложится.

Plant 40 минут, actual 10 минут. Сейчас здесь оказывается дельта, что это дельта. Почему тут не 75, потому что тут есть секунды и мы просто отбросили...

Не важно.

[Speaker 1] (27:39 - 27:47)
У тебя здесь должно быть 25%. 25%, потому что потрачено 25% из 40 минут.

[Speaker 2] (27:47 - 27:53)
Тогда мы зря сейчас это переделали, я сейчас верну обратно. Это так было изначально. Хорошо.

[Speaker 1] (27:54 - 28:24)
Ребята, пожалуйста, в тикете ссылку на первоисточник оставляйте. И вот здесь нарисуйте процентик, пожалуйста, а не треугольник. Хорошо.

У нас тогда вот с этим проблема. Вот с этим проблема решите ее так, как я написал. Возьмите эту формулу, что я дал, поставьте tooltip, который объясняет, что это такое, и все.

Но это не процент. Проценты так не считаются.

[Speaker 2] (28:24 - 28:32)
Мы поэтому здесь воткнули эту дельту, потому что у нас здесь минуты, а не проценты. Чтобы показывать именно дельту.

[Speaker 1] (28:33 - 29:14)
Вы можете либо прочерк здесь ставить, вообще прочерк, либо ставить то, что я дал. Все, других вариантов нет. Не надо здесь смешивать difference и дельт, и прогресс.

Нельзя у стартайма сделать прогресс. У стартайма можно сделать масштаб дилея относительно длины роута. Давайте прочеркой и дальше разберемся.

Потому что если у нас, как в примере, сдвиг 13 минут, а, допустим, маршрут занимает 6 часов, то у нас это будет 0,0000.

[Speaker 6] (29:15 - 29:17)
Это ничтожный дилей, который можно приберегать.

[Speaker 1] (29:17 - 29:38)
Если у тебя маршрут занимал 2 часа, а ты на 2 часа позже выехал, то дилей сравним с длиной по duration маршрута. Это большая проблема. Это будет выглядеть примерно как 0,05 в этом случае.

[Speaker 2] (29:39 - 29:42)
И еще тогда вопрос с покраской.

[Speaker 1] (29:44 - 30:01)
С покраской все сложно. Я думаю, это отдельная тема, и не стоит ее обсуждать на 20 человек. Давайте сделаем прогресс, стартэндтайм, прочерк в режиме процента и дальше интерируем.

[Speaker 2] (30:01 - 30:04)
У нас не получилось посчитать данные.

[Speaker 1] (30:05 - 30:15)
Либо они неприменимы, либо этих данных нет пока что, либо вообще невозможно их вычислить.

[Speaker 2] (30:15 - 30:25)
Она требует же, мы пустую строку оставляем, потому что их невозможно вычислить. Точно так же и здесь прогресс нельзя вычислить.

[Speaker 1] (30:26 - 30:48)
Оставляйте пробел. Хорошо. Но только это не стройно выглядит, некрасиво.

Эти пробелы некрасиво выглядят. Я бы везде писал прочерк. Независимо от природы, почему его нет.

Его просто нет, и все. По той или иной причине. Когда значения нет, просто пишем прочерк.

Неважно, появится оно потом или не появится никогда.

[Speaker 2] (30:55 - 30:58)
Все? Окей, тогда с этим вопросов больше нет.

[Speaker 6] (30:58 - 31:04)
А если там, где 13 минут, будет час отклонения, как оно будет влазить туда?

[Speaker 2] (31:05 - 31:07)
Очень коряво. Оно будет зажимать...

[Speaker 6] (31:07 - 31:08)
Там не будет...

[Speaker 2] (31:08 - 31:17)
Оно метрики будет зажимать... Короче, вот эти лейблы, оно зажимает в тройточке до упора. Так не нужно.

[Speaker 4] (31:17 - 31:19)
Все данные помещаются, страдают только...

[Speaker 1] (31:19 - 31:55)
Мы же только что решили, что там будет прочерк. Никакого времени там не будет. Давайте последовательно.

Вот это сделаем за релизом, и займемся уже следующими итерациями. Переключателем, подсветкой и так далее. Мне, если честно говорить, я считаю, что вот эти две штуки не должны были быть среди этого всего.

Потому что это немножко другого типа данные.

[Speaker 5] (31:56 - 32:00)
Мы смешали мух и котлеты.

[Speaker 1] (32:07 - 32:34)
TimeStamp из Duration смешали в одну кучу. Если бы здесь вместо StartTime было StartTimeDelay, планируется 0. Actually произошло час 20, и тогда можно высчитать.

В общем, тогда бы это сбилось по-нормальному.

[Speaker 2] (32:37 - 32:40)
Окей. Так, у нас Алексей здесь.

[Speaker 5] (32:43 - 32:45)
Который я, и который другой.

[Speaker 2] (32:45 - 33:03)
Да-да-да. Давай быстренько посмотрим data retention. В принципе, нам нужен Игорь, Семен.

Можно упустить. Игорь, я или Склинковский?

[Speaker 5] (33:04 - 33:05)
Им бы Склинковский нужен.

[Speaker 2] (33:06 - 33:09)
Тогда хорошего дня всем. Пока. Пока.

[Speaker 4] (33:12 - 33:27)
Извините, что вылезаю. Две минуты. Был вопрос по Facilities.

А именно, сколько у нас Facilities в ордерах и Custom Relocation. Хотел сегодня пояснить с Дэном. Но если его нет, возможно, у вас как-то получится еще спросить отдельно.

[Speaker 1] (33:29 - 33:34)
Но мы это все равно будем сейчас смотреть после data retention. Оставайся тогда.

[Speaker 4] (33:34 - 33:35)
Да-да, давайте посмотрим.

[Speaker 2] (33:37 - 33:59)
Так, у нас цель добить страницу до конца. Показать график, текущее состояние. И отправлять это на продакшн.

Игорь, ты видел, когда последний раз это...

[Speaker 1] (33:59 - 34:24)
Вот эту целую страницу нам позапрошлой недели видели. Тогда показывали конечный результат. У нас там были вопросы по Current, Custom и вот этой вообще табличке.

Что она там неправильно считается. Это округление. Это кто-то удаляет запной или оно пропадает опять?

[Speaker 5] (34:26 - 34:31)
Никто не удаляет. Не-не, я себя прошу прощения. То я, видимо, убрал просто эту трансляцию.

[Speaker 1] (34:31 - 36:54)
Переместился на другой экран. Не-не, окей, я просто думаю, пропадает. Вот это.

Мы сегодня с ребятами поговорили. Там у Алексея из QA были вопросы. Мы на вопросы его вроде бы ответили.

Он должен прийти с общим решением или чего-то другого. Мы можем это релизить. Но мы договорились так, что мы возьмем несколько клиентов, на которых можно проэкспериментировать будет.

Потому что это не только вот эта страница. Там же и сам механизм ретеншона и так далее. Мы возьмем нескольких клиентов, включим на них вот этот функционал и посмотрим, что будет происходить.

Но по большому странице она нормально работает. Вот эти кумулятивы работают, табличка правильно вычисляется. Мне не нравятся вот эти цифры, которые здесь пишут, где-то 30 центов за день и так далее.

Вот это. Мы с Артемом говорили, что там нужно пересмотреть. Пересмотреть, как это работает.

Подождите. Current total July 25. Значит, billing cycle начинается 25, правильно?

С начала billing cycle до 7 числа у нас какие-то данные. Сегодня 7 число, правильно? То есть у нас данные есть до сих пор.

Все, что до сих пор – это forecast. Почему здесь они как будто бы набиты как реальные? Вот это будущее.

Поднимать надо. Мы знаем точно, что вот столько потратено. Мы можем узнать, что что-то там будет удаляться.

То есть мы можем нарисовать такую спадающую вниз линию, зная, сколько будет удаляться. Мы можем просто ровно отрисовать это дальше. А все остальное – это forecast.

Это бледненькое, серенькое должно быть. То есть мы предполагаем, что вот так будет изменяться. То есть вот эта часть – это прошлое.

Здесь у нас есть данные. Это будущее. Это вилами по воде.

Мы предсказываем, что будет. Мы должны, соответственно, это отображать.

[Speaker 2] (36:55 - 37:00)
Ты же видишь тип графика. Мы здесь не можем вот так вот сереньким. Можем, можем, можем.

[Speaker 1] (37:01 - 37:39)
Посмотрите, как это Google делает. Нет, нет. Посмотрите на макет.

Разнотипные данные. Ты видишь, что здесь несколько типов данных? Я покажу.

Вова говорит о том, что целую вот эту штуку надо димить в другой цвет. В серый. Так, как Google делает.

Ее можно не разбивать на кусочки, просто целую димить. Потому что она типа еще будущее. Я очень быстро пошарю, как это должно было быть.

На макете все правильно нарисовано. Дайте мне экран.

[Speaker 5] (37:43 - 37:43)
Видно?

[Speaker 1] (37:44 - 40:03)
Вот. Это та же самая ситуация, когда вот здесь, вот сегодня. Вот мы на сегодняшний день потратили уже на 120 баксов.

Дальше мы закрашиваем только ту часть, которая уже мы знаем, что потрачено. Потому что с тебя в конце обеденного цикла спишут. То есть если ты вдруг сейчас перестанешь что-то использовать вообще, то с тебя в итоге спишут за 120.

Мы можем их показать уже закрашенными. А дальше все остальное, вот эта серенькая, это предсказание, что при текущей динамике будет расти с константной скоростью. И мы предсказываем, что к концу периода у вас будет 240.

Вот цветные – это те данные, которые мы уже знаем, сколько потрачено. Это те данные, которые у нас уже есть. А бледненькие – это предсказание.

У Google еще проще. У них просто сереньким предсказание и все. Потому что они прекрасно знают, что это предсказание, скорее всего, будет неправильным.

Сейчас я найду. Здесь где-то валялись гугловские скриншоты. У меня открыто я могу экран расшарить, показать.

Давай. Зачем? Да, Google.

Точно, они пейстбар делают сереньким. А, ну вот. Они смешивают прошлое, а там, где они еще до конца не знают, будут уточнять.

Потому что у них billing. Видите, они говорят, что до трех дней могут пересчитывать. Давай я еще другой скриншот покажу.

Камулейтик. Включи камулейтик. Да, вот эта ситуация.

Столько уже потратилось, а дальше все остальное предсказание. Вот это понятнее, чем то, что нарисовано. Окей.

Делай все так. Да. Это, по крайней мере...

[Speaker 5] (40:03 - 40:20)
Значит, я, наверное, подытожу. Сначала покажу экран. Значит, после, допустим, это что, 7 августа, то есть с 8 и дальше, все столбики должны быть серыми в кумулятивном графике.

В этом графике, соответственно, тоже.

[Speaker 1] (40:21 - 40:38)
Секунду. А на 7 число, вот на сегодня. Вот у меня сейчас 7 августа, 8 вечера.

Уже посчитана эта информация у нас в описании? Если эта информация на сегодня еще не подпишена, тогда это prediction все еще.

[Speaker 5] (40:38 - 40:40)
Если она на сегодня уже пришла, то...

[Speaker 1] (40:42 - 40:44)
Last update, да.

[Speaker 5] (40:45 - 40:51)
У тебя 7 число еще не полностью обновлено. То есть, по-хорошему, надо 7 тоже серым красить.

[Speaker 1] (40:52 - 40:59)
Можно его частично закрасить цветным, то что мы знаем уже, а дальше предположение, сколько к вечеру получится красить в серый.

[Speaker 5] (41:02 - 41:04)
Частично, что мы знаем.

[Speaker 1] (41:05 - 41:19)
Смотри, если это геморрой, тебе вот это вычислять... Просто красить тогда весь бар серый. Просто весь бар, да.

Но предсказанную высоту бара, да? Сколько к вечеру, предположительно, будет?

[Speaker 5] (41:20 - 42:02)
С 7, короче, столбик 7 до конца серый. То есть, здесь в кумулятивном то же самое. Седьмое и до последнего серое.

Окей. Это я посмотрю и сделаю. Значит, из того, что я еще добавил, это валидацию и месседжи.

Если у нас, собственно, вот так должно быть. Не знаю, почему, но сейчас что-то я намудрил. В общем, да, у нас теперь...

Ну, только что же работало. А, вот, работает. Вот.

И, собственно, пожалуй... А, но еще там не empty state, а, собственно, когда нет данных, поубирал полностью график и метрики.

[Speaker 1] (42:05 - 42:42)
Если ты data retention выставишь в ноль, да? Попробуй сейчас выставить в ноль что-нибудь. Optimization в ноль, например, да?

Или там нельзя меньше? А, единица. Единица, да.

Хорошо. Вот ты выставляешь сейчас единицу и применяешь ее, да? Смотри, эта операция сопровождается тем, что у тебя удаляются все твои оптимизации, которые были созданы не сегодня.

Это массовые потери данных, огромные. А мы даже никакого промта не сделали. Эти данные нельзя восстановить, они удаляются навсегда.

Ты огромный объем данных только что уничтожил.

[Speaker 5] (42:43 - 42:50)
Насколько я помню и понимаю, это первая версия, а вторая версия будет drawer, которая будет за это полноценно отвечать. Нет, ты не прав.

[Speaker 1] (42:50 - 44:04)
Пока drawer нет, хотя бы нужен промок. Are you sure you want? Потому что мы не хотим, чтобы они уменьшали retention.

Мы хотим, чтобы они увеличивали. Поэтому чем больше мы их напугаем, в своем ли ты уме что-то хочешь уменьшить, у вас сотрется миллион данных. На мой вкус, эта операция страшная.

И лучше отпугивать юзеров от того, чтобы они ее сделали. Уменьшение именно. Увеличивайте, пожалуйста, а уменьшайте, это скажется на удаление данных.

Надо об этом предупредить. К нам в support регулярно обращаются, что кто-то похерил маршруты. Поэтому лучше добавить диалоговое окно с уточнением, если мы резко уменьшаем retention период.

Если мы его хоть на один день уменьшаем, нужно предупредить, что возможно удаление большого количества данных. Вы уверены? В течение суток эти данные, которые не попадают в период, будут удалены.

Что-то типа такого.

[Speaker 7] (44:05 - 44:06)
Вы уверены?

[Speaker 1] (44:07 - 45:38)
Извиняюсь. Можно? Я помню, что в начале обсуждения Data Retention Игорь упоминал, что данные удаляются не сразу, а там вроде бы grace-период 2 недели.

Это так или это уже изменилось? Это не так. То, что Володя сейчас проговорил, это так и будет.

То есть это не сейчас удаляются, а это завтра удалятся данные. Понял. Спасибо большое за уточнение.

Просто хотелось быть в курсе. Спасибо. Игорь, а мы реально позволяем удалять все, что стальше 24 часов?

У нас какие-нибудь сайд-эффектов не будет по системе? Это так, из любопытства больше спрашиваю. Возможно, да.

Возможно, меньше 7 не стоит вообще даже предлагать. Нет, сайд-эффектов, возможно, не стоит сразу брать, типа с 10 лет до одного дня. Не стоит такого делать.

А говорить, что давайте градуально по чуть-чуть удалять. Но нет, почему? Просто очередь вырастет немножко побольше.

Просто хотелось. Но 100% надо что-то сделать. И, возможно, не стоит сразу давать на много удалять.

То есть сначала 100 дней, потом больше, чтобы пользователь за один раз не убил все данные, которые у него есть.

[Speaker 5] (45:47 - 45:58)
Какие-то еще есть вопросы? Ну, подытожив, я делаю, собственно, посмотрю, как это возможно. С сегодняшнего дня и далее все серое.

И промпт добавляю на уменьшение дата-ретеншона.

[Speaker 1] (46:01 - 46:21)
Да. Сменяю палитру новую для графика. Я помню это.

Что-то еще нам нужно здесь посмотреть? А у нас tool-типы есть? Типа expiring soon, что значит soon?

[Speaker 5] (46:21 - 46:40)
Должны были быть, но мы их не добавляли, потому что планировали их добавлять после. Напомни мне, пожалуйста, Алексей или Алекс Шульга, по поводу tool-типов. Мы должны были добавлять после того, когда что-то раскатается, или что-то будет известно, чтобы текста можно было выбрать.

[Speaker 1] (46:43 - 46:44)
Я не помню.

[Speaker 5] (46:45 - 46:46)
Надо поднять.

[Speaker 1] (46:46 - 46:57)
Я тоже. Когда дело касается текстов, у всех вышибает память. Здесь есть tool-типчики на графике, если наводится на график?

[Speaker 7] (46:57 - 46:57)
Да.

[Speaker 1] (46:59 - 47:05)
Мне кажется, что лучше выводить сразу же весь список.

[Speaker 5] (47:06 - 47:08)
Там выводится только цена?

[Speaker 1] (47:09 - 48:39)
Нет, выводится только тот блок, на который наводится. Это неудобно. Здесь есть только цена, нет объема.

Было бы хорошо. Что это за энтити, сколько штук и сколько это стоит. Давайте я расшарю еще раз у гугла, покажу.

У гугла там будет сразу на весь столбик. Это правильно. Он подсвечивает.

Ребята, это удобно. Мы с Игорем этим пользуемся каждую неделю, если не каждый день. Мы это не нарисовали, но это должно быть.

Мы это рисовали где-то в другую графику, а не для этого. У нас нарисовано это для usersnotshot. Видите, тут дата написана, отступ и уже вниз расписано, что как, зачем, почем.

Прям удобно. Я сейчас скриншачу и попрошу Марию набросать. Но это не блокер абсолютно.

Плюс вертикальная палка. Это улучшалка на следующую версию. Плюс еще, обратите внимание, вот палка есть, которая движется по таймлайну.

Кстати, было бы нехорошо, если бы она снаповалась, потому что она сейчас как-то двигается в свободу. Да как-то... Видишь, пишет дату, куда заснапался, поэтому как-то оно...

[Speaker 5] (48:39 - 48:45)
Не совсем вижу практическое применение вертикальной палки в данном случае. Тут же четко видно, что день-столбик-день-столбик.

[Speaker 1] (48:48 - 48:58)
Поэтому и пофигу, что оно снапается или не снапается. Как по мне. Ну, я так понял, что это на следующую версию.

[Speaker 5] (48:59 - 48:59)
Да.

[Speaker 1] (49:00 - 49:00)
Хорошо.

[Speaker 4] (49:07 - 49:52)
Давайте я возьму слово. Смотрите, у нас с Алексом шутку, и возник вопрос по поводу facilities. А именно, сколько facilitiesображать в ордерах и customer location.

Изначально в тикетах было у нас multi-facility, но есть сомнения. Вроде как в обоих сущностях возможно и по одной facility. Мы как-то можем это выяснить или надо прямо у Дэна напрямую спрашивать?

Ну, если спрашивать, тогда это можно спросить.

[Speaker 1] (49:55 - 50:05)
Если бы меня спрашивали, я бы сказал, что multiple facilities можно атрибутировать только юзеров. Все остальное должно атрибутироваться одной facility. Но я могу быть прав.

[Speaker 4] (50:06 - 50:15)
Да, проблема. У нас как минимум в Vehicle есть multiple facilities. Насколько я вижу.

Еще, кроме юзеров.

[Speaker 1] (50:16 - 50:22)
Это приведет к тому, что этот Vehicle пойдет в зачет аналитики разных двух facilities.

[Speaker 4] (50:26 - 50:47)
Я боюсь, что... Ладно, у нас вопрос не про Vehicle, но хотя бы об этом тоже нужно подумать. Может быть, как-то составить одно большое сообщение Дэну с вопросами про facilities, если у нас даже про готовые facilities, про готовые View вызывают вопросы, и спросить напрямую, то, чего и как.

[Speaker 2] (50:49 - 50:52)
Ну, хотели сегодня спросить, но спросим.

[Speaker 4] (50:54 - 51:06)
Ну, если у вас есть чатик с ним, может быть, прямо написать. Собственно, у меня все. Это единственный вопрос.

[Speaker 3] (51:06 - 51:37)
У меня вопрос есть к Владимиру и всем, кто про facilities знает. В общем, у меня тоже задача подключения facilities на разных страницах. И я сегодня разговаривал с Сергеем и хотел сначала этот компонент сделать в нашем фреймворке.

Мне кажется, что сейчас я это буду делать, а потом Владимир это подключит вручную, и мы сделаем двойную работу. Может быть, один из нас это подключит в фреймворке, а второй займется другими задачами и спустя пару дней просто подключит.

[Speaker 2] (51:37 - 51:40)
Подожди, ты про таблицу?

[Speaker 3] (51:40 - 51:44)
Да. Сайн фасилити, который вызывает дробер.

[Speaker 4] (51:45 - 52:11)
Володя, а таблицу? Давайте сначала Доврону скажу. Смотри, Доврон, сейчас я опять расшарю экран.

Ты вообще правильно все сказал, и так и нужно сделать. У нас таблица, она уже есть в Vehicles, насколько я вижу. Не знаю, кто ее делал.

Ну и вообще компонент, таблица. Ты имеешь ввиду вот эту штуку, да?

[Speaker 3] (52:11 - 52:13)
Да, да, да.

[Speaker 4] (52:13 - 52:20)
Так можно и весь дробер, наверное, вынести где-то в UIKit. Ну да, надо просто вынести, а потом заюлить.

[Speaker 3] (52:20 - 52:35)
Я подскажу, то же самое есть в Customer Locations. То есть мы уже одну работу... Не, в Customers.

То есть мы один раз уже дубликат сделали. Мне хотелось бы делать третий раз, сделать его глобально один раз, и после этого переиспользовать.

[Speaker 4] (52:35 - 52:36)
Согласен, согласен.

[Speaker 1] (52:36 - 53:04)
Ребят, у нас есть репозиторий, который называется Frameworks. Всю дублирующую логику мы заносим туда. Да, да, да, я именно про это.

Это уже работает, уже раскатано на routes, поэтому если возникает такая необходимость, то выносим все туда. Если есть какие-то вопросы, можете задавать мне или Сергею.

[Speaker 4] (53:05 - 53:15)
Ну, тогда нужно, собственно, сделать икет и вынести, что для этого нам нужно сделать. Можно целые драйверы выносить.

[Speaker 3] (53:16 - 53:21)
Владимир, не будем сейчас общее время тратить. Втроем нас с Сергеем заобщаемся и решим. Давайте завтра.

[Speaker 4] (53:22 - 53:26)
Да, в общем, хорошо, отличное замечание.

[Speaker 3] (53:30 - 55:50)
С вашего позволения, я Customer Locations покажу. Мне сказали на мелкие пункты много не говорить, а по факту прочитать. Так, у нас был тикет от Дэна, который говорит о том, что popover у нас слишком большой, а он у нас большой.

Если мы добавили большое количество кастом даты, и я добавил props для нашего компонента, и теперь мы можем локально сбывать любой хейт, который мы хотим. В данном случае я ограничил почти тринадцатными пикселями. Смотрится оно плюс-минус на всех мониторах окон.

Дальше опять по требованию Дэна, везде, где у нас есть сущность, которая называлась CustomerName, мы меняли на Customer. Очень долго гадали об этом вместе с Алексеем. Сделали CustomerName, в итоге пришлось на Customer поменять.

Вместе с бэкэндом LocationType пересортировали, по сути, большая часть бэка. В первую очередь поставили CustomerLocations, плюс добавили Description, и то же самое с StoreRoom. Именно такие требования Дэна указал.

И добавили функционал в таблице AssignParent, и он у нас отображается, только если не включен превью. На этом все, что для нынешней итерации, и все, что касается превью, парент локейшн и всего остального, у нас закончилось. Сейчас делаю последние бэкфиксы.

Предположительно в понедельник планируем, если не будет каких-то новых блокеров, отправлять это на Prod, и после этого релизить. Он уже зарелизен, но более противому кругу клиент, как сказал Дэн, зарелизить. У меня все, вопросы есть.

Всем спасибо. Надеюсь, у меня связь работала. Да.

Если мы тут все назначаем, то это длинненько.

[Speaker 1] (55:54 - 56:01)
Алексей, мы сейчас по Facilities пробежимся, ребят отпустим оставшихся? Да.

[Speaker 5] (56:04 - 56:05)
Всем пока.

[Speaker 1] (56:06 - 56:13)
А, стоп, стоп, стоп. А где у нас Саша Ковтунов и Александр Делевский? Вы нам тут нужны будете.

[Speaker 5] (56:18 - 56:18)
Да вроде здесь.

[Speaker 1] (56:18 - 57:16)
Там вообще по-хорошему нужно в тишине и в покойстве пройтись и посмотреть. Потому что Саша Шульга уже объяснил, что именно и какие эндпоинты нужны. Там по-хорошему нужно, чтобы Саша эндпоинты написал.

Потому что не везде добавлялись фильтры. Фильтры добавлялись только в основные сущности, в основные комбайны, о которых мы говорили. Ну, если можно, мне бы хотелось хотя бы рамочно, чтобы вы подсказали, куда мы планировали добавлять эти фильтры.

То есть какие сущности должны фильтроваться, какие не должны и так далее. Потому что мы сейчас с Артуром еще пробились и там по атрибуции на второй вкладочке. Некоторые вещи промаркали.

Ну, то есть, если можно, действительно, чтобы кто-то из вас остался и помог. Спасибо. Нет, так давайте останемся.

[Speaker 4] (57:16 - 57:18)
Давайте будем это обсуждать.

[Speaker 7] (57:23 - 57:23)
Остаемся.

[Speaker 1] (57:28 - 57:36)
Окей. Тут-то будешь привести или мне сделать короткое интро по тому, что промаркано?

[Speaker 2] (57:38 - 57:39)
Сделай плюс, Саша.

[Speaker 1] (57:40 - 1:02:49)
Да. Смотрите, основные страницы Алексей повыделял жирным. То есть это страница.

Значит, и все, что под ней, это как бы дополнительный функционал на этой странице. То есть route metrics – это панель метрик на странице. У нее есть свой endpoint, который она запрашивает.

И что в колонках? В колонке backend – это поддержка фильтра по facilities. То есть может ли этот endpoint принимать фильтры по facilities.

А в колонке frontend – передает ли frontend этот параметр фильтров с facility IDs. Да. Read-only mode.

В общем, вы знаете, что на первой версии вроде бы как договорились, что большая часть страниц, большая часть функционала страниц для всех сущностей будет заблокирована. Все, что не касается read-only действий, то есть экспорт, просмотр и так далее. Но сразу говорю, что там, где стоят галочки, это по факту то, где мы планировали это имплементировать, но это еще не протест, не протестировали.

И с read-only модом там большие проблемы уже сейчас видны. Но нам нужно, по-видимому, еще время на тестирование. Теперь насчет capabilities страниц.

С route-list, в принципе, все понятно. Но на route-list есть карта. И на карте у нас есть фильтры.

Синеньким, вот этот, выделено, потому что там на некоторых страницах мы начали добавлять в map-settings facilities. И на странице route-lista вот этой настройки карты facilities еще нет. Я не знаю, должны ли мы ее добавлять, поэтому она выделена синим сейчас, потому что Артур попросил это сделать.

И экспорт. Сейчас с экспортом ситуация следующая. У нас есть два режима экспорта.

В первом режиме до 100 маршрутов мы отправляем массив route IDs, которые хотим экспортировать. И в этом случае фильтр по facility неявно будет работать. Во втором режиме мы используем так называемый exclusion mode, когда мы передаем на export endpoint не конкретные route IDs, а фильтр по определенным параметрам.

И backend сам фильтрует такие маршруты и сам их экспортирует. Вот в этом режиме скорее всего facility IDs должны передаваться, они не передаются и не совсем очевидно поддерживается ли такой способ экспорта. Мы это не тестировали досконально, поэтому я поставил здесь крестик, может быть это ошибка.

Но пожалуйста отнеситесь с пониманием. Вот примерно такая логика была за этой таблицей. Если есть какие-то вопросы...

А да, еще вот есть filters здесь. Что такое filters? На странице route-листа в таблице у нас есть раздел filters, drop-down filters.

И там есть вот такие три фильтра с backend autocomplete механизмом. В данном случае почему это плохо? Там не поддерживается фильтрация по facility IDs в этом backend autocomplete.

И это значит, что в списке сущностей, которые мы можем найти в юзерах, например, там не будет никакой фильтрации, будут возвращаться все юзеры даже из других facility. Поэтому здесь крестик на backend и крестик на frontend. Вот такая логика за таблицей.

Пожалуйста, задавайте вопросы. Отдельно хотелось бы пройтись по картам, по экспорту, по фильтрам. Нужно ли это делать?

Какие из этих вещей нужно делать в первой итерации? Дальше ниже спуститься надо будет, потому что ниже самое интересное. Все, что ниже того, что показывает сейчас Алексей, мы не знаем, как это поддерживать.

Ну, да, еще Ordos Territories, не знаем, и Ordos Groups. Я извиняюсь, есть вопросы по первой части? А у меня есть вопрос.

Я правильно понял, что вы, когда эти фильтрованные facility с верхним углом, в фронт их каждый раз шлют с каждым запросом. Неправильно ли в сессии хранить это состояние этого фильтра?

[Speaker 2] (1:02:52 - 1:02:54)
Это техническая реализация.

[Speaker 1] (1:02:55 - 1:03:41)
Я могу косвенно ответить. У нас есть новый endpoint, который только-только заехал на прот сейчас, и нигде не используется на фронте. Этот endpoint сохраняет state facilities.

Но я не знаю, будут ли данные этого endpoint использоваться для фильтрации. В следующей версии да, будет. Понял.

Сейчас пока через фильтр передается. Окей, если тут вопросов нет, то мы можем дальше спускаться к тем сущностям.

[Speaker 2] (1:03:41 - 1:03:52)
Нет, Саш, я бы остановился прямо на первой части и ее идеализировал. Вторую, даже сегодня, мне кажется, обсуждать и не надо еще. Хорошо.

[Speaker 1] (1:03:56 - 1:11:06)
Нам прогресс нужен. Насколько мы продвинулись, сколько осталось, когда завершим. Ну вот давайте, пожалуйста, озвучьте, нужна ли поддержка, например, вот avoidant zone и users на карте в route-листе.

Потому что эти endpoints не принимают фильтры по facility, и, соответственно, на карте, когда у нас включен map settings, avoidant zones или users, там будут все. Ты не ответил на мой вопрос. Как это связано?

Ты не путай прогресс и приоритет. Сколько сделано в процентах по backend, по frontend, и когда там основные сущности будут завершены, и когда прям все. Основные сущности, я так понимаю, завершены.

У нас есть почти на 90% полный цикл для основных сущностей, для маршрутов, для ордеров, для customers и customers locations. Это по бэку. Это по бэку и по фронту.

Но, значит, что нам нужно понимать? Вот это первая этапа — это фильтрация. И по фильтрации у нас есть на странице не только основная сущность какая-то, но там какой-то дополнительный функционал страницы.

И этот дополнительный функционал страницы, например, export, он, по-видимому, не поддерживает нормально сейчас фильтрацию по facility. И, соответственно, мы должны включать его в текущий скоп или нет? Фильтрацию, да, фильтрацию будут проверять, скорее всего.

Под фильтрацией ты имеешь в виду, когда я в правом верхнем углу переключил на facility, допустим, Техас-депо, я буду видеть маршруты только отрибутированные для этого депо, но при попытке экспортировать, скорее всего, экспорт будет из других депо тоже. Вот под фильтром это подразумевается. При попытке экспортировать, если там будет больше 100 маршрутов, по-видимому, экспорт будет из других депо тоже.

А если меньше 100, то будет только те, которые выбраны. Как пользователь я буду ожидать, что экспортнется то, что я вижу. Ну, вот, видимо.

Ага, экспорт поддерживает фильтр по facility на бэке. Ну, в любом случае, катить на продакшн мы можем без экспорта, лишь бы он сломан не был, а потом просто так докатываем и все. На бэке поддерживает.

Окей, тогда это супер. А экспорт по другим сущностям? Экспорт по ордерам поддерживается?

Это не могу сказать. Надо будет посмотреть. Окей.

Ну, тогда то, что, короче, катить мы можем, это понятно. Но просто я сразу проговорю, что facility view, ну и другие фичи по facility, включены сейчас большим клиентам. Таким, как Minimelt, Light and Easy, там какой-то Esturiel, еще кому-то.

В общем, на всякий случай, когда вы говорите, можем катить, нужно понимать, что это зафиксит реальных клиентов. И, возможно, недопонимание. Катить-то можно.

Подожди, подожди. Если у нас есть клиенты, во-первых, да, я тут удивился, что оказывается мы view кому-то включили, а игре говорят нет. Повключали, сто процентов.

Посмотрите, пожалуйста, в админке есть поиск по custom features. Вот. Так, подожди.

Если у этого пользователя уже это кто-то включил, кстати, отдельный вопрос, кто и когда, я вообще не в курсе, то не разумно ли, наоборот, как можно быстрее докатывать эту фильтрацию, чтобы, наоборот, меньше конфьюзить пользователя? Разве нет? Нет, секундочку.

Значит, у нас сейчас вот те изменения по фильтру, по facility, они сейчас только, они не закрыты отдельной фичей. Этот фильтр по facility, он контролируется фичей facility view. Поэтому он доступен всем, у кого соответствующая фича facility view включена.

На проде еще этого фильтра нет нигде, глобального фильтра по facility. Поэтому если мы говорим о том, чтобы, ну, то есть сейчас у пользователей на проде есть, по сути, непрямая атрибуция маршрутов, да, и все. Ну, и прямая атрибуция юзеров и виклов.

И все. Больше ничего нет связанного с facility. По крайней мере, у light and easy, light and easy пользуются непрямой атрибуцией маршрутов.

Я видел у них маршруты, которые промарканы, проатрибутированы несколькими facility. Я запутался, так включено или не включено? Включено, но не глобальный фильтр по facility.

То есть глобальный фильтр по facility сейчас только на стейдже есть, он не закрыт отдельной фичей, его нельзя будет доставить на прод, значит, не затрагивая вот этих вот клиентов. То есть у перечисленных тобой клиентов есть facilities, и они их могут создавать. Что-то чуть-чуть атрибутировать, но этого основного функционала...

Ну слава тебе, господи, ты меня уж напугал, если честно, то, что включили. Фильтрация, повторюсь, не закрыта дополнительной какой-то фичей. То есть сейчас на стейдже она закрыта фичей facility.

Блин, я вообще перестал понимать, что происходит после твоего объяснения. Вот вообще не понимаю. Давайте разбираться.

Я так понимаю, что глобальный фильтр... Если очень грубо, есть одна фича, которая закрывает весь функционал facilities, и то, что есть на стейджинге, оно уйдет клиентам, у которых facilities были включены до этого. Автоматически?

При deploy на production?

[Speaker 7] (1:11:06 - 1:11:07)
Да.

[Speaker 1] (1:11:07 - 1:11:09)
У них это автоматом активируется, так?

[Speaker 7] (1:11:09 - 1:11:10)
Да.

[Speaker 1] (1:11:11 - 1:24:32)
А это не серьезный косяк с нашей стороны, который бы надо пофиксить кровь из носу, прежде чем катить хоть что-то? Мы разве не хотим сначала Дену включить это, чтобы он посмотрел по тесте продажникам, и потом потихонечку крупным клиентам, которым это надо, и если все ок, уже дальше раскат. Разве нет?

То есть мы хотим сделать отдельную фичу для вот этого глобального фильтра по facility, так? Дополнительную фичу, а потом их в будущем смержить, чтобы потом не путаться. Смотрите, вот это вот немножко технический аспект, который я скажу честно, я до конца не допонимаю.

Но такого не должно быть, что мы выкатили, и у клиента поменялась бизнес-логика, особенно у крупных. Ну, это катастрофа будет. Ну окей, окей.

Потому что если у нас базовые фичи есть, если они у нас правильно закрыты, то мы же спокойно можем катить на продакшн, и там на аккаунтах дену продажников постепенно включать и докатывать. А клиенту уже они будут включать, когда будут удовлетворены результаты. А иначе вот такой диплой, он во-первых будет массовый, он будет крайне рисковый по своему факту, да мы еще фичи, которые у себя имеем, еще и неправильно, вот тупо не используем.

Блин, странно как-то. Окей, возвращаясь к прогрессу. Вот у нас есть табличка, да?

Вот у нас есть эти чеки. Мы разве не можем тут просто взять и процент посчитать? Где зелененькое – это один, а где красненькое – ноль.

До 50-й, наверное, строчки, может быть, можем. Ниже я бы аккуратнее относился. Почему?

Потому что ниже 50-й строчки – это как бы сущности, которые не обговаривались, короче, что они будут иметь атрибуцию и фильтрацию в последнее время. Мы когда-то обсуждали их. А что обговаривалось?

Когда я подключился к теме с Global Filter, вроде бы обсуждал маршруты, ордера, кастомерс и кастомер локейшн. Вот эти четыре сущности обсуждалось, что они будут иметь фильтр по facility. Так они готовы базовые?

Да. Тогда Дэну надо писать, что вот эти вещи базовые готовы. Вот то, что внутри, как ты сказал, avoidance зоны территории, говорить о их готовности, об этом написать в виде процентов и в виде времени.

И что закрыто фронтендом, а что нет. И когда закроем? Потому что, может быть, когда будет вопрос насчет avoidance зон, точнее, упоминание avoidance зон с территорией, Дэн просто скажет, что катите и включайте без них.

И докатывайте потом. А так у нас возникает наш старый любимый паттерн. Мы из любой задачи сделаем большую, огромную задачу и успешно ее провалим.

А вот, кстати, route editor, он, наверное, не в конце должен быть. В конце, потому что по нему, собственно говоря, вопросы, как он должен себя вести. На первую итерацию...

Ну, assign, он... Мне не важно, но... Просто про route editor был конкретный запрос за дополнение по facilities, понимаете?

Нет, первая вкладка, которую сейчас смотрим, это фильтрация. То есть route editor, там только косвенно можно фильтровать вещи. На карте сущности могут быть отфильтрованы по facility.

В дропдаунах assign user, assign vehicle могут быть отфильтрованы сущности. Но сам route editor, по сути, он не цель фильтрации. А он есть на второй вкладке attribution.

Поэтому когда доберемся до нее, вы сможете посмотреть, что там по route editor. Смотрите, тут я... Вот эти фильтры и assign на route, destination, это разве не дубляж?

Это разве не один и тот же API, который будет на уровне сессии фильтроваться? Один и тот же API, но там на фронте разные же изменения будут. Насколько я понимаю, на счет на каждой странице...

А при чем здесь фронт? Тут у нас две колоночки, как я уже сказал. Есть готовность back-end, а есть готовность front-end.

Так смотри, у тебя drop-down facilities для assignment. У тебя там две операции, по сути. Это вывести эти assignment и провалидировать при attachment.

Но у тебя фильтры на route, на assignment внутри строчки и на route snapshot это одна и та же API. Фильтрация, которая рулит back-end? Да, с facility это так, и с wikls это так, потому что и у facility, и у wikls...

И с юзерами так же должно быть. Ну, это сейчас нужно выяснять с вами. Wikls уже изменен скоб видимости по facility, то есть wikls не требуют дополнительного параметра передавать для того, чтобы быть отфильтрованными.

Они всегда, если у пользователя есть доступ только к двух facility, будут возвращаться только те wikls, которые промарканы этими facility. Подождите, я получается могу зайти, похакать запрос и даже получить доступ к тем сущностям, а у которых у меня по правам нету? Просто похакав параметры API?

Ты не сможешь это сделать. Похакать ты не сможешь. Ты можешь всегда выбрать только с тех значений, которые у тебя есть доступно.

Ну вот, а Саша говорит о другом, понимаешь? Саша говорит о другом, о том, что данные мы можем не зашивая внутрь запроса, как Володя говорил, а мы можем передать facility конкретно какой-то для просмотра, но мы всегда выбираем facility из тех, которые доступны пользователю. Или если это admin, он смотрит все, или пользователь, у кого есть конкретный набор facility.

У меня есть чувство, что я теперь тебя, Игорь, не совсем понимаю. Давайте я опишу так, как я это вижу. Вот у нас есть маршруты, есть страница route-листа, и она запрашивает combined endpoint.

В combined endpoint мы всегда по умолчанию, если в глобальном фильтре по facility ничего не выбрано, мы не передаем фильтр по facility и видим маршруты по иерархии пользователей. То есть пользователь видит только свои маршруты, на которые он засайнен, и маршруты своих сабов. Иерархический вид.

Дальше, если мы передаем фильтр по facility, насколько я понимаю, мы уплощаем иерархию видимости маршрутов, уплощаем визибилитискоуп, и пользователь начинает видеть не только свои маршруты и маршруты своих сабов, но также и маршруты всех других пользователей, если эти маршруты промаркированы той же самой facility, к которой этот пользователь имеет доступ. Это так, Игорь? Это не так.

Два вида, два скопа видимости есть. Ты прав. Один скоп видимости – это когда человек видит иерархичный вид, тот, который сейчас есть везде.

Второй вид – это то, покажи мне все, что есть атрибутировано с конкретной facility, инфраструктурой facility. Но ты не видишь свои, ты видишь просто промаркированные. Они могут быть промаркированы тобой, Семеном, Артуром, кем-то другим.

Извиняюсь, это то, что я имел в виду, просто я, видимо, ошибся в формулировке. Значит, теперь это работает через передачу, явную передачу фильтра по facility IDs. Пользователь может передать список facility IDs, facility IDs любой facility.

Правильно или нет, Игорь? Еще раз. Если пользователь не имеет доступа к facility, но передал ее в список, он не получит доступ к маршрутам, которые протеганы в facility, к которой он не имеет доступа.

Если у него нет доступа, он не должен получить видок. Супер. Значит, мы на одной волне.

Я извиняюсь, я просто подумал, что ты немножко другое имел в виду. Ребята, посмотрите, тут большинство работы, поддержки со стороны фронтенда вообще не должно быть, по крайней мере для первой версии. Дропдаун в углу – да.

Интерфейсы для атрибуции на те сущности, на которые ранее не делали – да. Но вот эти всякие фильтры, ассаймент автокомплит и так далее и тому подобное, ну, по крайней мере, в первой версии этого не должно быть. Мне казалось, что это как раз наоборот.

Смотрите, мы как раз наоборот. Когда мы говорили первый раз все о том, что мы должны сделать, я четко дал понять, что нам нужно. Нам нужно пять объектов или там шесть объектов, с которыми мы работаем.

Юзеры, веиклы, ордера, кастом локейшн, адресбук, ордерс и раутс. Это все объекты, которые должны быть промаркированы или дать возможность им фильтрации по фасилите. Все другие вещи, они не связаны.

Они должны работать так, как есть. Я могу объяснить, почему, но я не буду. Потому первый вопрос, что я задал, видя вот эту табличку, а что это такое?

Потому что тут очень много всего того, которое мы не обсуждали и мы не хотим сейчас это делать. В общем, просьба была от Афанасьева дать видимость, что сейчас, какие сущности поддерживают фильтрацию по фасилите, а какие нет. Ну вот это, собственно говоря, и табличка.

[Speaker 2] (1:24:37 - 1:24:48)
Так, ну давайте, да. Вот я обозначил первую итерацию, там вторая и так далее. Что мы отсюда выкидываем?

[Speaker 1] (1:24:49 - 1:25:52)
Получается, avoidance зоны вон территории, получается, и не надо было делать. Вот. А почему территории не надо?

У нас на страницах, там, где есть сущности, ордера и custom relocation, мы сдаем территории с... получается... А они не атрибутированы, как ты фильтровать будешь?

Но сущности внутри территории-то атрибутированы. Ну вот и фильтровать, а территории сами нет. Но фильтр там мы передаем в запросе.

Но фильтр накладывается на ордера, правильно, или на custom relocation. Но это фильтр фасилити, фильтр территории. Территории, мы сами территории, мы не можем фильтровать, потому что они не атрибутированы.

[Speaker 6] (1:25:53 - 1:25:57)
Но параметры передаем в фасилити внутри территории, да, фильтрами, как Игорь сказал.

[Speaker 1] (1:25:59 - 1:26:00)
Но их тут в списке быть не должно.

[Speaker 2] (1:26:02 - 1:26:05)
Окей, давайте, удаляем. Правильно?

[Speaker 1] (1:26:06 - 1:26:14)
Да вы не удаляйте, вы просто перенесите это в другую таблицу, потому что в следующий, третий, пятый версию мы это добавим.

[Speaker 2] (1:26:15 - 1:26:22)
Создал копию, видишь, 7 августа. Хочу удалить, хочу удалить.

[Speaker 1] (1:26:22 - 1:30:07)
Просто, Игорь, сейчас происходит вот это вот классика. Идем вперед, но то, что Дэн затребовал зарелизить как можно скорее, мы не релизим. Почему?

А потому что недоделали. И юзера сейчас на бэкэнде не фильтруются. А на карте?

Нет, они не фильтруются нигде. Нигде, понял. Вроде бы.

Мне кажется, что мы в юзера добавляли фильтра, так же как и с веиклами. Просто они возможно не используются, но 100% добавляли. Окей, дай мне проверить.

Секунду. Экспорт. Кастомер локейшн.

Нет, кастомер локейшн экспорт, это просто кастомер локейшн, то есть мы экспортируем, что видим. А вот экспорт by территории, по-моему, тоже как бы смысла не имеет. Фильтрация должна отработаться автоматом.

С экспортом по территориям на кастомер локейшн, там вообще интересная история, что он работает не совсем очевидным способом. Мы, по-видимому, там отправляем запрос на получение ID всех кастомер локейшн. Давай это в другой раз.

Так, ордера территории тоже удаляют? Ну да, тоже выпадают. Просто, нет, ордера территории, а это отдельная, получается, вкладка.

Это orders territories, это прям отдельная вкладка, на которой можно планировать маршруты из территорий. Просто, чтобы вы понимали, что это такое. Алексей, верни, это не на карте, действительно.

И это еще в одну табличку-то не объединено, и поэтому как минимум проконтролировать придется. А, подождите, так все равно же эти сущности сейчас, по сути, заджойненные данные, и мы их сейчас не атрибутируем, как сказал Игорь. А вы уверены, что не атрибутируем?

Там, в территориях, мы планируем маршрут из ордеров, то есть ордера атрибутированы в facility. Ну, сейчас в первой версии будет эта территория пустой на ордерах, и все. Окей, ну, то есть я просто для классификации, значит, если вы все понимаете, как должно работать, значит, заступись.

Просто, это список территорий, плюс каунтер, кстати, тут. Ой, твою налево. Три секунды, надо просто успокоиться.

Я вижу серьезный баг, и надеюсь, он чисто к испанскому относится. Сейчас язык переключу. Кто-то еще тестирует языки.

[Speaker 2] (1:30:11 - 1:30:17)
Игорь, я правильно тебя услышал, что мы в первый раз вот это должны добавить?

[Speaker 1] (1:30:23 - 1:30:25)
Это ты имеешь в виду выделенное?

[Speaker 2] (1:30:25 - 1:30:27)
Да, юзера и виклы.

[Speaker 1] (1:30:29 - 1:32:07)
Да, но виклы уже должны быть, должна быть атрибуция и поиск, ой, не поиск, фильтрация. И юзеры, та же самая ситуация должна быть. Подождите, подожди, capacity профайл, викл профайл пока не надо, насколько я понимаю.

Нет, мы же только с этим, с викл, с верхними сущностями связываем. То есть переносим чисто юзеры и чисто виклы. И у виклов frontend атрибуции есть, а фильтрация должна автоматом работать, опять же.

Она работает там. Ну тогда этот чек стоит неправильно, что его нет. Вот я открыл ордера территории группы, это просто группировка соответственно по территориям и по группам с каорбитарами конкретно ордеров.

Ну будет у нас в первой Орсе, в версии первой, полный список территорий. И если в этой территории находятся ордера в другом фасилити, с которым я не вижу, ну будет ноль. И все.

Зачем с ними сейчас мучиться?

[Speaker 6] (1:32:07 - 1:32:16)
Кстати, мы по-моему потеряли, я не уверен, я не видел тикета по БКДу, поддержку фильтра на группировке.

[Speaker 1] (1:32:17 - 1:32:24)
Для ордеров, которые замарканы в фасилити. Территории точно есть.

[Speaker 6] (1:32:26 - 1:32:28)
А вот агрегейшн комбайн, по-моему, нет.

[Speaker 1] (1:32:30 - 1:34:06)
Добавьте. Игорь, ты же согласен строка 3435 уносим во вторую итерацию нафиг? Чтоб ребята даже на это не отвлекались.

Да, конечно. Ребята, мы работаем сейчас только с верхними сущностями. Не может быть такого, что ордер, кастомер, локейшн, мап и так далее.

Мы работаем с маршрутами, с оптимизациями, с ордер, кастомер локейшн, адресбук он же, юзер и вехол. Вот с этими только сущностями работаем. Территории группы все накладываются дополнительным фильтром на общую сущность, на верхнюю сущность.

Простите, как сюда попал вью ордер хистори? Тут бы по-хорошему нужно было страницы разложить, и на каждой странице сказать, есть атрибуция, есть фильтрация, есть там какая-то другая сущность, и таким образом это отобразить. Три раза проще в десять раз быстрее.

Нет, ребят, смотрите, не проще, не быстрее. Третья вкладка сейчас, attribution, там есть инфа, которую вы хотите видеть по атрибуции. Нет, мы не про атрибуцию сейчас, мы про фильтрацию.

Ну так вот по фильтрации у вас есть вся инфа на этой вкладке. Прямо вот оно по страницам, просто страницы выделены жирным у вас сейчас.

[Speaker 4] (1:34:13 - 1:34:17)
Старший говорит, что прогресс можно читать первые треки по жирному, и все.

[Speaker 1] (1:34:28 - 1:35:20)
Подождите, а как по жирным, если, ну-ка, вот ордер я сейчас открою. Ну, фильтрация, допустим, я верю, а что тогда здесь frontend значит? Ладно, я вначале это объяснял.

Для того, чтобы отфильтровывать сущности, нам получается сейчас в текущем варианте нужно посылать дополнительный фильтр с facility IDs. И на каждой странице мы должны внести изменения во frontend, чтобы он отправлял этот фильтр. Чтобы backend позволяет фильтровать, а frontend получается не будет фильтровать, пока не внести изменения.

Не ищем мы легких путей.

[Speaker 7] (1:35:22 - 1:35:23)
Ладно, окей.

[Speaker 1] (1:35:33 - 1:36:11)
Ну тогда мы вообще все удаляем, кроме routes, destinations, orders, customer, locations, customers и users рекламе. Export подразумеваем, что должен работать по принципу, что вижу, то экспортирую. Повторюсь, с экспортом там два режима.

Один так и работает, и все в порядке будет. А второй, это exclusion mode, он по-видимому сейчас...

[Speaker 6] (1:36:11 - 1:36:12)
Это значит баг.

[Speaker 1] (1:36:12 - 1:36:14)
Тicket фиксить.

[Speaker 7] (1:36:15 - 1:36:15)
Окей.

[Speaker 1] (1:36:16 - 1:37:04)
И фиксить там, где поломано. Frontend, frontend, backend, backend. Оба молодцы.

Оба молодцы. Да проще этот список, блин, дропнуть, написать и быстренько верифицировать, проставить эти гребаные крыжики. И весь этот мусор выкинуть нафиг.

Который только мозги засыряет. Но, ребята, вот из-за такого подхода с параметром в endpoint, это жопа, потому что это надо все фильтры обойти, ну в смысле в UI. Это все автокомплиты надо обойти и так далее и тому подобное.

[Speaker 4] (1:37:11 - 1:37:14)
Так. Удаляем.

[Speaker 1] (1:37:21 - 1:41:52)
Правильно? Нет, подожди. У нас все равно остается проблема.

Вот мы выбрали Техас депо. Мы отфильтровали все автомобили из этого депо. И когда я иду на маршруты и хочу засайнить на заатрибутированный этим же маршрутом, этим же facility маршрут, у меня в автокомплите должны быть автомобили из этого facility, верно?

Автомобили будут, а вот юзера не знаю пока. Подожди, я сейчас не про реализацию, я про гипотетические. И чтобы в этом всем убедиться, это надо будет обойти все вот эти автокомплиты, все фильтры, которые в себе содержат автомобиль.

То же самое с юзерами, то же самое с destination ордерами и маршрутами. И если везде прописывать параметр, ну блин, мы себе создали приключение. Тут вопрос того, что мы никогда не проговаривали насчет того, что мы будем менять какие-то фильтры дополнительные и так далее.

А фильтра все равно нужно применять, потому что будут какие-то применяться, не знаю, утощающие фильтрации для пользователя и так далее. Я согласен насчет того, что юзеры и веиклы нужно использовать по-другому. И возможно все другие endpoints также нужно типа сессийные какие-то использовать.

Состояние выбранного facility для того, чтобы подгружать только те данные, которые нужны. Но на данный момент система к этому не готова, потому что один из тех нужных API, которые нам нужно, он не готов. Плюс нам нужно будет тогда на следующую версию или на ту версию определить, что мы хотим видеть и каким образом мы хотим видеть.

Потому что возможно кто-то захочет видеть все машины или всех юзеров. И вопрос, а все ли уже протегированы. Потому что нужно будет постоянно переключаться между этим переключателем.

Выбирать facility, а потом скидывать facility, потому что ты не видишь в списке в своей машине тех, которых нужно. Возможно нужно и сейчас это делать, но можно и подождать. Ок, давайте тогда итеративно еще более мелкими шагами.

Как Дэн говорил, сначала высокоуровневые сущности целиком вместе с экспортом, а потом по этим сущностям уже по страничкам внутрянка, и потом уже сущности второго и третьего порядка. Причем второй, третий, четвертый шаг Дэн скажет поменять местами, поменяем местами. Давайте так.

И получается нам сейчас нужно действительно посмотреть верхний уровень. Это routes, destination, orders, vehicle, users, customers, customer locations. Поэтому внутрянку давай грохнем пока.

Тем более оригинал у нас сохранен, никуда не денется. Интересно у тебя 100% при наличии хидеров.

[Speaker 2] (1:41:56 - 1:42:01)
Это не сработало, но...

[Speaker 1] (1:42:07 - 1:43:40)
То есть получается доделать осталось буквально users и vehicles. Причем users вроде как сделано говорят на самом деле. Ну, vehicles точно сделано тогда, потому что там неявная фильтрация, без отправки фильтра, оно уже фильтрует по тем facility, к которым ты имеешь доступ, но вот этот глобальный фильтр пока еще не поддерживается.

С точки зрения front-end и read-only мода, что вы только? А, ну тогда не сделано, но если read-only мод тоже учитывать. Подожди, что значит тоже учитывать?

Вот у тебя стоят эти чеки, back-end есть, front-end. Но front-end не передает сейчас фильтр facility IDs. Отображается что?

Все vehicles, к которым пользователь имеет доступ. Ну, все vehicles, связанные с facility... Все, остановись, понял.

Вот зеленое, красненькое, красненькое. С этим паттерном ты согласен? Да.

Все, идем дальше. А users не сделано, мы уверены, да? Сейчас я поспросил помощи у Миши, потому что я не могу понять.

Александр, помогите нам, пожалуйста.

[Speaker 2] (1:43:40 - 1:43:45)
Я смотрю, по-моему должно быть там в фильтрах поддерживается facility.

[Speaker 1] (1:43:45 - 1:44:19)
У нас на front-end, на users странице используется get team users endpoint. А как туда facility IDs передать? Там только query параметры поддерживаются сейчас.

Я думаю, что Саша, когда найдет, как это сделать, он просто пришлет запрос. Но, насколько я помню, там комбайн уже давно есть, и мы давно говорили о том, чтобы перейти из get users на комбайн, но никогда это не сделали.

[Speaker 7] (1:44:22 - 1:44:25)
Окей. Окей, за эти...

[Speaker 1] (1:44:27 - 1:44:47)
Саша, то есть BEM мы ставим зелененькое, так? Давайте тогда, когда Саша пришлет запрос, и оно действительно будет работать. Окей.

Окей. Алексей, кто у нас этими страничками по фронту занимается, кто это должен поддержать?

[Speaker 2] (1:44:49 - 1:44:49)
Davron.

[Speaker 6] (1:44:52 - 1:44:59)
Davron. Davron приключений на customer location сейчас хватает.

[Speaker 1] (1:45:02 - 1:45:14)
Что значит хватает? Это главный приоритет. Что значит хватает?

Сначала вот эти приключения, потом остальные.

[Speaker 7] (1:45:27 - 1:45:29)
А, Влад, а что это такое?

[Speaker 6] (1:45:32 - 1:45:40)
Это подключение facility на orders map. Там Женя написал, что там UI китовые, глобальные проблемы.

[Speaker 1] (1:45:41 - 1:45:46)
Ну, надо пофиксить, если мы на каждую карту будем facility прикреплять.

[Speaker 7] (1:45:48 - 1:45:48)
Угу.

[Speaker 6] (1:45:51 - 1:46:00)
Ну, в принципе, это неправильно работает уже на тех страницах, где-то есть Rault Editor, Customer Location. Это не то, как к facility относится.

[Speaker 2] (1:46:06 - 1:46:13)
Так, мы с табличкой проценты получили? Получили.

[Speaker 1] (1:46:14 - 1:47:34)
Вот это можно и Дену написать, а дальше вопросы задайте. Из разряда, что мы можем либо остальные сущности дальше атрибутировать, как вот это выкатим на production, либо полировать внутрянку для фильтрации. Более точно.

Я сейчас очень костно изъясняюсь. Башкачу тоже начинает болеть. Надеюсь, вы меня понимаете.

Понимаете, о чем я? Ну, учитывая, что сегодня четверг, мне кажется, закоммитится, что мы к выходным или на выходных это можем выкатить. Это реально?

Ну, на стороне фронтенда, я так понимаю, там... Это даже не однострочка, это там. Да, это чуть-чуть.

15 символов.

[Speaker 2] (1:47:35 - 1:47:48)
По юзерам будет какой-то? Если. Можно написать.

Нет, погоды нету. Нету.

[Speaker 1] (1:47:49 - 1:47:58)
Окей, если добавить, мы все равно на production плюс фичу эту дурацкую добавить, мы на выходных это все выкатить можем.

[Speaker 2] (1:48:01 - 1:48:07)
Я думаю, да. Ну, вот. Только кто будет на выходных тестировать?

Тут Саша.

[Speaker 1] (1:48:09 - 1:48:58)
Я бы был очень аккуратен с высказыванием насчет того, как мы можем выкатить. Посмотрите, насчет RedonlyMod, там все не настолько очевидно, как казалось вначале, потому что плохо понимаю, какие экшены могут быть заблокированы, какие не могут быть. Поэтому давайте, please, предварительно, наверное, можем, но из-за RedonlyMod и вот этих вот изменений на страницах users и vehicles, может быть и нет.

Тестировать-то мы можем начать, но я не гарантирую, что мы прям за выходные сможем это все проверить и быть готовыми к выкатке.

[Speaker 2] (1:48:58 - 1:49:02)
Ну, получается, спортзапас понедельник. Говорим, что вторник.

[Speaker 7] (1:49:06 - 1:49:06)
Так?

[Speaker 8] (1:49:12 - 1:49:13)
Плюс у Саши...

[Speaker 1] (1:49:16 - 1:52:34)
Нехорошие ребята сроки. А в чем сложность RedonlyMod проверить для vehicles и users быстрее? Может, кто-то подключится, поможет.

Нет, я сразу скажу, Катя, это я не про себя говорю. Это я говорю о том, что если мы задистрибьютим вот эти все штуки на всю команду, значит, на выяснение того, какие пункты меню там должны быть выключены, какие должны быть включены, и на перепроверку всех этих состояний страниц уйдет какое-то время. Возможно, оно будет достаточно существенным.

Возможно, это будет как минимум день. Приведи пример с routes, что отключается в RedonlyMod. Отключается все, кроме, например, edit кнопки, которая ведет на route editor.

И также кроме open snapshot кнопки, которая ведет на snapshot. И там, и там, и на странице route editor, и странице route snapshot маршрута может быть в теории доступна для маршрута, к которому ты не имеешь доступа. RedonlyMod, как он активируется?

Если мы выбрали facility в глобальном фильтре. Если там выбрана хотя бы одна facility, все, страница в RedonlyMod. Проблема в том, что если мы перейдем на ссылку на route editor для маршрута, к которому у нас напрямую нет доступа, а через facility мы его видим, через фильтр по facility, то там, естественно, все сломается.

И таких нюансов у нас на самом деле достаточно много. Я вот сегодня наткнулся на проблему с экспортом custom relocation по территории. То есть по факту, короче, фото не должно было быть сломано, но оно сломано.

И еще могу сказать, что тестирование Redonly мы по факту не начали всерьез. Потому что на протяжении последних двух дней это было заблокировано багом на фронте. Поэтому если сегодня мы как бы придем к тому, чтобы начать, то вот на завтра день, скорее всего, мы потратим его на тестирование Redonly режима.

Каждый у себя на страничке. Но так как мы мальчики-зайчики, я уверен, что завтра мы сможем дать первый фидбэк. И если так, короче, если у нас там будет мало багов, то за субботу и воскресенье их фиксят.

В понедельник мы их проверяем и в вторник выкатываемся. Ну, может быть. Вот, Екатерина, смотри, как простая вещь превращается просто в выпуск какой-то.

[Speaker 8] (1:52:35 - 1:52:38)
Нет, смотри, на самом деле здесь, смотри...

[Speaker 1] (1:52:39 - 1:52:59)
Я не хочу никаких объяснений, я просто говорю факт, что вещь, которая должна проверяться кнопкой, превращается в адский человека-часы, и бэкэнд-команда будет простаивать, и фронтэнд-команда будет простаивать, или уйдет куда-то в сторону. А, сори, как ты это кнопкой проверил?

[Speaker 8] (1:53:00 - 1:53:05)
Смотри, не могу дать другой эстимейт, потому что у нас...

[Speaker 1] (1:53:05 - 1:54:06)
Я сейчас не про эстимейт говорю. Я сейчас не прошу эстимейт, я вообще ничего не прошу. Я просто говорю, что это проблема огромная.

В принципе. И мы сейчас, я на это смотрю, я понимаю, что прямо сейчас мы это обойти не можем. У нас текущий QA-подход замедляет все в 10 раз, при этом не дает таких же высоких гарантий.

Вот что проблема. Я бы с удовольствием услышал, как это улучшить. Я уже миллион раз об этом говорил, с Екатериной там, не буду говорить десятки, но часы звонков точно были, и точно не сейчас.

Повторяю.

[Speaker 8] (1:54:08 - 1:54:13)
Ты говоришь в контексте АИ, мы с ребятами это тоже параллельно...

[Speaker 1] (1:54:13 - 1:54:27)
И АИ, и тестирование, ну слишком медленно идет. Я думаю, мы все-таки о разных вещах говорим, ну окей.

[Speaker 8] (1:54:28 - 1:54:33)
По крайней мере в данном контексте другого решения для меня по крайней мере нет.

[Speaker 1] (1:54:35 - 1:58:00)
Я его сейчас и не прошу, еще раз говорю. Ну придется как-то так, ребята, ориентироваться, не знаю, ну блин. Окей, с этим по фильтрации вроде бы вы определились.

Наши основные блокеры это front-end страницы vehicles, это back-end страницы users и front-end страницы users. Это тестирование read-only мода. И что там еще было?

Ну и в общем-то все, наверное. Вот такие основные блокеры. Посмотрите, пожалуйста, на последнюю вкладку attribution, просто чтобы мы были на одной волне.

Саш, секундочку. Сейчас переключимся на attribution. Просто чтобы я понимал, а read-only мод откуда возник?

Я, честно говоря, просто не помню. Когда мы отфильтруем кто-то по facility, вот Игорь сказал, что мы уплощаем скоуп видимости и начинаем видеть объекты, которые по иерархии у нас не будут. Вопрос не в этом.

Вопрос, кто принял решение или предложил этот read-only мод и когда. Я принял решение, я предложил это сделать. И Саша как раз об этом не говорит.

У нас есть проблемы с тем, что система не готова к тому, чтобы использовать или читать, или писать в объекты. Потому что скоуп видимости другой. Давайте быстро про attribution, потому что мы очень много времени тратим.

Давайте, может, работать будем, заниматься чем-то полезным. Мы полезно занимаемся, но мы очень долго зависли на этом. Это правда.

Сори, а считаем ли мы блокером то, что можно любым юзером тегать любой объект в любом facility? Отсутствие вот тут фильтрации у нас. Что имеется в виду, что любым юзером в любом facility.

Все юзеры должны атрибутировать только теми facility, которыми у них есть доступ. Да, Игорь, это RF134, это то, что я тебе скидывал. Endpoint и facility не применяют скоуп видимости по тем facility, с которыми юзер атрибутирован.

То есть ты атрибутировал юзера с двумя, а он видит все по-прежнему. Старый баг, который еще на ранних этапах заводили, но тогда не было понятно, когда он будет по фикшн. Сейчас ты его на Глеба скинул, но пока еще Глеб, я так понял, к нему не дошел.

Может, ему приорк поднять?

[Speaker 7] (1:58:05 - 1:58:07)
Давай сейчас разберемся.

[Speaker 1] (1:58:08 - 1:59:31)
Это не должно так быть. Смотрите, может быть такое, что список будет отображаться весь, но при ассайне не должен API пускать и он должен выкидывать ошибку, что у юзера нет доступа. Почему?

У нас сейчас есть инпуты, которые выводят инфу из endpoints в facilities. И там видны все facility. Если мы будем каждый раз выдавать ошибки, это будет жопа.

Зачем мы ошибку должны выдавать? Мы должны при ассайне выдавать ошибку. У меня есть 2 доступных, 10 есть.

Окей, я выберу моих 2. Пока Глеб пофиксит эту проблему, мы можем это не блокером, а каким-то easy production. Окей, хорошо.

Тогда можно перепроверить endpoints, атрибуции, чтобы они принимали только те facility. Сейчас точно прямая атрибуция маршрута, при одите маршрута прямая атрибуция выдает ошибку, если нет свою facility выбрать. А остальные я не уверен.

Надо проверить.

[Speaker 7] (1:59:31 - 1:59:32)
Проверим.

[Speaker 1] (1:59:40 - 1:59:44)
Да, если можно, давайте перейдем к атрибуции, чтобы быстренько от кабанчиком проскочить.

[Speaker 2] (1:59:52 - 1:59:56)
Мне кажется, хватит, потому что уже перегруз.

[Speaker 1] (1:59:57 - 1:59:58)
Понимаю, ну просто...

[Speaker 2] (2:00:01 - 2:00:04)
Ну давай, я могу открыть.

[Speaker 1] (2:00:06 - 2:03:13)
Вот, пожалуйста, как бы то, о чем мы говорили. Прямая атрибуция, да, это при создании сущности. То есть это дроверы всякие и так далее, там должны быть импуты.

И вот, короче, вот где есть крестики, вот там это не сделано. Синие, опять же, вот эти вот штуки, это то, что по-разному имплементировано на разных страницах. То есть у нас на route-листе есть inline-эдитер, а на ордерах нет inline-эдитера в таблице.

И синеньким обозначено, что, короче, вот возможно нужно добавить inline-эдитер туда. Так, и, значит, реатрибуция, короче, ну то же самое. То есть это дроверы, если в дровере мы можем этот маршрут или этот ордер или этот custom location изменить атрибуцию, значит, вот там стоит галочка.

А если не можем, то крестик. Вот, пожалуйста, вам примерная сводка того, что, короче, у нас есть. А not available не добавляем, да?

Ну, по-видимому, это значит, что нельзя атрибутировать напрямую, потому что тут, ну, это дискуссионный вопрос. Я не все понимаю, можно или нельзя. Так что это мое понимание того, что эту сущность нельзя атрибутировать или реатрибутировать.

Окей, ну, просто чтобы, короче, вот быть кристально четкими, у нас сейчас на route-снапшоте, например, есть прямая атрибуция, да, вот. Но ее нет ни на одном из других снапшотов, насколько я понимаю. Кроме, может быть, вот vehicle-user-snapshot, но в чем я не уверен до конца.

Нужно ли нам добавлять на другие снапшоты прямую атрибуцию сущности? Ну, для базовых, наверное, да. Почему нет?

По аналогии Игорь прав. Тогда у нас достаточно еще много работы со снапшотами. Там нужно будет инфотейти добавить.

Таблицы нам нужно добавлять? Если API-шечка поддерживает, то при использовании кода там это быстро добавить. Окей, я надеюсь, потому что с route-снапшотом у нас была очень большая боль, если я помню правильно.

Алекс, если история будет повторяться, иди напрямую ко мне, пожалуйста.

[Speaker 2] (2:03:14 - 2:03:15)
Да, окей.

[Speaker 1] (2:03:15 - 2:06:43)
В особенности, если эту же фигню на других страничках будет делать Владимир. Да, окей, окей. Я просто говорю о том...

Я не готов ждать по инпуту в неделю на каждом снапшоте. Это недопустимо. Окей, хорошо.

Тогда, значит, инпуты на снапшотах обсудили. Значит, их делаем. А inline-эдитеры в таблицах нам нужны или нет?

Будет ли Дэн ожидать, что из таблицы нужно будет реатрибутировать? Потому что inline-эдитера у нас тоже нигде нет. Аналогично.

Вопрос приоритизации и, собственно, последовательности. Вообще, да. Окей.

Ну, а с bulk-акшенами там немножко сложнее ситуация. Я плохо понимаю, какие сущности поддерживают bulk-атрибуцию facilities. И, наверное, это не на эту версию.

Правильно? Я понимаю. Смотри, скажем так, inline-эдитер-то тоже, я не готов сказать, что прям в эту версию.

А, окей. Ну, хорошо. Вот.

То есть, но... Снапшоты в эту. Что такое эта версия?

Ну, вот то, что мы ожидаем, словно, к вторнику. Нет. Ага.

Окей. Супер. Смотри, ребята, давайте вот к вторнику дохерачиваем области видимости с этими read-only, чтобы это можно было выкатить, включить и так далее.

Если фронтенд-команда может раньше приступить с оверлапом и прикручивает вот эти вот сначала на снапшотах, потом в табличках или, что проще, пусть они скажут, что им проще быстрее добавить и добавить вперед, то окей, давайте с оверлапом. Но не будем... Давайте задачки брать поменьше и делать их побыстрее и выкатывать быстро, а не разбарабанивать себе ростом.

Лучше, если вы возьмете предыдущие этапы и выкатите их в субботу, чем сейчас будете еще эти inline-эдитеры вкорячивать. Понимаете мой смысл? Окей.

Меня интересовал только вопрос приоритетов, чего вы ожидаете и какие указания вы будете давать фронтенд-команде. Супер. Тогда я понял, блокеры я озвучил чуть раньше, так что будем тогда это смотреть.

Лучше, если это все оторкистрирует Алексей. Правильно. Уж там на примере ли вот этого спредшета, или он что-то свое сделает, непринципиально.

У меня в документе это все равно 2-3 строчки. Окей, ну значит мы в ФОЦ проговорили Артура из того списка, с которым мы с тобой согласовывали. У меня вопросов нет.

Спасибо большое, Эдит.

[Speaker 2] (2:06:54 - 2:06:59)
Игорь, откуда эта штучка? Фронтенд прислал, да?

[Speaker 1] (2:06:59 - 2:07:20)
Это с эмейла Дэна. Мы сегодня выкатывали вот эти поля в продакшн, и там Моктив были, апдейты. Я Дэну скриншот показал, Дэн сразу прислал, что баг на форматирование, на данные и так далее.

Я не знаю, просто кто-то, возможно, прислал это.

[Speaker 2] (2:07:20 - 2:07:23)
Подскажите, где это, я прямо сейчас посмотрю.

[Speaker 1] (2:07:24 - 2:07:28)
Это вот здесь. Нет, скриншот какой-то.

[Speaker 2] (2:07:29 - 2:07:31)
Это Vehicles. Это Vehicles, да.

[Speaker 1] (2:07:32 - 2:07:33)
Очень странно.

[Speaker 2] (2:07:33 - 2:07:37)
Но VehicleID это небольшое число, это айдишка такая.

[Speaker 1] (2:07:38 - 2:08:18)
Да какое VehicleID? Адометр? Адометр.

Там это ID, это телематика, ID была, значение, но значение адометра. И всех других вот этих значений, которые могут быть. Я об этом вчера говорил ребятам, кто занимается, Володя и Мадьяр, кажется.

То, что у нас там температура была в Цельсиях, там в общем форматы. Это пофиксили уже. Это пофиксили, но формат чисел самих неправильный.

Подскажите, ребят, в каком аккаунте смотреть.

[Speaker 2] (2:08:18 - 2:08:29)
Да, в каком аккаунте смотреть. Температура на стейдже. Это добавлено в запрос комбайна, правильно было?

[Speaker 7] (2:08:30 - 2:08:31)
В ответ, да.

[Speaker 2] (2:08:32 - 2:08:38)
В ответ, да, в ответ комбайна. Сделай фильтр по всем.

[Speaker 1] (2:08:40 - 2:08:45)
По всем чего? Статус. В самом верху.

[Speaker 2] (2:08:46 - 2:09:06)
Ой, господи. Я сейчас тоже самое выберу. Смотрите, форматоры добавляются на фронте отдельно, потому что мы не знаем, какую ячейку надо форматировать, какую не нам.

[Speaker 1] (2:09:07 - 2:09:08)
Сергея нема у нас сегодня, нема.

[Speaker 2] (2:09:10 - 2:09:15)
Если это надо прямо сейчас поправить, я могу это прямо сейчас поправить. Сейчас.

[Speaker 1] (2:09:16 - 2:09:37)
Надо сейчас элить production. Смотрите, я почему спрашиваю, почему Сергея за Сергея, потому что с Сергеем мы говорили насчет того, что все колонки, все таблички, которые у нас есть на всех API, мы должны форматирование присылать с бакенда. О том, вы не должны хардкодить это.

Потому что нам проще.

[Speaker 4] (2:09:37 - 2:09:39)
Будем только счастливы от этого.

[Speaker 1] (2:09:40 - 2:09:48)
Все супер. Там есть уже два запроса на форматирование таких данных и на форматирование timestamp.

[Speaker 2] (2:09:49 - 2:09:51)
Подожди, два запроса?

[Speaker 1] (2:09:51 - 2:10:03)
Нет, у нас есть два запроса на то, чтобы вы начали поддерживать правила с бакенда. Но сейчас нужно это быстро просто пофиксить.

[Speaker 2] (2:10:03 - 2:10:08)
Хорошо, я сейчас поправлю. Вы с Сергеем общались?

[Speaker 1] (2:10:10 - 2:10:16)
Пожалуйста, посмотри по другим полям, которые тоже нужно или можно обдейть.

[Speaker 2] (2:10:18 - 2:10:29)
Скажите, какие форматировать. Я вообще не в контексте веклов. Я могу упустить очень легко что-то.

Кто-нибудь из QA, кто там что-то делает, пожалуйста, помогите.

[Speaker 7] (2:10:33 - 2:10:35)
Давайте посмотрим.

[Speaker 1] (2:10:43 - 2:10:52)
А какой это тикет? Элиос, Мэйк, модуль гер нельзя. Кантов, стейт, не то, хейт.

[Speaker 2] (2:10:52 - 2:10:57)
Адометр, километры в час, скорость, да? Обороты, двигатели.

[Speaker 1] (2:10:57 - 2:10:58)
Адометры, да.

[Speaker 2] (2:11:01 - 2:11:04)
Температура, батарея. Секунду, секунду, буду прям записывать.

[Speaker 1] (2:11:05 - 2:11:07)
Это кроме последних три.

[Speaker 7] (2:11:10 - 2:11:12)
Так, это скинул.

[Speaker 1] (2:11:13 - 2:11:44)
Там, кстати, хорошо бы было, наверное, сделать где-то ссылку на этот самый... А, окей, это потом. Я скинул список, сегодня переводы к ним добавлял.

Но это только новые. Это новые. А я пришел, чтобы мы добавили еще для старых.

Например, там full consumption city. Или там для других какие-то есть. Total weight, например.

Или weights, или heights, и так далее.

[Speaker 2] (2:11:45 - 2:12:10)
Игорь, я тебе на всякий случай тикет кинул, чтобы он не потерялся. Ага, спасибо. И не только мой, Игорь.

Так, хорошо, здесь посмотрим, что сейчас форматируется. Давайте так, когда вы завезли эти изменения на бэкэнд?

[Speaker 7] (2:12:11 - 2:12:12)
Сегодня.

[Speaker 2] (2:12:12 - 2:12:32)
Все, тогда ничего из завезенного не форматируется. Хорошо. Full level, odometer, скорость, обороты двигателя, охлаждающая температура, здоровье батареи, температура батареи, уровень батареи.

[Speaker 1] (2:13:12 - 2:13:14)
Ребята, нам нужно что-то еще обсудить?

[Speaker 7] (2:13:21 - 2:13:24)
Нет, наверное. Достаточно сегодня.

[Speaker 1] (2:13:26 - 2:13:32)
И все так, я предлагаю завершать, перейти заниматься другими делами.

[Speaker 7] (2:13:35 - 2:13:39)
Окей. Все, всем хорошо.

[Speaker 2] (2:13:42 - 2:14:04)
Там в итоге Артур... Артур, ты здесь останешься тоже. Кто пишет-то?

Артур, ты пишешь? Да, я прямо сейчас отправляю сообщение в чат, чтобы посмотрели. Ты дашь вот эту статистику по facility?

Которую я в табличке сделал. Да-да-да, я вот прямо сейчас...

[Speaker 4] (2:14:04 - 2:14:37)
И вторник как стопроцентное завершение. Хотя тут, оказывается, столько людей было, правильно. И молчали.

[Speaker 2] (2:14:37 - 2:15:24)
Вообще, я нашел тебя поймать. Ну, я здесь, видишь. Да, а тут вот меня еще навеку занесло.

Как-то, да, неожиданно. Не, ну, это с точки зрения... Короче, это старая наша головная боль.

Да. Все все сделали, все все молодцы, но все работает не так, как должно. Это вот про это форматирование.

То есть толпцы добавили, проверили, что оно есть, оно все залилось, они у нас есть, все молодцы. Что они показывают? Хрен пойми, что они показывают.

День прошел у всех не зря.

[Speaker 5] (2:15:27 - 2:15:30)
Игорь, я тебе там ответил на вопрос и про форматирование тоже.

[Speaker 2] (2:15:30 - 2:15:44)
Вова, я тебе тут пишу, но коль ты сюда зашел, я тебе голосом скажу. Я сейчас не буду ничего из этого делать, кроме толстого минуса. Потому что по всем снапшотам это размажется толстой ложкой.

Если я вот эти нули начну трогать, я не буду этого делать.

[Speaker 4] (2:15:44 - 2:15:45)
Я понимаю.

[Speaker 1] (2:15:46 - 2:15:47)
У нас еще и двоеточие нужно убить, да.

[Speaker 2] (2:15:49 - 2:16:01)
Окей. Вот еще пример двоеточия. Мы эти двоеточия сначала все, блядь, заносим, потом проходит три месяца, мы их, блядь, выносим отовсюду, откуда только можем.

[Speaker 1] (2:16:03 - 2:16:31)
А еще параллель я срачи разбираю. Еще месяц у нас будет зоопарк. Тут двоеточие есть, тут двоеточие нет.

Еще пару раз получим от Дэна, что у нас зоопарк. И еще куашники заведут тикетов 20 на то, что у нас где-то не поменено, где-то поменено. Да, но мобильщики уже пилят без двоеточия, как Дэн зоопровел.

Так что зоопарк начинается. В любом случае.

[Speaker 2] (2:16:31 - 2:16:34)
Я очень рад за мобильщиков. Прям всей душой.

[Speaker 1] (2:16:35 - 2:16:38)
И у них консистентно. Они все правильно делают.

[Speaker 2] (2:16:40 - 2:16:47)
Я слышал пару демо о мобильщиках. Я очень рад, что я не в мобильщиках. Я могу так сказать.

[Speaker 1] (2:16:49 - 2:16:51)
Нет, нам все не так уж плохо.

[Speaker 4] (2:16:54 - 2:16:57)
Когда Дэн просто дропает со звонка...

[Speaker 1] (2:16:57 - 2:17:13)
Он дропнул, потому что ему показывали то, что он уже видел. И он решил, что просто нахер не смотреть на это. Ему просто принесли, показали то, что он...

И не по фикшену, а то, что он просил по фикшену. Он вспылил и психанул.

[Speaker 2] (2:17:15 - 2:17:20)
Так, еще раз. А, ну, давай Алексей, тогда мы отсюда...

[Speaker 1] (2:17:21 - 2:18:15)
Можно написать Major Missing... Нет, нет, смотри. Не Major Red Only View.

Это вообще сюда не относится. Это относится к верхней части. Она сейчас к InProgress'у, ко вторнику будет.

Под номер два вообще удали нафиг. No facility fielding by assigned... Честно, первый пункт вообще не понимаю.

Третье, четвертое, но это же следующие шаги, банально. Это не блокеры. Это то, что...

Каким-то образом Дэна проинформировать, может, он ожидает это, а этого не будет. Ну, next steps. Next steps.

Не блокер.

[Speaker 6] (2:18:18 - 2:18:19)
Окей.

[Speaker 1] (2:18:19 - 2:19:47)
Next steps slash in parallel, что-нибудь такое. Вот. Но вот первый пункт я просто не понимаю, что это.

И вряд ли Дэна поймет. Да, и уже и так, и так. Это то, что обсудили Саша и Игорь, то, что я упомянул.

То, что у нас можно засайнить любым юзером любой facility, даже который не заатрибутирован, а не привязан к этому юзеру. Это риск. Добавь графу риски.

Но English я бы попробовал нейронкой переписать, потому что... Может быть, я уже просто не воспринимаю информацию, может быть, поэтому не понимаю. Вот.

Ну и вот эта лесенка, конечно, order snapshot, что order snapshot и так далее, вряд ли будет ему понятно. Я бы все-таки расписал получше. Я сейчас еще прогоню.

Ну, это рекомендация от меня. Может, Алексей еще что-то добавит.

[Speaker 4] (2:19:55 - 2:19:58)
Пишите уже, как есть. Я...

[Speaker 2] (2:19:58 - 2:20:05)
Главное, вот эту табличку первой итерации просто. Процентов, торнинг. Мне кажется, это основное то, что нужно сказать.

[Speaker 1] (2:20:05 - 2:20:39)
Тогда балдом. Да, а вторую... Прогресс вот это с процентами балдом.

Выдели. А я это завтра, скорее всего, себе с парашюта тащу. Эти процентовки с пометкой там либо версия 1, либо версия 2.

[Speaker 2] (2:20:39 - 2:20:50)
Ну, вот как оценить вторую итерацию? Ну, линейно, если кто-то... Нет вопросов?

Мне кажется, там тоже надо разбивать.

[Speaker 1] (2:20:52 - 2:21:00)
Ну, если идти вглубь, то однозначно разбивать. Если ты про attributions, то там, в общем-то, все относительно просто.

[Speaker 2] (2:21:01 - 2:21:04)
Нет, я про вторую итерацию, которая у нас написана.

[Speaker 1] (2:21:10 - 2:21:18)
Вот эту, конечно, штуку лучше с данным обговаривать, что там легко накосорить в тех деталях.

[Speaker 2] (2:21:25 - 2:21:28)
Игорь, мы с тобой уходим на другой звонок?

[Speaker 1] (2:21:29 - 2:21:31)
Да я могу вам оставить.

[Speaker 2] (2:21:32 - 2:21:33)
А, ну, оставьте.