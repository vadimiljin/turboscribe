# Транскрипт встречи (Summary)

**Дата:** 2025-08-21 13:29
**Длительность:** 03:28:50
**Участники:** 17
**Точность:** 92.3%

---

**Alex Shulga** [00:00:34 - 00:00:47]: Привет.

**Kateryna Shevchenko** [00:01:00 - 00:01:14]: Привет.

**Igor Skrynkovskyy** [00:01:48 - 00:01:49]: Всем привет.

**Alex Shulga** [00:01:49 - 00:01:52]: Привет. Привет.

**Vladimir Fedorov** [00:02:30 - 00:03:12]: Алексей, слушайте, я только увидел, что он, наверное, я ошибся, не Роудс, вот Facility в секса 2А4, не Роудс, снапшоты, это FacilityFieldCrawl, снапшоту давно-давно добавили. Роуд-эдитор. Он попросит, да. Окей. Так у Роуд-эдитора у нас давно есть снапшот, ой, этот, AssignFacility.

**Artur Moskalenko** [00:03:12 - 00:03:19]: Не-не-не, там в эдит-дровере, Роуд-эдитор-дровер, наверное. А, все, я понял, settings.

**Vladimir Fedorov** [00:03:20 - 00:03:21]: Да, settings, да.

**Oleg Pravyk** [00:03:21 - 00:03:38]: Так, а тикет еще даже не на стейдже.

**Vladimir Fedorov** [00:03:41 - 00:03:59]: Тикет частично на стейдже, там остался только ToolTip, который нужно сложно прокидывать. Он виден только когда у нас есть уже Facility и нет, и чувак не может делать Contribute. Все остальное там готово.

**Oleg Pravyk** [00:03:59 - 00:04:04]: Не, я к тому, что тестирования это не было еще.

**Alex Shulga** [00:04:04 - 00:04:10]: Не, я посмотрел историю, Олег. Там особенно проблем не было.

**Vladimir Fedorov** [00:04:11 - 00:04:30]: Да, там последние две правки текст сразу поправил и с ToolTip там за довольно сложную архитектуру через два увлажения нужно, ну не то чтобы возиться, долго все это делается. Все как бы, ну основная и пацанал есть.

**Alex Shulga** [00:04:31 - 00:04:33]: Олег, я скину тикет.

**Alexey Afanasiev** [00:04:36 - 00:04:37]: Давайте.

**Oleg Pravyk** [00:04:38 - 00:04:45]: Да я его видел просто, что я в стейдж попадал, если честно.

**Vladimir Fedorov** [00:04:46 - 00:05:16]: Можно вот сейчас поставить стейдж, а ToolTip вынести в отдельности, это прям совсем бантики. Давайте, наверное, так сделаем. Я прям поставлю ветку на стейдже. Алекс, смотри, я на тебя сигну, на ToolTip я сделаю, ну доделаю.

**Alex Shulga** [00:05:16 - 00:05:20]: Как считаете нужным, я не против. Хорошо.

**Davron Usmonov** [00:05:45 - 00:06:27]: Алексей, я не добавил еще по ордерам, что добавлен экшен по AssignFacility, так как он не протестирован. Добро. Он слишком много внимания от себя требует. Скольз упомянул, потому что это требование от Дэна было, и было бы неплохо, если он результат увидел. Эти правки там 3 недели.

**Alexey Afanasiev** [00:06:27 - 00:06:34]: Имеешь ввиду не упоминать?

**Davron Usmonov** [00:06:34 - 00:06:41]: Ну как, все равно.

**Alexey Afanasiev** [00:06:41 - 00:06:48]: Посмотрим по настроению Дэна.

**Vladyslav Feshchenko** [00:07:23 - 00:07:45]: Ребят, смотри, напомните, пожалуйста, у нас на ордерах есть вкладка Territories, да? Которая тоже подразумевает, я так понимаю, facility, вот эту вот атрибуцию. У меня вопрос, на территории в ордерах мы тоже хотим это сделать? Или нет? Нет, я не помню, что вышла речь об атрибуции территорий.

**Serhii Kasainov** [00:07:45 - 00:07:50]: Ну не территорий, а ордеров внутри территории.

**Vladyslav Feshchenko** [00:07:50 - 00:07:54]: Та, которая вторая этапа на странице ордеров.

**Serhii Kasainov** [00:07:54 - 00:07:59]: Типа, чтобы там фильтр применялся или что?

**Vladyslav Feshchenko** [00:07:59 - 00:08:21]: Да. Или чтобы ассайнить по территориям сразу на все ордера внутри этой территории? Ну да, скорее всего так. Нет, подожди, там или-или.

**Alex Shulga** [00:08:21 - 00:08:48]: Или-или, ну фильтр там должен быть точно такой же, как на ордерах, допустим, по facility, чтобы уводились все ордера, которые относятся к этой территории, за атрибутированные этим facility. Если помните, вы ревьюшили эту матрицу, которую мы сделали, и повыкидывали оттуда целую кучу скопов. Карту, вот эти вот страницы Territories, Order Territories и Order Groups, еще там какие-то скопы повыкидывали. Выкинули все, спасибо. Она в первой версии выходит выкинута.

**Serhii Kasainov** [00:08:48 - 00:08:53]: Хорошо, спасибо.

**Alex Shulga** [00:08:53 - 00:09:04]: Но по идее, если на странице нет фильтра, то мы не ожидаем, что будет он применен, правда? Нет, там это страница Orders, и там фильтр должен быть, это как бы под страницей.

**Serhii Kasainov** [00:09:04 - 00:09:09]: Нет, у нее отдельный URL, если захотеть, то можно отключить там меню, селектор.

**Alex Shulga** [00:09:13 - 00:09:13]: Окей.

**Davron Usmonov** [00:09:20 - 00:09:38]: Алексей, есть предложение, посмотри, пункт 2А4, который на Владимире Федорове, он между моими пунктами, может быть, его либо сделать номер 2, либо номер 5, чтобы мы не прерывались, либо это правильный порядок?

**Vladimir Fedorov** [00:09:51 - 00:10:02]: Да в рамки, если хочешь, ты можешь прям в этом, в Road Editor показать, там примерно все, что ты делал, только в другом месте. Начало. Началось.

**Alexey Afanasiev** [00:10:02 - 00:10:06]: Репетирование.

**Vladimir Fedorov** [00:10:06 - 00:10:09]: Робства ты, смотрю, убрали, а тут окей.

**Davron Usmonov** [00:10:11 - 00:10:16]: Мне несложно, я репетировал, покурал. Дэн, привет.

**Dan Khasis** [00:10:17 - 00:10:19]: Привет.

**Alexey Afanasiev** [00:10:19 - 00:10:40]: Так, вот наша агенда на сегодня. Начнем с айсайн борды, потом в фасилити покажем, как мы раскатываем по продукту. Потом посмотрим Data Retention, Optimization Snapshot и дальше по мелочи.

**Dan Khasis** [00:10:42 - 00:11:00]: Я должен вам рассказать насчет легкой информации, критически важной информации насчет того, что серьезные клиенты ожидают и что у нас по-прежнему отсутствует.

**Alexey Afanasiev** [00:11:09 - 00:11:10]: Лучшим.

**Dan Khasis** [00:11:12 - 00:11:29]: Да, я уже начал рассказывать немножко Игорю и Семену, но не успел все рассказать. Игорь, ты хочешь начать с информации, которую я уже рассказал, если тебе удобно?

**Igor Skrynkovskyy** [00:11:30 - 00:11:36]: Ты хочешь, чтобы я рассказал или ты расскажешь? Потому что я думаю, что всем интересно будет узнать.

**Dan Khasis** [00:11:37 - 00:11:43]: Да, я имею в виду, может быть, ты можешь объяснить более кратко по-русски, чем я.

**Igor Skrynkovskyy** [00:11:44 - 00:11:47]: Окей, а о чем мы говорим, потому что мы много...

**Dan Khasis** [00:11:47 - 00:12:09]: Давай начни. Free trip, post trip, sorting, loading, unloading, handling и потом эти бакеты, группировка по бакетам и процентам больше, чем по абсолютно значениям. И потом пресет вьюхи и почему они важны.

**Igor Skrynkovskyy** [00:12:12 - 00:14:41]: Окей, давайте тогда начнем с пресетов вьюх и так далее. Значит, клиентам важно видеть, сначала важно видеть все одинаково, чтобы люди не ходили, не клацали, постоянно выбирали какие-то фильтры, там выбрать один фильтр, выбрать второй фильтр и так далее. А им важно взять и чтобы были пресеты фильтров уже с забитыми значениями и с определенными колонками, которые, например, администраторы создали и распространили на своих менеджеров или других пользователей, которые имеют доступ. Следовательно, когда они будут приходить, они будут уже иметь какие-то забитые фильтры и будут все на одной волне, понимать, что к чему. Следовательно, нам нужно иметь возможность эти фильтры каким-то образом сохранять и с ними работать. Таким образом. Тут очень интересный момент, потому что мы с Дэном очень вкратце об этом говорили, но то, что мы проговорили, что есть роль, например, администратора или аккаунт-овнера, которые создают глобальные пресеты, которые будут распределяться на всех или определенные аккаунт-типы. То есть, например, мы создаем и мы говорим, что вот этот пресет будет доступен всем раут-планерам в нашей компании или конкретно какому-то чуваку. Но отдельно каждый пользователь системы в рамках primary аккаунта будет иметь возможность создать свой кастомный пресет или взять, например, предыдущий, который был расшарен, и модифицировать и сохранить его под своим названием. Это типа как view-моды, но view-моды в самом понимании своего были о том, что мы меняем просто на набор фильтров и так далее, а здесь это фильтры с установленными значениями и колонками. Это одна часть. Вторая часть, это у нас, я не знаю, Дэн, route-health, ты хочешь на потом оставить или мы можем тоже его там быстро... Что? Route-health.

**Dan Khasis** [00:14:43 - 00:23:17]: Мы можем обсудить сейчас тоже, но... Чтобы прибавить еще одну вещь к тому, что Игорь сказал, если у тебя есть тысяча диспетчеров и у тебя есть 22 тысячи машин и ты наблюдаешь за ними в день, 95% случаев у тебя будет все идеально, у тебя будут команды, армия тренеров, как в армии, можно сказать, как в настоящей армии, где там есть отделы, там есть географии, там есть дивизии, там есть разные ответственные лица за разные вещи, там есть тренировка по разному типу оборудования. И эти тренеры с тем типом оборудованием хотят, чтобы в подводной лодке нет оружия, которое есть в танке, в танке нет оружия, которое есть на самолете. Правильно? Так ситуация, что мы делаем это, мы даем им возможность настраивать систему под их конкретную задачу в рамках и в контексте их конкретной организации по ролям. У нас сейчас нету разных ролей, мы, может быть, через год прибавим эти настройки, так мы сейчас можем прибавить одну или две роли просто так, чтобы удовлетворить одного или двух клиентов, но главное в том, что с нашей точки зрения, речь еще идет насчет консистенции, вот ты написал документ, ты сертифицировал всех людей, которые пользуются кубернетом, и потом приходит новый чувак, и он начинает пользоваться, например, не кубернетом, а майкрософтом, и вся твоя тренировка бесполезна. То же самое здесь, ты тренируешь своих операторов, ты тренируешь своих диспетчеров, вот кликни на эту вьюху, увидеть все проблемы с водителями, кликни сюда, чтобы увидеть все проблемы с заказами, а потом чувак приходит, и он не видит эту вьюху, потому что нет консистенции. Здесь мы делаем параллельность между оперативными задачами, процедурами и самим приложением, которое сейчас не существует. Standard operating procedures, стандартные процедуры обязаны иметь стандартное совместимое view. На этот момент, что view, который мы хотим стандартно показывать, этот view должен совпадать с разными темами и задач, которые существуют. Что это значит? Это значит, что если у тебя есть, как сказать, одна группа ответственна за покупку и обеспечивание топлива, другая группа ответственна за оптимизацию загрузки машины внутри склада, третья группа ответственна за удовлетворение покупателей и как их обслуживает водитель, четвертая группа ответственна за ремонт и обслуживание тормозов, фильтров и других механических проблем с машинами. И у каждой группы есть свои заботы. Например, механику наплевать, сервис тайм, который чувак потратил у какого-то клиента, ему важно, какой счетчик, миль, ему важно среднее, например, температура масла, который мы, в принципе, тоже можем записывать из Telematics и показывать, если мы хотим там среднее количество оборотов. Когда мы откроем страницу Vehicles или Vehicle Reporting, мы будем показывать для того Viewport колонки, которые подходят к той роли по умолчанию. Но если там есть какие-то расширенные доступы, которые были настроены администраторами, потому что у них, например, одна команда ответственна за три роли, а не за одну, тогда они могут это делать чисто для удобства. Или если ты работаешь в Customer Service или Dispatch, тебе до лампочки, сколько миль чувак проехал. У тебя есть город, ты, например, в Минске, доставка не заходит за пределы 50 километров в Минске, тебе до лампочки, сколько километров проехал этот водитель сегодня или вчера или позавчера. Тем важна одна вещь, привозит ли он все товары, забирает ли он правильно весь мусор, обслуживает сантехник всех этих клиентов. Другая группа уже наблюдает за вещами, связанные с воровством или топливом или временем и так далее. Многие американские фирмы среднего или даже крупного размера, они не имели бабушек и дедушек из Советского Союза. Когда из Советского Союза в Америку приехали эти люди, они начали с огромной шириной, глубиной пиздить в Америке по всем темам, которые есть. По страховкам, по медицине, по лекарству, наркотике, машине скручивать. Все подряд, чтобы Америка не поняла, что с ними произошло, что люди из Советского Союза так здесь наворовали и как много они наворовали, потому что эти схемы не существовали здесь поколениями. Наша система, в принципе, помогает людям защищать себя от людей такого типа, которые многие американцы даже не представляют, что это может происходить. Так все наши действия связаны с… Мы очень плохо помогаем людям понимать эксепшены. Мы показываем все и мы им говорим, а, если у тебя есть идея, ты можешь как-то настроить, чтобы найти какие-то проблемы. Но мы не подчеркиваем ни одну проблему. И потом, даже если мы бы подчеркивали какую-то проблему, как только ты меняешь компьютер, все фильтры пропадают. И даже если бы мы не пропадали бы фильтры, твой сотрудник другой географии бы не имел те же самые знания, потому что нет синхронизированных видов. То есть наша задача – это и хозяевам возможность видеть и понимать, что происходит на более широком, крупном уровне, и одновременно наша задача – это индивидуальным операторам подсказывать и показывать, где происходят на текущий момент в настоящее время проблемы с какими-то заказами, маршрутами, клиентами и так далее. Игорь, можешь сказать теперь насчет RouteHealth – здоровье, маршрута, здоровье, заказы? И какие у нас идеи насчет этого?

**Igor Skrynkovskyy** [00:23:40 - 00:26:06]: Сознание и плюс метрика вверх, метрика вниз каких-то значений – это пересечение с ActivityFeedEvent. То есть, например, произошло событие OutOfSequence. Мы должны куда-то в какое-то место записать, что по этому маршруту есть уже одно замечание. Таких замечаний будет много. Это мы детально потом с Дэном проговорим и поймем, что именно мы будем конфигурировать и как мы будем конфигурировать. Но RouteHealth будет также в себя включать разный набор показателей. То есть, нам нужно будет для RouteHealth подготовить кучу всяких метрик. И это часть метрик тех, которые мы когда-то с Володей и Володя презентовал. Но Володя очень широко, очень сложно. Нам нужно начать с простых вещей. Например, процент зафейленных дестинейшенов. Или процент дестинейшенов, которые опоздали в маршруте. У нас таких нет. У нас есть количество, но мы нигде не храним процент. Обычные люди не смотрят, покажи мне, где меньше 10 остановок было плохих. Они хотят, покажи мне, сколько было маршрутов, где было 10% опозданий или больше 50% опозданий. Как бы насчет RouteHealth, наверное, все. Самый главный момент это конфигурация и пересечение с ActivityFenom сейчас. Таким же самым образом, говоря про общие фильтры, нам нужно в фильтрах добавить будет понимание KPI, который будет читать в процентах или в бакетах. То есть мы будем или процент брать, или мы будем говорить, что там от 20 до 30 процентов. Или там от 60 до 80. И пользователю сразу показывать те маршруты, которые имеют определенный какой-то процент KPI. Он также должен настраиваться в очень простом виде, для того, чтобы пользователь быстро и просто это наконфигурировал на аккаунт уровне, на primary аккаунт уровне или на organization уровне.

**Alexey Afanasiev** [00:26:08 - 00:26:12]: А какая здесь взаимосвязь Health и KPI?

**Igor Skrynkovskyy** [00:26:13 - 00:26:43]: А KPI это метрики самого маршрута. И базируясь на KPI, мы будем иметь, что если у нас KPI этого маршрута есть меньше от такого, то значит это маршрут не Health. Дэн, что-то хочешь еще добавить для этого?

**Dan Khasis** [00:26:45 - 00:33:59]: Разница между KPI и Health это то, что Health это как бы рабочая терминология, не официальная. Если мы назовем эту колонку Violations, тогда мы по умолчанию предполагаем, что там нарушение. Хотя бизнес может… Мы же хотим показать не просто плохое, мы еще хотим показывать хорошее. Потому что из разных причин. Первый – это round health, это как бы абстрактная терминология, которая описывает одновременно и хорошие, и плохие ситуации. А что такое KPI? KPI это мультимерная философия, где ты можешь иметь, например, множество атрибутов насчет какой-то сущности. И те атрибуты насчет той сущности могут в зависимости от природы бизнеса иметь разные вкладные веса, где для бизнеса, который забирает мусор каждое утро, временные окна не такие важные. Самое важное, что они заканчивают ежедневно уборку мусора. А если ты привозишь органы или радиоактивные какие-то изотопы для медицинских целей, тебе критически важно приехать в госпиталь или в аптеку в определенное время, или к пациенту даже домой в определенное время после того, как он был в госпитале. Получается ситуация, что настройки KPI это агрегат входящих данных, которые тот конкретный бизнес выбирает. То есть любой из наших метрик является KPI. То есть мили – это KPI, среднее количество остановок в час для другого бизнеса – это KPI, для третьего бизнеса revenue per route – это KPI. Но KPI должно маппаться на более высокий этап, который называется SLA – Service Level Agreement, где они имеют как бы и внутренние, и внешние договоры. Иногда юридические, иногда полностью официальные, иногда полуофициальные. Например, у нас есть SLA с Cloudflare, что у нас 100% uptime. Если они лежат, они нам кредит дают. Это, например, SLA. Если твой SLA, что ты должен приезжать 95% времени в рамках Time Windows, значит ты можешь, в принципе, иметь route health плохой. И это, смотрите, философский вопрос. У тебя есть тысяча маршрутов, и в рамках одного маршрута, одного дня, ты опоздал на каждую остановку. Значит, у того маршрута route health плохой. Но поскольку в тот день было тысяча маршрутов, значит у тебя одна тысячная была плохая. Одна тысячная – это намного меньше и лучше, чем 5% нарушения. Одна тысячная – это 0,01% нарушения. То есть все эти темы и моменты должны рассматриваться с точки зрения разных типов ролей. Там есть разные причины. Оператор ответственный за тот маршрут – это его проблема. Но вице-президент ответственный за весь регион. И да, один маршрут был испорчен из-за разных причин, но все другие были идеальны. То есть агрегация всех этих KPIs идет по-разному. И вот почему критически важно понимать, что SLA – это в рамке какого-то времени по какой-то договоренности есть какие-то входные признаки, и те признаки настраиваются хозяевами бизнеса. И потом по тем бизнесам и по тем пунктам они высвечиваются. И не всегда. Иногда они хотят секретно, только чтобы администраторы видели. Иногда они хотят, чтобы операторы тоже видели. Вот почему линковка важна. Если мы посмотрим на New Relic, мы можем настраивать SLA на уровне какой-то транзакции. Например, для нас транзакция создания маршрута важна, но создание получения маршрута еще важнее. У нас, например, есть транзакция записать GPS-координаты. Она важна, но если она будет лежать 8 часов, по большому счету ничего не поменяется, кроме задержанных Customer Notifications. Или отсутствия каких-то данных, потому что мобильное приложение все равно постарается прислать нам назад эти данные. В нашем случае каждый микросервис имеет свой собственный SLA. То же самое у них. Они должны настраивать эти SLA, и потом они могут линковать этот SLA к какому-то типу объекта, к какой-то типу сущности. Тип сущности может быть маршрут, тип сущности может быть заказ, тип сущности может быть география. И потом разные уровни агрегации этих вещей показывают их вклад. И настройки этих SLA позволяют им подбирать их под свой конкретный бизнес. И критически важно иметь в Routes листе и в Routes Map и в Operations Matrix консистентную возможность выбирать или подбирать фильтры. Покажи мне все маршруты, которые нарушают такого типа SLA. Но чтобы сделать SLA, мы должны еще с Игорем поговорить на API. А чтобы сделать Route Health, там минимальная работа, чтобы запустить первую версию. Вот почему мы пошагово это выкатываем.

**Vova** [00:33:59 - 00:34:48]: Можно я добавлю 5 копеек еще? KPerformanceIndicator – это ключевой показатель перформанса, если перевести на русский. Любая метрика превращается в KPI в том случае, если она сравнивается с каким-то ожидаемым результатом. То есть KPI выражает собой соответствие ожиданию значения метрики. Например, мы заработали 200 тысяч долларов – это факт, свершившийся. Мы заработали 200 тысяч из 400 тысяч – это значит, мы только половину ожидания выполнили. Это плохой показатель. То есть сравнивать можно не только с SLA, но и с любым таргетом.

**Dan Khasis** [00:34:55 - 00:35:17]: Это важная тема, но это другая тема. Это гибридная тема. Это еще одна вещь, которую мы хотим сделать, но мы не готовы.

**Vova** [00:35:18 - 00:36:19]: Это очень похоже на то, что ты, Дэн, говоришь про SLA. SLA – это частный случай этого же expectation. Это expectation, когда мы хотим какую-то договоренность выполнить. Мы ожидаем, что эта договоренность будет выполнена, но этот expectation не всегда должен быть. Я это говорю, чтобы мы, возможно, не ограничили себя, когда заложим какую-то архитектуру, чтобы мы понимали, куда можно двигаться дальше.

**Dan Khasis** [00:36:25 - 00:39:41]: Я 4 часа говорил с тем клиентом, и за 4 часа они, как попугай, спрашивали тот же самый вопрос. Как мои диспетчеры будут знать, какие маршруты на сегодняшний день плохие или нарушены? И я показывал им одну вещь, и я показывал им другую вещь. Когда они суетились, я не мог довести до них мысль, что мы это делаем. И потом я понял, что мы это не делаем. Мы имеем все компоненты это сделать, но мы это не делаем. Почему мы это не делаем? Потому что если кто-то откроет Operations Matrix, они не могут видеть все маршруты сразу. А если они откроют Operations Matrix, они даже не хотят видеть все маршруты. Они хотят видеть только маршруты, которые хуёвые, или нарушенные, или замедленные. Потому что у нас нет ни одного другого вида, который показывает визуально на уровне каждой остановки, или на уровне гантовской чарты, фуллскрим режима. И когда я пытаюсь, я бы сказал, делать свою работу в продаже, я не могу довести до ума свои продажные мысли. Почему? Потому что я отсортировал список crowds list по прогрессу, и потом я открываю Operations Matrix, что я вижу? Полностью другой сортировки. У тебя 90 маршрутов, твои самые худшие должны быть сверху. Ни хуя этого нету. Ты открыл, ты хочешь только видеть самые плохие. Ты не можешь. Почему? Потому что ты должен вернуться в crowds list и настроить их. Так ты должен сделать три шага. Ты должен после логина открыть crowds list, выбрать viewport, выбрать колонки, выбрать фильтр, выбрать сортировку. Все потеряешь, к чертовой матери, после логаута, кстати. И потом, после всего этого, ты открываешь Operations Matrix, и все, что ты отсортировал и отфильтровал, пропало нахуй. То же самое в Routes Map, и старой, и новой. Ты сделал сортировку, ты сделал фильтрацию, ты смотришь на гентовский чарт, и сортировка чарта не совпадает с сортировкой списка. Так на списке ты выбрал первый, третий, четвертый, пятый маршрут по порядку прогресса, смотришь на чарт, у тебя полностью другой порядок, полностью твой список. И теперь ты запутался. В отличие от Декарта, который 40 лет делает… Кто-то помнит из вас Eclipse IDE, который мы давно-давно пользовали? И ты помнишь, что в Eclipse IDE ты мог строить кастомные виджеты или кастомные плагины?

**Igor Skrynkovskyy** [00:39:41 - 00:39:43]: Все, что угодно.

**Dan Khasis** [00:39:43 - 00:41:07]: Так что сделал Декарт? Они взяли на тот момент Eclipse, и они взяли и сделали плагин, где их система ранует backend, а фронтенд внутри Eclipse. Ты хочешь показать все таблички идеально и компактно, ты хочешь двигать налево-направо, ты хочешь видеть карту на правом экране и гентовскую чарту на левом экране. Пауэр юзеры не могут ни хуя делать в нашей системе в одном экране. И мы не позволяем им двигать ничего ни налево, ни направо, ни вверх, ни вниз. А если бы у нас был режим двухэкранный, синхронизированный через PubSub или через какими-то другими JavaScript трюками, мы бы смело смогли сделать интерфейс, который приятный. Но сейчас он неприятный, мы мучаем людей. Больше, чем 10 маршрутов, ты даже не думаешь, не смей смотреть на них, потому что это бессмысленно. Система не поддерживает, работают больше, чем 10 маршрутов одновременно.

**Igor Skrynkovskyy** [00:41:11 - 00:41:32]: Дэн, а ты где-то видел, чтобы веб-приложения делали мультимониторными? Технически я понимаю, что это разные табы, их можно как-то соединить, но примеры, возможно, у тебя есть?

**Alexey Afanasiev** [00:41:32 - 00:41:45]: Какие-нибудь биржевые веб-интерфейсы для трейдеров, когда несколько экранов. Там наверняка это реализовано.

**Dan Khasis** [00:41:46 - 00:44:08]: Блумборг точно это сделала, просто JavaScript-щики могут подсказать. Если мы можем это сделать, наверное, в библиотеке. Если мы не можем это сделать, есть другие варианты. Мы можем взять тот же Eclipse, мы можем взять какие-то другие IDE какого-то типа, сделать веб-сервисы, где мы не занимаемся фронтендом, а только бокендом. Но у нас было приложение, у нас был очень крутой парень, который ушел работать на блокчейн давным-давно, который сделал шикарное приложение на C++, которое просто летало. У нас еще есть по-прежнему исходный код на него, но оно просто летало. И он пользовал веб-сокеты на бокенде с протокол-баффера, с MySQL напрямую. У нас есть весь код исходный. И, к сожалению, у нас не было после него людей, которые могли справиться с этим. Но этот подход мог рендерить миллион точек за одну секунду на GPU локально. И он все скачивал протокол-баффером с бокенда. Мы, в принципе, можем запустить, у нас есть весь код, если мы хотим запустить. Но идея в том, что серьезные люди не хотят и не могут работать на одном экране. И, одновременно, даже если они работают на одном экране, им критически важно видеть больше эксепшенов. Не то, что хорошо идет, а все, что плохо идет.

**Vova** [00:44:09 - 00:44:46]: Бен, если ты не помнишь, примерно год назад мы нарисовали и презентовали тебе Backoffice Control Center, в котором приходят нотификации для диспетчеров о любых проблемах, которые система автоматически детектит или рапортует водителей. И все это формируется в очередь из тикетов, которые автоматически приоритизируются и раскидываются, назначаются на нужных людей. На следующей неделе я могу откопать это и показать еще раз. Как будто бы сейчас возникла необходимость.

**Dan Khasis** [00:44:47 - 00:45:52]: У нас есть 99% шансов, что клиент никого не купит. Они просто копаются, чтобы свою внутреннюю команду подразнить и сказать, что мы не имеем, вы лохи, нужно делать бюджет. Потому что большие корпорации в Америке только так работают. Но мы это делаем не из-за клиента, мы это делаем из-за партнера. Потому что партнер сейчас нам присылает еще 2-3 клиента. Мы хотим партнера как бы возбудить. Power Fleet это партнер, это Telematics фирма, которая купила Fleet Complete. Вот почему мы это делаем. Мы это не делаем, потому что клиент это хочет. Мы можем посмотреть, что Вова нарисует и послать им, что мы планируем это сделать. Но вероятно, что мы это сделаем перед другими вещами, поскольку мы обязаны другие вещи закончить первыми.

**Vova** [00:45:52 - 00:46:01]: Да, я понимаю. Именно поэтому я не напоминал об этом, отложил в сторону и оно лежит тихонечко и ждет своего времени.

**Dan Khasis** [00:46:01 - 00:46:34]: Если есть фотографии, я могу послать их подразнить, потому что 100% у них конкурентов нет. Пока адвокаты будут спорить на счет контрактов 5 месяцев, это можно уже все сделать. Но до текущего момента они не знают, что это настоящее, не настоящее, живое, не живое.

**Igor Skrynkovskyy** [00:46:34 - 00:46:45]: Это бюрократы корпоративные.

**Dan Khasis** [00:46:45 - 00:47:51]: Я бы сказал, что самая легкая и самая быстрая вещь это прибавить бакеты по существующим полям, которые есть. Где мы с Игорем возьмем и обозначим какие-то проценты на бакете, захаркодженные в первую версию или элегантно захаркодженные. И Вова выберет цвета, что у тебя есть там quartile или decile. Ты выбираешь, покажи мне все маршруты, которые хорошие, средние или плохие. И хорошее значит это, хорошее значит то. Что у нас следующее мы говорили, Игорь?

**Igor Skrynkovskyy** [00:47:53 - 00:50:08]: Мы говорили о том, чтобы разделить время на работу, на загрузку, на выгрузку, на повывку машины и так далее. Следующий топик это у нас то, что мы хотели бы для клиентов нужно разделить, для некоторых из клиентов нужно разделить и знать какое время они тратят на работу. А вдруг если курей возят, надо потом после работы машину помыть, выгрузить курей и так далее. И все это время у нас нет. Мы просто говорим, что у нас есть сервисное время, время доезда и все. Следовательно, что мы хотим сделать, это нам нужно ввести какое-то время на разные типы событий. То есть это например сортинг, это лоадинг, это инспекция, это онлоадинг, не знаю какие-то еще будут. И это время будет каким-то образом влиять на конечный маршрут. Следовательно, например, если у нас есть 2000 остановок, каждой из остановок нужно по 10 секунд, чтобы загрузить ее в машину. Нам нужно каким-то образом это будет посчитать на уровне оптимизационного движка, чтобы при рабочем дне драйвера 8 часов, ему надо будет оптимально загрузить машину. И на оставшееся время, то что останется, правильно выгрузить эти машины, то есть поехать и доставить эти товары. И наш оптимизационный движок должен это посчитать. И также мы это должны писать в историю, для того, чтобы пользователю это показать, что у вас история на такой-то дестинейшене всегда у вас уходит 10 минут, а сегодня вы потратили 5 минут. Типа возможно вам нужно что-то установить какое-то другое время.

**Dan Khasis** [00:50:09 - 00:53:04]: Да, на эту тему, перед тем как Игорь слишком отойдет от него, представьте себе, что клиент постоянно заказывает временные окна от 9 до 10 утра. А в итоге его водитель все равно всегда туда приезжает в 8.30 или в 10.30, просто всегда. Как мы знаем, статистика нам показывает, отступ от нуля, где ноль это 12 утра. Если этот отступ как бы нарисовать на кривой или на какой-то двухосевой скеттер плоти, если задействовать день недели, всегда показывает его время причала, отчала и так далее. Мы должны рекомендовать клиенту, не просто сервис ставим, что вы говорите, что 15 минут, а мы думаем, что это понедельник. Вот прямо сейчас, если ты откроешь Destination Snapshot, я даже не знаю, если он существует, но если он есть и ты его откроешь, мы же не показываем все идеи насчет того Destination в контексте того клиента в том аккаунте. Мы же знаем все исторические визиты, мы не показываем. Мы же знаем, к какому Customer Location это связано, мы не показываем. То есть у нас есть все эти данные, мы их не показываем. Первый шаг – это их показывать на хит-мэпе, который Вова уже нарисовал. Второй шаг – это во время оптимизации дать им какие-то уведомления, что, слушай, ты заказываешь 5 минут, мы видим 3, ты заказываешь 5, мы видим 10. И на уровне Time Window то же самое, что ты всегда пишешь это, а мы всегда видим это. Почему? А если мы хотим еще видение на 6 месяцев вперед, ты скачиваешь все данные из этого. Телометикса, например, и потом на Телометиксе ты видишь, когда они действительно всегда туда приезжают. И мы говорим, слушай, мы видим, что ты в Телометиксе с ними по всем твоим историческим маршрутам, которые, мне кажется, мы, к сожалению, по-прежнему не импортируем из Телометикса, потому что мы видим по твоему Телометиксу, что ты всегда туда в это время приезжаешь. Какого хуя ты пишешь это время, если ты никогда туда не приезжаешь в это время? Потому что мы же все видим, мы же все знаем. Это самая легкая математика, которая есть, просто надо соединить в кучу все. И насчет Service Time и другой пункт, Игорь, не забудьте обсудить Customer Location и по дням Service Time и по типу сервиса.

**Igor Skrynkovskyy** [00:53:04 - 00:54:31]: А я как раз к этому и шел, что помимо вот этих всех вещей, которые мы должны записывать, давать возможность уточнять, мы также должны иметь возможность конфигурировать какие-то дефолтные настройки или значения для конкретного типа, например, остановки, для Customer Location, для Customer, для разных типов остановок, которые мы будем иметь в маршруте, в конечном итоге в маршруте. То есть следует, например, мы загружаем CSV файл, в котором есть определенные какие-то остановки с определенными какими-то параметрами. Базируясь на этом, мы загружаем и мы понимаем, ага, этих параметров кастомного в CSV нету, но так как настройки дефолтные у нас есть, мы должны для этих остановок будущих проставить там определенные параметры. Например, загрузка времени, загрузка 15 минут, потому что мы знаем, что большой груз. Выгрузка 10 минут. И, следовательно, мы это время будем потом использовать где-то в оптимизаторе или в отображении, не знаю, в snapshot или где-то еще. И у нас будет разный тип времени или разный тип значений, базируясь на вот этих параметрах конфигурации.

**Dan Khasis** [00:54:33 - 00:57:10]: Я хочу на эту тему сказать еще важный пункт, особенно Вове, что ребята, когда увидели в новом макете мобильного приложения визуализацию товара в машине, они возбудились и сказали, что ни одной фирмой в мире, которая на самом высоком уровне работает, не существует этот функционал. И то, что этот функционал имеет очень критические пользы, которые не только связаны с нашей оригинальной идеей, почему их надо сделать, но они дали экземпляры, что есть разные типы машин, особенно для виноводочных и для пепсикола и так далее, что они со стороны грузят, side loading делают, со стороны поднимаются как шкафчик. И что когда они со стороны это все поднимают, что они и гадают много, часто куда это все ставить, где это все находится. И то, что этот инструмент, он позволяет им моментально понимать и на какой стороне машины, и в какой части стороны ездят все. Так это первая вещь, которую они возбудили. Вторая вещь насчет этого, которая их возбудила, это то, что если мы посмотрим на загрузку товара, они говорят, что оптимизация внутри машины. Вот мы, например, сделали оптимизацию, и теперь у тебя коробки или чипсы или там чего-то другое. Есть какие-то разные правила на уровне каждого заказа, на уровне каждого объекта, которые описывают, если люди имеют право накласть одну фигню на другую фигню.

**Vova** [00:57:17 - 00:57:20]: Ну да, это нужно хранить на свойствах товара.

**Dan Khasis** [00:57:22 - 00:58:51]: И потом на уровне товара получается, что это другой алгоритм, который мы можем взять с open source какого-то места. И этот алгоритм называется Beanpack Optimization, и он только есть, например, у 5 или 6 вендоров, это продают, и потому что это сложно, потому что все другие боятся это сделать, и потому что это сложно. И получается, что там происходит трехосевая оптимизация, где у тебя есть вес товара, ты не имеешь права больше, чем такой-то вес, ставить на этот товар. Так она идет в трех осях, делает оптимизацию кубическую всех этих мер, всех этих размеров, и потом она показывает, говорит, слушай, это сюда, это сюда, это сюда, и, конечно, все в порядке разгрузки. И, конечно, все грузится наизнанку. Что это делает? Это делает то, что они моментально подсказывают и ребятам, как все грузить, и ребятам, как все разгружать. И, конечно, вы знаете, что сегодняшняя технология, например, Unity и так далее, в 3D позволяет это рендерить намного легче и в браузере, и в других местах, чем когда-либо раньше.

**Vova** [00:59:02 - 00:59:09]: Нарисуем, если надо? У меня собраны референсы, как это делается.

**Igor Skrynkovskyy** [00:59:13 - 00:59:36]: Я просто, Дэн, насчет бинпака, я просто скажу, что мы частично уже используем такие алгоритмы для разных типов атрибутов, и в том числе для вот этих последних изменений, которые делались когда-то для FedEx, для улучшения маршрутов. То есть упаковка маршрутов так же происходит, как и с рюкзаком.

**Dan Khasis** [00:59:40 - 01:01:29]: Это хорошо, просто там алгоритмы немножко отличаются, потому что в трех осях он должен позволять, что там, я не знаю, кислоту нельзя ставить сверху еды, но нельзя ставить кислоту под 10 тысяч килограмм Кока-Колы, потому что она раздавит этот пластик. То есть там есть какие-то... Я пришлю ссылки, но нам это разрабатывать алгоритм без толку, нам нужно просто какой-то любой open-source взять от гугла или от оптопленера и просто вставить как есть. Самое важное — это все данные скачивать из SAP или из другого места, потому что никто не будет все эти данные у нас сохранять. Они будут просто синкотить к нам. Или посылать нам через API во время оптимизации. И потом в Response API мы сможем показать packing instructions и пиктограммку всего этого. Насчет фотографии нового приложения, ребятам очень понравился Instagram тип, который мы задумали. Они моментально предложили, чтобы мы позволяли людям заливать кастомные фотки на уровне каждого Customer Location, чтобы Customer Location, если там есть, например, не пользуйся этот вход, пользуйся этот вход, не пользуйся эту дверь, пользуйся эту дверь, чтобы они могли заливать фотки, и эти фотки наглядно были бы видны водителю моментально, в отличие от просто так показывать стандартный Street View.

**Vova** [01:01:30 - 01:01:40]: Отличная идея. И у нас все готово, чтобы это имплементировать.

**Dan Khasis** [01:01:41 - 01:02:17]: Да, ну и потом насчет кастомных constraint, другой пункт это то, что Recurring Route Scheduler и Planner, что там есть нужда в Recurring Route Planner, намного легче расширять гипотезы и сценарий planning, что у тебя есть идея какая-то, ты хочешь поменять что-то, мы что-то меняем, мы заставляем человека полностью в UI снова все делать, но они говорят, что это очень неудобно.

**Vova** [01:02:20 - 01:02:41]: Я это очень давно предлагал, я предлагал делать песочницу из Optimization, так чтобы можно было посмотреть превью, если ты не доволен результатом, тогда взять, подкрутить, поменять, посмотреть другой, прогнать еще раз оптимизацию, и когда ты уже доволен оптимизацией, только тогда...

**Dan Khasis** [01:02:41 - 01:02:46]: Нам надо просто как бы наращивать сценарий, нам надо наращивать сценарий.

**Vova** [01:02:48 - 01:03:03]: Я клякнусь к тому, что это применимо не только к Strategic Planner, но и к простой оптимизации тоже. Там та же самая проблема есть, что ты прогнал оптимизацию, а если ты не доволен результатом, ты должен идти удалять маршруты, которые...

**Dan Khasis** [01:03:03 - 01:03:13]: Нет, потому что Optimization Editor это решал, просто JavaScript не успели его мигрировать, но Optimization Editor решал этот вопрос.

**Vova** [01:03:14 - 01:03:23]: Ну да, я и говорю, Optimization Editor новый, который должен... И не забудьте... Старый был не суперудобный, но он делал это, да.

**Dan Khasis** [01:03:26 - 01:04:44]: Проблема в том, что мы не понимаем до конца все персоны. Я тебе дам пример. Одна персона людей, которые делают Recurring Scheduling, только хотят посмотреть на сценарий, ставить разные симуляции этих сценариев, и на этом дело заканчивается. А другие операторы, которые делают все постоянно и как бы ежедневно, не пользуют Recurring. У них как бы заказы. Заказы имеют расписание, и потом заказы в тот день активируются, как в Recurring Route. То есть Recurring Route строится от фиксированных заказов, которые, в принципе, наращивают работу на тот день. То есть вот если у нас есть сейчас ордер, это текущий список ордеров. Но на уровне кастомера можно, в принципе, создавать Recurring Orders. И Recurring Orders динамически будут инициализироваться по расписанию заказа того кастомера. Так же, как прямо сейчас инициализируется у нас из Master Route, The Chairing Route. Понимаете?

**Vova** [01:04:50 - 01:05:21]: Я об этом тоже давно говорил. Все ордера складываются в одну большую кучу. Я называл это автоматическая рот-оптимизация. Ордера складываются в один пул, который нужно сегодня выполнить. Так же собирается пул водителей, доступных сегодня, и пул автомобилей, доступных сегодня для выполнения. И Optimization Engine по расписанию автоматически пытается раскидать всю работу на весь доступный флот.

**Dan Khasis** [01:05:22 - 01:06:30]: Это разная вещь. Это важная вещь, но это разная вещь. Я тебе скажу, в чем разница. Первый пункт это то, что на уровне Customer Location ты можешь создавать заказ, который зеркальный, как наш стандартный редактор заказов. Но ты просто выбираешь, что каждый понедельник этот чувак хочет какие-то вещи. И потом она копирует этот мастер-заказ из шаблона мастер-заказов, как у нас есть мастер-раут. Она копирует это в конкретный заказ в тот день. И когда люди просыпаются, даже если они забыли об этом заказе, система автоматически создала тот заказ. Чтобы понимать, когда идет заказ.

**Vova** [01:06:30 - 01:06:39]: Я предлагаю пойти на шаг дальше, чтобы когда они проснутся, чтобы был не только заказ создан, но уже и маршрут запланирован с этим заказом.

**Dan Khasis** [01:06:41 - 01:12:09]: Это другая вещь. У нас не хватит времени. Это пять часов займет обсудить это. Я говорю о другом, что здесь начинаются опять априори проблемы. Ты не знаешь день заказа, потому что ты не знаешь твой рекурринг-скеджел. Мне похуй, что клиент хочет в понедельник туалетную бумагу, если я не еду в его район в понедельник. Так тебе надо сделать стратегический крауд-планинг первое. Потом, когда ты определил дни, тогда ты можешь позволять выбор каких-то заказов, какие-то дни, которые ты уже будешь. Сейчас все намного сложнее. Я просто рассказываю, что есть один игрок в этой области RoadNet, который это делает 30 лет, что мы должны сделать какой-то самый минимум, чтобы сделать следующие 10 или 20 сделок. Самый минимум. Если мы это сделаем, тогда мы будем делать уже более сложные вещи. Большие фирмы не будут у нас сохранять расписание их тысяч, или 5 тысяч, или 10 тысяч водителей. Мы обязаны синхронизировать те рабочие часы. Даже если мы дадим возможность это делать, у нас не будет этих данных. Никто их не будет настраивать руками. А маленькие фирмы никогда не будут пользоваться этой технологией. Как мы понимаем, как мы видим, что все преимущества, весь финансовый выигрыш, он только имеет максимальное влияние на крупные фирмы, а не на какие-то фирмы, которые имеют 25-50 водителей. Даже 100 водителей условно будут нам платить 5 тысяч в месяц. На зарплату тех водителей 100 человек, они платят, скажем, 500 тысяч в месяц. 100 чуваков 5 тысяч долларов. 5 тысяч на 10 это 50 тысяч, 500 тысяч они платят за зарплату. Скажем, ты сэкономишь их нашей системой, мы берем у них 5 тысяч в месяц, мы им экономим 10%, это 50 тысяч долларов. Они рады. Но 50 тысяч долларов в месяц сэкономить, это все равно копейки. Почему? Потому что то же самое технологию дашь Радбулу или Несли, или Анхайзер Буш, или Карлсберг, или там Стелла, и они имеют эту экономию в день, а не в месяц. И они могут за это заплатить 500 тысяч в месяц, и экономить 50 миллионов в месяц. И вот как работает, как работал Роднет. Они постоянно проверяли, вы сделали это, мы сэкономили в это. Приходят большие фирмы и начинают спорить, почему мы вам платим 2 миллиона в год, почему мы платим 3 миллиона в год. Их ответ, а мы вам экономим 100, посмотрите. А как мы докажем, что мы экономим 100, если у нас нету... Вот наконец-то у нас есть бизнес инсайдс, но бизнес инсайдс не включает в себя рекурринг рауты и некоторые другие вещи, но в принципе мы наконец-то этот вопрос решили. Вопрос, который мы не решили, это то, что ни у кого нету 5000 машин в одном городе. 5000 машин разбросано по всей стране. А если есть страны, тебе нужна география или группы. И они спрашивают на звонке, как я могу видеть все склады, все фасилити, все мусорные. Эти вещи в одном, в группе. И ответ никак, потому что нету понятия географии регионов. Покажи мне все склады в каком-то рынке. Каждая фирма имеет разный рынок. Southwest, Southeast, Central. И некоторые называют по цифрам, некоторые имеют алиусы. Они хотят до дерева создать географию. Я показываю вам на скопе, как мы это сделали. Они хотят привязать терминал к той географии. Когда у тебя есть выпадающий список терминалов, ты кликаешь группу или ты кликаешь географию. И тогда ты только смотришь на это. Потом ты линкуешь юзера не к терминалу только, а еще к географии. Тогда тот юзер видит все по географии. Ты идешь в Business Insights и ты видишь группировку по географии или по региону. Они хотят видеть, сколько route health violations в регионе. Landing page дефолтно их возмущает, что когда ты приходишь в систему, они не понимают, какой дефолтный landing page. Они не понимают, потому что мы их посылаем на routes list, а не на какой-то дешборд, как мы миллион раз обсуждали. И потом начинается замкнутая круга. Как это? Как это? И ответ всегда такой же.

**Vova** [01:12:22 - 01:12:31]: Изготовление дешборда упирается в то, что нам нужны KPIs, а у нас их нет. Вот сейчас у нас появится KPIs, мы сможем сделать дешборд после этого сразу же. Одновременно.

**Dan Khasis** [01:12:44 - 01:13:21]: Здесь не вопрос KPI, здесь вопрос философии Вова. Что вся фирма по умолчанию должна показывать, как я в скопе показываю, цифры, дешборды, агрегаты. Если это KPI, это не важно. А по бакетам, по процентам, по quintile, вот что важно. А не то, что это KPI, за нет.

**Igor Skrynkovskyy** [01:13:55 - 01:14:17]: По основным другим вещам мы еще с тобой говорили насчет customer портала, где пользователь может настраивать или уточнять какие-то данные насчет customer locations. Мы хотим это проговорить или потом, или сам?

**Dan Khasis** [01:14:20 - 01:18:27]: Да, насчет customer портала, там есть разные есть, как вам сказать, разные причины. Не только причина связана как бы я хочу видеть где товары, или я хочу видеть доказательства форм, или я хочу, вот например, прямо сейчас у тебя есть бизнес, у тебя 100 водителей. Каждые 5 минут кто-то подписывает что-то, кто-то заполняет какую-то форму, кто-то заливает какой-то note. В центральном месте ничего не видно, ни счетчиков, ни списков. Ты обязан смотреть на notes. Самая близкая это группировка в notes по какому-то дню. И ты, может быть, если тебе повезет, увидишь subtotal для какой-то конкретной колонки. Но скорее всего ты не увидишь это. Я веду просто к тому, что самые элементарные вещи, которые супер неудобные, из-за этого люди не хотят покупать. Из-за неприятного неудобства. В кастомной портале идея была, что клиент сможет зайти, и клиент сможет настраивать и просить я хочу такие-то временные окна в такие-то дни, я хочу такие-то вещи в такие-то дни. И потом администратор аккаунта может настраивать, какие вещи тот кастомер может делать. Например, хочешь ли ты, чтобы твой клиент управлял там Windows, да или нет? Хочешь ли ты, чтобы твой клиент мог заказывать товары через портал, да или нет? Хочешь ли ты, чтобы этот клиент видел конкретно, где находится машина и за какой срок времени, в отличие от трекинг страницы? Все администраторы должны настраивать это все, но список функционала должен быть гибкий, мы не можем все hard-коджить, как мы сделали в аккаунт settings. Там должна быть таблица, в таблице все типы настроек и потом на уровне этого аккаунта все настройки администратор решает. Этот клиент имеет право, этот клиент не имеет права. Я дам пример. Клиент имеет забор, у забора есть секретный код, как туда зайти, или здание, правильно? Клиент должен постоянно должен понимаете?

**Alex Shulga** [01:18:34 - 01:18:36]: Если честно, не очень.

**Dan Khasis** [01:18:38 - 01:18:49]: Окей, у тебя есть здание, у тебя есть здание, у тебя есть входной код, который человек должен вбить, чтобы зайти в здание. Правильно?

**Alex Shulga** [01:18:51 - 01:18:52]: Так, это понятно, да.

**Dan Khasis** [01:18:54 - 01:19:44]: Хочешь ли ты каждый раз посылать хозяину email? Слушай, мы поменяли код 575, 573, 579. Ты хочешь это делать постоянно? Нет. Так почему клиент не может зайти и у себя в портале настраивать для каждого его локейшена входной вход? Или временные диапазоны, которые для него допустимы? Чтобы тогда, когда ты планируешь маршрут, ты не заливаешь какой-то говняный файл с устаревшими данными, а ты подхватываешь из кастомных локейшен с базоданной например временные окна, которые допустимы. Например, что-то другое.

**Alex Shulga** [01:19:45 - 01:19:57]: Это все, насколько я понимаю, мы уже делаем через кастом дату кастомер локейшена, которая потом вливается в кастом дату маршрута, в кастом дату определенного дестинейшена.

**Dan Khasis** [01:19:58 - 01:20:44]: Если мы хотим говорить абстрактно, как бы без серой зоны и черно-белой, ты прав. Но если мы хотим говорить, как бизнесы будут пользоваться, ты не прав, потому что не все кастом даты должны быть видны драйвером. У нас по-прежнему нет редактора визуально, чтобы показывать или прятать от водителя. Потом некоторые из этих полей надо более стандартизованных сделать. Например, мы не хотим, чтобы люди писали g-code, gate-code, key-code, car-code. Если мы решили, что это действительно универсальная вещь, тогда давайте это пользоваться универсально и всем просто поле прибавить.

**Alex Shulga** [01:20:48 - 01:20:49]: Спасибо, что объяснил.

**Dan Khasis** [01:21:05 - 01:22:06]: Кастомер-портал суммарно позволяет человеку и видеть прогресс, если ты хочешь показывать прогресс, и позволяет человеку настраивать какие-то параметры насчет своего бизнеса, включая, куда посылать invoice. Вот мы будем автогенерировать invoice. Почему секретарша должна бегать за клиентом? Почему клиент не может настраивать, как в RAMP все эти вещи? Правильно или неправильно?

**Alex Shulga** [01:22:06 - 01:23:08]: Пока звучит логично. Я вам скажу частное мнение, что все эти изменения звучат очень логично, но в процессе мы столкнемся с тем, что у каждого изменения, у каждого данных, которые мы хотим хранить, у каждого настройки, которую мы передадим конечным пользователям, для того, чтобы они заполняли, будет целая куча нюансов в виде того, что мы сейчас не можем предугадать, каких-то дополнительных требований, как пользователи захотят с этим работать, и мы при имплементации все равно столкнемся с какими-то недопониманиями. Но пока общая концепция очень хорошо ложится.

**Dan Khasis** [01:23:11 - 01:23:52]: У нас есть Дэвид Пелли, который занимался это 22 года только этим, который нам подсказывает всеми этими вещами, тем, как мы будем писать какой-то код. Окей, что следующее?

**Alexey Afanasiev** [01:23:54 - 01:23:57]: Давайте, Жень, покажешь нас, я не пойду.

**Dan Khasis** [01:23:59 - 01:25:07]: А, нет, извиняюсь, еще один пункт. Volumetric service times или там, у тебя есть 10 товаров, система должна автоматически считать service time. Ты не должен каждый раз, как придурок, постоянно, о, смотри, здесь 7 таких, и у каждого 15 минут. Нет, заранее. У тебя есть огромное тяжелое пиво, это всегда 22 минуты. У тебя есть холодильник, это 3 минуты. У тебя что-то другое, это 5 минут. Настраиваются все эти, по умолчанию, все эти параметры, и потом эти параметры пользуются во время планировки и во время strategic routing, чтобы не заливать снова. Вот сейчас strategic routing надо заливать, но, в принципе, его можно вытаскивать из custom locations.

**Vova** [01:25:18 - 01:25:26]: В макетах мы нарисовали на инвентарии items service time.

**Dan Khasis** [01:25:26 - 01:25:46]: Это другая вещь, другая вещь, потому что это не inventory item, потому что время не связано. Если ты делаешь работу, это не inventory, это тип, это типы разных вещей, это не inventory.

**Vova** [01:25:48 - 01:26:19]: Ну, да, да, именно поэтому я хотел называть это не inventory, а товар и услуги в одном списке. И тогда товар и услуга, даже какой-то товар, он может иметь с собой service time. Если, например, везет бочку, то разгрузка бочки занимает какое-то время. Ты сразу, исходя из того, что заказали, понимаешь, сколько времени, как это за эффекты service time.

**Dan Khasis** [01:26:19 - 01:26:52]: Самое хитрое, это не сохранять эти данные, это детский сад. Самое хитрое, это, Игорь, как вы будете автоматически подтягивать это из того справочника, чтобы во время планировки или через API, или через заливку подхватывать все эти данные насчет service time, насчет правил, насчет типа, и так далее.

**Igor Skrynkovskyy** [01:26:55 - 01:27:13]: Будут правила, и мы на базе этих правил будем это до оптимизации, наверное, надо делать на этапе загрузки или там перед оптимизацией, но после загрузки. И делать вот это обогащение данным дополнительным.

**Dan Khasis** [01:27:13 - 01:27:31]: Как мы сейчас начали с ключу, мы должны подсказывать им, по какому ключу, например, customer ID или customer identifiers ERP-системы, или по какому-то мудрому ключу правильному надо выбирать.

**Igor Skrynkovskyy** [01:27:33 - 01:28:00]: Мне кажется, это все равно должен быть свод правил и приоритизация того, что мы используем. Это как с ценами для inventory менеджера. У тебя должен быть какая-то общая цена, общие правила. У тебя может быть кастомное правило на уровне CSV файла забито, у тебя может быть правило на уровне customer location или customer. И как бы их нужно всех учитывать.

**Dan Khasis** [01:28:01 - 01:28:20]: Я вспомнил другую вещь, которую они мне сказали на эту тему правил. Насчет трафика. Google имеет в их API возможность давать нам и here.com тоже start date, start time. Правильно, Игорь?

**Igor Skrynkovskyy** [01:28:22 - 01:28:25]: Да, да, да. Трафик можем задавать.

**Dan Khasis** [01:28:26 - 01:28:46]: Если ты откроешь route editor или routes map, там нету настройки preview, которая тебе покажет, что preview or route duration в зависимости от разного start time или start date. Хотя это легко сделать.

**Igor Skrynkovskyy** [01:28:47 - 01:28:49]: Ты о 3D матрице?

**Dan Khasis** [01:28:50 - 01:29:10]: Нет, нет, не 3D, просто обыкновенный. Ты смотришь на route, ты кликаешь кнопку, говоришь preview, я хочу увидеть, как этот, как будет выглядеть эта хуйня там в понедельник, там в час дня, например.

**Igor Skrynkovskyy** [01:29:11 - 01:29:21]: У нас это почти система позволяет, AMP позволяет это сделать, но нам нужно некоторые доработки сделать. Ну да, вполне.

**Dan Khasis** [01:29:21 - 01:29:32]: Почти как route directions таблица, время на какой-то preview какого-то раута, сделать такой же request, но с другим route start time.

**Igor Skrynkovskyy** [01:29:33 - 01:29:34]: Да, да, да.

**Dan Khasis** [01:29:34 - 01:30:27]: И потом они могут его просматривать. То же самое, как Вова послал макет strategic route planner, где ты можешь просматривать будущие вещи, будущие периоды, и на карте ты видишь этот просмотр, но там же трафик меняется, и ты не знаешь, что ожидать в тот день, в то время, потому что мы показываем константное время. Хотя RoadNet покупал трафик у TomTom много лет, и когда они строили маршруты, они знали трафик заранее. Ну, как мы делаем от Google, но они в свой routing engine те данные могли вставляться.

**Igor Skrynkovskyy** [01:30:30 - 01:30:39]: Ну, это условно, и мы можем покупать в Hira эти данные, или там с других источников, и собирать, но это очень дорого.

**Dan Khasis** [01:30:40 - 01:30:51]: Мы можем собирать из самой этой флоты, у нас же был... У нас это есть. Мы отключили, мы отключили, да.

**Igor Skrynkovskyy** [01:30:54 - 01:31:08]: Но, Дэн, смотри, мы условно у нас есть GPS-трекинг, то есть мы его все равно накапливаем, то есть в любой момент мы можем для них сделать, перестроить трафик, и каким-то образом заиспользовать.

**Dan Khasis** [01:31:08 - 01:31:41]: Здесь идет вопрос насчет продаж, психологии покупателя. Что мы можем сказать? Слушай, все другие имеют historical traffic, это чепуха. Мы имеем твой historical traffic, и мы пользуем AI, чтобы строить более точные по твоему бизнесу эти вещи, а не просто так, как все другие делают. Кого ебет, как едет легковая машина, если у тебя огромный грузовик.

**Igor Skrynkovskyy** [01:31:48 - 01:32:07]: Ну, можно, но тут нам, короче, надо с датой еще поработать, с tracking-датой. Потому что ты помнишь, что мы хотели на некоторых городах только запускать, потому что под покрытие трафиком очень маленькое, только 4%.

**Dan Khasis** [01:32:07 - 01:32:14]: Да, но если у них собственная флота, пусть они собственные маршруты покрывают.

**Igor Skrynkovskyy** [01:32:16 - 01:32:19]: Ну, если они, тем более, по тем же самым местам ездят.

**Dan Khasis** [01:32:20 - 01:32:38]: Если мы скачаем данные из Telematics маршрутов, это тоже этот вопрос ответит. Какой у нас сейчас статус скачивания всех исторических маршрутов из Telematics? У нас есть...

**Igor Skrynkovskyy** [01:32:39 - 01:33:32]: Нет, нет, мы сейчас там погрузили в множество вещей, которые связаны с улучшением системы, там, выполнением полей, дополнительных фасилити, пока нет. Там разработчики вернутся с отпусков, и тогда будем накапливать. У нас еще вопрос, Дэн, стоит насчет SAP, вот этой интеграции, потому что мы подморозили, скажем, вот эту интеграцию, потому что мы ждем апдейта по таблицам, по базе данных, то, что ты хотел добавить. Вот, и только мы вот это закроем, или, я не знаю, приоритет изменим, то мы можем заниматься выгрузкой. Вот, это просто так, апдейт.

**Dan Khasis** [01:33:36 - 01:35:26]: Сейчас я посмотрю на последние 2-3 записки этого парня относительно. Если у тебя приходит заказ свежий, он говорит, что важно иметь возможность на лету решить, в какой маршрут вставить этот заказ, и потом по настройкам аккаунта они смогут выбрать, там, позволять нарушать Windows, да или нет, максимальный процент расстояния или времени оригинального допустимое после вставки, 5-7-10%. Вот, например, я им показал insert route into best destination, который еле работал, но работал. Они там описывали, что это AI, вы AI пользуете для этого. Они охуели от этого. Эти партнеры. То есть, нам надо улучшить этот, тот механизм.

**Igor Skrynkovskyy** [01:35:29 - 01:35:37]: Там есть идеи, но есть идеи, как можно улучшить. Чтобы оно быстрее и лучше работало.

**Dan Khasis** [01:35:39 - 01:36:19]: Главная фишка в том, что приходит заказ, и надо автоматически его засунуть куда-то, по каким-то правилам. Или там у тебя есть какой-то один маршрут, и ты хочешь, и ты выбрал, ты понимаешь, окей, их сценарий такое. Едет машина, машина пиздой накрылась. Срочно надо новую машину выслать. Надо взять оставшиеся недоделанные остановки одного маршрута. Надо те остановки распространить оставшимся машинам. Или одну, или две, или пять.

**Vova** [01:36:19 - 01:37:40]: Система помогает решить. Мы вот это все, по-моему, обсуждали и рисовали для диспетч-борды. И для реоптимизации остатка Игорь, если ты помнишь. Реоптимизация остатка оптимизации. В таком случае у тебя маршруты уже едутся, например, одна машина сломалась, и эти дистанционы теперь остались безупризорными, но они все еще в этой оптимизации. Ты жмешь волшебную палочку, и они автоматически раскидываются у оставшихся машин. Я помню даже мы Insert into best route сюда точно так же. То же самое. Ты просто в optimization добавляешь новый destination, и после этого оптимизируешь остатки маршрутов. То есть это вот как раз тема до оптимизации optimization.

**Igor Skrynkovskyy** [01:37:50 - 01:38:01]: Да, я помню, мы говорили насчет этого. Я помню даже мы говорили о том, что есть апдейты, и что частично это уже можно сделать.

**Vova** [01:38:07 - 01:38:08]: Я рад, что это снова на Grisanti.

**Igor Skrynkovskyy** [01:38:31 - 01:38:41]: Алло.

**Dan Khasis** [01:38:41 - 01:38:52]: Алло, Витя.

**Igor Skrynkovskyy** [01:38:55 - 01:38:57]: Рывками, наверное, ты услышишь.

**Dan Khasis** [01:38:59 - 01:39:05]: Я говорю, какие у нас апдейты насчет output данные, все снапшоты, которые нам важны.

**Alexey Afanasiev** [01:39:17 - 01:39:23]: Секундочку. Артур, ты покажешь табличку или я?

**Artur Moskalenko** [01:39:25 - 01:40:01]: Да, я могу показать. Давай, вставай. В общем, мы собрали такую матрицу, чтобы не точечно добавлять места, где какие объекты нужно... где нужно делать атрибуцию и где assign customer, customer location. Вот. Решили системно подойти.

**Dan Khasis** [01:40:04 - 01:40:24]: Если нет агрегатов, мне бессмысленно смотреть, если у вас нет агрегатов. Это так же, как Семен делает в разном месте. В такой-то неделю столько-то полей есть, столько-то нету, следующее, следующее, следующее. Нам детализованно 30 человек смотреть каждую строку матрицы. Это никак не помогает.

**Artur Moskalenko** [01:40:26 - 01:40:47]: Детализованно. Сейчас на стейджинге у нас уже customer, customer location, assign facility и output он есть. И в ближайшее время на продакшен это уедет. Вот. Остальное оно в процессе.

**Igor Golovtsov** [01:40:50 - 01:41:12]: Здесь я могу добавить, потому что еще делается прямо сейчас. На снапшотах assign facility добавятся сегодня на стейдж, а в левом сайт баре снапшотов. В таблицах route, которые находятся в снапшотах, например на юзер снапшоте или на другом снапшоте, завтра появятся на стейджинге.

**Dan Khasis** [01:41:14 - 01:41:39]: Если ты спланировал маршрут, и у тебя есть 5000 остановок и 100 маршрутов, и ты смотришь оптимизацию, ты даже знаешь, какие там задействованы vehicle profile и routing profile. Вот о чем речь идет. Как мы по-прежнему это не знаем. Или не можем опутать.

**Vova** [01:41:44 - 01:42:00]: Мы нарисовали, как это отображать, но я, к сожалению, сейчас не буду за компьютером, чтобы показать. Я скину опять же в понедельник, как это выглядит. Как выглядит отображение настроек оптимизации. Уже в оптимизированный маршрут.

**Dan Khasis** [01:42:00 - 01:42:02]: Ты имеешь в виду входных вещей?

**Vova** [01:42:02 - 01:42:39]: Входные параметры, да. Будет отдельная вкладка в снапшоте, которая называется settings, и там будут собраны все сеттинги, которые все optimization профайлы, все vehicle профайлы, все машины, все депоты, то есть все будет видно, с какими настройками была запущена эта оптимизация, и будет возможность сохранить это как optimization профайл, если это не было optimization профайлом, чтобы повторить успех.

**Dan Khasis** [01:42:44 - 01:42:48]: А у нас нет, у нас сейчас нет шаблонов, шаблонов, шаблона шаблонов, правильно?

**Vova** [01:42:50 - 01:42:57]: Нет, у нас есть только optimization профайлы. Это пресет, optimization set.

**Dan Khasis** [01:42:58 - 01:43:51]: Ты сделал оптимизацию, ты должен видеть в входных параметрах оптимизации vehicle профайл, optimization профайл. Я говорю о другом. Optimization профайл с точки зрения представь себе, что у тебя есть этот, мы планируем optimization профайл всех вещей.

**Artur Moskalenko** [01:43:52 - 01:43:56]: Да, он плохо слышно.

**Vova** [01:43:56 - 01:44:00]: Да, я не слышал.

**Dan Khasis** [01:44:03 - 01:44:11]: Мы делаем optimization профайл, мой вопрос. В него входят все потенциальные параметры?

**Vova** [01:44:13 - 01:44:27]: Да, в него входят все параметры. В случае multiple depots туда входят все, ну все depots, туда входит в случае mixed fleet входит все profiles, туда все включено, все настройки.

**Dan Khasis** [01:44:27 - 01:44:33]: Ты думаешь, что все настройки в optimization профайл? Я не уверен в этом.

**Vova** [01:44:33 - 01:44:38]: Возможно, что-то упущено, но по задумке должно быть все.

**Dan Khasis** [01:44:39 - 01:45:03]: Я имею ввиду, что соединяет и vehicle профайл, и optimization профайл, и драйвер, и все эти вещи, что в одно место унифицирует это все. Это является optimization профайл или нет? Вот в чем вопрос. Да, это optimization профайл.

**Alex Shulga** [01:45:03 - 01:45:59]: Я извиняюсь, я немножко вклинился, если можно. Optimization профайл сейчас там не обязательно, как и в настройках оптимизации, добавлять vehicle. То есть нужно понимать, что если оптимизация осуществляется без назначения vehicle, то vehicle профайл и capacity профайл неприменимы к такой оптимизации. Значит, optimization профайл необязателен для того, чтобы построить оптимизацию. До сих пор работают сеттинги оптимизации. То есть можно как бы не создавая профайл, создавать оптимизацию через сеттинги. У нас нет единой сущности, которая в себе агрегирует все, все настройки одновременно. Но да, optimization профайл, вот как ты, Вова, говоришь, он как бы может быть таким вот cornerstone, объединяющим все настройки в одном. Просто там сейчас эти параметры не все обязательные.

**Dan Khasis** [01:46:00 - 01:46:25]: Да, но да, так мой вопрос, если optimization профайл, даже представь себе, что там все параметры были. Секунду. Если бы там были все параметры, это бы все равно не решило. Нам нужно как бы шаблон настроек всех. Я не думаю, что optimization профайл покрывает эту ситуацию.

**Vova** [01:46:28 - 01:46:47]: Optimization профайл это пресет, сохраненный из optimization сеттингов. Если ты делал какую-то оптимизацию, ты можешь сохранить все настройки, с которыми эта оптимизация делалась, как профайл, и после этого применять для другой оптимизации. Повторно.

**Dan Khasis** [01:46:55 - 01:47:59]: Optimization профайл это зеркало Я думаю, что это начальная точка, но я не думаю, что это конечная точка. Дэн, в своем виде optimization профайл сейчас включает в себя 80% того функционала, который у нас есть. Он сейчас как бы как необязательное, но желательное. Я не хочу обязательно. Я другой вопрос вообще спрашиваю. Давай другими словами пишу. Считаем ли мы, что optimization профайл это действительно шаблон, который собирает в кучу все другие шаблоны или нет? Вот какой мой вопрос. Потому что мне кажется, что нет.

**Igor Skrynkovskyy** [01:48:00 - 01:48:07]: Нет, это просто шаблон одной вещи. Это не шаблон шаблона.

**Dan Khasis** [01:48:08 - 01:48:15]: Так может быть, я об этом и говорю. Может быть, надо подумать насчет этого.

**Vova** [01:48:15 - 01:48:25]: Он себе хранит референсы на другие шаблоны. Он optimization профайл к себе хранит референсы на другие шаблоны, если надо.

**Igor Skrynkovskyy** [01:48:26 - 01:48:26]: Каким образом?

**Vova** [01:48:28 - 01:48:42]: Когда ты mixed-fit указываешь, mixed-fit должен сохраняться. Типа по сети профайлов количество машин должен сохраняться optimization профайл.

**Igor Skrynkovskyy** [01:48:43 - 01:49:01]: Ну, таким образом, да. Но там есть, например, еще advanced configuration, то, что мы называем heterogeneous fleetable и mixed fleet, который не только capacity имеет профайлы, но он может иметь другие референсы на другие оптимизации. Да, так я говорю.

**Dan Khasis** [01:49:01 - 01:50:08]: Но если, например, я вам дам пример, который я Игорю еще не рассказал, но я дам пример, я сейчас перераспомнил. Это почти как service time профайл, например. Правильно? У тебя есть, ты делаешь правила по service time. Ты эти service time берешь, ты эти service time настраиваешь, правильно? Правильно. И все. И теперь, ты линкуешь этот service time профайл к чему-то. И вопрос, должно ли это линковаться к optimization профайлу, как главная сущность шаблонов, или куда собираются все другие шаблоны, или нужно придумать новую штуку? Я не знаю ответа на этот вопрос.

**Igor Skrynkovskyy** [01:50:09 - 01:51:07]: Я тебе скажу, Дэн, это должен быть конфигуратор, потому что в своей сути то, что ты говоришь с временем, или с другими параметрами, они ложатся как на обычный optimization профайл, или на сложный, который имеет вложение. Когда мы говорим о mixed fleet, мы говорим о одном из типов вложений. Время – это другой тип вложения. Перемножение времени и constraints и dimensions, например, это третий тип constraints. И их много может быть. И это получается, как бы, в optimization профайле это должен быть конструктор, в котором ты сам говоришь примени мне вот это правило, вот это, и это только одна группка. А теперь возьми, я не знаю, скиллы, там другой тип машин и что-то другое, это другая группка. И это как бы все вместе, это один optimization профайл, но у него правил много есть.

**Dan Khasis** [01:51:08 - 01:51:16]: Значит, optimization профайл, это уже темплейт рэпер, который рэпает и линкует все другие профайлы.

**Igor Skrynkovskyy** [01:51:20 - 01:51:27]: Он только это в зачатках, это не тот самый, это зачатки вот этих рэперов.

**Dan Khasis** [01:51:28 - 01:51:32]: Он линкует, он линкует все рэп, все другие профайлы в себя.

**Igor Skrynkovskyy** [01:51:37 - 01:51:49]: Правильно? Смотри, сейчас нет, сейчас у нас нет, даже вот то, что Володя говорит, что mixed fleet, мы сейчас этого не сохраняем. Но оптимизационный API это позволяет делать.

**Dan Khasis** [01:51:50 - 01:52:02]: Я не имею ввиду, что мы прямо сейчас из коробки идеально все делаем, мой вопрос другой. Я пытаюсь сказать, что философски это все должно мэпаться на optimization профайл?

**Igor Skrynkovskyy** [01:52:04 - 01:52:04]: Да.

**Dan Khasis** [01:52:07 - 01:53:04]: Окей, тогда мой следующий вопрос на это. Мы с тобой отдельно будем тогда делать. Но это будет еще одна вещь, которая линкуется туда. Но тогда другой вопрос. У тебя есть разные финалы в разных регионах. Разные регионы имеют разные законы. Ты хочешь пролинковать, что любой маршрут, который происходит из того склада, всегда по умолчанию имеет какой-то optimization профайл? В Калифорнии, например, максимальное рабочее время хотят сделать 30 часов в неделю. А в Нью-Йорке 35, а во Флориде 50. Теперь у нас есть три optimization профайла. И как чувак из Калифорнии будет выбирать из Калифорнии или из Нью-Йорка?

**Igor Skrynkovskyy** [01:53:05 - 01:53:30]: Это переменные, я это вижу как переменные. У нас есть facility, facility имеет определенные правила. И мы говорим, мы хотим построить маршрут с оптимизацией переменной 1, это facility 1, переменная 2, facility 2 и так далее. И оно будет таким образом брать параметры и выстраивать маршруты относительно этих параметров.

**Dan Khasis** [01:53:30 - 01:53:36]: Ты говоришь, что ты все равно должен выбрать и пролинковать default optimization?

**Igor Skrynkovskyy** [01:53:36 - 01:53:40]: Нет, мы можем автоматически это делать.

**Dan Khasis** [01:53:43 - 01:53:51]: Администратор вначале должен линковать руками, а потом автоматически оператор будет это понимать.

**Igor Skrynkovskyy** [01:53:51 - 01:54:11]: Нет, я об этом и говорю. Не автоматом-автоматом, но имеется в виду, что мы будем задефайнивать как бы верхнего уровня переменные в виде этих facility, например, и их настроек, которые будут потом выбираться при построении маршрутов множества или оптимизации.

**Dan Khasis** [01:54:11 - 01:55:32]: Я немножко по-другому говорю. Если, например, у тебя будет список facilities, появится новая колонка facilities. И facilities, например, будет default поле называться, например, default как это слово? Default optimization profile. И теперь любой юзер, который заходит в тот facility, который пролинкован с тем facility, во время планирования маршрута, по умолчанию будет pop-up. И там в клопоте будет тот optimization profile, который дефолтный. Ну да. И потом уже проблема, Игорь, что ты говоришь другая, что ты говоришь, нет, профиль такой же, но только есть override на одно переменное. Это уже философский вопрос. У тебя есть override, но теперь ты хочешь сделать business insights. Как ты сделаешь business insights? Какие профайлы пользуются? Если профайл везде такой же пользуется, а переменные разные, так теперь ты должен...

**Igor Skrynkovskyy** [01:55:35 - 01:56:06]: Извини, смотри, это же вопрос о той же самой унификации, когда у нас в одной компании есть один и тот же самый набор переменных или этих optimization профайлов, где мы говорим, что везде всегда один и тот же самый набор переменных или значений, которые мы хотим построить маршруты. И если мы чем больше будем иметь, тем больше у нас есть вероятность того, что кто-то не тот параметр будет использовать.

**Dan Khasis** [01:56:12 - 01:57:25]: Администраторы настраивают профайлы и решают, если операторы имеют право даже менять выбор этого профайла. Сейчас у нас нет этого. Окей, что у нас следующее?

**Alexey Afanasiev** [01:57:25 - 01:57:30]: Ассайн борда.

**Eugene** [01:57:32 - 01:58:38]: Так, я шарю прям. Так, первое, что мы сделали, это добавили статистику или totals внизу гряда. Она сделана была в разрезе по дню, вертикально, либо в разрезе за весь выбранный период, горизонтально, вот этот badge. Также мы улучшили date range picker, здесь добавили тип календаря, в данном случае schedule for, и добавили готовые пресеты на 7 дней, 5 дней, следующая неделя, предыдущая неделя. И также был добавлен popover на routes, такой же, как и на route-листе. Так, в принципе, по ассайн борде это все.

**Dan Khasis** [01:58:39 - 01:58:40]: На секунду, я чем-то нажал.

**Eugene** [01:58:43 - 01:58:44]: На что сфокусироваться?

**Dan Khasis** [01:58:46 - 02:01:30]: Сейчас я на большом экране открываю. Видишь, здесь такая же проблема, где 99% функционала идеальна, но отсутствие 1% не позволяет этот инструмент пользоваться. Какой 1%? Найди мне всех юзеров или покажи мне только в этом виде всех юзеров, которые недогружены или не имеют достаточно ассайненной работы. Мы не знаем. Если чувак уже имеет работу, я должен unassigned бросить. Я не знаю, кому бросить. У меня 100 юзеров, 200 юзеров, 300 юзеров. Я не могу выключить фильтр, показать только машины или юзеры, которые не задействованы на тот день. Так как все это unassigned drag-and-drop, я не могу ничего с ним делать. Нам нужен фильтр иметь скиллы, например. Скиллы должны быть новая, более формальная сущность. Скиллов нигде нет. Это как один экземпляр. Но самый легкий экземпляр это покажи мне только юзеров, которые не имеют засайненных маршрутов в какой-то день. И ты выбираешь.

**Eugene** [02:01:31 - 02:01:37]: Тогда это получается более сложный фильтр. Не просто нет засайненных маршрутов, но еще и на какой-то день.

**Dan Khasis** [02:01:37 - 02:01:52]: Нет, ну я бы поставил день сверху на сегодня. Теперь как выбрать today? Почему у нас нет shortcut на today, например?

**Vova** [02:01:52 - 02:01:56]: А здесь минимум 3 дня можно показывать.

**Dan Khasis** [02:01:56 - 02:02:01]: Но это неправильно.

**Vova** [02:02:01 - 02:02:09]: Очень будет странно здесь показать один день только. Нужно тогда придумать другой UI для вида в один день.

**Semeyon S** [02:02:11 - 02:02:16]: Можно сделать как в мобильном Google календаре.

**Vova** [02:02:16 - 02:02:28]: Да, да, да. Нужен просто другой UI. Для однодневного вида. Все это можно сделать, просто мы пока не успели.

**Dan Khasis** [02:02:29 - 02:02:47]: Если делать один день, отпутайте таймлайн на уровне каждого юзера. В рядовом режиме. В рядовом режиме отпутайте таймлайн.

**Vova** [02:02:52 - 02:03:03]: Возможно. Либо второй вариант. Там может быть таблица с дополнительными деталями в каждом юзере.

**Dan Khasis** [02:03:17 - 02:05:02]: Если у меня тысяча юзеров, мне надо найти во вторник какому-то юзеру эти два маршрута дать. Я это не могу сейчас сделать. Или на уровне каждого дня нам нужно еще прибавить один фильтр. Элементарный, например, сюда. Или даже не фильтр. Если у вас усложняет жизнь фильтр, делайте сортировку без фильтра. Где вы говорите сортируйте по total assigned route time. Конечно, у юзера без раута будет ноль. Значит, он будет сверху. Например. API можешь сортировать по любому атрибуту, который существует у маршрута. Или, например, покажи мне в фильтре все маршруты, которые имеют там особый customer location. Или покажи мне все маршруты, которые имеют хоть один адрес с особым customer. Тоже мне надо еще один заказ маршрут пролинковать туда.

**Vova** [02:05:18 - 02:05:31]: Я вижу, там написано group by none.

**Eugene** [02:05:31 - 02:05:45]: Не нужно писать group by none.

**Alexey Afanasiev** [02:06:12 - 02:06:40]: Можно просто group by и ничего не писать. Соответственно, загрузку водителя мы можем мониторить сортировкой тоже перегруженных перегруженных тоже отсортировать в обратном порядке.

**Dan Khasis** [02:06:44 - 02:07:10]: Если ты хочешь найти здесь здесь почти как будто фильтрация этого должна отличаться от фильтрации этого. Потому что я не знаю, какие скиллы нужны, чтобы этот маршрут сделать. Какие distinct скиллы нужно, чтобы этот маршрут сделать. Я не знаю, какие. Даже без алгоритма.

**Eugene** [02:07:10 - 02:07:15]: Я говорю просто чисто по-человечески.

**Dan Khasis** [02:07:15 - 02:07:26]: Если бы я здесь сделал выборку покажи мне всех юзеров, которые умеют паять и здесь я бы выбрал выбери мне все маршруты, где есть requirement паять. Я бы просто сдвинул их сюда, но я не могу.

**Vova** [02:07:31 - 02:07:44]: Если ты хочешь отфильтровать скиллы, то ты хочешь отфильтровать юзеров, имеющих эти скиллы и маршруты, которые требуют этих скиллов. И, соответственно, у тебя это общий фильтр один и тот же. Зачем их делить?

**Dan Khasis** [02:07:47 - 02:09:00]: Потому что я не хочу сейчас это объяснять. Это по разным причинам. Я могу более детально в другой день объяснить это. Если сказать это одним предложением, это то, что это не всегда пересекающие наборы. Иногда это поднаборы. Что у нас? У нас по-прежнему нет группировки здесь. У нас нет вкладывательности, фасилити.

**Eugene** [02:09:09 - 02:09:12]: Да, да, да. А нет, у нас для юзеров нет поддержки.

**Dan Khasis** [02:09:14 - 02:09:20]: Мы даже не понимаем, как вы country придумали. Что это значит, country? Country юзера?

**Eugene** [02:09:21 - 02:09:27]: Да. Здесь такой же набор, по сути, группировок, как и на team management странице.

**Dan Khasis** [02:09:28 - 02:09:33]: Team management, country нет. Я никуда не видел.

**Eugene** [02:09:34 - 02:09:48]: Да, да. Датам это было не доделано. Просто наш backend, насколько я понимаю, вот этот endpoint, который мы используем и тут, и на team management, выдает группировки. Опять же, это не 100%, но 99%.

**Dan Khasis** [02:09:48 - 02:09:51]: А как у юзера есть optimization profile? Я не понимаю.

**Igor Skrynkovskyy** [02:09:54 - 02:10:01]: Это что-то вы напутали, потому что в юзере нигде нет таких группировок.

**Alex Shulga** [02:10:06 - 02:10:16]: Извиняюсь, на team user вообще нет группировок сейчас, если на то пошло, но насколько мне известно, у юзера есть связь с optimization profile.

**Igor Skrynkovskyy** [02:10:18 - 02:10:23]: Она есть, очевидно, но группировка. Понял, окей.

**Dan Khasis** [02:10:26 - 02:10:32]: У юзера нет optimization profile. Оптимизация профайла, как на шутер.

**Alex Shulga** [02:10:34 - 02:10:47]: Нет, они же, у нас есть связь с рутом, у нас есть связь с тем, кто создал этот optimization profile, других связей нет. А есть с драйвером.

**Dan Khasis** [02:10:52 - 02:10:55]: У драйвера не должно быть optimization profile.

**Igor Skrynkovskyy** [02:10:59 - 02:11:06]: Нет, наоборот, в optimization profile есть драйвер, насколько я помню, который сейчас.

**Alex Shulga** [02:11:07 - 02:11:32]: Нет, извините, пожалуйста, давайте я просто вот, может быть, я покажу экран или, пожалуйста, тот, кто шарит, зайдите в team management и откройте любого пользователя, редактирование любого пользователя. Это другое. Это заassigned пользователь, который связан или ассоциатирован с конкретным optimization profile.

**Dan Khasis** [02:11:33 - 02:11:46]: Это значит, что у него есть право, они обязаны пользоваться, это никак, это не значит, что это его, просто разрешение, что он имеет право пользоваться этим.

**Igor Skrynkovskyy** [02:11:47 - 02:11:52]: Это дефолтная вещь, которая используется в рамках вот этого пользователя.

**Dan Khasis** [02:11:53 - 02:14:38]: Водитель ни разу в жизни не делает свой маршрут почти для больших фирм, ему делают маршруты. Если говорить кратко, все группировки на assignment странице полностью неправильные и ненужные. Группировка должна идти или по скиллам, или по facility, или по машине, или по типу, например, какое количество моих менеджеров сегодня работают. не только водители, а менеджеры или vehicle type, у тебя есть маршрут, маршрут имеет тип, водитель привлекован к маршруту, ты хочешь группировать по vehicle type, чтобы понимать сколько грузовиков, сколько кранов, сколько тракторов, и потом, когда ты включаешь группировку по типу машины того маршрута, ты уже знаешь, что у тебя есть 10 танков, почему у тебя только 8 танков задействованных. Если у тебя есть 10 машин в одном facility, есть ожидание, что все 10, если они не задеактивированы, что ты пользуешься все 10 каждый день. Потом мы накладываем уже все правила, о которых Вова рассказывает. Сегодня тот работает, не работает, делает, не делает, и так далее. Окей, что следующее?

**Alexey Afanasiev** [02:14:38 - 02:14:43]: Алексей, покажи, пожалуйста, data retention.

**Dan Khasis** [02:14:44 - 02:14:54]: Мы data, мы dispatch board запустим или нет? Мы не можем не делать ни одного продажи ни в один service business без него.

**Alexey Afanasiev** [02:14:55 - 02:14:58]: Мы его делаем, но пока он показывает.

**Dan Khasis** [02:15:00 - 02:15:10]: Может быть, вы неправильно делаете. Может быть, вы придумали спеки, которые нам не нужны.

**Alexey Afanasiev** [02:15:15 - 02:15:18]: Предлагаешь посмотреть сейчас? Давайте посмотрим.

**Dan Khasis** [02:15:19 - 02:15:58]: Я предлагаю, если бы dispatch board, чтобы мы генерировали какой-то пустой маршрут и потом заказы кидаются в этот пустой маршрут руками, как insert, stop, insert, stop, insert, stop. И на этом дело заканчивается. И остается только один вопрос. Настройки типа машины того маршрута. Если, например, это большая машина, мы линкуем vehicle profile туда как-то. Если это маленькая машина, мы ни о чем не заботимся.

**Semeyon S** [02:16:00 - 02:16:17]: Мы, получается, на этапе создания пустого маршрута должны уточнить или вообще route settings вызвать, чтобы задать настройки маршрута базовые?

**Dan Khasis** [02:16:18 - 02:16:23]: Я бы не открывал route settings. Зачем мучиться?

**Vova** [02:16:27 - 02:16:37]: Предполагалось, что это даже не один маршрут, сразу на несколько машин с водителем.

**Dan Khasis** [02:16:37 - 02:16:47]: И в начале дня я не думал, что это другая вещь.

**Vova** [02:16:47 - 02:16:50]: Ты говоришь, ты возвращаешься назад, Вова, на интеллигентство.

**Dan Khasis** [02:16:50 - 02:17:10]: Насчет автоматики. Нет, у меня есть чувак, я хочу drag-drop, drag-drop, drag-drop. Ты говоришь сейчас насчет dynamic dispatch. Ты говоришь насчет умного диспетча. Мы не говорим насчет умного диспетча. Мы не дошли до умного диспетча.

**Vova** [02:17:12 - 02:17:36]: Нет, я просто говорю о том, что каждая строчка в диспетч-борде не обязательно должна быть как бы отдельным маршрутом независимым друг от друга. Будет здорово, если они будут сразу зависимые друг от друга. Если они находятся теоретикально в одном месте, было бы здорово, чтобы они были одной оптимизацией. Это тогда нам развяжут руки потом, когда мы захотим делать интеллигентную оптимизацию.

**Dan Khasis** [02:17:39 - 02:17:45]: Я просто не уверен, что это оптимизация. Пытаюсь сказать, что я не думаю, что это оптимизация.

**Semeyon S** [02:17:52 - 02:19:09]: Я пытаюсь понять одну маленькую деталь. Если нам важен тип автомобиля, то есть профиль, то при первоначальном создании маршрута, когда мы перебрасываем ордера или локейшены на таймлайн юзера, мы его должны как-то задать. Или как-то автоматом выбрать из существующих. Попап можно при создании какой-то сделать. Как-то ради одного лекал профиля это делать или автомобиля. Немножко странно и будет некрасиво. Можно брать дефолтный автомобиль, если у этого пользователя уже есть. Вот. Если мы сразу используем оптимизацию, у нас должны быть какие-то дефолтные настройки, чтобы не вызывать траут сеттингс и все такое. Мы это можем через дефолтный оптимизацион профайл сделать. Если его нет, можем в бэкграунде его создать.

**Dan Khasis** [02:19:15 - 02:20:25]: Я вам дам пример. У вас есть 1800 Flowers. 1800 Flowers хотела, чтобы мы ордер сгенерировали, показывали этому водителю, что приходят ордер, и потом водитель имеет право взять ордер, который он хочет взять. Правильно? Да, есть такое. И как мы решили эту проблему? Мы ее решили через создание маршрута. Почему? Потому что Notes, Photos и так далее, они же все связаны с маршрутом и с Destination. Хотя это не идеально, это не совсем правильно, но это как сейчас есть. Правильно?

**Semeyon S** [02:20:25 - 02:20:27]: Правильно, да.

**Dan Khasis** [02:20:30 - 02:22:04]: Когда человек по молчанию загружает диспетчборд, диспетчборд это не для маршрутов. То есть, если они хотят делать оптимизацию, ради бога, делайте оптимизацию. Или если ты по молчанию включай все, делай настройки. Ты хочешь, чтобы по молчанию какой твой дефолт? Какие твои дефолты? Мечты, которые ты хочешь видеть? Какие твои задумки? Идея в том, что эти люди при создании этого сегодня есть 10 водителей. Они действительно хотят руками выбирать все для 10 водителей. Они хотят просто кидать на имя и система будет автоматически оптимизацию делать на лету. Ты хочешь такого? Он кидает, он кидает, он кидает. Если это было включено в режиме оптимизации, значит он будет видеть автоматическую оптимизацию. Каждый раз новый адрес входит. Хуяк, оптимизация, оптимизация, оптимизация. То же самое, если он выключает это, пусть он кидает руками, когда он хочет. Любой заказ на любого водителя с базовыми какими-то параметрами инициализируется маршрут и оптимизация.

**Semeyon S** [02:22:11 - 02:22:20]: Понял. Ответ на мой вопрос настройки и дефолтные значения в настройках.

**Dan Khasis** [02:22:21 - 02:22:27]: Я даже не понимаю, что вы делаете в DispatchBoard, если честно. Я вообще не понимаю, что происходит.

**Semeyon S** [02:22:31 - 02:22:43]: В DispatchBoard сейчас вот этот вот функционал с созданием маршрута. Он через оптимизацию, он не реализован.

**Dan Khasis** [02:22:43 - 02:23:59]: У меня DispatchBoard имеет два типа поведения. Это почти как иметь кнопку Assign User к ордеру, где список ордеров и юзер имеют пивитинг и потом они имеют ячейки и вместо того, чтобы кликать, ты drag and drop заказ на водителя. Это один вариант. Второй вариант. У тебя есть водитель. Тебе пофиг. Маршруты тебе все пофиг. Ты просто говоришь, я этот заказ направляю на этого юзера. Третий вариант. Робот автоматически по правилам авто Assign заказы как у Uber Eats на разных юзерах. Четвертый вариант. Каждый раз, когда ты кидаешь заказ на какого-то юзера, каждый раз, когда ты это делаешь, она начинает переоптимизировать маршрут. То есть вы понимаете, что есть бизнесы, где они не хотят маршрута, они просто хотят заказа.

**Vova** [02:24:02 - 02:24:24]: Да, но в нашем мире в нашей терминологии просто маршрут. У нас же есть трекинг. По сути, заказы, закиданные на водителя, их очередность, вот это и есть маршрут. И фактически, потом мы делаем трекинг, мы следим, как он появится.

**Dan Khasis** [02:24:25 - 02:24:27]: Ты не прав. Ты не прав.

**Vova** [02:24:28 - 02:24:36]: Это может быть не обязательно быть маршрут, но мы храним всю эту аналитику на маршруте. Мы ее просто потеряем и следами будет не маршрут.

**Dan Khasis** [02:24:36 - 02:24:40]: Нет, это неверно. Это неверно. Давай идем на следующую тему.

**Alexey Afanasiev** [02:24:44 - 02:24:45]: Окей, Алексей, Data Retention.

**Alexey Gusentsov** [02:24:47 - 02:25:07]: Что у нас в последней уже финальной итерации собственно изменилось. Значит, Вова предоставил новость того палитру. У нас теперь вот такая палитра более симпатичная.

**Dan Khasis** [02:25:09 - 02:25:28]: Я думал, что мы сказали, что мы ни секунды больше не тратим на это, потому что 10 попыток были испорчены и мы взяли полностью паузу на всю работу с этим. Это все на записи было. Почему это было игнорировано?

**Alexey Afanasiev** [02:25:37 - 02:25:40]: На записи мы поставили все на паузу?

**Dan Khasis** [02:25:43 - 02:26:05]: Под записью конкретно мы решили, что после 10 попыток и 5 месяцев хуевых решений, что мы полностью забыли об этом. Поскольку с текущими ресурсами, подходами, идеями мы не можем сделать, что нужно сделать. И что мы сказали, мы забыли об этом, мы не трогаем это, мы не делаем это, мы не смотрим на это.

**Alexey Afanasiev** [02:26:09 - 02:26:11]: У меня не было такой информации.

**Igor Skrynkovskyy** [02:26:19 - 02:26:23]: На самом деле я тоже не помню такой информации, что мы остановили работу.

**Dan Khasis** [02:26:27 - 02:26:43]: Используйте AI и прослушайте предыдущие звонки, если вы мне не верите. Я сказал, здесь все неправильно, здесь все неправильно, здесь по-прежнему все неправильно, зачем мы на это смотрим?

**Igor Skrynkovskyy** [02:26:47 - 02:26:53]: Особенно к Эдару. Особенно к Эдару.

**Dan Khasis** [02:26:53 - 02:26:58]: Давай, забудьте об этом, пожалуйста, забудьте.

**Alexey Afanasiev** [02:26:59 - 02:27:06]: Сергей, покажешь то, что ты хотел показать? Привет.

**Serhii Kasainov** [02:27:06 - 02:27:48]: Привет. То, что хотел, не покажу, потому что я не смог победить ЦАИ, но покажу что-нибудь другое. Дэн, ты просил группировку и поиск в фильтрах. Мы сделали такую первую версию. Тут, возможно, где-то надо еще поправить лейблы, но в остальном оно работает. Это на порядок удобнее, чем было до. Это мы делали без дизайна, но, насколько я знаю, Вова это видел и возражений у него серьезных не было.

**Vova** [02:27:50 - 02:27:52]: Я пообещал вам, что дам дизайн.

**Serhii Kasainov** [02:28:00 - 02:28:03]: Мы можем дизайн дождаться и это доделать.

**Dan Khasis** [02:28:06 - 02:28:22]: А мне нужно дизайн. Это сделано на 99% правильно, но мне нужен дизайн новый на это. Что вам нужно, это API поменять на back-end. Я с Игорем этим занимаюсь.

**Serhii Kasainov** [02:28:24 - 02:28:29]: А почему API?

**Igor Skrynkovskyy** [02:28:29 - 02:28:34]: Потому что это все конфигурировано должно быть.

**Dan Khasis** [02:28:36 - 02:29:21]: И централизовано, и не захаркоджено. Один список колонок, один список групп, одна mapping линковка между ролями и группами, и кто имеет право что видеть, и четвертая линковка между predefined views и этими column IDs. Потом пятая линковка, которая показывает композитные как их звать, какие колонки влияют на другие колонки, вкладывательность.

**Serhii Kasainov** [02:29:32 - 02:29:51]: У нас есть задача, что мы должны колонки подтягивать с back-end, вместе со всеми параметрами, почему мы там можем фильтровать, как мы должны какую колонку форматировать. Это один из шагов к этому. Мы это можем сейчас использовать, можем отложить, пока мы не доделаем все.

**Dan Khasis** [02:29:52 - 02:30:22]: Я не понимаю, что ты говоришь. Все, что ты сейчас показываешь, идеально для наших целей, но back-end надо подогнать и сделать правильным. Что ты сейчас показываешь, это очень хорошо. Надо запускать прямо сейчас. Потом надо рефакторить и делать новую версию с правильными back-end API. Back-end API должен подсказывать и все группировать правильно.

**Serhii Kasainov** [02:30:26 - 02:30:43]: Хорошо, но лейблы мы не должны делать такие, как мы делаем в колонках вот здесь, потому что у нас в группе уже написано assignment, и нам не нужно перед каждым этим дублировать assigned user, assigned facility, assigned vehicle. Тут более сокращенные лейблы должны быть.

**Dan Khasis** [02:30:44 - 02:32:21]: Это хорошо, если это так есть, но иногда будет 2 или 3 этапные вещи в какой-то момент, правильно? Мы не будем иметь просто так destinations иметь нельзя просто так destinations. Что это значит? Это total? Или это top land? Или что это? Никто не знает, что это. Я не знаю, что это. Правильно, ты помнишь, мы говорили насчет 2 или 3 этапного header меню, что в какой-то момент надо будет включить 2 или 3 этапное меню, и потом там будет, например, категория номер 1, это будет count, 2 или total, 2 будет average, 3 будет что-то другое, и потом там будет подголовок, route, подголовок, key metrics, подголовок, destinations. Теперь любой придурок будет знать, смотри, это колонка насчет маршрута, остановок, total, и потом там всегда должна быть пара, не просто total. Вы сделали total, вы сделали pending, но вы пропустили что? Completed. Почему? Потому что вы его поставили в destinations, хотя completed — это одна из ключевых метрик. Так почему она не в key metrics или в destinations, если на то пошло?

**Serhii Kasainov** [02:32:25 - 02:32:29]: Потому что AI еще не так умел, как иногда хотелось бы.

**Dan Khasis** [02:32:30 - 02:32:39]: Но я думаю, что я отсортировал-то для вас в spreadsheet или когда я писал, если я правильно помню.

**Serhii Kasainov** [02:32:43 - 02:32:44]: Найдем, поправим.

**Dan Khasis** [02:32:49 - 02:32:52]: Все правильно сделано, в теории.

**Serhii Kasainov** [02:32:53 - 02:33:29]: Хорошо, спасибо. Следующий момент, который я хотел показать, но который показать не получится. Мы это все вместе с группировками хотим затянуть в optimization snapshot, потому что сейчас он у нас основной при создании маршрута. И здесь должна быть карта, здесь должны быть группировки, здесь должны быть точно такие же хорошие фильтры. Единственное, что здесь неправильный left sidebar. Вова перед отпуском сделал макет. По-моему, вот это он. Если он близок к правильному, мы бы его взяли в ракет.

**Dan Khasis** [02:33:33 - 02:33:34]: О чем речь идет, я не понимаю.

**Serhii Kasainov** [02:33:36 - 02:33:39]: Левая колонка optimization snapshot.

**Dan Khasis** [02:33:39 - 02:33:42]: Она слишком узкая?

**Serhii Kasainov** [02:33:42 - 02:33:46]: Нет, ты писал замечание, что неправильный переключатель, который сейчас есть.

**Dan Khasis** [02:33:47 - 02:34:07]: Да, и новый макет по-прежнему неправильный. Я понимаю этот вопрос, хорошо. Я бы не спешил это делать, но это неправильно. То есть это не трагический вариант, но это неправильно.

**Serhii Kasainov** [02:34:11 - 02:34:16]: Но тут вопрос приоритетов. Ты просто много замечаний писал именно по optimization snapshot.

**Dan Khasis** [02:34:16 - 02:35:34]: Самое важное это то, что самое важное это то, что сверху надо иметь полное понимание, я тебе дам пример. Ты помнишь мы в начале разговора говорили насчет multi-monitors? Правильно? Множество экранов. Да. И в контексте ситуации, где ты залил csv файл или тебе кто-то залил какой-то файл, ты полностью не понимаешь как юзер, ты не понимаешь как сравнить эти файлы. Ты не понимаешь как их сравнить, потому что на одном экране ты открываешь одну оптимизацию, на втором экране ты открываешь другую оптимизацию. И ты будешь на них детально рассматривать. Вот я здесь использую такие-то параметры, я получил этот ответ. Используя эти параметры, я получил другой ответ. Понимаешь, что я имею ввиду?

**Serhii Kasainov** [02:35:34 - 02:35:50]: Понимаю, но для этого нам нужно то, что тут нарисовано. Нужна карта, нужен timeline и оно должно открываться вот примерно в таком виде по умолчанию сразу после планирования маршрута. А не табличка с маршрутами и все.

**Dan Khasis** [02:35:53 - 02:36:19]: Самое важное это агрегаты. Все другое это входные параметры и агрегаты, потому что ты как analyst, ты обязан понимать, на что ты смотришь. Ты прямо сейчас откроешь, ты ни черта не будешь понимать, на что, о чем речь идет. Какие машины, сколько машин, какие profiles.

**Serhii Kasainov** [02:36:19 - 02:36:33]: Понимаешь? Это все наверно в summary есть.

**Dan Khasis** [02:36:33 - 02:36:40]: Почему мы не можем embed наш route view сюда?

**Serhii Kasainov** [02:36:42 - 02:36:55]: Это то, что мы хотим делать. Просто Вова нарисовал, что тут карта, это отдельная таба. Тут нет возможности, кроме как на двух экранах, открыть и список маршрутов и карту.

**Dan Khasis** [02:36:58 - 02:37:19]: Нам не нужно и список маршрутов и карты, нам нужно почти как вы сделали в новом routes map. Это то же самое, как новый routes map. Просто там идет фильтр по optimization ID. Все другое один в один.

**Serhii Kasainov** [02:37:20 - 02:37:28]: То есть вот эту правую часть мы можем в принципе смело делать. Левая часть пока еще не опробована.

**Dan Khasis** [02:37:28 - 02:37:35]: Проблема с левой частью, что все вещи насчет кодных настроек по-прежнему отсутствуют.

**Vova** [02:37:41 - 02:37:52]: Кодные настройки можете покрутить там справа лежит макет новых кодных настроек. Называется settings. Это показывает фигму. Покрутите направо.

**Serhii Kasainov** [02:37:53 - 02:38:15]: Сейчас. Тут можно долго крутить, если чуть-чуть подскажешь.

**Vova** [02:38:16 - 02:39:26]: С этим не вижу. Section 1 который. Там рядышком разложена вся форма целиком. Здесь дерево видно в категоризированном виде все настройки, которые были использованы при создании оптимизации. Можно провалиться внутрь вегикл профайлов и всяких других профайлов. Можем это опробовать и брать в разработку.

**Dan Khasis** [02:39:32 - 02:39:54]: Нам намного важнее сделать embed routes map для той оптимизации, чем делать любые вещи связанные с data retention.

**Serhii Kasainov** [02:39:55 - 02:39:55]: Я понял.

**Dan Khasis** [02:39:58 - 02:40:23]: Если вы посмотрите на это дерево, настроек, каждая из этих вещей хорошая очень и она должна идти на ссылку оригинальной сущности. Так же как в route списке destination, если там есть customer id, который мы задетектировали, что это один из их customers, это должна идти на ту сущность, линковка.

**Vova** [02:40:30 - 02:40:46]: Здесь могут встречаться facilities, здесь могут встречаться vehicle profiles, vehicles users в этих настройках. Естественно, да, это будет линк.

**Serhii Kasainov** [02:40:46 - 02:41:47]: Так, мой последний вопрос. Скорее вопрос. Мы форму ордеров попытались добавить кustomer. И оно у нас не вписывается в порядок этой формы, потому что мы кustomer выбираем здесь. Потом у нас выпадает выбор customer location, у него еще есть контакты. И это все должно привести к заполнению адреса. Но адрес ордера у нас в самом начале, вот здесь. И мне сейчас это выглядит так, что кustomer должен уехать на первое место, а остальное должно сдвинуться вниз. И мы сначала выбираем кustomer, а потом... Ну, или если у него нет location, или мы не выбрали кustomer, то только тогда мы вводим адрес руками.

**Dan Khasis** [02:41:52 - 02:42:04]: У меня Slack почему-то не грузит work run. А, сейчас загрузил. Окей. Пусть Вова скажет, что он хочет, потом я скажу, что я хочу.

**Vova** [02:42:06 - 02:42:41]: Сергей прав. Кustomer должен быть на первом месте. Если выбираешь кustomer, в таком случае все остальные поля автоматически заполняются. Но еще, возможно, второй сценарий, когда ты принимаешь новый заказ для заказчика, который еще в систему не введен. В таком случае ты должен иметь возможность динамически прямо отсюда, через форму принятия заказа создавать кustomer. То есть оно в две стороны должно работать. Один вариант.

**Dan Khasis** [02:42:41 - 02:43:23]: Вова описывает ситуацию, которая small business. Вова описывает small business ситуацию. Вы по-прежнему не хотите верить, что наша система не будет иметь авторитетный список customers. Мы не система, которая не будет иметь авторитетный список customers. Я не говорю, что это не будет. Но мы должны стремиться, чтобы все клиенты пользовали ERP, как KSP, Oracle или NetSuite. Мы не должны быть ответственными за создание customers.

**Vova** [02:43:28 - 02:43:38]: Для такой ситуации как раз первый вариант. Тогда ты просто ищешь кustomer по пользе данных. Если он находится, все варианты автоматически заполняются данными.

**Serhii Kasainov** [02:43:45 - 02:43:51]: При необходимости ты можешь customer location подредактировать. Если его нет, ты можешь его создать.

**Dan Khasis** [02:43:52 - 02:45:44]: Ты должен иметь право редактировать из-за причины, что у тебя может быть customers. Я вам дам пример. Я покупал камни для своего дома. И первый заказ я заказал камни в один адрес. Второй заказ я заказал камни во второй адрес. И в третий раз я заказал камни в третий адрес. И ни один из этих заказов не был recurring. Заказы, кстати, каждый из них был один раз. Значит, если они в CRM или ERP создали для меня customer name по DAN, окей. Они создали, так создали. Но location каждый раз полностью другой. И ни один из этих location как бы не повторяющий. То есть они не делают повторяющую работу там. В отличие от чуваков, которые делают мои газоны, они еженедельно приезжают. Еженедельно они обслуживают. В том случае я действительно один customer, который имеет фиксированные customer locations, которые они обслуживают еженедельно. И адрес там не меняется еженедельно. Но если после шторма мне нужно помочь родственникам, я хочу сделать один заказ на какую-то экспромтную ситуацию, где я использовал своего старого газонокосителя с огромной машиной, и он подъехал и увез весь мусор, чтобы ветер большой не сдул все к чертовой матери.

**Serhii Kasainov** [02:45:51 - 02:46:00]: Хорошо. По финалу нажатие кнопки create order по-любому означает, что order подвязан под customer и под location.

**Dan Khasis** [02:46:01 - 02:47:14]: Мне кажется, мы не смотрим на это опять правильно. Мы должны смотреть это с точки зрения персоны и с точки зрения типа бизнеса. Бизнес, который работает quick commerce или point of sale, у них почти никогда нет повторяющих customers. Они всегда будут абстрактные, они всегда будут произвольные. А фирмы, которые крупные, за которыми мы гоняемся, они имеют фиксированный список товаров, фиксированный список покупателей, фиксированный список магазинов этих покупателей. И они не делают каждый раз, не создают адрес. А если создают адрес, иногда они только это после контракта. Может быть это фирма, группа ребят, которые контрактами занимаются, это создают. Их называют, например, procurement. Это такого типа фирма.

**Serhii Kasainov** [02:47:15 - 02:47:21]: Но есть customers, которые просто привыкли уже так пользоваться. Мы им поломаем флоу, если мы сейчас что-то переделаем.

**Dan Khasis** [02:47:22 - 02:47:58]: Я понял. Нет, ты совершенно прав. Мы должны поддерживать обои ситуации. Иначе мы потеряем или больших, или потеряем средних. Я думаю, что более философское решение. Хотим ли, чтобы они могли делать override customer location, который выбрали, который они уже настроили в системе. Вот, я думаю, какой самый важный вопрос.

**Alexey Afanasiev** [02:47:58 - 02:48:03]: Потому что если ты будешь каждый раз давать возможность делать override, тогда какой смысл иметь customer location?

**Dan Khasis** [02:48:03 - 02:48:09]: Я думаю, что администратор должен решать это, а не мы.

**Vladyslav Feshchenko** [02:48:09 - 02:48:20]: А почему бы нам не вывести сюда еще второе поле, если мы выбрали customer, все его локейшены сюда? Ну, каким-то дропдауном. Нет? Это само собой.

**Serhii Kasainov** [02:48:20 - 02:48:22]: Но просто кто выбрал локейшен...

**Dan Khasis** [02:48:23 - 02:48:26]: Да, это автокомплент, само собой, да.

**Serhii Kasainov** [02:48:36 - 02:48:58]: Хорошо, последний вопрос по этой форме и у меня все. Если у нас адрес уезжает вниз, карта у нас все равно остается сверху, как первый элемент в форме? Вопрос больше к Вове. Да. У меня все.

**Dan Khasis** [02:48:58 - 02:50:13]: Спасибо. Я не уверен, что она должна уходить полностью. Я не уверен, что она должна оставляться огромной. После того, как ты подтвердил адрес, какой смысл опять видеть это в полном размере, один несчастный адрес. И потом полэкрана это закрывать. Спасибо. Окей. Что следующее у нас?

**Alexey Afanasiev** [02:50:17 - 02:50:19]: Артур, у тебя вопросы были?

**Alex Shulga** [02:50:20 - 02:51:35]: Артура, нет. Я, если можно, озвучу вопросы по facilities, да. Значит, извиняюсь сразу, они повторяющиеся скорее всего и я прошу вас ответить более-менее четко на каждый. Первый вопрос. Про обязательность атрибуции сущностей с facility. Сейчас мы позволяем пользователю выбирать в большинстве случаев, хочет он атрибутировать сущность с facility или нет. Обязательной атрибуции никакой нет. Например, при планировании маршрута мы можем указать здесь facility, но можем и не указывать никакую facility, значит, атрибуция необязательна. То же самое при создании ордера, при создании кастомера, customer location. В случае, если facility не указано, не выбрано явно, у нас, по-видимому, будет применяться fallback сценарий, когда сущность, маршрут или ордер или так далее, будет атрибутирован со всеми facility, которым имеет доступ текущий будет.

**Dan Khasis** [02:51:35 - 02:51:44]: Это неверно, нет, почему ты это сказал? Нет, конечно, defaulted to null и все.

**Igor S.** [02:51:46 - 02:51:54]: У нас сейчас есть для маршрутов, для оптимизации такой fallback. Для всех других сущностей мы null ставим.

**Dan Khasis** [02:51:55 - 02:52:06]: Да, но иногда ты хочешь создать что-то и ты не хочешь assignment делать, пока ты не решил откуда ты хочешь это делать.

**Alex Shulga** [02:52:08 - 02:52:35]: Дэн, с этим связана проблема и очень большая. Значит, если мы введем дальше скоп видимости ограниченной facility и пользователь будет иметь возможность не указывать facility, да, и мы будем создавать ордер, например, у которого facility null, а по факту это будет означать, что текущий пользователь сразу же потеряет доступ к этому ордеру.

**Dan Khasis** [02:52:35 - 02:53:08]: Я не думаю, я понимаю, что ты говоришь, но это неправильно. Это идет опять возвращается к поведению и к настройкам, что администратор хочет. Хочет ли администратор, чтобы люди видели unassigned entities. И если да, тогда, если нет, так нет, тогда только некоторые типы ролей будут видеть unassigned entities. Не все, но некоторые.

**Alex Shulga** [02:53:10 - 02:54:01]: Давай я просто вот решение, чтобы было более четкое, значит, мы тогда делаем что? Первое, нам нужна какая-то настройка. Эмил, мы уже на каком-то звонке проговаривали это с Вовой и тобой. Значит, настройка на уровне пользователя, на уровне саб-ьюзера, которая позволяет ему видеть сущности, которые не были атрибутированы, и позволяет ему не атрибутировать сущности ничем. А для всех остальных случаев, когда у пользователя не включена эта настройка, он должен обязательно атрибутировать сущность с facility, или же она будет атрибутирована за него, всеми facility, которым он имеет доступ. Я правильно понимаю?

**Vova** [02:54:01 - 02:54:10]: Мне почему-то кажется, что атрибутировать сущность всеми facility неправильно, потому что в итоге она уйдет в аналитику.

**Dan Khasis** [02:54:11 - 02:54:12]: Конечно, это неправильно.

**Vova** [02:54:13 - 02:54:19]: Одна entity, одна атрибуция. Это сломает нам аналитику.

**Dan Khasis** [02:54:20 - 02:54:37]: Здесь не в этом даже дело, это просто идиотство. Они пытаются сделать какой-то workaround, каких-то legacy вещей в системе, которые полностью вместо того, чтобы сделать правильно, мы пытаемся сделать hack.

**Alex Shulga** [02:54:38 - 02:55:11]: Окей, тогда как должна вести себя система, если пользователь не имеет доступа к неатрибутированным facility? Предположим, у нас есть такая настройка, и для этого пользователя она выключена, для этого саба. Пользователь, выходит, должен обязательно атрибутировать сущность с facility при создании, так? Нет. Но если он не может видеть неатрибутированные сущности, тогда он не атрибутирует и сразу теряет доступ. Как выйти из этой ситуации?

**Dan Khasis** [02:55:11 - 02:57:20]: Я тебе дам несколько экземпляров. У тебя есть высокого уровня, у тебя есть администратор или вице-президент. У меня, кстати, через 36 минут демонстрация с этим газовым клиентом, который Хван делал. Как это работает? Это работает таким образом, что у тебя есть, например, regional manager. Regional manager по умолчанию видит все о всем. Если ты regional manager пролинковал к той какой-то географии, он только будет видеть то, что в той географии. Если ты к той географии пролинковал facilities, тогда он будет видеть только те facilities в той географии, на которой он или напрямую пролинкован, или родительски пролинкован через географию. Но потом другая ситуация возникает. Какая ситуация? Ситуация, что он делает и создает маршрут, и маршрут, который он создает, имеет или не имеет пролинковку на facilities. То есть он создал, как сказать, сироту. Правильно? И вы боитесь, что он потеряет эту сироту. Но проблема в том, что если у него нет ни одного facilities пролинкованного, он все равно ничего не будет видеть и делать.

**Alex Shulga** [02:57:20 - 02:57:24]: А если у него есть facilities пролинкованного? То есть вот у меня, например, есть...

**Dan Khasis** [02:57:24 - 02:59:18]: Если есть, я тебе отвечу, если есть пролинкованные facilities, тогда у него начинается такая ситуация. Какая ситуация? Ситуация, что администратор решает... Такой вопрос важный. Какой вопрос? Администратор решает вопрос, разрешаете ли вы создавать unassigned объекты, например. И потом они говорят, да, я разрешаю создавать unassigned orders. Так в какой-то момент должна быть какая-то ответственная группа кого-то, которые должны видеть и разгребать всю эту сироту. Получается, что это может быть этот же юзер, если у него достаточно высокая роль, как, например, администратор или и так далее. Но это может быть back-office команда, никто не знает. Наша проблема, мы не позволяем динамические роли настраивать. Чтобы довести мысль до ума, ситуация, которую вы спрашиваете насчет... Если мы по умолчанию... Давайте сделаем по умолчанию, что они имеют право только создавать сущности и линковать их facilities, на которые у них есть доступ. То есть, если мы тебя пролинковали к одному facility, ты обязан выбрать хоть один facility из этого списка. Ты обязан это сделать. Там нет дефолтов. Обязательное поле. Обязательно, по умолчанию. Но это же сломает все к чертовой матери всем юзерам.

**Alex Shulga** [02:59:20 - 02:59:26]: Обязательное поле в том случае, если выбрано... Если у этого пользователя есть атрибуция хотя бы с одной facility, да?

**Dan Khasis** [02:59:27 - 03:01:32]: Да. А если нет, тогда ничего не меняет. Все остается как есть. Сейчас же чувак может... Отсутствие facilities это значит, что фирма не пользует facilities. Если так действительно и есть, тогда это что-то меняет. Отсутствие есть отсутствие. Я бы сказал, что нам риск ниже показывать все unassigned всем, чем прятать unassigned и никому не показывать. Потому что намного болезненнее в одной ситуации ничего не показывать. И намного болезненнее в другой ситуации слишком много показывать, чтобы была утечка как бы секретных данных. Например... Я дам пример аптеки. У тебя есть 100 аптек в 25 городах. И теперь у тебя возникает проблема или вопрос. Хочешь ли, чтобы доктора в Калифорнии или рабочие в Калифорнии видели все заказы, которые никак с ними не связаны вообще в Нью-Йорке или это во Флориде? Мы же, в принципе, даже нарушаем хиппу. Мы показываем unassigned вещи неправильным людям. В принципе. Правильно? То есть администратор должен решать это.

**Alex Shulga** [03:01:36 - 03:01:55]: Окей. Тут еще вопрос связанный с этим. Это для всех ли сущностей вот эти правила одинаковые? Или у нас есть разные правила для маршрутов, для ордеров, для кастомеров?

**Dan Khasis** [03:01:55 - 03:02:45]: Если бы мы были Oracle или SAP, мы бы могли правильно создать таблицу на уровне мембера, которая говорит, что вот это список всех сущностей, вот типов, вот это список всех юзеров. И есть третья таблица, которая линкует всех юзеров, всех объектов и их дефолтное поведение для какой-то особой настройки. Потому что если мы будем опять, как всегда, хрыль кожи, придет очередной клиент и спросит очередную вещь насчет этого. И скажет, почему это есть или нет, почему это так выглядит, почему мы не можем менять и зачем нам мучиться этим?

**Alex Shulga** [03:02:52 - 03:03:16]: Правильно ли я понимаю, что сейчас в этой версии достаточно одного сета пермишенов, который будет говорить, что например, мы видим неатрибутированные, например, ордера и маршруты, и кастомеры, и кастомер локейшенов. А уже в следующих версиях мы можем прийти к тому, что пермишены будут раздельными, так?

**Dan Khasis** [03:03:17 - 03:04:27]: Я думаю, что нам лучше сделать просто эту таблицу и изначально идку и потом без UI, сделать ее изначально без UI, сделать только API, сделать только таблицы и потом если надо, подточить UI, а вначале сделать это Max или Хван, или кто-то будет это модифицировать во время анбординга. Мы уходим дальше и дальше от что клиент придет и будет сам волшебно все настраивать. Они нихуя не знают. Почти никто, наши собственные рабочие не знают о 90% нашего функционала. Пойди на support команду. Думаю, что они знают как работает половина нашей системы. Я думаю, что они не знают 90% Я не знаю.

**Alex Shulga** [03:04:27 - 03:04:33]: Я здесь 6 лет и ничего не знаю еще. Окей, я понял. Спасибо большое.

**Dan Khasis** [03:04:41 - 03:05:19]: Мы можем согласовать с тобой и с Игорем в акент таблицу, которая подходит к этому и потом по этой таблице возвращать данные. И потом это почти как Advanced Configuration Keys в отличие от Advanced Configuration Keys они не типоризованы и с ними очень удобно работать с точки зрения палковых апдейтов и другого типа решений и действий.

**Alex Shulga** [03:05:21 - 03:06:34]: Понял. Спасибо. Можно тогда следующий вопрос, да? Что хочешь, можно спрашивать. Окей. Значит, есть вопрос, нужно ли должны ли быть отдельными пермишены для атрибуции юзеров и виклов и других сущностей. Потому что насколько я понимаю у нас будут какие-то, например, Regional Managers которые принимают на работу водителя и, соответственно, должны завести его в систему и проставить ему какие-то facility. Но у нас также будут диспетчеры, например, которые занимаются ордерами, занимаются маршрутами и так далее. И может быть у них будет доступ к нескольким facility, они будут другие сущности, ордера, кастомеров, кастомер локейшенов сами перекидывать между facility. Как уже было сказано, что может быть они будут решать, с какой facility это правильнее будет выполнить этот заказ.

**Dan Khasis** [03:06:35 - 03:10:06]: С классической ситуацией в логистике, которая называется Centralized или Decentralized Routing или Centralized Dispatch. Идет разговор к тому, что эти действительно диспетчеры или другие люди или другие типы юзеров, они решают что куда распределять. И ты тоже прав, что Regional Manager иногда будет иметь не то, что меньше прав, но другие права. Потому что есть централизованный диспетчер, где Техас ответственный за всю страну. А есть десентрализованный, где Техас не ответственный за всю страну. И Нью-Йорк делает свои дела, потому что они знают своих клиентов лучше. И чувак из Нью-Йорка не будет и не должен там знать и париться как бы что происходит в Калифорнии. Но, например, центральный логистик, ребята, будут решать, из какого склада что-то посылать или что-то делать. Да, здесь есть случаи, где диспетчер паралинкован к тремя facilities, и что тот диспетчер... И вот почему наша ситуация и архи не самая оптимальная, идеальная, потому что есть ситуация, где диспетчер, он же должен быть дочерним юзером кого-то, правильно? Он же должен быть каким-то дочерним юзером. Но если он дочерний юзер под вице-президента Калифорнии, тогда как он может быть, как он вещи, которые связаны с вице-президентом Нью-Йорка? Я думаю, что в этом случае во время отборнинга Макс и все эти другие люди должны будут понимать, что Centralized Dispatching это другой use case, чем Regional Dispatching, где в Centralized Dispatching они как тебе сказать, они будут видеть все о всем, и они должны будут быть дочерними юзерами какого-то юзера, который не связан даже со всеми другими. И вот там уже начинается вот эта ситуация с Facilities, что видимость идет... Ответственность и видимость это две разные вещи. То есть я могу быть ответственным за Калифорнию, но я не должен видеть все транзакции в Калифорнии. Я бизнес хозяин, я не operations хозяин.

**Alex Shulga** [03:10:10 - 03:11:25]: Дэн, на самом деле мой вопрос был немножко более простым, вернее, даже сильно проще. Значит, смотри, у нас сейчас вот эта вот настройка Facilities на уровне саб-юзера и вот эта вот настройка Facilities на уровне ордера, она имеет одинаковый permission. То есть те же самые люди, которые имеют возможность менять Facilities на уровне ордера, те же самые люди могут менять Facilities для своих саб-юзеров и так далее. Хочется понять, правильно ли это. Или, может быть, это будут разные люди. Один, вот тот, кто управляет ордером, это диспетчер, а тот, кто управляет юзером, это какой-нибудь Regional Manager. И, соответственно, диспетчеру нельзя давать возможность менять Assign Facilities на уровне юзера или векла. Я надеюсь, мне было слышно.

**Dan Khasis** [03:11:28 - 03:13:58]: Тебе было слышно, я начал отвечать на мьюте, что я сказал, что в отличие от Scope мы не хотим усложнять систему до такой степени, где каждый чувак может иметь и настраивать роли. В Scope 300 ролей и 15 тысяч комбинаций. Наши клиенты недостаточно умные для этого. То есть диспетчеры не занимаются IT provisioning. Делайте новую вещь, менеджер и администратор, и IT менеджер ответственны по умолчанию за загрузку юзеров. Но опять, наши клиенты, за которыми мы охотимся, они имеют IT команды в первую очередь, и во вторую очередь они имеют не просто IT команду, они ни разу не будут вводить юзеров в нашу систему. 100% всех действий с юзерами в нашей системе будет происходить через LDAP или SSO или OAuth 2 и к нам будут передаваться данные насчет каждого юзера. Там будет написано, что такой-то юзер с такого-то места имеет такую-то роль, и мы на нашей стороне должны будем сделать таблицу, которая будет маппировать их роли по их ID, наши роли по нашим RollID, и если у них есть facilities, у них наверняка есть facility коды, и мы будем в нашем facility списке иметь facility коды, и наши facility коды ALIUS будут один в один совпадать с их facility кодами, и потом в какой-то момент, когда к нам придет сигнал, что чувак такой-то хочет сделать логин, мы возьмем и проверим, есть ли этот человек. А, есть, окей. Какой список facilities пришел к нам насчет этого человека от этого Identity Provider. И потом они автопровизионингом зальют и пришлют полностью весь список о всем, кто это за юзер, откуда он пришел, на какие facilities у него есть права приходить, и так далее.

**Alex Shulga** [03:14:01 - 03:14:21]: Ну, в общем, Дэн, то, что я понял, это то, что загрузкой юзеров и редактированием ордеров будут заниматься разные люди, и, соответственно, это должны быть разные permissions, assigned facilities в юзере и assigned facilities в ордере. Я, по крайней мере, это так интерпретировал.

**Dan Khasis** [03:14:22 - 03:14:41]: Линковать рабочего к facility, это связано больше с юридической и с бухгалтерией, а линковать работу с юзером — это ежедневная операционная вещь. Как часто люди двигаются между Нью-Йорком и Калифорнией? Раз в пять лет?

**Alex Shulga** [03:14:44 - 03:15:30]: Ну, может быть, и никогда. Окей, ну, я, по крайней мере, с этим разобрался, спасибо большое. Так, и вторая часть этого вопроса, правильно ли я понимаю, что все остальные сущности — ордер, маршрут, customer, customer location — в принципе, для них это один уровень permissions, то есть примерно одни и те же самые люди, диспетчер или route planner будут заниматься проставлением facility на каждой сущности при создании сущности или при планировании маршрута? Вроде бы ты так сказал.

**Dan Khasis** [03:15:34 - 03:16:08]: Операционные люди занимаются операционными вещами. Другую тему, важную, что как-то сказать, в идеальном случае большинство людей никогда будет ничего не настраивать, система будет все настраивать, потому что у тебя будет дефолтный facility для юзера, дефолтный facility для машины, дефолтный facility для customer location. Когда он будет выбирать facility? Только в редком случае.

**Alex Shulga** [03:16:14 - 03:17:00]: Понял. Теперь по поводу смены атрибуции. Предположим, у нас есть ордер, значит, у нас есть пользователь, у которого есть доступ к нескольким facility. Правильно ли я понимаю, что диспетчер может сам решить, сам выбрать facility для этого ордера? Или это все-таки какой-то должен быть дополнительный уровень пермишенов? Диспетчер, однажды создав ордер в facility, например, Нью-Йорка, не может поменять этому ордеру в facility на Нью-Джерси, например.

**Dan Khasis** [03:17:02 - 03:17:32]: Если у него есть доступ, если этот юзер пролинкован к Нью-Джерси facility, он имеет право это перемапать, но если у него только один facility, он не будет перемапывать на другой facility. Понял, окей. Я бы сказал, не забудь насчет, что у нас есть поле, называется read-only. Мое мнение, что если поле read-only стоит, он не имеет права модифицировать ничего такого типа, только смотреть во время его тренировки.

**Alex Shulga** [03:17:40 - 03:17:43]: Окей, понял. Дальше вопрос...

**Dan Khasis** [03:17:43 - 03:18:03]: Ты не спросил другой вопрос. И этот вопрос, что окей, этот человек поменял facility, окей, шикарно, но потом что? Может ли facility меняться после какого-то оригинального статуса заказа? И опять ответ, что все зависит от настройки администрации.

**Alex Shulga** [03:18:05 - 03:18:13]: А как это должно работать с настройкой администратора? То есть у нас должна быть настройка на уровне пользователя, которая разрешает...

**Dan Khasis** [03:18:13 - 03:20:04]: На уровне роли, на уровне всей фирмы. Например, позволяешь ли ты модифицировать атрибут? Например, одна из вещей, на которую Вова постоянно жалуется и возмущается, эта вещь связана с тем, что нельзя менять facility после начала маршрута, нельзя менять машину после начала маршрута. А как насчет водителя? Нельзя менять водителя? Конечно можно. Чувак поехал, чувак съел хуевую селедку, обосрался и теперь надо нового водителя. Так теперь они должны разгружать 200 200 чего-то, единиц какого-то товара. Нет, что они делают? Садится другой чувак в Uber и приезжает прямо к этому другому чуваку и довозит все, например. Как экземпляр. Так надо сделать reassignment юзера. Но как Вова говорит, это не надо допускать, нельзя разрешать. А клиент, с которым мы говорили вчера, конкретно спрашивает, что происходит, если нам надо поменять в существующем маршруте или водителя, или машину. Потому что у нас машина берется, у нас есть машина мусорная, мусорная машина сломалась, потому что кто-то что-то там сломал, не починил, взорвалось гидролики, миллион проблем, правильно, могут быть. И они спрашивают, что мы делаем, как мы делаем. Как мы можем взять этот маршрут, эту машину и моментально перекинуть на другого чуваку или на другую машину. Потому что маршрут же такой же, правильно?

**Alex Shulga** [03:20:04 - 03:20:28]: Только машина поменялась, но маршрут такой же, адреса такие же, все то же самое. — Окей. Не скажу, что я полностью понял, но по крайней мере эту часть — Самое важное — это в базе данных Игорь обязан полную историю всех изменений в нормализованном виде постоянно сохранять, держать и иметь.

**Dan Khasis** [03:20:28 - 03:21:21]: Вот самая важная вещь. Вы не должны путать супер критическую вещь, какая-то вещь, что текущий ассаймент — это совершенно другая вещь от предыдущих ассайментов. Нам нужно знать все предыдущие ассайменты, которые когда-либо были. И, кстати, там есть большой баг в ActivityFeed, где шаблон в ActivityFeed Message не заполняется правильным словом. Там PlaceholderValue отпутается, а не самого значения переменного.

**Alex Shulga** [03:21:25 - 03:21:28]: — А для какого это Activity?

**Dan Khasis** [03:21:28 - 03:21:33]: — Я не знаю, я должен посмотреть на компьютере, но я видел это демонстрацию.

**Alex Shulga** [03:21:34 - 03:22:44]: — Мы найдем это. Скорее всего, это будет просто найти. Можем к следующему вопросу переходить, или тут еще есть что обсудить? Следующий вопрос, если можно, он уже был. У нас есть четыре сущности. Маршрут, ордер, кастомер и кастомер локейшн. Сейчас у нас для маршрутов есть все эти сущности. Они технически могут быть атрибутированы несколькими facility. Это неправильно, но технически такая возможность есть. Для маршрутов сейчас есть уже сценарий, есть уже ситуация, при котором маршрут может быть в результате, если он построен, например, через API, и кто-то не передал значение facility, или при построении маршрута кто-то не выбрал facility в Planet Road диалоге, маршрут может получить несколько facility. Тут, конечно, ужасные данные, но, пожалуйста, не обращайте на это внимание. Это просто тестовая кавалерия.

**Dan Khasis** [03:22:45 - 03:22:49]: Почему столько много данных все равно, когда были отпутали?

**Alex Shulga** [03:22:51 - 03:23:59]: Ну, мой вопрос на самом деле не о том, что мы позволяем сохранять несколько facility, а к тому, что мы на каком-то этапе приняли решение, что мы показываем только одну facility. Даже если маршрут, например, фактически атрибутирован с несколькими, в некоторых местах мы начали показывать одну. Правильно ли это? Потому что, например, вот в случае с этим маршрутом у него две facility, и если мы будем показывать здесь только одну, первую, то пользователь из facility Warehouse 2, он будет иметь доступ к этому маршруту, но никто не узнает об этом. Вот. И мой вопрос, собственно говоря, в чем? Значит, правильно ли то, что мы будем показывать только одну facility, даже если сущность, маршрут или customer location атрибутированы с несколькими facility?

**Dan Khasis** [03:24:10 - 03:28:40]: 99% наших клиентов и типов наших клиентов у нас будет всегда только один facility в итоге. Если мы будем говорить насчет множества facilities, мы должны не забыть одну вещь, которую, мне кажется, забываю. Что есть разница между attribution facility для видимости и для менеджмента. Что я имею в виду? Я имею в виду то, что представьте себе, что мы, наконец-то, сделаем multi-day routing через WebUI, не через сказки API, не через сказки какие-то другие, но через WebUI. И, чувак, мы не занимаемся этим типом бизнесом, кстати. Это называется multi-day, first mile и middle mile. Мы занимаемся только last mile. Чтобы сделать Oracle или другие, нам займет еще пять лет. К чему я веду? К тому, что чем мы занимаемся, это человек может действительно уехать из одного facility, сделать какую-то работу, поехать во второе facility, сделать какую-то работу и поехать в третье facility. Но если мы говорим, что в нашем случае для 99% наших клиентов facility это понятие, как бы откуда чувак уезжает и, в принципе, откуда он возвращается. Если мы делаем это на любое будущее, тогда мы говорим, что это есть starting facility, ending facility, какие-то intermediary facility, если мы говорим о идеальном решении. Когда мы говорим, что мы поддерживаем множество facilities, мы просто говорим, что или как бы задумываемся о том, что это множество facilities, это как бы эмуляция какой-то конечной точки. Эта конечная точка связана с вот эти multi-day или multi-part route, где после того, как ты обслужил, ты приехал во второй facility, и тебя должны там обслужить по каким-то разным делам. Ты хочешь там вытащить что-то, pickup drop-off сделать, правильно, pickup drop-off. Ты взял отсюда, поехал в другое место, взял в другое место, привез в третье место. Так все, чувак, все участники этого маршрута в принципе должны иметь видимость на тот маршрут. Значит, ты обязан пролинковать три facilities, иначе только один facility увидит этот маршрут, правильно? Тогда более правильно сказать, что какой-то адрес в маршруте может тоже быть пролинкован с каким-то facility, потому что если мы делаем pickup и drop-off в facility, как Хван сделал с этим клиентом для топлива, это значит, что или в момент той остановки тот facility видит все, или это значит, что как только любая остановка в маршруте как-то имеет какое-то отношение к этому, к какому-то facility, тогда автоматически они все видят. Окей, у меня время закончилось. Если мы хотим заговорить, мы можем завтра опять соединиться, но я должен сейчас идти на звонок продажи с этими бензинами ребят.

**Alex Shulga** [03:28:42 - 03:28:47]: Окей, тут подсуммировать, я понял, что мы...

**Dan Khasis** [03:28:47 - 03:29:06]: Пишите там цифру, если тебя возмущает путать. Пишите там цифру, если там множество facilities. Но это будет супер редкий случай. Окей, я понял. А второй случай, что есть видимость между facilities.

**Alex Shulga** [03:29:09 - 03:29:10]: Спасибо вам.

**Dan Khasis** [03:29:14 - 03:29:18]: Окей, насчет завтра напишем тогда, до свидания.

**Igor Golovtsov** [03:29:22 - 03:29:23]: До свидания.

**Alex Shulga** [03:29:23 - 03:29:24]: Спасибо вам.

---

## Статистика

### Участники

- **Dan Khasis**: 546 сегментов, 02:01:42 (58.3%), точность 92.6%
- **Vova**: 91 сегментов, 00:13:05 (6.3%), точность 92.4%
- **Alex Shulga**: 83 сегментов, 00:15:20 (7.3%), точность 91.4%
- **Igor Skrynkovskyy**: 64 сегментов, 00:17:13 (8.2%), точность 92.8%
- **Serhii Kasainov**: 43 сегментов, 00:05:11 (2.5%), точность 92.6%
- **Alexey Afanasiev**: 25 сегментов, 00:02:09 (1.0%), точность 93.2%
- **Eugene**: 16 сегментов, 00:01:54 (0.9%), точность 93.4%
- **Vladyslav Feshchenko**: 14 сегментов, 00:01:00 (0.5%), точность 94.1%
- **Vladimir Fedorov**: 13 сегментов, 00:01:50 (0.9%), точность 91.3%
- **Davron Usmonov**: 9 сегментов, 00:01:05 (0.5%), точность 95.4%
- **Artur Moskalenko**: 7 сегментов, 00:01:03 (0.5%), точность 88.3%
- **Semeyon S**: 6 сегментов, 00:02:01 (1.0%), точность 83.7%
- **Igor Golovtsov**: 4 сегментов, 00:00:22 (0.2%), точность 89.1%
- **Oleg Pravyk**: 3 сегментов, 00:00:29 (0.2%), точность 60.2%
- **Kateryna Shevchenko**: 1 сегментов, 00:00:13 (0.1%), точность 95.0%
- **Alexey Gusentsov**: 1 сегментов, 00:00:20 (0.2%), точность 55.3%
- **Igor S.**: 1 сегментов, 00:00:08 (0.1%), точность 99.0%

### Качество выравнивания

- Высокая уверенность (time-based): 910 (98.2%)
- Разрешено через LLM: 7 (0.8%)
- Fallback: 10 (1.1%)
- Средняя уверенность: 92.3%
- [!] Низкая уверенность (<70%): 60 сегментов (6.5%)