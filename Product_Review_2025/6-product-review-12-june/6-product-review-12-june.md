# Green - Done   Blue - In Progress   Grey - No Discussion Needed   Orange - BackEnd   Yellow - Design
# Product Review 12 June 2025
# Agenda
- Optimizations Snapshot [[Alexey Gusentsov](mailto:alexey.gusentsov@route4me.com)]
  - Settings panel on the left (temporary, until design is ready)
- Data Retention V2  [[Alexey Gusentsov](mailto:alexey.gusentsov@route4me.com)]
  - Status/Retention Period
- Assignment [[Eugene Bondarenko](mailto:eugene.bondarenko@route4me.com)]
  - Legend
  - Facility logic - d&d is disabled
  - Design. Assignment: Autocomplete suggestions as a table
- Customers [ [Davron Usmonov](mailto:davronu@route4me.com)]
  - Added Location Count (table field, sorting, filter)
- Customer Locations [ [Davron Usmonov](mailto:davronu@route4me.com)]
  - MAP
    - Disable dynamically clustering
    - Show location info popover without loading
    - Show location info popover on hover (not click)
    - Info popover height on tab change
    - Notification hide timeout (was 3s, now 6s)
  - Add/Edit drawer map make smoother
  - Location Type (table field, filter, sorting, drawer section) + questions
  - Tree view (only questions)
- Order Snapshot [[Vladimir Fedorov](mailto:vladimirfedorov@route4me.com)]
- [Visit reports design improvement](https://route4me.atlassian.net/browse/RS-657)
- Gallery
- Customer Snapshot  [[Vladimir Fedorov](mailto:vladimirfedorov@route4me.com)]
- Fixed location address type content
- Facilities moved to left panel
- Design. Assignment: Autocomplete suggestions as a table
[https://route4me.zoom.us/rec/share/pInknB3NWhRAfcjovv0wbQxo4oqjOtsgXNycvGsQ2Vw1Ng3QViz9QzuC22ij2lhW.Nwc4KPJizjBHC6O4](https://route4me.zoom.us/rec/share/pInknB3NWhRAfcjovv0wbQxo4oqjOtsgXNycvGsQ2Vw1Ng3QViz9QzuC22ij2lhW.Nwc4KPJizjBHC6O4) Passcode: PahN=C5j
# Отчет по Стратегической Встрече с CEO (Ден)
Общее Резюме Встречи:
Встреча была посвящена обзору текущего прогресса разработки, обсуждению UI/UX решений, уточнению требований к функционалу и стратегическим вопросам, связанным с биллингом и выводом новых фич на рынок. CEO Ден активно направлял дискуссию, делая акцент на предоставлении реальной ценности клиентам, упрощении сложных интерфейсов и создании масштабируемых решений. Были затронуты темы дизайна панелей настроек, отображения данных о хранении (retention), улучшения страницы назначений, функционала работы с локациями клиентов и их отображения на карте, а также деталей снапшотов заказов и клиентов. Особое внимание уделялось тому, как новые функции будут восприниматься пользователями и как их правильно позиционировать и выкатывать.
Детальный Анализ по Пунктам Повестки Дня и Внеплановым Обсуждениям:
## 1. Внеплановая тема: Поиск на странице Optimization Profile
- Ответственный: Не указан (вопрос от Алексея к Саше)
- Время обсуждения: 00:52 - 01:26
- Краткое описание контекста/цели обсуждения: Обсуждение фич-реквеста на добавление поиска на страницу "Optimization Profile".
- Основные моменты обсуждения и предложения команды:
  - Алексей получил фич-реквест (от Макса Пирогова через Паркера) на добавление поиска.
  - Паркер должен был посмотреть, кто его кинул.
  - Предположительно, задача не очень тяжелая.
- Ключевые указания, мнения и решения Дена: Не участвовал в этом кратком обсуждении.
- Принятые решения и Задачи/Следующие шаги:
  - Задача: Рассмотреть и, возможно, реализовать добавление поиска на страницу "Optimization Profile". (Ответственный не назначен явно, но Паркер и Алексей в курсе).
- Итоговое саммари по теме: Краткое обсуждение нового фич-реквеста. Задача взята на заметку.
## 2. Optimizations Snapshot (Снапшот Оптимизаций) [Alexey Gusentsov]
* Подтема: Settings panel on the left (temporary, until design is ready) (Панель настроек слева (временно, пока не готов дизайн))
- Ответственный: Alexey Gusentsov
- Время обсуждения: 03:47 - 09:33 (обсуждение UI панели настроек), 19:43 - 43:21 (детальное обсуждение отображения и наполнения панели настроек)
- Краткое описание контекста/цели обсуждения: Обсуждение текущей реализации и внешнего вида панели настроек оптимизации, которая временно размещена слева из-за отсутствия готового дизайна. Рассматривались различные варианты отображения в зависимости от количества настроек.
- Основные моменты обсуждения и предложения команды:
  - Алексей Гусенцов продемонстрировал 5 вариантов отображения панели настроек слева: от минимального набора полей до максимального (гетерогенная оптимизация с двумя сегментами).
  - Команда считает, что даже максимальный вариант "выглядит очень даже вполне неплохо" в левой панели.
  - Высказывались опасения, что для минимального набора настроек (4 строчки) отдельная вкладка будет выглядеть "грустно" и пусто.
  - Если Ден скажет, что перенос настроек в отдельную вкладку имеет высокий приоритет, команда готова этим заняться.
  - Алексей упомянул, что пока нет готового дизайна для отдельной вкладки настроек.
- Ключевые указания, мнения и решения Дена:
  - Ден подтвердил, что на предыдущих звонках обсуждалось, что настройки не могут быть в левом меню, так как для них там слишком мало места (50 пикселей).
  - Назначение панели настроек: Показать, с какими настройками планировались маршруты и с какими параметрами произошла оптимизация. Это "сводка о том, каким получился результат при этих настройках".
  - Проблема с отображением сложных данных: Ден выразил недовольство тем, как сейчас отображаются входные параметры (инпуты), особенно для гетерогенной оптимизации.
    - Он не понимает, что такое "сегмент" в текущем контексте и как он связан с входными профилями (Vehicle Profile, Capacity Profile, Routing Profile).
    - Если для гетерогенной оптимизации использовалось 50 входных профилей, то отображение 50 "сегментов" в столбик будет "кашей" и "незачем на это смотреть".
    - Критиковал вертикальное сравнение множества сложных сущностей – это невозможно для пользователя.
  - Предложение по улучшению отображения инпутов:
    - Показывать счетчики по типам использованных профилей (e.g., "Vehicle Profiles used: 3", "Routing Profiles used: 2").
    - При клике на счетчик или иконку (например, шестеренку) открывать сайдбар или всплывающее окно с таблицей, где детально перечислены все использованные профили данного типа.
    - Для простых случаев (1-2 профиля) можно отображать их имена напрямую с ссылкой на их снапшот.
  - Разделение входных и выходных параметров: Четко разделить, что является "Input" и что "Output". Текущая панель слева – это "Input".
  - Output (результаты оптимизации): Должны отображаться отдельно, возможно, в виде таблицы (как сейчас "план details"), но без смешивания с входными настройками.
  - Кост-метрики (Cost): Ден категорически против текущего отображения "Cost" и "Revenue" в результатах оптимизации.
    - Текущая реализация "супер тупая" (просто сумма revenue/cost с каждой остановки) и не отражает реальную сложность расчета стоимости (стоимость водителя в час, стоимость машины, топлива, страховки, материалов и т.д.).
    - Предложил "вырубить это к чертовой матери" и вернуться к этому, когда будет реализован полноценный "денежный фонарь" (система финансового учета).
    - Единственное, что можно оставить – это Total Travel Time, Total Service Time, Total Duration – это "честно", так как это физические величины.
  - Capacity/Load (Загрузка/Вместимость):
    - Необходимо четко различать максимальную вместимость (план, input) и фактическую использованную загрузку (actual, output).
    - Слово "Load" может быть неверным, так как это может быть и загрузка, и разгрузка.
    - Важно показывать утилизацию (например, "было 100 единиц места, использовал 50%"). Это дает понимание эффективности.
  - Важность аналитики и сравнения (Plan vs Actual vs Expected):
    - Система должна позволять сравнивать:
      - Плановые показатели (что хотели)
      - Фактические показатели (что получили)
      - Ожидаемые/целевые показатели (что считаем хорошим результатом)
    - Это основа для анализа производительности и эффективности. Ден привел пример с Google, где он платит за 10 рабочих, но если работы нет, производительность низкая, и это нужно видеть.
    - Подчеркнул, что конкуренты, работающие на рынке 30-40 лет, давно предоставляют такие инструменты анализа.
- Принятые решения и Задачи/Следующие шаги:
  - Задача (Алексей): Перенести входные настройки (сеттинги) из левой панели в отдельную сущность (таб, сайдбар – будет уточнено).
  - Задача: Для отображения множественных входных профилей (Vehicle, Routing, Capacity) использовать счетчики с возможностью просмотра деталей по клику.
  - Задача: Убрать метрики "Cost" и "Revenue" из текущего снапшота оптимизации до реализации полноценной системы финансового учета.
  - Задача: Корректно отображать данные по загрузке/вместимости, разделяя плановые и фактические значения, и показывать утилизацию.
  - Задача (стратегическая): Продумать и реализовать систему для анализа Plan vs Actual vs Expected.
  - Задача: Убрать путаницу со словом "Load" (загрузка/разгрузка), возможно, использовать более нейтральный термин или показывать оба аспекта.
- Итоговое саммари по теме: Ден выразил сильное недовольство текущим подходом к отображению настроек и результатов оптимизации. Требуется кардинальная переработка UI для настроек, более осмысленное представление входных и выходных данных, удаление некорректных кост-метрик и добавление анализа утилизации и производительности.
## 3. Data Retention V2 (Хранение данных V2) [Alexey Gusentsov]
* Подтема: Status/Retention Period (Статус/Период хранения)
- Ответственный: Alexey Gusentsov
- Время обсуждения: 13:52 - 19:43 (обсуждение страницы Data Retention), 1:16:30 - 1:21:26 (детальное обсуждение модели биллинга и логики хранения)
- Краткое описание контекста/цели обсуждения: Демонстрация обновленной страницы управления хранением данных (Data Retention), обсуждение логики статусов, периода хранения и модели биллинга за хранение.
- Основные моменты обсуждения и предложения команды:
  - Алексей продемонстрировал страницу Data Retention с колонками: Type, Current Objects, Billable Objects, Retention (days), Status, Cost.
  - Статусы: "Active" (зеленый) и "Updating" (желтый, если пользователь изменил Retention, но аналитика еще не пересчитала).
  - Планируется добавить тултип для статусов и дату последнего пересчета.
  - Обсуждался вопрос, являются ли "Current Objects" и "Billable Objects" байтами/гигабайтами или просто числовыми значениями. Сошлись на том, что это количество объектов, которое потом умножается на коэффициент для получения юнитов.
- Ключевые указания, мнения и решения Дена:
  - Непонятность текущего UI:
    - Ден (и Игорь) выразили непонимание текущей страницы. Карандаш для редактирования далеко от цифры, непонятно, к чему он относится.
    - Термины "Current Objects", "Billable Objects" без контекста и пояснений непонятны пользователю.
    - Отсутствует информация о цене за юнит или о том, как формируется "Cost".
  - Модель биллинга и хранения (очень подробное обсуждение):
    - Аналогия с Google: Google дает бесплатный объем (например, 5 ГБ), а за превышение берет плату.
    - Две оси: Возраст объектов и Количество объектов.
    - Порог бесплатного хранения/включенного в тариф: Например, 90 дней по умолчанию данные хранятся "бесплатно" (включено в тариф). За хранение объектов старше 90 дней (или другого установленного порога) взимается плата.
    - Порог удаления (Pruning): Пользователь устанавливает, через сколько дней данные удаляются. Объекты старше этого порога не существуют.
    - Billable Objects: Это объекты, которые попадают в зону между "бесплатным/включенным" порогом и порогом удаления.
    - "Allowed" (Разрешенный/Максимальный порог): Необходимо ввести понятие "Allowed" – максимальное количество объектов или объем данных, включенный в текущий тарифный план клиента (может зависеть от количества водителей, машин и т.д.). Если "Current Objects" превышает "Allowed", это должно быть видно (например, красным цветом), и за это превышение должна взиматься доп. плата.
    - Цена за юнит: Должна быть прозрачно указана цена за юнит (например, $X за Y объектов/гигабайт).
    - Биллинг по площади под кривой: Google (и мы должны) биллит не за пиковое использование, а за "площадь под кривой" – интегральное количество хранимых данных за период (например, месяц).
    - Скользящий месяц: Биллинг должен быть по скользящему месяцу, а не календарному.
  - Действия пользователя и статусы:
    - Если пользователь меняет Retention Period, "Billable Objects" и "Cost" должны динамически пересчитываться (или показываться превью изменения).
    - Статус "Updating" – это нормально, но нужно четко показывать, когда данные будут актуализированы.
  - Гибкость для продаж: Аналитика (бэкенд) должна предоставлять максимальную гибкость для конфигурации биллинга (разные пороги для разных клиентов, разные цены).
  - Пример с клиентом Zoomer: У них удваивается количество данных из-за переоптимизаций. С ними будут вестись переговоры: либо скидка на подсчет, либо более короткий срок хранения.
  - Необходимость симулятора для продаж: Чтобы отдел продаж мог показать клиенту, как изменение параметров повлияет на стоимость.
- Принятые решения и Задачи/Следующие шаги:
  - Задача: Переработать UI страницы Data Retention для большей понятности:
    - Добавить колонку "Allowed" (максимально разрешенное количество объектов/объем по тарифу).
    - Добавить информацию о цене за юнит/бакет.
    - Улучшить визуальное представление связи редактирования с конкретным значением.
    - Отображать дату/время последнего расчета.
  - Задача: Реализовать логику подсчета "Billable Objects" на основе порогов бесплатного хранения и удаления.
  - Задача: Обеспечить динамический пересчет или превью стоимости при изменении пользователем Retention Period.
  - Задача (бэкенд/аналитика): Обеспечить гибкость в настройке порогов и цен для разных клиентов/тарифов.
  - Задача (бэкенд): Реализовать корректный подсчет для биллинга (возможно, по "площади под кривой").
  - Задача: Четко определить и отображать единицы измерения (объекты, гигабайты).
  - Задача: Добавить иерархическое отображение связанных объектов (например, Route Data под Route), чтобы было понятно, что они не могут существовать отдельно.
  - Задача: Адресная книга (Customer Address Book) должна иметь очень высокий порог хранения/удаления, так как эти данные не устаревают быстро.
  - Задача (Игорь): Подготовить формат для заполнения данных по биллингу для разных типов объектов/модулей.
  - Задача (на будущее): Создать симулятор стоимости для отдела продаж.
  - Задача: статус убираем, карандаш - уточнить у вовы, новая колонка - бек, колонка цена за юнит, Дата вермени - вова,
- Итоговое саммари по теме: Страница Data Retention и модель биллинга требуют значительной доработки для обеспечения прозрачности и понятности для пользователей. Ден подробно описал желаемую логику, основанную на порогах, разрешенных объемах и цене за превышение, а также указал на необходимость гибкости для продаж и корректного учета всех хранимых сущностей.
## 4. Assignment (Назначение) [Eugene Bondarenko]
* Подтемы: Legend, Facility logic - d&d is disabled, Design. Assignment: Autocomplete suggestions as a table
- Ответственный: Eugene Bondarenko
- Время обсуждения: 1:21:26 - 1:29:05
- Краткое описание контекста/цели обсуждения: Обзор обновлений на странице назначений, включая добавление легенды, отключение drag-and-drop для Facility и обсуждение дизайна автокомплита.
- Основные моменты обсуждения и предложения команды:
  - Основная работа была сфокусирована на исправлении багов для подготовки страницы к релизу.
  - Каждая из вкладок ("тайлов") закрыта отдельными фичами.
  - Добавлена легенда для понимания цветовых вариаций тайлов маршрутов.
  - Для вкладки "Facilities" отключен drag-and-drop (режим read-only). Евгений уточнил, нужно ли вообще убирать эту вкладку из релиза, если она только read-only.
  - Алексей показал дизайн автокомплита для поиска маршрутов в виде таблицы, который был согласован ранее (с отображением Vehicle, Start Time, End Time, Name, Duration, Stops).
- Ключевые указания, мнения и решения Дена:
  - Автокомплит:
    - Высота окна автокомплита должна быть фиксированной, чтобы избежать "прыганья" интерфейса.
    - Логика поиска: Должна позволять искать не только маршруты текущего дня, но и, например, невыполненные маршруты со вчерашнего дня, которые нужно перенести.
    - Фильтрация и сортировка по умолчанию:
      - По умолчанию должны быть включены фильтры: сегодняшний день, не назначенные ("unassigned") или назначенные на текущего диспетчера, не завершенные ("not completed").
      - Сортировка по умолчанию должна быть "разумной" (например, по времени старта).
    - Предложил добавить простые фильтры прямо над списком (или в пустом белом месте), чтобы пользователь мог быстро менять критерии (например, выбрать другой день).
  - Релиз текущей версии: Ден настаивал на том, чтобы "релизить как есть" с текущими ограничениями автокомплита (без сложных фильтров), а затем итерационно улучшать. Он выразил недовольство тем, что мелкие доработки по автокомплиту, обсуждавшиеся неделю назад (добавить больше информации в строку), не были сделаны, и вместо этого началось обсуждение более сложного функционала, что задерживает релиз.
  - Лимит для "unassigned": Необходимо сделать лимит на количество отображаемых неназначенных маршрутов в автокомплите, чтобы не было "бесконечной простыни".
- Принятые решения и Задачи/Следующие шаги:
  - Задача (Евгений/Алексей): Реализовать автокомплит для поиска маршрутов в виде таблицы согласно ранее согласованному дизайну, сделать его шире и добавить больше информации в строку (как минимум, день маршрута).
  - Задача: Установить фиксированную высоту для окна автокомплита.
  - Задача: Релизнуть страницу Assignment "как есть" после доработки автокомплита.
  - Задача (на следующую итерацию): Добавить простые фильтры и улучшенную сортировку для списка маршрутов в автокомплите/поиске.
  - Задача: Установить лимит на количество отображаемых неназначенных маршрутов.
  - Задача (Алексей): Подготовить скриншоты и описание для релиз-ноутов и саппорт-документации.
- Итоговое саммари по теме: Ден потребовал немедленно доработать автокомплит (сделать шире, добавить информацию) и выпустить текущую версию страницы Assignment, отложив сложные фильтры на следующие итерации, чтобы не задерживать релиз. Вкладка "Facilities" остается в read-only режиме.
## 5. Внеплановая тема: Лицензирование и доступ к модулю "Assignment"
- Ответственный: Не указан (вопрос от Игоря к Дену)
- Время обсуждения: 1:29:05 - 1:35:16
- Краткое описание контекста/цели обсуждения: Обсуждение, должен ли новый модуль (или функционал) "Assignment" быть доступен всем пользователям по умолчанию или продаваться отдельно.
- Основные моменты обсуждения и предложения команды:
  - Игорь задал вопрос, нужен ли для нового функционала отдельный фичер-флаг и лицензия.
- Ключевые указания, мнения и решения Дена:
  - Стратегия выкатки новых фич:
    - Сначала включить для небольших клиентов ("кто платит копейки"). Пусть они жалуются, это не конец света.
    - Постепенно включать для более "крутых" юзеров, пока не будет уверенности, что "вся фигня не взорвется".
    - Либо дать возможность пользователям самим включать новый функционал через маркетплейс/список аддонов (пометить как "бета").
  - Конкретно по "Assignment": Ден предложил "включить его всем по умолчанию прямо сейчас", сделать скриншоты для сайта, написать статью на саппорте и "релизнуть завтра". Он считает, что этот функционал не должен быть скрыт.
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Модуль "Assignment" (или его новый функционал) включается всем пользователям по умолчанию.
  - Задача: Подготовить маркетинговые материалы (скриншоты) и документацию.
- Итоговое саммари по теме: Ден принял решение о широком и немедленном запуске улучшенного функционала "Assignment" для всех пользователей, подчеркнув важность быстрого вывода ценности на рынок.
## 6. Customers (Клиенты) [Davron Usmonov]* Подтемы: Added Location Count (table field, sorting, filter), Customer Locations
- Ответственный: Davron Usmonov
- Время обсуждения: 2:34:30 - 2:35:10
- Краткое описание контекста/цели обсуждения: Демонстрация изменений на странице Customer Locations, включая работу с количеством локаций и деревом локаций.
- Основные моменты обсуждения и предложения команды:
  - На странице Customers (список клиентов) изменения коснулись в основном Customer Locations.
  - Аналитика по Location Types: Ден поднял вопрос о необходимости аналитики по типам локаций на уровне кастомера и в целом по системе.
- Ключевые указания, мнения и решения Дена:
  - Аналитика по типам локаций (Location Types):
    - На странице кастомера (где отображается дерево локаций или их список) необходимо показывать счетчики по каждому Location Type. Например, "Колодцы: 7", "Электростанции: 3".
    - Эти агрегаты должны идти в ElasticSearch для возможности фильтрации и построения отчетов (например, "покажи всех кастомеров, у которых больше 10 подводных помп").
    - Артем (аналитика) сможет строить отчеты по изменению количества локаций разных типов во времени (по дням, месяцам, кварталам).
  - Визуализация на карте связанных локаций: Если у кастомера много дочерних локаций, на карте непонятно, что они все принадлежат одному "родителю". Нужен способ визуально объединить их (например, общим полигоном кастомера или цветом).
    - Идея с полигоном кастомера: либо рисовать вручную, либо динамически по периметру дочерних элементов (но это может выглядеть "коряво").
    - Возможно, использовать существующие "территории", ассоциированные с facility.
  - Плотность информации в дровере/карточке локации: Ден считает, что текущее отображение информации в оверлее локации слишком разреженное ("много воздуха"). Попросил Вову (дизайнера) сделать плотнее, но Вова ответил, что если сделать гуще, будет "шумно" и трудно читать. Ден настоял на своем, предложив убрать слово "Planned" из заголовков полей.
- Принятые решения и Задачи/Следующие шаги:
  - Задача: Реализовать отображение счетчиков по Location Types на странице Customer Locations.
  - Задача (бэкенд/Elastic): Обеспечить передачу агрегатов по Location Types в ElasticSearch для аналитики.
  - Задача (Артем): Продумать и реализовать отчеты по динамике Location Types.
  - Задача (дизайн/UX): Найти способ визуально связывать на карте дочерние локации с их родительским кастомером/локацией.
  - Задача (Вова/дизайн): Пересмотреть плотность информации в оверлее/карточке локации, возможно, убрав слово "Planned" для экономии места.
- Итоговое саммари по теме: Обсуждались улучшения для страницы Customer Locations с акцентом на добавление аналитики по типам локаций и улучшение визуализации связанных объектов на карте. Ден также высказал пожелания по уплотнению информации в интерфейсе.
## 7. Customer Locations [Davron Usmonov] (продолжение)* Подтемы: MAP, Disable dynamically clustering, Show location info popover without loading, Show location info popover on hover (not click), Info popover height on tab change, Notification hide timeout (was 3s, now 6s), Add/Edit drawer map make smoother, Location Type (table field, filter, sorting, drawer section) + questions, Tree view (only questions)
- Ответственный: Davron Usmonov
- Время обсуждения: 2:35:30 - 3:04:50
- Краткое описание контекста/цели обсуждения: Демонстрация улучшений в работе с картой на странице локаций клиентов, включая кластеризацию, отображение информации, работу дровера и дерева.
- Основные моменты обсуждения и предложения команды:
  - Кластеризация: Динамически выключается в зависимости от количества локаций на экране. Если много – нужно 2 клика для детализации, если мало – 1 клик.
  - Подгрузка информации: Информация о локациях теперь подгружается сразу, без лоадера, работает наведение.
  - Высота инфо-блока: Меняется при переключении табов, но курсор не "убегает".
  - Таймаут нотификаций: Увеличен с 3 до 6 секунд.
  - Карта в дровере (Add/Edit): Подгрузка сделана плавнее.
  - Location Type: Добавлен в таблицу с фильтрацией, сортировкой, подсказками. В дровере есть секция для выбора Location Type (для child подставляются только child-типы).
  - Tree view (Дерево): Даврон показал локальную версию, не застилизованную и не протестированную. Возникли вопросы по дизайну:
    - Стрелочка для раскрытия узла: Вова нарисовал ее в самом начале, потом она смещается.
    - Основное поле для отображения: в дизайне это "Alias", но он не обязательный. Если Alias пуст, будет "коряво". Даврон временно сделал основным полем "Address".
    - Треугольнички для сворачивания/разворачивания: в дизайне они указывают "вбок" и "вниз", Даврон сделал "вбок" и "чуть повернутый вбок".
  - Дублирование полей: Вопрос о "Location Type" (новое) и "Destination Type" (старое, дефолтное для визита).
- Ключевые указания, мнения и решения Дена:
  - Кластеризация и информация:
    - Вопрос от Даврона: если табличный элемент находится в кластере на карте, как это показать? Ден: "Показать поверх кластера", так как локация известна.
    - Ден: Зачем подсвечивать кластер при наведении на строку в таблице, если можно сразу показать пин конкретного адреса?
  - Цвета маркеров (из Legacy): Цвета, которые раньше задавались в дровере, должны влиять на цвет маркеров на карте. Это важно для клиентов, которые визуально организуют свой бизнес по цветам (приоритеты, проблемные и т.д.).
    - Улучшение идеи с цветами: Вместо простого выбора цвета, дать возможность ставить теги (лейблы) и этим тегам назначать цвета. Это позволит избежать путаницы, когда разные пользователи по-разному интерпретируют один и тот же цвет.
  - Tree view:
    - По поводу основного поля (Alias vs Address): если Alias не обязателен, то делать его основным нельзя. Решение: Копировать текущий подход со страницы Users (где имя является основным) и не тратить время.
    - Треугольнички: делать, как в стандартных ОС.
  - Location Type vs Destination Type:
    - "Location Type" – это тип самой локации из адресной книги.
    - "Destination Type" (или "Visit Default Type") – это дефолтный тип визита, который будет использоваться при планировании маршрута к этой локации. Это разные сущности.
    - "Visit Default Type" должен быть вверху настроек локации, в секции "Overview".
  - Фильтры по Connection (связи между объектами): Если они появились на бэкенде, их нужно поддержать как можно скорее, чтобы они автоматом появлялись.
  - Синхронизация данных из симуляций (Recuring Routing):
    - После симуляции и создания Master Route, информация о расписании визитов (дни недели, временные окна для каждого кастомера) должна автоматически синхронизироваться/обновляться в Customer Address Book для соответствующей Customer Location. Сейчас этого нет.
    - Это "закон сохранения энергии/массы" – данные не должны теряться или требовать ручного переноса.
- Принятые решения и Задачи/Следующие шаги:
  - Задача (Даврон): Реализовать окрашивание маркеров на карте на основе сохраненного цвета локации (legacy).
  - Задача (UX/дизайн на будущее): Продумать систему тегов с назначаемыми цветами вместо простого выбора цвета.
  - Задача (Даврон): Для Tree view использовать "Address" как основное поле (или то, что используется в Users) и стандартные иконки-треугольники.
  - Задача (Даврон): Разместить поле "Visit Default Type" (бывш. Destination Type) в секции "Overview" настроек локации.
  - Задача (Даврон/бэкенд): Обеспечить поддержку фильтров по Connection, если они доступны.
  - Задача (критическая, Игорь/бэкенд/Даврон): Реализовать автоматическую синхронизацию расписания визитов из Master Routes (созданных по результатам симуляции) в Customer Locations (в Customer Address Book).
- Итоговое саммари по теме: Обсужден ряд важных улучшений для работы с локациями клиентов и картой. Ключевые моменты – улучшение визуализации данных (цвета, теги), исправление UX в дереве и дровере, и критически важная задача по автоматической синхронизации данных о расписании визитов из планировщика в адресную книгу.
## 8. Order Snapshot (Снапшот Заказа) [Vladimir Fedorov]
* Подтемы: Visit reports design improvement, Gallery
- Ответственный: Vladimir Fedorov
- Время обсуждения: 1:53:05 - 1:57:33
- Краткое описание контекста/цели обсуждения: Демонстрация обновлений в снапшоте заказа, включая отображение прикрепленных файлов (аттачментов) и галереи изображений.
- Основные моменты обсуждения и предложения команды:
  - Обновлена табличка аттачментов.
  - Появилась галерея картинок (пока без дизайна, показан макет от Алексея).
- Ключевые указания, мнения и решения Дена:
  - Отображение аттачментов/отчетов:
    - Ден выразил недовольство текущим видом отображения (самодеятельность, а не по макету). Точка перед названием, маленький шрифт – непонятно.
    - В макете (который просил показать Алексея) для каждого аттачмента/отчета отображается дата, маленькая иконка типа, и информация (которая позволяет посмотреть детали экшена, в котором был сделан аттачмент).
    - Тип аттачмента/отчета важнее, чем просто текст. Нужно понимать, это "Photo", "Signature", "Custom Form Report" и т.д.
    - Название вкладки/секции: Ден настаивал на слове "Reports" (Отчеты), а не "Activity" или "Notes", так как это отражает суть (все, что водитель зарепортил).
    - Идентификация типа: На каждом "ноуте" или действии в мобильном приложении есть типизация (например, "Template #1"). Эта типизация должна быть видна и использоваться для фильтрации.
- Принятые решения и Задачи/Следующие шаги:
  - Задача (Владимир/Алексей): Реализовать отображение аттачментов/отчетов в снапшоте заказа строго по предоставленному дизайну/макету, с отображением даты, иконки типа и корректной подписи (типа отчета).
  - Задача: Использовать корректную типизацию отчетов для отображения и будущей фильтрации.
  - Задача: Использовать согласованное название для секции ("Reports") = Activity
  - Задача: Обновить дизайн, добавить Activity Type в галереи
- Итоговое саммари по теме: Ден потребовал привести отображение отчетов и аттачментов в снапшоте заказа в строгое соответствие с ранее утвержденным дизайном, акцентируя внимание на важности типизации и корректного представления информации.
## 9. Customer Snapshot (Снапшот Клиента) [Vladimir Fedorov]* Подтемы: Fixed location address type content, Facilities moved to left panel
- Ответственный: Vladimir Fedorov
- Время обсуждения: 1:57:33 - (конец демонстрации Владимира, плавно перешло в обсуждение рекаринг раутов)
- Краткое описание контекста/цели обсуждения: Демонстрация изменений в снапшоте клиента, в частности, перенос информации о Facilities в левую панель.
- Основные моменты обсуждения и предложения команды:
  - Facilities перенесены в левую панель.
- Ключевые указания, мнения и решения Дена:
  - Перегруженность левой панели: Ден считает, что левая панель перегружена.
  - Отображение Facilities: Как и в случае с Optimization Settings, если у клиента много Facilities, их список в левой панели будет неудобен. Предложил показывать счетчик ("Facilities: 5"), а по клику открывать отдельную панель/всплывашку со списком.
  - Секция "Visit": Ден не понимает это слово в контексте снапшота кастомера. Если это "Destinations" (точки доставки/обслуживания этого кастомера), то так и надо называть.
- Принятые решения и Задачи/Следующие шаги:
  - Задача (Владимир/дизайн): Пересмотреть отображение Facilities в снапшоте клиента, возможно, используя счетчик с деталями по клику, чтобы не перегружать левую панель.
  - Задача: Уточнить и использовать корректный нейминг для секций (например, заменить "Visit" на более подходящий термин).
- Итоговое саммари по теме: Ден указал на необходимость разгрузить левую панель в снапшоте клиента и использовать более понятный нейминг для секций, аналогично замечаниям по другим модулям.
## 10. Внеплановая тема: Запуск Recuring Routing (Мастер-маршруты/Шаблоны)
- Ответственный: Не указан (обсуждение инициировано Деном, касается работы Игоря и команды)
- Время обсуждения: 1:58:06 - 2:05:14 (и далее, пересекаясь с обсуждением Strategic Planner)
- Краткое описание контекста/цели обсуждения: Ден выразил крайнюю необходимость "кровь из носа запустить" функционал Recuring Routing (Мастер-маршруты/шаблоны), так как это "финальный шаг уничтожить конкурентов". Обсуждались текущий статус и необходимые шаги для запуска.
- Основные моменты обсуждения и предложения команды:
  - Игорь: Recuring Route сейчас в процессе, нужно 1-2 дня, чтобы там отображались мастер-рауты со schedules (расписаниями).
  - Загрузка через SFTP полностью работает, полируется нейминг и мелкие баги. Уже выкачено на продакшн, но включено пока только для СЕО.
  - API для загрузки через интерфейс еще нет.
- Ключевые указания, мнения и решения Дена:
  - Необходимость немедленного запуска:
    - Если нет UI для импорта, в первой версии можно залить красивые скриншоты и написать инструкцию по загрузке через SFTP.
    - Продавцы (Пол, Макс Пирогов) могут руками настраивать JSON-файлы и заливать их. Это "коряво, но работает".
  - Поэтапный ввод UI для импорта/редактирования:
    - Инструкции по SFTP/API (если есть) + возможность заливать JSON через простой UI (даже если настройки в самом JSON). Это "золотой стандарт для облака" для "Advance юзеров". Шаблоны должны быть портабельными.
    - Визуальный редактор JSON (как для Power Users).
    - Полноценный UI-редактор с автокомплитами для выбора VRP Profiles, Routing Profiles и т.д. (как сейчас в новой оптимизации).
  - Связь с другими данными:
    - Важно, чтобы при импорте/создании мастер-маршрутов не требовалось предварительно создавать все сущности (машины, водителей и т.д.) руками, если их нет в аккаунте. Настройки в JSON (вес машины, кол-во шин) должны быть самодостаточны.
    - Автоматическое создание черновиков маршрутов из телематики: Система должна уметь брать данные из телематики (актуальные и шаблонизированные маршруты водителей) и автоматически создавать из них черновики в нашей системе (в Route Table с типом "Template" и "Actual").
    - Визард для симуляции: При запуске симуляции должен быть визард, который спрашивает пользователя:
      - Использовать ли шаблонные маршруты из его системы?
      - Использовать ли актуальные проеханные маршруты?
      - Вытащить ли все координаты или только start/end/via точки?
  - После симуляции: Система создает Recuring Routes, из них Master Routes, и выставляет расписание в Customer Locations (см. пункт 7).
  - Аналитика для "дизельных генераторов" (пример IoT): Данные с сенсоров (минуты, мили, метры работы) должны агрегироваться и использоваться для предиктивной аналитики (например, "во вторник между 2-4 дня у вас перегревается двигатель на генераторе в этом месте").
- Принятые решения и Задачи/Следующие шаги:
  - Задача (Игорь и команда): Обеспечить запуск Recuring Routing в кратчайшие сроки.
    - V1: Загрузка через SFTP (с инструкциями) + возможность для отдела продаж загружать подготовленные JSON-файлы через простой UI.
    - Следующие итерации: Разработка визуального редактора JSON и полноценного UI-редактора.
  - Задача (стратегическая): Реализовать механизм импорта данных из телематики для автоматического создания черновиков маршрутов.
  - Задача: Разработать визард для запуска симуляций с возможностью выбора источников данных.
  - Задача: Обеспечить полную сквозную синхронизацию данных от симуляции до расписания в Customer Location.
  - Задача (на будущее): Продумать аналитику для IoT-устройств на базе собираемых данных.
  - Задача (Игорь/Алексей): Подготовить документацию и инструкции для SFTP-загрузки.
- Итоговое саммари по теме: Ден определил запуск Recuring Routing как абсолютный приоритет. Описана поэтапная стратегия вывода функционала, начиная с SFTP-загрузки и ручной подготовки JSON, до полноценного UI и интеграции с телематикой. Это направление рассматривается как ключевое для конкурентного преимущества.
Заключение:
Встреча была очень продуктивной, с большим количеством конкретных указаний от Дена по разработке и стратегии. Команде предстоит большая работа по реализации всех озвученных требований и доведению продуктов до ожидаемого уровня. Ден высоко оценил пользу таких звонков и призвал продолжать проводить демо для более эффективного взаимодействия.
