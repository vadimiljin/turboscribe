# Транскрипт встречи (Summary)

**Дата:** 2025-05-16 14:19
**Длительность:** 02:35:44
**Участники:** 14
**Точность:** 93.7%

---

**Semeyon S** [00:00:13 - 00:00:17]: Так, считаем, кто у нас ещё пунктуальный. Есть секунд 30.

**Davron Usmonov** [00:00:22 - 00:00:25]: А ты не писал, что опоздает сегодня?

**Semeyon S** [00:00:27 - 00:00:35]: Ну мы с ним всё равно ориентировочно договаривались, так что плюс-минус 10 минут роли не играет, а что?

**Davron Usmonov** [00:00:36 - 00:00:43]: Вот, я бы с удовольствием поговорил насчёт тревью на Custom Application. Диму не хватает.

**Alexandr Kovtunov** [00:00:44 - 00:00:45]: Ну привет.

**Semeyon S** [00:00:45 - 00:00:46]: Опять говорит.

**Davron Usmonov** [00:00:47 - 00:02:02]: Ну давай. Просто начали думать, как это делать, и в итоге стали появляться такие моменты реализации непростые. В общем, если у нас в первом стоит какой-то локейшн, и он, скажем, урутовый, ему мы добавили какой-нибудь Child Location. И после этого мы пошли на 101-ый item в таблице, и его тоже сделали его Child. То есть он подгрузится после того, как мы вторую загрузку сделаем в таблице. Вот, сейчас Back так работает, что ему всё равно, где он находится, то есть является он Child либо Parent всё равно. И когда мы вторую страницу вытягиваем, появляется Child, и он его наверх кидает. Но юзер этого в жизни не увидит, потому что он это уже проскролил. Вот такой есть момент. Мы с Дмитрием обсуждали. Он предложил вообще идеальный вариант, ну ладно, возможно идеальный, чтобы все руты сделать по дефолту закрытыми. И когда мы открываем, туда динамически будут подгружаться его чайлды.

**Semeyon S** [00:02:03 - 00:02:05]: А на юзерсах как сделано? Вы смотрели?

**Davron Usmonov** [00:02:06 - 00:02:13]: На юзерсах сделано без ограничения на количество айтемов, а в случае, когда он переключается на тревью, присылает всё сразу.

**Semeyon S** [00:02:15 - 00:02:22]: А в смысле, когда переключается на тревью, идёт запрос, вытаскивается вообще вся информация и строится дерево по этому?

**Davron Usmonov** [00:02:22 - 00:02:37]: Так точно. По-моему, юзеры у нас каким-то небольшим количеством ограничены. То есть 1 или 2к точно не помню. А Locations у нас и 50к есть, поэтому мы не можем 50 тысяч.

**Semeyon S** [00:02:37 - 00:02:52]: Есть на чем подумать. давайте пока в процессе, ну, сделаем их закрытыми, как вы предлагаете, а вообще это означает, что надо в тему еще нырнуть, поизучать.

**Davron Usmonov** [00:02:53 - 00:02:58]: Да, да, там много чего всплыло именно вот в реализации, поэтому я бы пообщался.

**Semeyon S** [00:03:05 - 00:03:46]: Всем привет. Привет. Наверное, надо нам как-то вот такие вопросы, да, по старям, непростые, как-то агрегировать, чтобы я их тоже бочом начал обрабатывать как-то. Потому что вот прямо сейчас у меня ответа нет, надо поизучать тему, как с этим вообще работают. Причем здесь же такой вопрос фронт-энд плюс бэк-энд, то есть тут взаимодействие. Прямо сейчас из кармана решения нет.

**Davron Usmonov** [00:03:49 - 00:04:06]: Ну, я тогда в старе, точнее, в нашей канале custom locations напишу варианты, которые, по крайней мере, три варианта есть. Распишу и, может, еще что-нибудь добавим.

**Semeyon S** [00:04:06 - 00:04:21]: Ну, хотя бы через гугл транслейт прогони это и в джиру, в комментарии продублируй и мне в личку скинь, пожалуйста. Пока Мы можем для старей использовать тоже сабстори. Это же вопрос, к чему он приведет, я пока не знаю.

**Alexey Afanasiev** [00:04:21 - 00:04:31]: Скорее всего, придется старю уточнять или писать новую уточненную информацию. Потому что когда я ее делал, я вот исходил из допущения.

**Semeyon S** [00:04:31 - 00:05:11]: Я четко отдал себе отчет, что это допущение. Что, ну, на юзерах же сделано. Значит, на кастомер локейшенах тоже можно сделать. Но если у нас будут проблемы, будем разбираться по ходу. К сожалению, риск выстрелил в этом случае. Так что, может, мы начнем прямо по агенте. А если Дэн подсоединится, просто вернемся назад. Давайте.

**Alexey Afanasiev** [00:05:11 - 00:05:21]: Если все согласны, я не против. Просто непонятно сколько.

**Semeyon S** [00:05:21 - 00:05:26]: Ну, до 10 минут, по-моему.

**Alexey Afanasiev** [00:05:26 - 00:05:31]: А, слушайте, давайте-ка я Дэну напишу.

**Semeyon S** [00:05:31 - 00:05:46]: Или написать. Да, давай напишу. Что-то я тормозну.

**Serhii Kasainov** [00:05:51 - 00:06:01]: И он у Москвы. Хотел пошутить.

**Alexey Afanasiev** [00:06:01 - 00:06:06]: А этот, блин, забыл как называется, там какой-то сериал был одно время по книжкам.

**Semeyon S** [00:06:06 - 00:07:14]: Боги что-то там из Северной Америки или еще что-то. Ну, такой фантазийный. И там разного рода боги в наше время, как они живут, выживают. Очень колоритные именно боги представлены. В том числе, там был бог интернета, гаджетов и вот этого всего. Если кто понял. Американские боги. Есть даже сериал. Да, американские боги. Офигенно. Ну, я его до конца не осилил, но там первый сезон, полтора. Вот у меня хватило тоже на первый сезон только. Мне нравилось смотреть именно стилистически, как там этих богов подают, вот эти художественные решения с интерлюдиями. Ну, красиво. Там же еще боги матрицы, да?

**Vladimir Fedorov** [00:07:14 - 00:07:26]: Правильно, я помню, были. Но они, кажется, были как представления как будто из двухтысячных. Смесь каких-то этих. Очень странно.

**Semeyon S** [00:07:26 - 00:07:29]: Я такого не...

**Serhii Kasainov** [00:07:29 - 00:07:36]: Еще лысый в костюме доктор заходил. А, нет, это какой-то аудитофильм. Ладно, извините.

**Semeyon S** [00:07:40 - 00:07:46]: Ну, ты там в Европе к такой карьере все относятся толерантно.

**Serhii Kasainov** [00:07:46 - 00:07:52]: И к хреновому интернету тоже все относятся толерантно.

**Semeyon S** [00:07:52 - 00:07:59]: Слушай, в Италии чудо, что он вообще работает.

**Igor Golovtsov** [00:07:59 - 00:08:05]: Тебе так иногда не окажется.

**Serhii Kasainov** [00:08:05 - 00:08:24]: Но итальянцам не нужен интернет, чтобы пить опироль. Да, мне кажется, в этом все проблема. Копки, конечно, классные, но когда ты видишь фуникулер, построенный в скале протяженностью километра 3-4 и построен он типа примерно во времена второй мировой, шутить про ленивых итальянцев больше не хочется.

**Igor Golovtsov** [00:08:24 - 00:08:31]: Ну, мы больше смеемся не над итальянцами, а скорее над стереотипами.

**Semeyon S** [00:08:31 - 00:08:43]: Хотя, если интернет был проложен тоже во времена второй мировой, то это все объясняет. Он бы работал в этом случае.

**Igor Skrynkovskyy** [00:08:44 - 00:08:45]: Это все немцы построили.

**Serhii Kasainov** [00:08:47 - 00:08:54]: А армяне придумали. Армяне, потому что все придумали вообще.

**Semeyon S** [00:08:54 - 00:09:37]: Ладно, давайте, ребята, еще две минуты и начнем. Уже точно. Так, я вообще правильную ссылку скинул. Привет, Дэн. Мы в этот раз решили немножко в другом формате провести. Ребята проведут демо по результатам вот за вот эту неполную неделю. Ну и, соответственно, на ходу обсудим. Попробуем.

**Dan Khasis** [00:09:38 - 00:12:32]: Да, только я хочу сказать важную вещь, которую я забуду. То, что это API, которую сделали для Rad4Tracks. Я думаю, что мы можем поставить Rad4Tracks аналитику, которая нужна этому клиенту важному, в Артема систему аналитики. Потому что, в принципе, там просто обыкновенные queries, BigQuery идет. И там не надо иметь какие-то сложные новые API или что-то. У Артема должно быть достаточно гибкое, чтобы это сделать в существующей системе. Здесь только одна вещь отличается, может быть, у Игоря есть мысли насчет этого, идеи, что, в принципе, на Rad4Tracks все пишется на уровне организации больше, чем на уровне рутового аккаунта. То есть может быть и то, и то, но больше к организации. Надо посмотреть, может ли Артем сделать еще один фильтр на уровне организации, чтобы когда из организации логинуются через Admin панель, сделать embedding той системы и показывать в том же UI с теми же API, но разные данные. Потому что получается, что они пользуют мобильное приложение Rad4Tracks наше и у них есть, например, тысячу разных рутовых аккаунтов. В каждом аккаунте есть 10 машин и они хотят видеть, например, аналитику всех действий, которые происходят в том аккаунте. Сколько юзеров открыло, сколько юзеров закрыло, сколько маршрутов были, конкретные маршруты, аналитика маршрутов и так далее. И это надо, в принципе, делать на уровне организации. Но потом, если какой-то клиент, который у них есть, этого клиента у нас нет. То есть они будут нам говорить идентификатор той флоты, той конкретной этого рута. И мы должны будем показать им что-то, чтобы тот рут мог залогиниться, даже без credentials, например, с MagicLink и видеть нашу аналитику, которую мы синкнули на счет всех маршрутов Rad4Tracks, потому что мы локейшн данные будем собирать, Rad4Tracks тоже.

**Igor Skrynkovskyy** [00:12:41 - 00:12:48]: Да, мы с тобой говорили уже насчет этого, там проблем нет. Данные как бы все в BigQuery, а ты можешь это все спокойно вытянуть.

**Dan Khasis** [00:12:55 - 00:13:38]: Просто надо сделать это, я думаю, в течение трех недель, чтобы похвастаться. Потому что, чтобы вы понимали, сколько объема, у них больше чем 250 тысяч машин потенциальных, которые они могут на Rad4Tracks поставить. Первые два клиента только имеют 3 тысячи, это два клиента. И у них отсутствует аналитика на маршрутов, как они, если их приехали, как их приехали, когда их приехали, сколько миль было. Они ничего этого не видят, потому что у них нет полноценной интеграции со всеми этими вещами.

**Semeyon S** [00:13:54 - 00:14:00]: Окей, можем начинать. Алексей, кто первый у нас?

**Alexey Afanasiev** [00:14:00 - 00:14:03]: Добро.

**Vova** [00:14:03 - 00:14:07]: Запись, не забудьте включить.

**Semeyon S** [00:14:07 - 00:14:08]: Сейчас включу.

**Oleksandr Ishchenko** [00:14:08 - 00:14:11]: Замет. Идет.

**Davron Usmonov** [00:14:18 - 00:14:25]: Я на связи.

**Alexey Gusentsov** [00:14:25 - 00:14:26]: Добро, видно.

**Davron Usmonov** [00:14:29 - 00:14:47]: Добавили для кастомер снапшоты, точнее переход по снапшотам. Для кастомер локейшн они еще не закончены, как только закончат. И для кастомер локейшн тоже добавим переход по страницам снапшотов.

**Dan Khasis** [00:14:49 - 00:14:53]: Мы прибавили, что мы прибавили? Я пропустил. Кастомер что?

**Davron Usmonov** [00:14:53 - 00:14:57]: На странице кастомер, переход на страницу снапшотов.

**Dan Khasis** [00:14:58 - 00:15:01]: Что происходит, когда мы кликаем?

**Davron Usmonov** [00:15:01 - 00:15:03]: Переход на снапшот кастомера.

**Dan Khasis** [00:15:12 - 00:16:33]: Вчера мы с Вовой обсуждали, что мы все пропустили одну вещь важную насчет того, что было бы хорошо иметь для кастомера primary linked facility. Это сейчас не критически важно, но в принципе будет важно в будущем. Потому что если вы посмотрите насчет, как делать геодетическую агрегацию или кластеризацию по facility, и получается такая ситуация, где если ты не знаешь какой кастомер пролинкован к какому facility, ты не знаешь, какая нагрузка запланирована на этот конкретный facility. Получается, что если мы пролинкуем кастомер к facility, тогда когда мы откроем facility снапшот, мы сможем увидеть всех кастомеров, которые обслуживаются из того места. Если идти на уровень выше, на регион, в регионе или в рынке есть множество facility. И множество facility мы можем видеть и смотреть опять все эти агрегации. Но поскольку сейчас это отсутствует, нет легкого метода пересечи или пролинковать все вместе.

**Vova** [00:16:37 - 00:16:44]: Макете уже есть в facility. Вчера добавили.

**Dan Khasis** [00:16:54 - 00:17:05]: Окей, макете может есть, но команда понимает, о чем речь идет? Почему это важно?

**Alexey Afanasiev** [00:17:05 - 00:17:10]: Да, понятно.

**Dan Khasis** [00:17:10 - 00:17:16]: На этой странице отсутствует кнопка прибавить кастомер локейшн, кстати.

**Semeyon S** [00:17:16 - 00:17:21]: То есть у нас снапшоты будут не чисто read-only?

**Dan Khasis** [00:17:21 - 00:17:27]: Нет, но кнопка на прибавить, если надо открыть сайт бар, правильно?

**Semeyon S** [00:17:28 - 00:17:37]: Ну да, дроуэр будет открываться. Соответственно, автоматом будет проставляться этот кастомер.

**Dan Khasis** [00:17:38 - 00:17:41]: Да, так же, как Edit. Это все то же самое, как Edit.

**Semeyon S** [00:17:41 - 00:17:45]: Окей, все-таки смешанный подход будет. Как смешанный?

**Dan Khasis** [00:17:45 - 00:17:46]: Почему?

**Semeyon S** [00:17:51 - 00:18:12]: Ну, потому что упор на read-only на снапшоте в первую очередь. Но прям весь функционал из той же страницы кастомер локейшн мы перетаскивать не будем, включать точнее. То есть у нас есть добавление на кастомер форма дроуэра, и здесь будет, правильно?

**Alexey Afanasiev** [00:18:12 - 00:18:27]: Да. Не будем уводить на тот дроуэр, на другую страницу пользователя.

**Dan Khasis** [00:18:28 - 00:18:38]: Если вы хотите его уводить, как в первой версии, уводите, если вам это легче. Ну, легче, конечно. Да, это не проблема.

**Alexey Afanasiev** [00:18:38 - 00:18:42]: Окей.

**Dan Khasis** [00:18:42 - 00:18:49]: Я просто пытаюсь сказать, что как человек, он бы не смог открыть, прибавить кастомер. Вот все, что я имею в виду.

**Davron Usmonov** [00:18:54 - 00:19:17]: Доврон, давай дальше. Продолжаю. Так, у нас на карте, если в какой-то точке есть данные, раньше отображался только адрес, и адрес что-то, алиас отображался, теперь мы всю инфу выдаем.

**Dan Khasis** [00:19:17 - 00:19:35]: Но это анти-паттерн, это не… Это анти-паттерн фронтендовый. Слишком много данных не в правильном формате, и слишком это, длинная высота по умолчанию.

**Alexey Afanasiev** [00:19:36 - 00:19:52]: Да, поэтому я предлагаю вернуться к этому вопросу еще в рамках таймлайна раут-листа, там тоже повер, тоже обсудим состав и внешний вид.

**Dan Khasis** [00:19:52 - 00:19:55]: А здесь хит-мэп был, я не помню, у нас хит-мэп… Есть, есть.

**Davron Usmonov** [00:19:57 - 00:19:58]: Есть хит-мэп, сейчас скажу.

**Dan Khasis** [00:20:10 - 00:20:18]: Напомни мне, что это показывает теплоту, где физически находятся кастомы локейшнс?

**Davron Usmonov** [00:20:19 - 00:20:24]: Да, чем больше точек, тем хит-мэп более яркий.

**Alexey Afanasiev** [00:20:25 - 00:20:27]: Дарон, можешь Нью-Йорк приблизить?

**Dan Khasis** [00:20:29 - 00:20:34]: Там здесь зеленое, потому что там есть один или два клиента в этой зоне.

**Davron Usmonov** [00:20:36 - 00:20:39]: Чем меньше контрастный цвет, тем меньше клиентов.

**Dan Khasis** [00:20:41 - 00:20:46]: Я имею в виду та зелень, это погода или там действительно точки есть?

**Davron Usmonov** [00:20:46 - 00:20:51]: Это действительно точки.

**Dan Khasis** [00:20:51 - 00:20:56]: Нет, не здесь, если ты сделаешь зум-аут, там вся Америка зеленая, но нет ни одной.

**Davron Usmonov** [00:20:56 - 00:21:05]: Да-да-да, данный аккаунт наполнен 20000 локейшнс, поэтому вот тут везде есть…

**Dan Khasis** [00:21:05 - 00:21:16]: Это зеленированные тестовые данные, поэтому и прямоугольник. Окей, это не проблема, просто я не видел ни одного локейшна еще в этом прямоугольнике.

**Oleksandr Ishchenko** [00:21:16 - 00:21:24]: Дарон, найди локейшнс в том месте, где зелененькое, ненасыщенное.

**Dan Khasis** [00:21:24 - 00:21:26]: В середине прямо, давай найдем в центре.

**Vova** [00:21:28 - 00:21:34]: Можно еще убрать галочку hide locations на хит-мапе, и тогда будет видны пин-локейшны.

**Dan Khasis** [00:21:34 - 00:30:37]: Так что это, это действительно локейшны, правильно? Да-да-да. Окей, шикарно, это идеально. Так теперь такой же вопрос, что мы делаем, чтобы это скопировать в routes-мап или в orders-мап, чтобы увидеть исторический хит-мап, например, по дням или по сезонам, или в целом. Потому что там это один в один зеркальная копия этого. Просто там есть временный диапазон и какие-то атрибуты фильтров. Например, я не говорю это сейчас делать, я начну с этого контекста. Но вы уже сделали 95% работы, вы могли, в принципе, легко прибавить еще один фильтр в карте, показать всех customers, которые имеют там, мы смотрим хит-мап, о которых мы обслуживаем в понедельник, или во вторник, галочки, или в среду, и так далее. Правильно? Это обыкновенно, потому что там есть эти метаданные насчет customer. Тогда они бы увидели, сравняя разные дни недели, что там в пятницах и зеленая, и холодная, а в понедельник горячая, и красная. То есть они визуально могут анализировать. Или на счет, если zoom out делать, и у нас есть территории, можно в рамках территорий делать своих хит-мап, а не как бы... Сейчас у вас, получается, классическая проблема data science, где всегда район, на который вы смотрите, такой большой, что есть иллюзия, что Центр Америки имеет немного точек, хотя в той зоне, в Центре Америки, той территории, там могло быть очень много точек. Но по сравнению со всеми другими цифрами, есть иллюзия, что с другими точками, что она низкая, потому что она усредняется intensity. То есть это идея. Другая идея – это нам надо отпутать facilities на этой карте, если мы это не делаем. А то, как человек может глазами легко найти, если его склады или гаражи близко к его покупателям. Это другая идея. Третья вещь – это, если посмотреть на routes и на orders, это делать фильтрации по разным примитивным атрибутам. 5-6 атрибутов, которые мы часто пользуем. Например, тип заказа – pickup, drop-off, service. Или по какому-то типу customer. То есть по каким-то легким зафиксированным атрибутам, которые существуют на всех уровнях, всех мемберов, всех складов и так далее. То же самое у вас есть водители. Вот у вас есть customers, у вас нету склада «Ваши водители и сантехники». Где находится primary location водителя, у нас это записано. Но здесь в настройках, если вы кликаете на настройки этой карты, map options, ты можешь кликать map options. Здесь мы могли отпутать drive users, мы могли отпутать facilities, мы могли отпутать. И если бы мы это сделали, еще с выпадающим меню какие-то легкие фильтры поставили по типу facility, по типу driver, по типу user, тогда вы в одном месте решаете десятки проблем одному customer. А здесь мы не решаем проблему, например, у меня в каком районе нанять мне водителя, в каком районе поставить мне склад, в каком районе мне нужен новый тип склада, потому что есть склад для return, а есть склад для delivery, например. Другой сценарий у нас есть inventory API. Вы с ним, может, не знакомы, он очень старый. Но у вас есть facilities теперь и у вас есть inventory. Это количество какого-то типа товара в том складу. Так теперь у вас есть очень много покупателей чего-то. И вы теперь хотите на карте посмотреть, если вы можете обеспечить этих покупателей, обслужить их удачно. Но вы видите, что там, знаете, как на машине есть топливо или аккумулятор. И мы синхронизируем уровень топлива или энергии. То же самое в складу, если там есть, например, 100 тысяч квадратных метров чего-то, и там, может быть, 500 тысяч этих ручек, 2 миллиона кока-колы, галлонов и так далее. В принципе, на карте мы это имеем, в inventory API. Мы можем показывать, и они будут видеть визуально, что вот здесь мало, здесь много, здесь оптимально, здесь не хватает визуально. Даже если это в алгоритм не входит. И другая вещь это driver vehicle locations. Не vehicle primary location, vehicle last known location. То есть у тебя есть customers, кто-то тебе позвонил, тебе надо срочно поехать как-то что-то обслужить, правильно? Ты берешь, и ты хочешь найти самого близкого водителя к этому customer. Так теперь мы можем пользоваться как инструмент диспетча одного заказа в отсутствии маршрута, потому что мы это поддерживаем для Bloom.net уже, где ты можешь высылать заказ на множество водителей, и самый первый или самый подходящий может подтвердить, что он хочет тот заказ обработать и потом поехать к этому покупателю или к этому клиенту. Так это открывает идею вопрос, можем ли мы отсюда создать заказ прямо на customer location в этом дропдауне, если кликнуть edit, например. Если кликнуть кнопку дропдаун, нет-нет, дропдаун. Да, это правильно, шикарно, но в дропдауне индивидуальном есть это или нет? Есть, есть. Окей, супер, тогда последний вопрос. Customer location еще не готов, snapshot не готов еще, вот почему edit это дефолт. Процесс, да. Окей, хорошо, и потом финальная идея. Опять вы сделали, по моему мнению, 95% самую важную работу уже. Это просто накладываются фильтры новые. Показать фильм, например, как двигается это по дням. Если мы смотрим, например, на customer locations, как фильм, который показывает, как это меняется по календарному дню, например. Если мы посмотрели на orders, мы бы могли знать по дням orders, у нас есть heatmap, вы меняете фильтр, она показывает heatmap заказов в этом полигоновом границе, которое на экране видно, и показывает heatmap всех этих заказов, которые были на тот календарный день или на ту календарную неделю. Так же, как у вас в route editor, у вас есть preview, так вы можете показывать, как heatmap динамически меняется по времени, потому что эволюция, как бизнес растет или ухудшается, эволюция, как недели двигаются и так далее.

**Alexey Afanasiev** [00:30:40 - 00:30:54]: То есть нужно выставить временной интервал и динамически показать в рамках этого временного интервала динамику тепловой карты.

**Dan Khasis** [00:30:55 - 00:31:04]: На route destinations я разделял, я думаю. Технология такая же, правильно, heatmap так же меняется, все то же самое.

**Vova** [00:31:05 - 00:31:07]: У нас на destination, по-моему, сейчас карты нет.

**Dan Khasis** [00:31:12 - 00:31:28]: Вова, ты понимаешь, что я имею в виду насчет map options, иметь dropdown с автокомплитом каких-то клик-фильтров, чтобы люди могли визуально легко и понятно на это смотреть?

**Vova** [00:31:29 - 00:31:36]: Да, я представляю себе, но надо поговорить, какие конкретно фильтры нам нужны.

**Dan Khasis** [00:31:37 - 00:32:38]: Я дал уже 3 или 4, например, если там будет show facilities, и у facilities будет тип, и тип будет все facility type галочки, которые мы уже имеем. Например, для водителей, для юзеров будет, я думаю, user type filter, driver или что-то такое. Для vehicles, я думаю, там будет vehicles layer, и там тоже будет vehicle type или vehicle ID. Те же самые фильтры, которые у ребят уже есть в vehicles, чтобы не изобретать снова. Тогда они вытащат UUID тех типов vehicles, и эти UUID передадут в этот фильтр, этот пост, который они делают, чтобы генерировать heatmap.

**Vova** [00:32:38 - 00:32:50]: Я думаю, что мы можем попробовать сделать универсально, чтобы там был произвольный набор фильтров, поддерживался. Я подумаю, как это можно сделать. Может быть, мы дальше перейдем?

**Alexey Afanasiev** [00:32:50 - 00:32:55]: У нас впереди 7 страниц.

**Dan Khasis** [00:32:58 - 00:33:06]: Потому что вы сделали полезную вещь, которую можно перемножить с небольшим усилием и решить 10 еще бизнес-проблем.

**Alexey Afanasiev** [00:33:08 - 00:33:12]: Алексей, давай тогда ты optimization snapshot покажешь.

**Alexey Gusentsov** [00:33:13 - 00:33:17]: Привет всем. Добро.

**Davron Usmonov** [00:33:17 - 00:33:19]: Да, пожалуйста, экран.

**Alexey Gusentsov** [00:33:21 - 00:33:54]: Так, optimization snapshot. Значит, что? Мы сделали первую панель сеттингов. Она пока что на моках. Чисто так она будет выглядеть. Там сегмент 1, какая-то информация, сегмент 2, какая-то информация. Здесь будет optimization profile и ссылка на него. Пока что нет ссылки, потому что нет полей. Собственно, вот у нас будут 3 дроптауна. Первый сеттинг открыт. Второй план details, который остался. И третий прогресс. И нули, которые пустые прогрессы, мы поубирали. Ну, как-то так, пожалуй. Наверное, с большего здесь все в этом левом сеттбаре.

**Alexey Afanasiev** [00:33:59 - 00:34:04]: Это пример настроек гетерогенной оптимизации, когда у нас несколько конфигураций.

**Alexey Gusentsov** [00:34:05 - 00:34:08]: Самая большая вероятность. Самый сложный случай.

**Dan Khasis** [00:34:19 - 00:34:29]: Я думаю, что когда столько много настроек, я не уверен, что это правильное место ставить. Это все в левое место, в левое меню.

**Vova** [00:34:29 - 00:34:55]: Можно я еще скажу. Здесь некоторые настройки. Это же гомогенный флот, когда несколько разных каких-то профайлов используется. Так вот некоторые настройки, они общие для всех каких-то профайлов. Start date, early start time, они все общие. И поэтому не надо их два раза повторять. Можно вынести все за пределы сегмента. Каждый сегмент, по сути, это отдельный Vehicle Profile.

**Dan Khasis** [00:34:59 - 00:36:04]: Я думаю, что здесь хорошо сдвинуть. Я бы не называл их сегменты. Я бы их называл иначе. Я бы сделал 4 или 5 табов новых сверху. Одна для Vehicle Profile, одна для Optimization Profile, одна для что-то другого Profile. Потом в левой стороне я бы сделал для каждого из этих новых табов и секций счетчик, сколько задействовано для той оптимизации. Потом, если ты кликнул ту цифру, она бы прыгнула на ту вкладку, которая имела все задействованные сущности. И потом на тех вкладках с теми сущностями был бы список. И потом на уровне каждого ряда в том списке открылась бы этой ссылкой снапшот того типа сущности или объекта. И потом была бы встроена кнопочка для редакции в новой табе.

**Alexey Afanasiev** [00:36:11 - 00:36:18]: Вов, ты понял? Приблизительно.

**Oleksandr Ishchenko** [00:36:22 - 00:36:26]: Ой, блин.

**Vova** [00:36:26 - 00:36:41]: Я прощу прощения. Я не очень понял насчет редактирования. Это же снапшот, это Redundant Suchness, это просмотр результатов оптимизации. Если мы хотим делать Optimization Editor, то...

**Dan Khasis** [00:36:41 - 00:38:35]: Нет, ты не понял, что я сказал. Ты правильно начал, что ты не совсем понял. Ты... Окей, я слышал ли ты когда-нибудь насчет новой вещи, которая сейчас популярна в Америке, называется Supply Chain Transparency, где большие фирмы очень хотят сделать так, чтобы покупатели понимали, что их кофе, или их бриллианты, или их детские игрушки не были собраны или сделаны какими-то детскими рабами в Африке, или в Китае, или же в Азии где-то. Правильно? Да, есть такое. Я забыл, как называется, да. У них называется Supply Chain Transparency. И там есть эти кода, QR-кода, которые ставятся на ту вещь. Так, в принципе, я то же самое говорю, что в нашем случае у нас есть ситуация, где нам нужно взять и нам нужно показывать все входные материалы, которые были использованы для создания чего-то. В нашем случае создание оптимизационной симуляции.

**Vova** [00:38:36 - 00:38:41]: Это Destinations в нашем случае и Settings. Это входные данные.

**Dan Khasis** [00:38:41 - 00:39:47]: Да, и Settings есть 2 типа, правильно? То есть, извиняюсь, не 2 типа, скажем множество типов. Settings. Да. Все, что я говорю, Лова, то, что здесь все на 99% правильно, только они не должны выводить эти вещи в левое меню, а в вкладке для каждого типа настройки. Поскольку мы поддерживаем множество настроек, мы берем и будем показывать эти все вещи. И потом, если им интересна какая-то особая вещь, они кликнут на ту вещь, и она откроется, поддающая снапшот того объекта. Если они кликнут на Optimization Profile, они перейдут на тот Optimization Profile, который уже есть для него снапшот.

**Vova** [00:39:47 - 00:39:51]: Нет, у Optimization Profile нет снапшота в данный момент.

**Dan Khasis** [00:39:51 - 00:40:19]: Я и говорю, что он нужен. Или, как минимум, список этих вещей, список этих, как их звать, атрибутов, уже существует для каждого из них редактор. Тебе же нужно делать эту ссылку на тот редактор.

**Vova** [00:40:25 - 00:40:34]: Да, но редактировать сеттинги, если ты редактируешь сеттинги, это не значит, что оптимизация перезапустится и снова проранится. Я с тобой согласен.

**Dan Khasis** [00:40:34 - 00:40:36]: Ты это просто вслух говоришь.

**Vova** [00:40:36 - 00:40:56]: Я боюсь, что если мы разрешим редактировать сеттинги отсюда, то люди получат ложное ожидание, что у них перейдет переоптимизация. Поэтому я бы осторожно с редактированием сеттингов отсюда обращался.

**Dan Khasis** [00:40:58 - 00:43:28]: И мой ответ на это, это то, что это будет очень очевидно. Если, Алексей, ты можешь открыть optimization profiles страницу. Вот если здесь они кликнут, это то же самое. Если там было пять optimization profiles, в той оптимизации мы будем показывать пять рядов. На каждом ряду будет не edit, а view или open. Если они кликнут open, мы можем показать как бы мини-меню, все вещи насчет того. Вот эта страница идеальный экземпляр, мягко говоря, интеллигентной работы. Потому что мы видим, что место пропасть профайле, но truncation идет огромный. Если сделать редактор этого профайла, мы же видим, что там есть структурированные данные, которые мы можем отпутать как колонки и потом давать людям возможность включать и выключать эти колонки. Но мы бессмысленно, кто-то выбрал какие-то непонятно какие, в кавычках, инфа. Truncation происходит на 99% всего инфа, и тогда этот список полностью бесполезен. Так если бы у нас это работало правильно, здесь было этих 30 колонок, здесь был column picker, мы бы эмбедили вот это то же самое сюда. Человек бы открыл маршрут оптимизации и бы сразу понял, а здесь была использована оптимизация с такими-то ограничениями, и он не должен был бы гадать и не должен был кликать трех раз. Плюс люди боятся кликнуть edit, чтобы просмотреть настройки. Надо иметь view, а потом уже из view переходить в edit. Или если здесь сделать view, а edit как бы под меню.

**Vova** [00:43:34 - 00:44:00]: Да, я согласен, это неплохая идея. Собственно, сам набор настроек я бы хотел с тобой еще обсудить, Дэн, потому что у нас есть новый проект, как мы хотим поменять, переструктурировать настройки. Мы с тобой начали обсуждать в какой-то момент, но потом прервались и не продолжили. Я бы хотел вернуться туда, потому что это непосредственно связано одно с другим. Давайте дальше двигаться.

**Alexey Afanasiev** [00:44:00 - 00:44:06]: Ассайн борду посмотрим, Жень, покажешь?

**Dan Khasis** [00:44:07 - 00:44:15]: То есть, другими словами, мы не можем делать релиз этого, из-за... будет каша.

**Alexey Afanasiev** [00:44:18 - 00:44:22]: Оптимизация snapshot надо дорабатывать, там еще сыруйся.

**Dan Khasis** [00:44:27 - 00:44:35]: Если вы сдвинете это на другую вкладку, тогда это можно запускать.

**Alexey Afanasiev** [00:44:39 - 00:44:44]: Вов, ну тогда надо...

**Vova** [00:44:44 - 00:44:50]: Да, я услышал, там с дизайном не сложно, там просто нужно колонок набора сделать и все.

**Alexey Afanasiev** [00:44:50 - 00:44:55]: Жень, скажешь пару слов?

**Eugene** [00:44:56 - 00:45:41]: Да, что сделали по ассайн борде? Сделали все тайлы dragable, то есть теперь нету золоченных тайлов, у них есть визуальный differentiation из-за этого. Добавили фильтра. Первая итерация добавления фильтров сделали на юзерах и на vehicles. Здесь везде теперь у нас unassigned без assign to me, как было раньше. Плюс, я не знаю, давай еще обговорим вот это. То есть мы теперь добавили еще модул, подтверждающий переассаймент маршрута с одного дня на другой день. Вот, на этом все.

**Semeyon S** [00:45:44 - 00:45:49]: Ассайменты, то что все состояния теперь assignable, это ты скажите?

**Eugene** [00:45:50 - 00:45:53]: Да, это я вначале сказал. Ассайнабл, все dragable.

**Vova** [00:45:54 - 00:46:13]: Очень быстро просто это сделал. Хорошо. То есть другими словами, можно закомплетнутый маршрут, который закончился, переассайнить на другой день и переассайнить на него другого юзера, но это же уже история. Как можно историю переассайнивать, переписывать?

**Dan Khasis** [00:46:15 - 00:47:00]: Это не совсем верно, Вова. Это хорошее замечание, но это не совсем верно. Смотри, если маршрут уже dispatched, и начался, и закончился, его нельзя переассайнить, но это никак не связано с drag and drop. Мы смотрим, если этот маршрут, он же не... Надо иметь какие-то стройки, чтобы не иметь возможности сделать ситуацию, которую Вова описал. Но с точки зрения функционала, здесь наконец-то правильно реализовано. Вова просто говорит насчет ситуации, которая может все взорвать в чертовой матери.

**Vova** [00:47:00 - 00:47:07]: Да, вот это позавчера. Этот маршрут закончился, у него стоит галочка, он закончен, он проехан целиком.

**Dan Khasis** [00:47:07 - 00:47:09]: Как мы знаем это? Я это не знаю.

**Vova** [00:47:09 - 00:47:21]: Его проехал этот водитель. Иконка здесь говорит о том, проехан он или нет. Этот маршрут в пути, этот маршрут еще не начался, этот маршрут уже закончился.

**Dan Khasis** [00:47:26 - 00:47:41]: Окей, но это легкая защита. Мне интересна другая вещь. Во-первых, кликни правой кнопкой сюда, на секунду.

**Eugene** [00:47:45 - 00:47:47]: Мы хотим увидеть меню или?

**Dan Khasis** [00:47:54 - 00:48:12]: Просто идея, если кликнуть контроль, drag and drop, это же можно копить и пастить маршрут, дупликейт раут прямо сюда или дупликейт раут и напрямую assign кого-то. Тогда мы решаем еще одну критическую проблему.

**Vova** [00:48:19 - 00:48:23]: Это должно быть просто имплементировать, дупликейт таким образом.

**Oleksandr Ishchenko** [00:48:23 - 00:49:00]: Я спрошу для ясности, дупликейт только для уже проеханных маршрутов? Нет, почему? Нет, для любых. Я просто к тому, что если маршрут проехан, то реально вовремя замечание уважить тем, что такие маршруты могут только быть дупликейт, но не перетаскиваться, потому что тогда это не имеет смысла. Это было для рекорда? Александр, ты смешал две разные вещи. Поведение drag and drop, оно по-хорошему должно вот эти кейсы через настройки в account settings регулироваться.

**Semeyon S** [00:49:00 - 00:49:48]: Потому что у нас вот этот вот assignment сейчас на страничке же routes, он очень слабый. И можно ассайнить и водители, и автомобили на прошедшие маршруты. И клиенты этой функции в принципе далеко не всегда пользуются. Поэтому я бы эти вещи разделил. Дублицируем маршрут, это control+, а управление именно drag вот этих критических состояний лучше через настройки. Нет, настройки. Я просто не очень понимаю, кому может понадобиться перенести на другой день уже проеханный маршрут, или переназначить водителя, который уже фактически отработал свою работу. Как значит переназначить теперь другого водителя?

**Vova** [00:49:48 - 00:50:00]: Переназначить легко. Я миллион раз это рассказывал, когда я засайнил одного человека, а на самом деле поехал другой.

**Semeyon S** [00:50:00 - 00:50:12]: Уволился, заболел, подменил, да, там use case у него нет. А если маршрут уже закончился?

**Vova** [00:50:12 - 00:50:18]: Я говорю про проеханный маршрут, законченный.

**Dan Khasis** [00:50:22 - 00:51:20]: Я понимаю, что вы говорите. Я всем вам подскажу. Модифицировать юзера после законченного маршрута или машину – это не проблема. Вопрос у Вовы более на счет маршрут закончен, как его можно двигать в воскресенье, если тот instantiation маршрута уже полностью закончен. То есть есть полный смысл reassign user и reassign vehicle. Вопрос просто, если человек пытается сдвинуть, надо просто сказать, вы не можете сдвинуть маршрут, который уже закончен. Хотите ли вы его скопировать? И потом, какие параметры вы хотите скопировать? Да, нет, start time драйвера, водителя.

**Semeyon S** [00:51:23 - 00:51:29]: То есть drag-and-drop у нас происходит, но в зависимости от статуса инициируются разные действия.

**Oleksandr Ishchenko** [00:51:29 - 00:51:42]: Это я имел в виду, именно это. Перетаскивание на таком маршруте дублируется, а перетаскивание на маршруте, который не закончил, ну, да делайте с ним что хотите.

**Semeyon S** [00:51:42 - 00:51:49]: Не просто дублируется, а появляется запрос, что оно дублируется с возможностью изменить какие-то настройки.

**Dan Khasis** [00:51:49 - 00:51:55]: Элементарные настройки.

**Oleksandr Ishchenko** [00:52:03 - 00:52:05]: Вот такая логика сейчас воспринимается.

**Vova** [00:52:09 - 00:52:57]: Еще я хочу сказать, что у нас нет анасайна. Технически в нашей системе невозможно сделать анасайн маршрута, потому что поле assign to not nullable в базе данных. Когда мы пишем unassigned, на самом деле этот маршрут заассайнен на начальника этого юзера. Если этот начальник зайдет на свой аккаунт, то он увидит, что эти маршруты назначены на него. То есть он не увидит их как unassigned, он увидит их как assigned на меня. И это вранье, на мой вкус. Неприятно. Мы путаем юзеров.

**Dan Khasis** [00:53:04 - 00:53:13]: Вова прав, но это большой архитектурный опрос к Игорю больше, чем к любому другому человеку.

**Oleksandr Ishchenko** [00:53:14 - 00:53:24]: А можно вопрос? Почему именно архитектурный? Как это называется, сервисный аккаунт не решает вопрос?

**Semeyon S** [00:53:24 - 00:53:35]: Просто создать аккаунт administration, whatever. Нет, не решает. Ребята, это другой вопрос, это вопрос базы данных.

**Oleksandr Ishchenko** [00:53:36 - 00:53:37]: Короткий ответ я услышал.

**Semeyon S** [00:53:37 - 00:53:41]: Это решение просто не решается, к сожалению.

**Oleksandr Ishchenko** [00:53:41 - 00:53:45]: Я думал просто попроще, но не самый умный.

**Igor Skrynkovskyy** [00:53:45 - 00:53:57]: Это не только проблема базы данных, это проблема целой системы. Потому что система была спроектирована для использования вот этих значений, о которых Володя говорит. И сейчас, чтобы их нести, это очень большие изменения.

**Dan Khasis** [00:54:01 - 00:54:36]: Самое легкое решение, Игорь, это если мы сделаем фантомного юзера при каждом создании нового маршрута, то есть нового аккаунта. И тот фантомный юзер прячется везде, но он есть. Именно того фантомного юзера, дочернего от главного. Не бил им за него, у него нет права логин делать, логаут делать, но все маршруты, которые он assigned, идут на этого липового юзера.

**Oleksandr Ishchenko** [00:54:36 - 00:54:47]: Под сервисным аккаунтом я это имел ввиду. Я, наверное, не смог дообъяснить, что я именно имел ввиду. Вот фантомный юзер красивее звучит. Ну, понятнее, вернее.

**Dan Khasis** [00:54:50 - 00:54:59]: Другой вариант, Игорь, это полностью менять. Это assignment, новую assignment таблицу. И все туда, миграцию делать. Это новая головная боль.

**Igor Skrynkovskyy** [00:55:01 - 00:55:09]: Вопрос того, Дэн, стоит, если мы хотим это делать, у нас уже есть наработки того, как это делать. Да, да, привет, привет.

**Vova** [00:55:09 - 00:55:13]: Я сейчас занят, просто не могу говорить.

**Dan Khasis** [00:55:14 - 00:55:18]: Я сделал view тоже, Вова. Я понял, если вы говорите.

**Igor Skrynkovskyy** [00:55:20 - 00:55:37]: Вопрос того, как мы хотим это делать. Если мы это хотим делать, у нас есть наработки, у нас есть идеи, как это сделать. Вопрос времени. Если есть команда, которая это делает, ребята садятся и делают.

**Dan Khasis** [00:55:41 - 00:56:15]: Давай, скажем, если на то пошло, я могу тебе дать другой пример. Если человек хочет функционал, он платит лишних 50 долларов в месяц. Он инициализирует этого липового юзера самого. Он модифицирует optimization profile и ставит того юзера как дефолта для всех. И по умолчанию все идет на этого юзера. Если кого-то это тревожит или беспокоит. Это уже прямо сейчас возможно.

**Igor Skrynkovskyy** [00:56:18 - 00:56:23]: Да, но это тяжело пользователю будет объяснить, почему они должны такие вещи делать.

**Dan Khasis** [00:56:24 - 00:56:31]: Окей, но объяснить не объяснить, но workaround есть, если мы говорим насчет workaround.

**Igor Skrynkovskyy** [00:56:32 - 00:56:33]: Само собой, да.

**Dan Khasis** [00:56:38 - 00:57:02]: Окей, на этом экране у нас мы не можем забыть важный момент. Что здесь критически важно иметь. Если у человека множество facilities, нам критически важно эти facilities отпутать. И потом в скоростном режиме включать или выключать эти facilities.

**Oleksandr Ishchenko** [00:57:04 - 00:57:07]: Ты в понедельник упоминал, да.

**Semeyon S** [00:57:07 - 00:57:10]: Это в очередной раз.

**Oleksandr Ishchenko** [00:57:10 - 00:57:14]: Деревом отрисовывать.

**Vova** [00:57:17 - 00:57:24]: Которые нужно будет свернуть и развернуть. Именно.

**Dan Khasis** [00:57:28 - 00:57:30]: И то же самое в регионе тоже.

**Vova** [00:57:36 - 00:57:49]: Просто здесь будет дополнительная фигня, как в таблицах у нас. И дальше ты выбираешь, по какому параметру группировать хочешь юзера. Хочешь по facility, хочешь по региону, хочешь почему угодно.

**Semeyon S** [00:57:54 - 00:57:58]: Давайте дальше двигаться.

**Dan Khasis** [00:58:02 - 00:59:13]: Подожди, на этом assignment кендере мы должны... Давай, Жень, покажи search еще раз. Я думаю, что... Давай я скажу... Мы пройдемся через мой mental checklist, окей? Я притворяюсь, что... Это маршрут. Маршрут имеет какое-то непонятное имя. Tuesday 6, это нифига не значит. Мой первый вопрос это... Какой-то регион, какая-то зона, какая-то территория. Какой-то водитель. Окей, здесь Джан Доу. Какая-то машина. Я уже... Теперь я... Я не понимаю, я сейчас на users активирован или на vehicles? Я сейчас на users? Да. Но я не вижу здесь, какой vehicle. Так что я должен теперь мотаться туда-сюда, туда-сюда, туда-сюда? Зачем я это заморочить этому юзеру? Давай как-то покажем сразу assigned vehicle, который к нему про-assigned. Мы же знаем это.

**Vova** [00:59:18 - 00:59:21]: Это если к нему про-assigned. Он же не всегда про-assigned.

**Dan Khasis** [00:59:24 - 00:59:28]: Если он про-assigned, где написанная машина? Вот что я спрашиваю.

**Vova** [00:59:33 - 00:59:54]: Проверишь. Предполагалось, что у каждого маршрута здесь будет tooltip, в котором показывается информация о маршруте, включая то, какой vehicle у нас за-assigned.

**Dan Khasis** [00:59:55 - 01:00:19]: Некоторые вещи надо показывать мгновенно. Например, скорость и количество топлива. Например, если мы говорим насчет telematics. Или там 2-3 вещи всегда обязательно видеть и понимать надо сразу. А потом уже, как Вова сказал, обогащать это все на хавари.

**Vova** [01:00:21 - 01:00:34]: Согласно макетам, у нас здесь было рабочее время каждого водителя. И, соответственно, можно увидеть, как его рабочие часы соответствуют, как они заполняются.

**Dan Khasis** [01:00:35 - 01:01:15]: Если ты наведешь мышку на водителя, человек бы хотел видеть скиллы этого водителя. А если ты наведешь на маршрут, ты бы хотел видеть список дистинктовых скиллов или constraint, которые к тому водителю. И если есть совместимость. Потому что представьте себе, что оптимизационный этот engine все идеально сделал, все идеально нашел. Оптимизация прошла, и теперь мы хотим нарушать все эти правила. Нарушивать все эти правила, нарушать все эти правила.

**Vova** [01:01:23 - 01:01:41]: По-хорошему, здесь должна быть валидация, которая не дает тебе перетащить маршрут, в котором есть requirement по скиллам. Или какие-то requirement к capacity машины, например. Должна быть валидация, которая не позволит засанить это на машину меньшего размера или на водителя, который не имеет скиллов.

**Oleksandr Ishchenko** [01:01:55 - 01:02:16]: Замечание резонное, кстати. Резонное? Да, резонное. То, что Вова говорит, о чем перетаскивать на водителя, у которого нет у кого-то такие скилла, чтобы обслужить этот конкретный маршрут.

**Dan Khasis** [01:02:18 - 01:03:00]: Я думаю, что все равно люди могут сделать override. Но не думайте только насчет маршрута, а как насчет vehicle. Есть маршрут, который имеет какие-то особые вещи, связанные с, как их звать, vehicle constraints. И что будет, если ты возьмешь водителя, который не имеет права садиться за руль той машины, потому что у него нет коммерческих водительских прав. Что тогда?

**Vova** [01:03:03 - 01:03:23]: Сами борда должны предупредить тебя, что ты делаешь невалидную операцию. А вообще можно даже запретить drag-and-drop в эту ячейку, потому что это водителя по какой-то причине нельзя переносить. Этот маршрут не совместим с этим водителем, например. Поэтому мы должны обязательно это валидировать и предупреждать водителя о том, что он делает что-то невалидное.

**Oleksandr Ishchenko** [01:03:23 - 01:03:44]: Я бы сказал не запретить, а предупредить, потому что могут быть обстоятельства, где просто систему диспетчера не обдать с этими правами и так дальше. То есть просто предупредить и пусть напишут, агрируй, double-triple-check сделал, пересанивай. Но запрещать это плохая идея. Я use-case описал.

**Dan Khasis** [01:03:44 - 01:03:56]: Я не согласен с тобой. Потому что если мы ставим водителя, который будет атомные материалы двигать без лицензии и всех померет по черному.

**Oleksandr Ishchenko** [01:03:57 - 01:04:23]: Нет, я еще раз повторю. Я не говорю, что у него их нет. Я говорю, что диспетчер не успел это ему в скиллы добавить, но тот, кто перетаскивает, точно знает, что у этого человека все права есть. Рабочий день идет, надо на час поехать. А не в систему лазить, что-то там вносить. Я это имел в виду. Пусть они лазят в нашу систему. Все-таки заставить, да? Окей, понял, услышал.

**Dan Khasis** [01:04:26 - 01:05:34]: Я тебе расскажу быструю историю. В американских госпиталях тебе доктор не приносит лекарства. Тебе медсестра приносит лекарства. И когда она приносит тебе лекарства, она просит, доктор заказывает. Она идет в ЕМАР. ЕМАР идет в уведомление в аптеку. Аптека в очереди начинает обрабатывать. И после обработки они приходят назад в уведомление медсестре забрать лекарства. Потом, когда медсестра приходит назад, не все медсестры квалифицированы делать администрацию этого лекарства. Если это, например, наркоз в спину, это только анестезиолог или человек, который тренирован анестезиологией, может это сделать.

**Oleksandr Ishchenko** [01:05:34 - 01:05:39]: Прибирать последствия лучше. Я просто не думал, что тут так же строго, как в медицине.

**Dan Khasis** [01:05:44 - 01:09:21]: Следующий пункт. Потом, когда приходит медсестра, она не может это лекарство даже сделать администрацию перед тем, как они сосканируют наклейки на пациента, на ноге, на руке. И тогда система говорит, окей, ты можешь делать. Потом приходит вторая медсестра, я говорю насчет Америки, и говорит, спрашивает день рождения человека, проверяет опять, что на руке. Я даю ему такое лекарство. Да, да, окей. Она тоже вводит что-то, и потом они дают. Теперь здесь ты везешь 80 тысяч, 40 тысяч, 50 тысяч килограмм чего-то. Некоторые из этих материалов нефть, химия, кислота, радиоактивные какие-то вещи. И ты берешь, и ты ассайнуешь водителя, который на велосипеде даже не умеет кататься. Или только на велосипеде умеет кататься, потому что он байкер. И тогда что? Кто-то погибнет 100%. Кстати, Игорь, я хочу напомнить важный момент. Не надо сейчас брать работу, но это Декарт нам рассказал насчет этой идеи. У вас есть машина, она едет с первой точки на вторую точку, и даже на третью точку. И она ведет в эти точки с депота эти радиоактивные химикаты какие-то в госпиталях для рентгенов, для эмараев и так далее. Радиоактивные здесь, сюда они ведут. Взрывчатки в виде компрессированного кислорода и так далее. В третье место они везут химию чистить. Какие-то, я не знаю, суперхимию, чтобы очищать подвал госпиталя, чтобы общую систему воды не попала. Там это все эти biohazardous waste. Теперь этот чувак закончил эти три задачи. Ему надо возвращаться назад в склад, в депот. Значит, что они говорят? Нет. Чтобы ехать по этим трем или энное количество остановок, интересная ситуация возникает, что эти дороги, как вы знаете, более ограниченные. Их меньше такого типа дорог, которые поддерживают компетабельность с этими всеми жесткими ограничениями. Но на обратном пути у него больше нету радиоактивных изотопов, взрывчаток кислорода в форме кислородовых баллонов или каких-то суперопасных химических вещей. Так машина пустая. Они говорят, какого хера чувак должен ехать по каким-то суперограниченным дорогам, где, я не знаю, средняя скорость 20 км в части, много пробок, когда он может ехать на более расслабленных дорогах, поскольку нет больше ограничений.

**Vova** [01:09:22 - 01:09:30]: Но это только при условии, если ему удалось разгрузиться на всех трех остановках. Если на какой-то остановке он зафейлил, то констрейнт остается.

**Dan Khasis** [01:09:32 - 01:10:15]: Констрейнт остается, но это должно внедриться на уровне навигации в этих мобильных приложениях, потому что там динамически вейхл профил меняется. Но идея в том, что вейхл раутинг профил как бы динамически меняется по субсегментам driving directions. Если изначально предположить, что на обратном пути не нужно делать такие ограниченные маршруты, тогда с нашей точки зрения мы можем показывать покупателям, что с нашей системой у них будет еще меньше употребления.

**Vova** [01:10:21 - 01:10:32]: Аналогичная ситуация, наверное, с цементовозами, когда полный цементовоз должен ехать, поворачивая только в одну сторону, а когда он разгрузился, у него барабан не крутится, он может поворачивать куда угодно.

**Dan Khasis** [01:10:36 - 01:11:06]: Да, ситуация такая же с бетоном, я хотел сказать. И ты напомнил мне еще о другой вещи, кстати. Ты можешь кликнуть здесь на Алексей или Евгения, на avoiding zones на секунду. Я хочу показать вам другую вещь, которую мы годами уже обсуждаем, но никогда не сделали.

**Eugene** [01:11:06 - 01:11:08]: Avoiding zones на ордерах можно посмотреть?

**Dan Khasis** [01:11:09 - 01:14:00]: Где хочешь, я объясню почему. У нас есть база данных, например, всех школ Америки. И у тебя есть огромная машина, которая весит 25 тысяч килограмм. Если можно объехать школу, почему нет? Чтобы меньше риска было. Так идея в том, что, в принципе, есть третий тип зон для безопасия, когда ты не хочешь туда въезжать или проезжать через эти зоны. Так идея в том, что, если кто-то включит это, тогда мы посмотрим на их маршрут. Если в том маршруте есть пересечение с этими полигонами, это просто Point and Polygon Test или Line Polygon Intersection Test. Проходят какие-то зоны. И если они говорят в Routing Profile, я хочу избегать все зоны, где школы есть. И получится ситуация, где они не будут въезжать в зоны возле школ, только если супер необходимо. Ну, в принципе, я могу дать еще другой пример. Если кликнуть на любой Destination Snapshot, мы знаем, у нас есть другая база данных, которая описывает, если какой-то адрес, как это, небоскреб, один уровень, второй уровень, третий уровень, четвертый уровень и так далее. Понимаете? Тогда это нам подсказывает, сколько времени мы ожидаем потратить на ту точку или описание подсказки водителя заранее или описание подсказки диспетчера заранее и так далее.

**Alexey Afanasiev** [01:14:04 - 01:14:39]: У меня последний вопрос по assignment остался. Женя, можешь открыть борду? SearchRoute... Помнишь? Да-да-да. Вопрос такой. Мы здесь выводим список раутов в рамках текущего дня. И что у нас получается, если клиент достаточно крупный и раутов здесь очень много? Нужно ли нам здесь группировать, фильтровать и так далее? Такой вопрос.

**Semeyon S** [01:14:39 - 01:14:43]: Я же рассказывал много раз.

**Alexey Afanasiev** [01:14:43 - 01:14:46]: Ты рассказывал, я хочу...

**Dan Khasis** [01:14:48 - 01:15:30]: Я не знаю, как это... Есть клиенты 100%, которые имеют 500 водителей. И наша задача это как-то или водителей, или маршрутов показывать. Но я думаю, что, например... У меня нет ответа, у меня есть идея. Я могу так сказать. Если ты смотришь на поиск по маршруту, я не уверен, что имеет смысл искать маршруты, которые трехлетней давности или возраста.

**Vova** [01:15:35 - 01:15:57]: Еще не имеет смысла искать комплектантные маршруты, засайденные, мне кажется. Как минимум, имеет смысл искать маршруты, засайденные, заскедуленные на этот день, которые доступны для этого водителя. То есть они не засайдены на кого-то другого. Это анасайд маршруты, которые этот водитель может в этот день проехать. Я бы так искал.

**Dan Khasis** [01:15:58 - 01:16:08]: Окей, но если на то пошло, тогда это те маршруты, которые компетентны с тем водителем и его скиллами тоже. Правильно.

**Vova** [01:16:08 - 01:16:13]: И при этом они...

**Dan Khasis** [01:16:13 - 01:16:23]: Если же есть засайденный веикл, значит это тройное пересечение маршрута и веикла и водителя. Только вот эти тогда фильтры должны показываться.

**Vova** [01:16:25 - 01:16:36]: Правильно. И при этом он должен быть именно не засайденный и именно заскедуленный на этот день. То есть это прям пересечение из пяти секторов.

**Alexey Afanasiev** [01:16:36 - 01:17:05]: Очень маленькое. Окей, я получил ответ. Давайте дальше тогда, Сергей. Спасибо. Так, Сергей, как ты? Слышно? Привет, да.

**Serhii Kasainov** [01:17:05 - 01:17:17]: Да, да, привет. Если отвалится интернет, простите, пожалуйста. У меня было две небольшие, но очень интересные задачки.

**Alexey Afanasiev** [01:17:17 - 01:17:21]: Есть у нас диалог загрузки адресов, который совсем не умел работать.

**Serhii Kasainov** [01:17:21 - 01:17:41]: С большими данными. С большим количеством. Первая задача была сделать UI комфортно для работы на этих вот больших файлах. И она в принципе уже выполнена и доставлена на прот. То есть на карте у нас...

**Alexey Afanasiev** [01:17:41 - 01:17:45]: Извините, это займет какое-то время.

**Serhii Kasainov** [01:17:45 - 01:18:09]: 11 тысяч адресов. На карту у нас была добавлена кластеризация, которая не мешает как бы предыдущему флоу этого диалога. Слева у нас сейчас будет табличка. Там была попытка имплементации Infinite Scroll. Не очень быстрая. Поэтому на пяти тысячах браузер здесь уже падал.

**Dan Khasis** [01:18:13 - 01:18:16]: А зачем она вообще что-то показывает? И кстати, где запятые?

**Serhii Kasainov** [01:18:20 - 01:18:23]: На этапе загрузки запятые?

**Alexey Afanasiev** [01:18:23 - 01:18:33]: Да, запятые поправим. Да, там был момент. Я увидел.

**Serhii Kasainov** [01:18:33 - 01:18:36]: В общем, теперь с этим возможно комфортно работать.

**Dan Khasis** [01:18:38 - 01:18:50]: Это выглядит хорошо. Но я скажу то же самое, что говорил раньше. Выбери любого из этих адресов на секунду.

**Serhii Kasainov** [01:18:53 - 01:18:55]: Выбрать в таблице или на карте?

**Dan Khasis** [01:18:57 - 01:19:12]: Где хочешь. Это идеальное место здесь вытаскивать из Customer Address Book.

**Serhii Kasainov** [01:19:23 - 01:19:33]: Просто это наш так называемый Legacy. Есть уже под этот экран новый дизайн. И я думаю, что, наверное, надо его брать в работу.

**Dan Khasis** [01:19:35 - 01:20:07]: Здесь две части. На бокенде из колесного хранилища вытаскивать какие-то данные насчет Customer Location. Чтобы человек помогать подсказать этому человеку. Или как минимум только на Tooltip на какой-то API послать поиск. Например, на Customer Location API сказать вот этот адрес, кто там. И она может возвратить на Hover. То есть нам не надо подгружать девяносто тысяч записей.

**Serhii Kasainov** [01:20:13 - 01:20:17]: Тогда нам придется прикручивать кластеризацию на бокенде для карты.

**Dan Khasis** [01:20:18 - 01:20:50]: Я не согласен. Я думаю, что человек навел мышку на какой-то один адрес. На один индивидуальный адрес. И мы просто делаем в тот момент асинхронный реквест на бокенд. И просим Customer Location API расскажи мне, пожалуйста, насчет этого адреса в контексте этого залогиненного аккаунта. И она отпутнет какие-то данные насчет этого Customer Location.

**Serhii Kasainov** [01:20:52 - 01:21:20]: Мы можем это сделать. Но здесь проблемы с перформансом были исключительно в реализации, а не в количестве записей. JavaScript, вот такие простые вещи с двумя-тремя полями на 20 тысяч записей работает очень быстро. Ладно, умеренно быстро. То есть сейчас проблем с перформансом нет. А они были. Структуру данных мы не меняли. Ничего дополнительно с бэком мы не получаем.

**Dan Khasis** [01:21:20 - 01:21:51]: Окей, это шикарно, это хорошо. Я уже три года прошу, сдвиньте это, пожалуйста. Там 5, 10, 20 пикселей налево. Слишком близко здесь. Здесь не хватает другого суперлегкого улучшения. Здесь нет поиска. Если ты хочешь найти что-то, ты не можешь что-то найти. Согласен.

**Alexey Afanasiev** [01:21:51 - 01:21:59]: Особенно с 20... Давайте дальше.

**Serhii Kasainov** [01:21:59 - 01:22:26]: И на mock'ах. Да, на mock'ах была сделана вот этот вот, назовем его summary, selection summary я его назвал. Я получил подтверждение, что он задумывал flow вот такой вот. То есть когда мы меняем календарь, когда мы меняем фильтра, которые вот здесь у нас под bulk action'ами.

**Dan Khasis** [01:22:26 - 01:22:30]: Что такое mock' значит? Мокк это значит липовые, фиксированные вещи?

**Serhii Kasainov** [01:22:31 - 01:23:29]: Да. Backend API было только сегодня готово. Мы его подключим завтра. Поэтому это данные. И соответственно фильмы влияют на вот эти метрики, а вот эти selection'ы они влияют на summary. Summary сделали, как я услышал, по аналогии с Excel'ами, с Google таблицами. Мне очень сильно режет слово some вот здесь вот. Тексты мы еще не согласовывали, но... А так... А, и тут еще был один вопрос.

**Dan Khasis** [01:23:30 - 01:23:36]: Это не совсем правильно, что это per route, правильно? Это же просто... per aggregation type.

**Vova** [01:23:38 - 01:24:14]: В данном случае мы имеем список раутов, и поэтому average можно считать по-разному. По идее, можно было бы сделать здесь тип aggregation. По какому aggregation мы будем делать average. Но мы это не сделали. Мы сделали самый простой вариант per route aggregation, только фиксированный. Если ты скажешь, что нам нужно выбор типа агрегации еще сюда сделать для average, то мы прикрутим его.

**Dan Khasis** [01:24:15 - 01:24:37]: Нет, давай сейчас не делать это. Я бы сделал просто average и просто sum. Я ставил пока... Аverage нужно указывать per что, потому что можно average per day считать, можно average per day, per route, per hour, per mile, как угодно можно считать. Сейчас ты смотришь на какой-то период.

**Vova** [01:24:37 - 01:24:53]: Ты сделал какой-то selection. У тебя этот selection многодневный, он на несколько дней. Можно высчитать, сколько в среднем на день выходит при этом selection.

**Semeyon S** [01:24:53 - 01:25:04]: Так это же группировка. А у тебя вся информация выделена чеками и выводится в нижнем углу?

**Vova** [01:25:04 - 01:25:40]: У меня есть selection, конкретный selection нескольких маршрутов. Эти маршруты в разные дни. Я знаю, что у меня в этом selection маршруты на три дня. Я могу посчитать, сколько destinations, сколько маршрутов, сколько там маршрутов в этих дистанциях всего. Ты уположняешь эту группировку? Нет, я просто говорю о том, что этот average, если мы не укажем per что, то тогда можно трактовать это по-разному. Мы можем убрать per route отсюда, но тогда нужно в tooltip обязательно показывать, что это average per route, чтобы исключить неоднозначное.

**Dan Khasis** [01:25:45 - 01:25:56]: Это неоднозначное, где это per route, но это не надо как бы засовывать в это очень как бы... Это много употребляет здесь место. Мы подумаем, а почему здесь галочка?

**Vova** [01:25:56 - 01:26:15]: Зачем здесь галочка? Это когда ты сокроешь эту окношку, то эта метрика останется на экране навсегда. Ты будешь, когда меняешь selection, будешь видеть эту цифру. То есть это ты выбираешь метрику, которая тебя интересует.

**Dan Khasis** [01:26:16 - 01:26:21]: А где custom агрегация по custom полям? Они тоже там будут? По integer полям?

**Vova** [01:26:25 - 01:26:40]: Продолжалось, что здесь будут все колонки активные, которые можно просуммировать. Но я не знаю, сможем ли мы это имплементировать. Это уже не ко мне.

**Serhii Kasainov** [01:26:40 - 01:27:00]: Здесь очень много колонок. Еще в summary у нас бывает, когда очень много маршрутов, вот здесь данные типа 20 тысяч и 700 часов. Мы это будем округлять до дней? Или мы здесь все-таки рассуждаем в часах?

**Dan Khasis** [01:27:03 - 01:27:14]: Это математика неправильная, что здесь невозможно. Это математика неправильная. Маршрут никогда не будет больше, чем 10-12 часов. Нет, это сумма.

**Vova** [01:27:14 - 01:27:19]: А если сумма? 26 маршрутов.

**Dan Khasis** [01:27:27 - 01:28:53]: Проблема, что все эти суммы почти бесполезны, кроме как для глубокого анализа каких-то очень особых вещей. Какими-то особыми людьми, в каком-то особой ситуации, что почти бесполезно смотреть на суммы, если это не... Например, если бы мы смотрели на сумму, было бы... Например, посмотрите на planned distance, извиняюсь, planned duration. Это уже неправильно. Как planned duration для меня это сумма всего? А как так, что travel time и service time и wait duration и break duration меньше, чем planned duration, которая сумма должна быть всех ключевых элементов?

**Vova** [01:28:53 - 01:29:00]: Это рендомные моковые данные, я думаю, сейчас. Окей.

**Dan Khasis** [01:29:02 - 01:29:26]: порядок неправильный, нарушен порядок. Out of sequence visit, если оно то пошло, должно быть здесь, а не здесь. Здесь вы идете расстояние, время, время, время, время. Почему здесь все time, time, but duration? Выберите слово. Мы как непонятно кто. Или мы duration, или мы time.

**Vova** [01:29:43 - 01:29:50]: travel duration, service duration, wait duration, break duration. Вроде звучит сносно, да? Если мы везде будем duration.

**Dan Khasis** [01:29:56 - 01:30:02]: Просто total для меня, total time или total duration, это все, все вещи из всех мест.

**Vova** [01:30:05 - 01:30:11]: Правильно. Total time это сумма travel with service with wait with breaks.

**Dan Khasis** [01:30:14 - 01:31:56]: Да, но вот здесь было бы хорошо понять, что вот, например, я вам дам пример. У тебя есть тысяча водителей, тебе в принципе пофигу, если эти тысяча водителей едут 10 миллион миль в день или 5 миллион миль в день. Потому что ты не знаешь сколько они должны ехать. Ты знаешь. Теперь давай обсудим работать. Они должны проехать, например, 2000 часов в день рабочих времени. Это много или это мало? Я не знаю, потому что если у тебя каждый чувак работает 20 часов в день, это отличается, если он работает 8 часов в день. Или твои маршруты недостаточно емкие, так ты не знаешь среднее время между остановками. Если слишком большое, это плохо. Если слишком маленькое, это лучше. Или там, почему у них 25% всего рабочего времени на перекур. Это тоже же идиотство. Без процентов или без пропорций все эти цифры бесполезны. Например, кого волнует, что сегодня в Лондоне было 5 миллионов чемоданов? Если нет контекста, сколько ожидается чемоданов и какое было там, если это было 99% всего ожидания или 5%?

**Vova** [01:31:59 - 01:32:06]: Вопрос, где мы возьмем ожидания, потому что мы сейчас в нашей системе мы не дефайним ожидания нигде.

**Dan Khasis** [01:32:08 - 01:32:49]: Мы частично это делаем, но не совсем. Мы частично это делаем, потому что вы ставите на уровне маршрута сколько максимальное количество часов он может работать. Вы как минимум можете показать пропорции, 20% всего времени на service time, 30% на wait time, 10% на break, и рабочего времени только 10%. То есть, может быть, здесь надо прибавить еще одну колонку, которая проценты показывает?

**Vova** [01:32:54 - 01:33:09]: Да, для вещей, которые являются сабсетом, в принципе, сюда можно вставить отдельную колонку. Некоторые вещи можно выразить в процентах, некоторые нельзя.

**Dan Khasis** [01:33:12 - 01:35:30]: Completed destinations, например, integer, а не decimal. Потом, когда у тебя есть масштаб тысячи часов, показывает 0 минут, это тоже смешно. То есть, тогда следующий пункт. Все эти нули пропадают чертой матери, потому что они не нужны никому. И потом в некоторых случаях, может быть, имеет смысл сделать индентацию под дочерними элементы времени, чтобы было понятно, что это под набор, иерархически под набор суммы всего времени. И потом третья колонка, которая будет показывать проценты, будет очевидна, что каждый ряд это числитель, а знаменатель это total. Тогда они смогут понять, и в принципе, когда будет в какой-то момент snapshot, performance snapshot на уровне организации склада, водителя и так далее, этот процент будет или ухудшаться, или улучшаться. Например, service time будет идти вниз, если бизнес хочет минимизировать его, а некоторые бизнесы хотят максимизировать, например, техники, электрики и так далее, хотят больше денег собирать, чем больше времени они собирают, чем больше им платят денег в час. Но есть еще другая проблема, то иногда за какой-то задуманный уровень обслуживания, если сделать order, у order есть tip, у нас сейчас нет, например, order inventory type, у тебя есть 100 процедур, которые ты можешь делать, например, на кондиционере дома, на охлаждение, поменять вентилятор, поменять провод, поменять композитор, поменять там под давлением залить новый фреон какой-то.

**Serhii Kasainov** [01:35:40 - 01:36:36]: Скорее всего, я не прав, но вещи типа проценты, вот эти вот графики, это аналитика. Для аналитики мы и делали snapshot, мы делали вот эту дашбарду, кто хочет посмотреть там, как компания провела сегодняшний день, насколько успешно, они могут или здесь выбрать, или day snapshot открыть. А вот это, что у нас появилось исключительно, когда мы делаем selection, то есть условно я хочу сделать reschedule маршрутов на завтра по какой-то причине, и мне здесь покажется, сколько я destination, сколько destination суммарно я сейчас для них применю какой-то bulk action. То есть тут я сказал, что некоторые вот эти параметры, они лишние. Аналитики не будут, мне кажется, сидеть и заниматься изучением вот этого вот элемента нового.

**Dan Khasis** [01:36:38 - 01:37:15]: Аналитики нет, но когда сидит человек как Пол или Макс или другие люди, и они на демонстрации продажи с клиентом, и они хотят им сказать, смотри, я могу сделать оптимизацию, у меня появилось 20 маршрутов, они выберут галочки. У нас, кстати, это еще другая проблема, что у нас нет галочки выбрать только все начальные элементы вот этого sub-группы. Это большая проблема, и это значит, что полностью бесполезная система. Почему? Потому что ты не можешь кликнуть на какой-то день в рамках того дня.

**Vova** [01:37:20 - 01:37:43]: У нас во всех макетах вот здесь вот стоит меню многоточие, которое предполагалось, что будет иметь один action, который добавляет в selection всю группу, содержимое всей группы. И мы этот group actions потеряли, они не имплементированы.

**Dan Khasis** [01:37:44 - 01:38:35]: Групп надо, когда выбирается начальных элементов всей группы, все вещи, получается ситуация, где мы как это, теперь можем они делать after assignment всем водителям. То есть 50 людей, ты кликнул select all на тот день, тебе даже пофиг, что там. И система автоматом делает assignment всем 50 людям. Всем людям сразу идет assignment.

**Serhii Kasainov** [01:38:42 - 01:39:00]: Вот этот selection по группам отдельный, с отдельным контекстным меню, это не самый простой кусок работы, мы это только на фронте не сможем реализовать. Если вы этому дадите соответствующий приоритет, то мы это сделаем.

**Dan Khasis** [01:39:07 - 01:39:12]: У нас backend знает, какие IDшки в той группе.

**Serhii Kasainov** [01:39:20 - 01:39:45]: Знает, да, поэтому он должен добавить поддержку для вот этих вот наших bulk actions, чтобы они умели принимать эти IDшки. Но это кусок работы, то есть только скажите, сделаем. Просто я помню разговор про вот это вот меню когда-то, может, в прошлом году. И оно не перешло в какие-то конкретные задачи, делаем уже.

**Dan Khasis** [01:39:53 - 01:40:35]: Если вернуться на эту ситуацию, вы чувствуете, что это не нужно, но я пытаюсь сказать, что если вы посмотрите на... Он сделал демонстрацию, теперь он хочет сказать клиенту посмотри на твои маршруты. У тебя 30% времени waiting, 20% of service time, 10% of break. Вы что, чокнулись? Как еще он это сделает? Или вы должны в optimization snapshot все выводить. Это один вариант. Но в систему Артема вы не сможете это сделать.

**Vova** [01:40:35 - 01:40:44]: Кто будет ждать 25 часов, чтобы эти данные... В optimization snapshot мы уже выводим это.

**Dan Khasis** [01:40:45 - 01:41:26]: Нет, но эти проценты мы не выводим, потому что вся штука с левой стороны не будет... Как это? Вся эта штука с левой стороны не будет... Не влезет туда это все. И плюс нельзя это все сравнивать в одном месте. Неудобно.

**Alexey Afanasiev** [01:41:46 - 01:41:48]: Давайте дальше.

**Dan Khasis** [01:41:48 - 01:41:51]: Надо двигаться.

**Alexey Afanasiev** [01:41:51 - 01:41:56]: У меня есть минут 10-15. Я должен в митинге.

**Dan Khasis** [01:41:56 - 01:42:02]: Мы можем опять встретиться, если надо. Давай двигаться тогда.

**Alexey Afanasiev** [01:42:03 - 01:42:12]: Давайте быстро две минуты. Дим, покажешь таймлайн с поп-овером?

**Dmitry Smaliak** [01:42:16 - 01:42:16]: Да, конечно.

**Alexey Afanasiev** [01:42:16 - 01:42:32]: Сейчас. Сейчас. И следующий order snapshot и customer snapshot. И strategic planner нам нужно посмотреть. У нас еще 3 пункта.

**Dmitry Smaliak** [01:42:33 - 01:43:12]: Здесь мы ключевое изменение заменили эту иконку, которая смущала и вводила заблуждение, что это открытие на весь экран. Это у нас fit. fit timeline. Здесь мы переделали. Остается, да, открытый вопрос с этим вот поп-овером, который нужно переделать и может быть... Какой-то... Хотелось бы от тебя, Дэн, получить что? Как лучше убрать вкладку какую-то... Вопрос, чем он не нравится.

**Alexey Afanasiev** [01:43:12 - 01:43:30]: Да, нужна информация. Помимо текстов слишком большое окно... Или что с ним не так? Мы уже его сократили, но оно все еще осталось громоздким.

**Dan Khasis** [01:43:31 - 01:44:14]: Потому что мы в перемешках слишком много имеем вещей. Прибавляйте больше тэбов или удаляйте данные. Например, когда я смотрю на VisiDetails, у меня это таблица, и потом он переходит на текст. Меня это очень пугает. Если на то пошло менять VisiDetails на Time или на ETA или там что-то такое, вы отпутаете таблицу. Если бы была таблица по себе, это было бы идеально. Но из-за того, что она в перемешке с этими лишними данными снизу...

**Alexey Afanasiev** [01:44:15 - 01:44:16]: Угу.

**Dmitry Smaliak** [01:44:25 - 01:44:37]: Мы оставляем ее отдельно. Тут все хорошо. То есть VisiDetails. Нужно переработать данные в ней. Может добавить дополнительно данные отдельно таб для таблицы? Нет.

**Vova** [01:44:37 - 01:44:47]: Мы можем вот эти данные убрать и перенести в первую табу, а в этой табе убрать лишний контейнер вокруг таблицы, и таблица станет проще воспринимать.

**Dan Khasis** [01:44:48 - 01:46:05]: Смотрите, здесь все зависит от ситуации. Если это Service Business, критически иметь Order данные и может быть даже Customer данные. А что мы ожидаем увидеть? Почему люди пользуются это? Я начинаю думать и перечислять причины. Один вариант это перед Dispatching, при Planning, после Dispatching, после Planning. Какая-то ситуация. Третий это Customer Service, звонок какой-то. Четвертая ситуация это может быть какой-то Team Execution, тренинг какой-то. Было это, сделай плохо, сделай хорошо и так далее. Все эти вещи неплохо, но у нас тогда не хватает вот этих других вещей. Например, во-первых, здесь машина непонятна. Где машина? Кто за рулем? Не юзера, а машина. Она появится здесь? Assigned Vehicle или нет?

**Dmitry Smaliak** [01:46:06 - 01:46:10]: Если она не засайнена, то она не отображается.

**Alexey Afanasiev** [01:46:15 - 01:46:16]: Она здесь есть.

**Dmitry Smaliak** [01:46:17 - 01:46:17]: Да, да.

**Vova** [01:46:19 - 01:46:21]: На оранжевом маршруте есть машина.

**Dmitry Smaliak** [01:46:21 - 01:46:24]: Вот, да. Тут вот есть.

**Vova** [01:46:40 - 01:46:52]: Road Name как будто бы дубликат здесь, потому что он уже есть в другом месте. От Road Name, мне кажется, можно избавиться, потому что вот он. Вот же он, Road Name. Да, вот он.

**Alexey Afanasiev** [01:46:52 - 01:46:55]: Можно его убрать, да.

**Dan Khasis** [01:47:00 - 01:47:05]: А где здесь это? На Route или на штуке? На оптимизацию какую-то ссылку или что-то?

**Dmitry Smaliak** [01:47:07 - 01:47:15]: Ну, на Route есть ссылка, на оптимизацию нет. Есть вот на юзере, на Vehicle.

**Dan Khasis** [01:47:15 - 01:47:50]: Просто одна из наших других проблем это то, что здесь нету группировки по оптимизации. И здесь нету группировки по оптимизации. Или колонки, как минимум, по оптимизации. И теперь, когда чувак сделал 10 оптимизаций, и в каждой оптимизации есть маршрут, который имеет такой же префикс. О чем речь идет? Route первый из какой оптимизации? Route второй из какой оптимизации? И... Все непонятно. Нам надо выводить как-то сюда оптимизацию ID или Name или что-то.

**Dmitry Smaliak** [01:47:54 - 01:47:58]: Ну, и группировка по оптимизации без программы могла бы делаться.

**Dan Khasis** [01:47:58 - 01:48:02]: Да.

**Vova** [01:48:06 - 01:48:14]: Если это инстанция. В принципе, да.

**Dan Khasis** [01:48:16 - 01:48:17]: В принципе, да.

**Dmitry Smaliak** [01:48:25 - 01:48:49]: Хорошо. Тут тогда RouteName мы этот уберем отсюда, чтобы не занимал лишнее еще место, так как есть об этом информация. А по поводу информации о Customer и Order, ты, Дэн, говорил, ее в табу, может, если она есть, можно в принципе выводить...

**Vova** [01:48:49 - 01:48:58]: Не хотелось бы сделать больше табов, чем можно выместить по ширине сюда. Чтобы был скролл табов, это очень нехороший паттерн. Это очень неудобно.

**Dmitry Smaliak** [01:48:58 - 01:49:02]: Ну, имеет место быть, согласен, да.

**Dan Khasis** [01:49:03 - 01:49:15]: Вопрос, если мы хотим, чтобы люди могли отсюда редактировать, или чтобы люди могли больше, как понимаете, какой-то снапшот или quick view чего-то. Да, это скорее просто информация.

**Vova** [01:49:15 - 01:49:28]: Я бы сказал даже, что это мини-снапшот. Задумывалось как мини-снапшот. То есть это минимальный набор информации о destination. Если тебе этого набора недостаточно, ты идешь в снапшот тогда.

**Dan Khasis** [01:49:36 - 01:50:32]: Если посмотреть на who, what, where, why и how, какой водитель, who водитель, driver плюс vehicle, what, что они там будут делать, например, delivery, how, это может быть опять машина, плюс сервис-тип, который мы сейчас не поддерживаем, плюс скиллы, может быть, плюс инструменты. Потом who, what, why, how, where и when это адрес и scheduled for. Scheduled for это маршрут или arrival time это конкретно остановки? Должно быть к остановке. Но мы же не пользуем scheduled for слово для остановки. Да, это правда. Это странно, что здесь scheduled for написано.

**Vova** [01:50:32 - 01:50:41]: Это больше как estimated arrival time, да?

**Dmitry Smaliak** [01:50:42 - 01:50:47]: Да, скорее, да. Если это estimated arrival time, значит, она есть.

**Vova** [01:50:47 - 01:50:54]: Да, scheduled for здесь не нужен, действительно. Scheduled for это касается маршрута, а arrival time – visit details.

**Dan Khasis** [01:50:55 - 01:50:58]: Да, так мы можем удалить это оттуда и сэкономить место.

**Dmitry Smaliak** [01:50:58 - 01:51:00]: Да, да, да, можем.

**Vova** [01:51:01 - 01:51:02]: Значит, мы удаляем отсюда две вещи.

**Dmitry Smaliak** [01:51:03 - 01:51:11]: Да. Информация по времени есть вот в этой вкладке.

**Vova** [01:51:13 - 01:51:32]: Вот это как будто бы не очень существенная информация. Я бы не сказал, что она важная какая-то. А вот это интересная информация. Это я бы грохнул, а это бы я оставил.

**Alexey Afanasiev** [01:51:37 - 01:51:51]: Да, секунду. Покажу. Так, кастомер снапшоты.

**Vladimir Fedorov** [01:51:51 - 01:52:44]: Кастомер снапшоты мы уже видели немножко. Показаны добро нам. Он заполнен какой-то информацией. Пока только две табы – кастомер и routes. Планируем две ссылки location. Буду открывать фильтр по location по данному кастомеру. Сейчас фильтр еще пока в разработке. Accountable person показывает снапшот пользователя. Снапшот пользователя как был, так и остался. Дальше. Поэтому есть что-нибудь, что сказать или переходим к ордеру снапшота?

**Dan Khasis** [01:52:46 - 01:52:52]: Подожди секунду. Это customer locations мы смотрим? Нет, нет.

**Alexey Afanasiev** [01:52:53 - 01:52:54]: Кастомер снапшот.

**Vladimir Fedorov** [01:52:54 - 01:52:55]: Просто кастомер.

**Dan Khasis** [01:52:56 - 01:53:07]: А, ну да. Здесь отсутствует кнопка «выйти на редактор». Даже если в новом табе.

**Vladimir Fedorov** [01:53:07 - 01:53:11]: Она в первой версии.

**Dan Khasis** [01:53:11 - 01:53:23]: Это не блокер, но в принципе здесь отсутствует facility. Мы это обсуждали. Activity feed, notes, заказы, оптимизации.

**Vladimir Fedorov** [01:53:27 - 01:53:32]: Да, сейчас отсутствует. Пока ждем API от backend.

**Dan Khasis** [01:53:34 - 01:53:58]: И не забудьте еще, что на уровне customer location когда ты кликнешь на location, это откроет новую вкладку, которая будет показывать все на location. И здесь важно очень отпутать. Да, location type это верно. Потому что у нас сейчас будет новый тип локейшенов тоже.

**Vladimir Fedorov** [01:54:02 - 01:54:06]: То есть будет еще location type и какой-то location subtype?

**Semeyon S** [01:54:06 - 01:54:30]: Там будут и child, и здесь location type конкретно в этой табличке сейчас назван неправильно. Это сейчас все в разработке. Оно скоро появится. Доврон придет к тебе с этой информацией, как только будет готово. Момент понятия.

**Vova** [01:54:30 - 01:54:34]: Дерево мы начали рисовать.

**Alexey Afanasiev** [01:54:34 - 01:54:39]: Давай тогда ордер сразу.

**Vladimir Fedorov** [01:54:39 - 01:55:33]: Ордер снапшоты сейчас частично сделан на mock'ах. Ордер history берет реальная API, левая панель у нас реальная. Ноуты пока на mock'ах. Это все API в разработке. Из особенностей. У нас нет пока фильтрации и группировок по ордер history из-за недостаточности бэковского API. Насколько я понимаю, оно в разработке. То есть search, filters и выбрать колонки мы сейчас в ордер снапшотов прямо сейчас не можем. Ноуты. Просто список из ноутов. Есть какая-то картинка, которая просто открывается по папе пока.

**Dan Khasis** [01:55:38 - 01:56:01]: Где у нас activity log нужен сосканированные все bar-коды и лейблы, нужны custom-формы, их ответ здесь нужен. Идеально какой-то будущей версии все workflows, которые прошли или прошел этот ордер на мобильном приложении.

**Vova** [01:56:02 - 01:56:25]: Вот отвечаю на твой вопрос. Я не думаю, что это должно называться notes. Я думаю, что это должно называться каким-то образом. Ты говорил, что ты подумаешь над названием. Это должно называться, что тебе не нравится proof-of-visit название. Я думаю, это стоит назвать reports. То есть это все рапорты, которые водители когда-либо делали по этому ордеру.

**Dan Khasis** [01:56:25 - 01:56:44]: Да, но в английском языке это неправильно. Это не reports. Это какие-то actions или какие-то activities. Что-то связано с глаголами, но это не reports. Reports в Америке это отчет. Отчет как pivot table или там.

**Vova** [01:56:46 - 01:57:06]: Нет, это именно отчетность водителя о том, что он выполнил или не выполнил работу. То есть это именно отчеты. Очередное. Workflows это и есть форма отчетов. Нам не надо говорить о naming.

**Dan Khasis** [01:57:06 - 01:57:16]: Даже если мы согласуем английский, мы все равно не согласуем 10 других языков. Мы просто знаем, что здесь что-то есть, что имеет activity.

**Vova** [01:57:17 - 01:57:28]: Я к тому, что это все одна общая категория. Неважно, какой источник был этих отчетов, в любом случае это отчеты.

**Dan Khasis** [01:57:34 - 01:57:52]: Ты должен с ребятами здесь UI как-то подточить, но надо подумать насчет scans, потому что barcode, scans, label, scans должны здесь оказываться как-то. Эти формы и ответы на формы должны как-то оказываться.

**Vova** [01:57:54 - 01:57:57]: Мы уже придумали новый дизайн, я должен тебе его расширить.

**Vladimir Fedorov** [01:57:58 - 01:58:01]: Так, останавливаю.

**Dan Khasis** [01:58:02 - 01:58:10]: Подожди, я хочу еще 2-3 вещи сказать и потом начинать двигаться.

**Vladimir Fedorov** [01:58:10 - 01:58:11]: Я верну.

**Dan Khasis** [01:58:12 - 02:01:24]: Смотри, здесь еще такой пункт. Заметь, что в предыдущем экране у нас была поддержка агрегации. Сейчас вы поддерживаете агрегации, например, на одном заказе, в принципе, через несколько версий мы должны иметь возможность на одном заказе делать множество подзаказов. Потому что ты приехал, например, ты продаешь, у тебя есть машина, в машине есть почти как банкомат, но не денег, а конфеты и чипсов и кока-колы и так далее. Ты приехал и туда вставил 20 банок кока-колы, 30 банок Snickers, 10 банок M&M's. Ты должен записать это как-то, но это все связано с одним ордером, который связан с одним клиентом, который был на одном заказе, который был на маршруте, который был создан из оптимизации или мастер-аута. Получается, что прямо сейчас у нас отсутствует система инвенторий, но в принципе это имеет инвенторий с какой-то SKU 0.0.5, это значит 32 грамма кока-колы, 32 миллилитра кока-колы и так далее. Водитель на своем экране будет знать, что там есть два типа, как минимум два главных типа под workflow. Ему говорят, привези три типа, я бы сказал. Третий это комбинация первого и второго. Привези сюда столько-то коки, столько-то M&M's, столько-то Snickers'ов. Они заказали три штуки, четыре штуки, пять штук. У него оказалось только две, три и пять. В итоге это было plant, это было actual и это delta между ними. И мы это все покажем здесь. А если мы выйдем на уровень выше, на агрегацию, на уровне кастомера, это будет столбик суммы из всех ситуаций. Если это первое и второе, третье, она будет все это показывать. Это как сейчас работает новый export aggregation. Но у нас отсутствует в мобильном приложении красивый и интеллигентный метод, чтобы подсказывать, что для этой установки, для этого заказа такого-то типа товаров. И у нас есть два типа товаров. Те, которые фиксированы, те, которые динамичные. И это отдельно мы можем обсудить. Но вторая ситуация, это где водитель приехал и у него просто есть машина. И в той машине есть 50 самых популярных вещей.

**Vladimir Fedorov** [02:01:24 - 02:01:33]: И из этих всех самых популярных вещей они должны взять и ну, какой-то скрининг, наверное, сделать. Правильно я понимаю?

**Dan Khasis** [02:01:35 - 02:03:13]: Они выберут, что они приходят туда и говорят, смотри, у них не хватает 5 Snickers, у них не хватает 3 M&M's, у них не хватает 4 Sprite или Pepsi. И они берут из своей машины 4 Pepsi, 3 Sprite, 2 Snickers. И заполняют этот аппарат снова, например. Или деньгами, или чипсами, или чем-то. То есть сценарий почти такой же. То есть есть Actual, но не было Plant. И третий сценарий, это комбинация. Они имели эту штуку, там есть 9 на 9 матрицы товаров. Они оригинально задумали, перед тем, как он уехал со склада, что у них не хватает в этих ячеек столько-то конфет, столько-то Snickers, столько-то M&M's. Они его выслали заменам на эти. Но как оказалось, когда он приехал, кто-то пришел, чувак травки пошвылил, и он был голодный. Кто-то схавал вот эти все тоже заодно. Повезло, что у него на машине есть эти gummy bears, и он взял и тоже эти gummy bears прибавил. Это третий сценарий, где было задумано это снова заполнить, но еще получилась возможность продать еще больше. И они это и сделали.

**Vova** [02:03:13 - 02:03:19]: Мобильный интерфейс для этого мы уже нарисовали. Если хочешь, я тебе его покажу еще раз.

**Alexey Afanasiev** [02:03:22 - 02:03:26]: Окей. Дэн, есть еще пять минут?

**Dan Khasis** [02:03:26 - 02:03:30]: Уже туго становится.

**Alexey Afanasiev** [02:03:30 - 02:03:34]: Что еще, если быстро?

**Dan Khasis** [02:03:34 - 02:03:50]: И здесь нету экспорта. Здесь нету экспорта. На ордере нужен экспорт чего-то. Фотографии, заказов, кастом форм, чего-то надо экспорт делать.

**Alexey Afanasiev** [02:03:52 - 02:03:55]: Игорь, покажешь?

**Igor Golovtsov** [02:03:55 - 02:05:21]: Да, конечно. Спасибо. Так, у нас готово пять экранов которые относятся к Strategic Planner. Пользователь начинает со списка оптимизаций. Здесь пока ничего хитрого нет, просто таблица с неймом, датой, количество локейшенов, сценариев и период оптимизации. 7, 14 или 28 дней. Отсюда пользователь может провалиться в конкретную оптимизацию, где также с левой стороны у него имя, дата, количество локейшенов, сценариев и оптимизационный период. Две таблицы. Первая это сценарий непосредственно. Тут, как и в других таблицах, ничего особенного. Форматируем мили, выводим дирейшены, количество раутов, визитов и таблиц с локейшенами. Из сценария пользователь может провалиться уже в снапшот конкретного сценария. Здесь у него более подробная информация по всему рауту визитов, total duration, сколько travel time, сколько break time. Total distance.

**Dan Khasis** [02:05:21 - 02:05:28]: Здесь сейчас выводится информация, которая на текущий момент есть у бэкэнда.

**Igor Golovtsov** [02:05:28 - 02:05:41]: То есть это уже не моки, что бэкэнд присылает. Если нужно что-то добавить, я думаю, это не проблема будет добавить.

**Dan Khasis** [02:05:41 - 02:06:12]: Здесь одну вещь небольшую надо добавить. У нас нет расстояния между остановками средние, это критическая вещь. Расстояние между остановками, расстояние и время между остановками. Для первой версии это выглядит шикарно, но у меня есть вопрос, два-три быстрых вопроса. Я бы упростил это все.

**Igor Golovtsov** [02:06:15 - 02:06:22]: Следующий момент был, мы сейчас делаем уже следующее, на текущий момент...

**Dan Khasis** [02:06:22 - 02:06:31]: Я не про accept, я просто говорю, что view details это два длинных слова. Я бы просто писал, как вы везде делаете, в других местах, open.

**Igor Golovtsov** [02:06:31 - 02:06:41]: Там нечего открывать. Это сейчас на стейдже была моковая кнопка. Вот я показываю, что здесь будет выбор либо мастер, либо regular, либо skip. Можно отмаркировать конкретные маршруты.

**Dan Khasis** [02:06:42 - 02:06:44]: Что происходит, когда ты кликаешь?

**Igor Golovtsov** [02:06:46 - 02:06:49]: У нас сейчас есть два варианта. Это set all as master routes.

**Dan Khasis** [02:06:50 - 02:07:05]: Я бы убирал regular, я бы написал ad hoc или transit. Пока у нас нет другого слова, как transactional, я бы написал ad hoc или want.

**Igor Golovtsov** [02:07:07 - 02:07:39]: Хорошо, это поправим. Когда мы маркируем хоть какой-то route в regular или skip, сейчас нигде не отображается, еще не доработано рядышком в элементе показывать, что мы выбрали, наш выбор. Мы уже больше не можем зацепить все, поэтому мы принимаем сценарий, как пользователь выбрал. То есть какие-то маршруты отсюда будут скипнуты, какие-то сделаны мастера, какие-то regular. И он принимает тогда только в таком виде.

**Dan Khasis** [02:07:39 - 02:07:48]: Я не понимаю, что здесь происходит. Человек в какую-то очередь предложение прибавляет?

**Igor Golovtsov** [02:07:51 - 02:08:07]: Он убирает. Изначально Вовина задумка была, что мы можем принять сценарий как есть целиком. Так это отображено и в дизайне. Вот это непосредственно.

**Dan Khasis** [02:08:07 - 02:10:18]: Я не понимаю. Все шло идеально. Все потом стало непонятно почему. Во-первых, мы не говорим except. Мы можем сделать конверсию чего-то в набор мастер раундов, например. Но вы здесь вернись на главный список симуляций. Это надо поменять тоже, чтобы это выглядело как другая страница. Но здесь важных вещей не хватает. Я бы здесь написал average duration average distance как минимум, чтобы понять в чем речь идет в среднем. Но потому что у вас есть эти все значения. Но вот открой. Здесь написано open. Кликни на это. Теперь здесь убери слово scenarios. Сценарио просто. Не s, а просто сценария. Вот здесь я об этом говорю. Почему это нельзя написать слово open? Вместо писать view details. Следующая вещь. Здесь мы пропустили break time. Брейк нет. И нужно distance между остановками. Это все понятно, это все идеально. Теперь человек заинтересован увидеть как выглядит вот эта симуляция. Теперь ты кликаешь на эту кнопку. Правильно, ожидается, что здесь... Извиняюсь, вернись на один шаг назад. Я думал, что здесь должно быть уже breadcrumbs. Что мы уже вышли на сценарио-лабораторизм.

**Vova** [02:10:20 - 02:10:32]: Нет. Правильно, здесь должна быть. Если у нас есть уровень strategic planning strategic optimizations, то дальше ты идешь на конкретный один optimization.

**Dan Khasis** [02:10:33 - 02:10:42]: Потому что это strategic, потом это конкретный сценарий, а потом в сценарий мы сейчас войдем в маршрут.

**Vova** [02:10:42 - 02:10:45]: Это не просто маршрут, это template.

**Dan Khasis** [02:10:46 - 02:10:58]: Это template маршрута. Даже если искать template, мне не важно сейчас. Теперь ты открываешь, теперь это четвертая углубленность breadcrumbs.

**Igor Golovtsov** [02:10:58 - 02:11:10]: Здесь кнопка view details на стейдже сейчас не актуальна. Я не успел ее туда залить. Здесь только выбор. Мы не можем провалиться ниже, глубже туда.

**Dan Khasis** [02:11:11 - 02:11:15]: Почему? Так мы же не знаем, что... Мы не знаем, какие там установки.

**Igor Golovtsov** [02:11:19 - 02:11:23]: У нас нет этого... Так, хорошо, Вова подсказывай, где этот экран.

**Vova** [02:11:23 - 02:11:25]: Это route snapshot.

**Igor Golovtsov** [02:11:25 - 02:11:32]: А, мы уходим на route snapshot. Хорошо, тогда здесь будет кнопка открыть. Все правильно.

**Dan Khasis** [02:11:33 - 02:11:37]: Это simulated route snapshot.

**Vova** [02:11:37 - 02:11:41]: Да, это route template snapshot.

**Dan Khasis** [02:11:41 - 02:13:15]: Это урезанный route snapshot. Да, и там мы видим весь список. И что мы там видим, чтобы мы закрыли эту тему раз и навсегда, я должен бежать, это мы видим destinations, их порядок, все их метаданные атрибуты и, может быть, матрицу по дням. Какую-то да-нет, да-нет, да-нет. Вон она. Но мы, к сожалению, мы должны иметь все directions тоже. Это уже внутри маршрута конкретно. Но это и есть маршрут. Если бы это был маршрут, мы бы увидели directions того маршрута. И если бы там был кастомер, мы бы увидели кастомер. И идеально, если бы они заливали кастомер ID, мы бы имели ссылку назад на customer snapshot. Или на customer location snapshot. В первой версии пусть они обязаны заливать UUID. Если они заливают хорошее UUID, мы делаем линковку. Если они не заливают хорошее UUID, мы не делаем линковку. Тогда Хван сможет или кто-то другой через свой рэпер лукап делать. Перед симуляцией получить список всех UUID, всех этих кастомеров и потом спокойно передавать это как мета-данные. И потом у нас есть... Тогда у меня еще вопрос есть быстрый. Если на то пошло Route Editor, почему мы не можем открыть Simulated Route Editor из этого?

**Vova** [02:13:20 - 02:13:24]: То есть ты хочешь модифицировать этот темплейт вручную?

**Dan Khasis** [02:13:29 - 02:13:38]: Нет, сейчас я не хочу это. Но я имею в виду, у нас же есть Route Editor, который в рейдонном режиме может открыть эту фигню. А зачем?

**Vova** [02:13:38 - 02:13:40]: Если у нас есть Route Snapshot, зачем Route Editor?

**Dan Khasis** [02:13:40 - 02:13:49]: Потому что Route Snapshot не имеет UI, который имеет Route Editor, который красиво показывает все. Урезанный какой-то вариант.

**Vova** [02:13:52 - 02:13:59]: Как будто мы хотим расширить Route Snapshot тем, чтобы там показывать похожую UI.

**Dan Khasis** [02:13:59 - 02:14:20]: Нет, я бы взял Route Snapshot, я бы взял Route Editor и просто урезал какой-то функционал с редактированием. Может быть, через 3 месяца. Почему нет? Пусть они редактируют. Но это уже другой вопрос. Тогда лучше сделать редакцию вместо раута, перед инициализацией вместо раута.

**Vova** [02:14:22 - 02:14:52]: Да, потому что это песочница. Да, редактирование лучше делать в песочнице. Меня интересует вопрос с конвертацией. Вот у нас, допустим, юзер готов, ему понравились эти темплейты, вот этот набор темплейтов. Я сегодня от Семена и от Игоря услышал, что ты попросил дать возможность конвертировать выборочно маршруты. Это правда?

**Dan Khasis** [02:14:59 - 02:15:06]: Это может быть хорошая идея, но я не помню, что я это просил конкретно. Я думаю, что кто-то сделал оптимизацию.

**Vova** [02:15:06 - 02:15:18]: Мне казалось, что это должно быть целым набором. Вся оптимизация, она тебе либо нравится, либо нет. И ты потом всю эту оптимизацию либо конвертируешь в мастер-рауты, либо конвертируешь просто в рауты.

**Dan Khasis** [02:15:19 - 02:15:38]: Да, и в первой версии вполне хватает все конвертировать и удалять, что тебе не нравится. Потому что расписание работает как кубик-рубик. Если ты что-то удалил, что-то там было, и тогда у тебя в принципе нарушилось как бы все нарушилось. Правильно?

**Vova** [02:15:39 - 02:15:46]: Да, потому что это решение головоломки. Если ты принимаешь кусочек решения, то что-то тебе делается.

**Dan Khasis** [02:15:46 - 02:15:50]: У тебя в доме карточек ломается. У тебя в доме карточек ломается.

**Vova** [02:15:50 - 02:15:59]: Да. Поэтому я был строго против того, чтобы мы частично принимали конвертирование.

**Dan Khasis** [02:15:59 - 02:16:25]: Слушай, я тебе дам пример. Это кто-то, какой-то чувак, который зарабатывает деньги, ему платят деньги. Он аналист, он делает симуляции. Чувак хочет просто сделать симуляцию, вытащить маршрут и поиграться с ним. Зачем мы должны его мучить? Скачай это, залей это. Он может индивидуально один маршрут сделать конверсию.

**Vova** [02:16:27 - 02:16:35]: Ну, в принципе, да. Но как будто бы это какой-то исключительный вариант.

**Dan Khasis** [02:16:47 - 02:17:20]: Нет, это не исключительный вариант. Человек как Пол или Макс хотят кастомеру показать и поиграться. И они как бы... В фигме ты берешь твой шаблон, ты делаешь копии, дупликейты и начинаешь играться. Здесь не совсем конверзия, здесь больше как бы дупликейт или create draft или explore draft или что-то такое, где это неполноценный импорт в... Рекурринг поведения, это просто как бы... Я хочу поиграться с этим.

**Vova** [02:17:21 - 02:17:41]: В таком случае я предлагаю сделать такую штуку. Добавить сюда чекбоксы, дать возможность выбрать чекбоксами какой-то набор маршрутов и дать bulk action экспортнуть в selection или конвертнуть эти черновики в рауты или в мастер-рауты.

**Dan Khasis** [02:17:43 - 02:18:42]: Для первой версии нам это не надо, все зависит. Мы можем как редактор сделать в read-only режиме играть, ты думаешь? Raute Editor в read-only с этих объектов. Я думаю, да. Мы покрыли все вещи. Какой наш NTA? Запустите. Я думаю, что здесь не хватает финальной вещи. У нас нету карты хит-мэпов на simulated routes. То есть как открыть карту, как минимум multiple routes map. Если в первой версии мы не можем сделать multiple routes map, давайте хотя бы сделаем Raute Viewer через Raute Editor. А во второй версии сделаем multiple routes map одновременно. Без редакции, конечно. Без drag-and-drop, просто read-only.

**Vova** [02:18:50 - 02:19:00]: Если мы захотим карту, то мы просто сюда вставляем новый тап карты и показываем там карту. Я хочу уточнить финально.

**Igor Golovtsov** [02:19:00 - 02:19:16]: В первой версии нам не нужно маркировать master, regular или skip, это маршрут. Нам достаточно одной кнопки с помощью которой мы либо принимаем весь сценарий, либо не принимаем. Либо мы его конвертируем целиком в мастер рауты, либо мы целиком конвертируем его в просто рауты.

**Vova** [02:19:16 - 02:19:26]: Просто рауты, но без возможности исключать какие-то маршруты для первой версии. Для первой версии, да.

**Igor Golovtsov** [02:19:26 - 02:19:47]: Хорошо. И ссылки здесь на Raute Snapshot, правильно? Нам нужно добавить для первой версии, чтобы отсюда можно было в Raute Template Snapshot провалиться. Отлично.

**Vova** [02:19:47 - 02:19:53]: Алексей, подскажи, пожалуйста, у нас Raute Template Snapshot готова страниться, она уже где-то есть?

**Igor Golovtsov** [02:19:53 - 02:20:08]: Raute Snapshot есть. Template Snapshot, тут упоминали именно что-то. Я просто не в курсе.

**Semeyon S** [02:20:08 - 02:20:14]: Раут снапшот, а это, собственно, первый снапшот, который был сделан.

**Igor Golovtsov** [02:20:16 - 02:20:17]: А, ну отлично.

**Vova** [02:20:17 - 02:20:25]: Она будет отличаться от простого снапшота, потому что ты не сможешь ассайнить на темплейт вехикл или драйвера. Read-only mode.

**Igor Golovtsov** [02:20:25 - 02:20:30]: Это мы доработаем.

**Alexey Afanasiev** [02:20:30 - 02:20:47]: Окей. Всем спасибо. Давайте договоримся, то есть мы через неделю дадим аналогичное ревью каждую пятницу будем делать по сценарию. По такому, если тебя устраивает.

**Dan Khasis** [02:20:57 - 02:21:07]: Нам надо запустить как есть, но нам нужно срочно прибавить карту, потому что без карты это очень сложно как-то пользоваться, что-то полезное делать без карты.

**Igor Golovtsov** [02:21:11 - 02:21:16]: Так, тогда и карту к табу мы добавляем в первую версию, правильно?

**Igor Skrynkovskyy** [02:21:26 - 02:21:31]: Потому что маршрутов много.

**Vova** [02:21:31 - 02:21:46]: Да, там маршрут все расплавится, если будет так много маршрутов показывать. Мы можем показать только полилайны без дестинейшенов, но тоже может. Представьте себе 600 маршрутов или сотню-сотню.

**Igor Skrynkovskyy** [02:21:46 - 02:21:51]: Но это может оказаться нереалистичным вообще показать.

**Vova** [02:21:51 - 02:21:56]: Хитмэп нарисовать?

**Semeyon S** [02:21:56 - 02:22:01]: Хитмэп покажет тебе просто хитмэп локейшенов, он не покажет тебе рауты.

**Vova** [02:22:01 - 02:22:16]: Можно и рауты. Разные сценарии между собой отличаются. Разные сценарии между собой отличаются.

**Dan Khasis** [02:22:16 - 02:22:40]: Нам надо и хитмэпы, и линии маршрутов, и линии дестинейшенов. И по дням недели хитмэп меняется тоже. То есть можно смотреть на тот же сценарий, но он не тот же сценарий. Те же кастомеры по разным дням в разных сценариях имеют разный хит сигнатур.

**Semeyon S** [02:22:52 - 02:22:58]: Я предлагаю на свежую голову подумать, как тут можно выкрутиться.

**Vova** [02:22:58 - 02:23:10]: Хитмэп это первый вариант. Мы можем ограничить карту тем, что будем показывать только один день, а не будем пытаться даже показывать все рауты.

**Semeyon S** [02:23:10 - 02:23:16]: Можно горизонтальный ползунок по дням добавить.

**Dan Khasis** [02:23:18 - 02:23:31]: Мы должны видеть все маршруты в рамках одного дня. Одного понедельника, например.

**Vova** [02:23:33 - 02:23:43]: Это уже более реалистично. Вроде 20 маршрутов наша карта потянет за раз.

**Dan Khasis** [02:23:45 - 02:24:01]: Проблема не с этим. Карта может потянуть хоть 100 маршрутов. Проблема не в этом. Проблема в том, что если маршруты имеют эти говняные курсеры, они имеют эти кружки и линии, тогда в этом проблема.

**Vova** [02:24:02 - 02:24:12]: У нас уже вроде точки есть на карте. Деградация на точке. Если слишком много значений одновременно попадает в вьюпорт, они деградируют до точки.

**Dan Khasis** [02:24:14 - 02:24:42]: Ок. Если они делают это, это хорошо.

**Igor Skrynkovskyy** [02:24:42 - 02:24:57]: Но все эти вещи, они статические для сон-поли-лайны.

**Dan Khasis** [02:24:57 - 02:28:47]: Проблема, почему мы не можем сейчас 500 загрузить, не потому, что фронтальный потянет с ГПУ, а потому, чтобы бакен сгенерировал тысячу полилиний за долю секунды или за 2-3 секунды, это нереально с текущей инфраструктурой. Но раз это все заранее полностью просчитывается, это супер оптимально будет грузиться статически. Мы же можем сохранять полилинии, эти encoded polylines в флэт-файлах отдельных, даже для каждого маршрута скачивать либо индивидуальный файл, либо мы можем один огромный файл со всеми полилиниями key-value массив сделать, и фронтенд будет просто грузить для той симуляции предварительно записывать эти комбинации разных популярных агрегаций. Чтобы там был один файл для каждой оптимизации, для каждого маршрута, для каждого сценария, и потом фронтенд просто будет раутать в каждой из этих комбинаций. Поскольку мы все стираем через 30 дней, нас не волнует, или 60 дней, нас не волнует это. Сколько комбинаций в флэт-файлах сжатых будет там лежать. Но, кстати, пока не забыл, Игорь сказал, что вы файлы через 30 дней стираете. Если это действительно верно, нам нужно тогда на оптимизацион-списке отпутать expiration date оптимизации. Это будет для двух причин важно. Когда она пропадет, никто не будет жаловаться, и во-вторых, если они захотят ее дольше хранить, мы сможем больше денег просить. Но, Игорь, просто не забудь, что некоторые люди приходят к нам и говорят, мы вам дадим тысячу долларов прогнать 50 тысяч адресов в симуляцию, и потом они сделают экспорт, и они вернутся через 3 месяца и опять запросят. И опять запросят. По контракту мы будем решать, кому давать экспорт, кому не давать экспорт. И у кого может быть, они могут логгинаться в аккаунт и, в принципе, видеть все о всем, но они не смогут видеть routes, они не смогут видеть optimizations, они только смогут видеть, вот ты заплатил нам тысячу долларов, мы твою симуляцию с твоим аккаунтом будем держать активную, я не знаю, год или 6 месяцев. Почему мы хотим это делать? Чтобы каждый раз, когда ты заходил, мы хотим тебя дразнить, там будет кнопка convert to master routes, и мы скажем, а-а, ты не можешь это делать, у тебя нет активной подписки на это, у тебя есть marketplace подписка на recruiting route professional services, где твой аккаунт включен, но у тебя не включены никакие фичи или модули, связанные с редактированием или экспортом или оптимизацией, просто мы как dropbox, мы являемся как dropbox, вы нам заплатили сделать симуляцию, мы симуляцию сделали, заходите, смотрите на нее, но если вы хотите ее пользовать активно в вашем бизнесе, вы должны купить подписку.

**Vova** [02:28:47 - 02:28:53]: Второй уровень это редактирование, третий уровень это operations, четвертый уровень это аналитика.

**Dan Khasis** [02:28:59 - 02:29:12]: Аналитика, имеешь ввиду после execution маршрутов? Да. Да, но это само собой, это еще отдельный план продаем.

**Vova** [02:29:14 - 02:29:18]: Я и говорю, что есть возможность в четыре шага делать upsell.

**Dan Khasis** [02:29:19 - 02:32:37]: Да, правильно, есть upsell и есть crosssell, где мы будем сегодня вы это пользуете для operations и только для той команды, но мы хотим продать еще что-то, чтобы вы это пользовали для финансовой команды. Чтобы сделать для финансовой команды, мы должны принимать оплату в мобильном приложении, генерировать отчеты суммарно, сколько денег. Вот, например, последняя вещь, вы сделали экспорт агрегации. В экспорт агрегации вы это знаете, сколько литров хлорки кто-то налил в какой-то раке, чтобы ее прочистить. За каждый литр хлорки клиент платит 5 долларов. Теперь следующий этап этого эволюции crosssella, это создать список inventory type. У нас будет тип, например, parts, goods, services. Parts это запчасти, люди приходят, заменят экран, заменят в этой машине стиральный датчик для кредит-карты или для монет. Goods это вот эти чипсы, вот эти лекарства, аптеки и так далее. Services это услуги. Ты пришел, была услуга. Услуга была одна пятнадцатиминутная единица деконтаминация и очистка раковины плюс было 2 единицы литров хлорки. Суммарно у тебя перемножается теперь, ты смотришь на кастомер, сколько ты у этого кастомера берешь денег, потому что кастомер, который имеет большой объем третья, четвертая версия, тот кастомер имеет скидку, может быть. И потом это все перемножается и теперь мы сделали cross-sell финансистов. Потом, или бухгалтерам, потому что они теперь в Excel не должны это все делать. Вы уже сделали 90% этого. То, что мы не сделали, это order multiline items. Потому что если у тебя есть заказ, в заказе есть множество подачельных элементов и каждый из этих элементов имеет тип, и каждый из этих типов имеет объем, и каждый из этих типов и объемов мы просто перемножаем, чтобы получить, сколько денег они должны нам платить. Сколько денег клиент должен платить нашему клиенту. Нашего клиента клиенту.

**Vova** [02:32:46 - 02:33:02]: Мобильную часть этого всего веселья мы уже нарисовали. Осталось нарисовать веб-часть. не так много работы осталось с моей стороны, чтобы это закрыть.

**Dan Khasis** [02:33:03 - 02:33:47]: Я должен идти, я скажу финальный пункт на эту тему, что было бы тоже интересно, один еще use case, когда люди покупают, они всегда говорят, давай спросим Васю, он наш самый лучший водитель, как нам взять один из этих маршрутов и как бы симулировать его открытие прямо в мобильном приложении. Как черновик, и потом assignment его сделать на повод юзера для цели симуляции. Правильно?

**Vova** [02:33:48 - 02:34:04]: Это как раз тот выборочный accept, это по идее accept один из темплейтов и дальше делаешь с ним тест. Дэн, что если мы проведем следующий звонок в четверг в 9 по Нью-Йорку?

**Semeyon S** [02:34:04 - 02:34:21]: Или все-таки в понедельник? В четверг в 9 по Нью-Йорку, все договорились, я организую все, спасибо.

**Dan Khasis** [02:34:21 - 02:34:26]: Можем ли мы запустить прямо там, где есть этот strategic route planning?

**Semeyon S** [02:34:28 - 02:34:49]: Да, там на стороне Хуана только осталась какая-то мелочевка, но вот-вот. В рейд-дональд режиме можем запустить и добавим acceptance критерии, acceptance этот и все, уже договариваюсь, мне поздно.

**Dan Khasis** [02:34:49 - 02:34:53]: Нам не нужно acceptance первой версии, даже без этой кнопки запускайте.

**Semeyon S** [02:34:54 - 02:34:55]: Все, окей.

**Dan Khasis** [02:34:55 - 02:35:01]: Когда они заливают SFTP, проходит 5-10 минут и у них волшебно появляется симуляция в аккаунте, правильно?

**Semeyon S** [02:35:06 - 02:35:14]: Еще нет, там Хуан кое-что у себя пофиксить должен. Все остальные кубики есть, все остальные на месте.

**Dan Khasis** [02:35:15 - 02:35:34]: Даже если Хуан будет руками сидеть там, тыкать пальцем каждый раз, они не знают, что Хуан там сидит, тыкает пальцем, они залили файл, он берет, тыкает пальцем, выпивает кофе, кликает опять пальцем, с их точки зрения волшебно все появилось в веб-интерфейсе.

**Semeyon S** [02:35:35 - 02:35:42]: Да, все для этого есть, опишечка есть, вся информация подхватывается и рендерится, то, что ты видел.

**Dan Khasis** [02:35:44 - 02:35:57]: Окей, спасибо, я должен сейчас позвонить кому-то, потому что на митинг пошел. До четверга, до свидания, спасибо. Спасибо.

---

## Статистика

### Участники

- **Dan Khasis**: 465 сегментов, 01:24:09 (54.0%), точность 93.3%
- **Vova**: 168 сегментов, 00:17:08 (11.0%), точность 94.7%
- **Semeyon S**: 100 сегментов, 00:09:02 (5.8%), точность 94.4%
- **Alexey Afanasiev**: 71 сегментов, 00:05:22 (3.4%), точность 92.3%
- **Igor Golovtsov**: 48 сегментов, 00:04:19 (2.8%), точность 95.1%
- **Serhii Kasainov**: 41 сегментов, 00:06:00 (3.9%), точность 94.7%
- **Oleksandr Ishchenko**: 36 сегментов, 00:02:40 (1.7%), точность 94.0%
- **Davron Usmonov**: 34 сегментов, 00:03:28 (2.2%), точность 93.7%
- **Dmitry Smaliak**: 31 сегментов, 00:01:53 (1.2%), точность 90.5%
- **Vladimir Fedorov**: 29 сегментов, 00:02:24 (1.5%), точность 93.5%
- **Alexey Gusentsov**: 20 сегментов, 00:00:41 (0.4%), точность 95.1%
- **Igor Skrynkovskyy**: 14 сегментов, 00:01:10 (0.8%), точность 94.6%
- **Eugene**: 11 сегментов, 00:00:52 (0.6%), точность 94.0%
- **Alexandr Kovtunov**: 1 сегментов, 00:00:01 (0.0%), точность 95.0%

### Качество выравнивания

- Высокая уверенность (time-based): 1052 (98.4%)
- Разрешено через LLM: 12 (1.1%)
- Fallback: 5 (0.5%)
- Средняя уверенность: 93.7%
- [!] Низкая уверенность (<70%): 31 сегментов (2.9%)