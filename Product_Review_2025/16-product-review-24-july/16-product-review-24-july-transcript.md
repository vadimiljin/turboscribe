# Транскрипт встречи (Summary)

**Дата:** 2025-07-24 12:58
**Длительность:** 02:35:56
**Участники:** 15
**Точность:** 93.8%

---

**Oleksandr Ishchenko** [00:00:24 - 00:00:41]: Привет.

**Igor Skrynkovskyy** [00:01:49 - 00:02:07]: Привет.

**Serhii Kasainov** [00:02:11 - 00:02:27]: Игорь Скринковский, надо бы озвучивать, что мы в первой итерации делаем вот это вот, повторять, что мы делаем, ридомли-версию страниц? Ты про facility? Да.

**Igor Skrynkovskyy** [00:02:27 - 00:02:32]: Наверное, ну да, да.

**Oleksandr Ishchenko** [00:02:32 - 00:02:38]: Лучше уточнить скопия ожидания.

**Igor Skrynkovskyy** [00:02:40 - 00:02:56]: Мы с Сашей сегодня говорили насчет того, что мы будем пытаться сделать версию его уже полную, как по недельнику, но пока оставляем ее ридомли.

**Davron Usmonov** [00:03:01 - 00:03:34]: Игорь Скринковский, привет, у меня тоже вопрос. Один тикет у нас нужен для деплоя тревью. Я тебе в личку продублирую. Есть возможность его как-то обмолвнуть? Как бы единственный блокер остался. Сейчас в личку продублирую. Да, наверно, тебя слышно.

**Igor Skrynkovskyy** [00:03:41 - 00:03:45]: Ну, я думаю, да. Сейчас я Мишу Диме напишу.

**Davron Usmonov** [00:03:45 - 00:03:50]: Это последний тикет, который нам получат.

**Oleksandr Ishchenko** [00:05:18 - 00:05:21]: Пока еще ждем. Женя подключился. Женя, привет.

**Eugene** [00:05:22 - 00:05:23]: Да, привет.

**Oleksandr Ishchenko** [00:05:23 - 00:05:31]: У нас с тобой не получилось на преддемо с Инки поговорить в двух словах. У тебя получилось с теми фиксами?

**Eugene** [00:05:32 - 00:05:41]: Да, я большую часть пофиксировал. Которые твои команды. Остальное я... Чтобы глаза не кидалось во время демо по мап-плеерам. Я все правильно понимаю? Да, да.

**Oleksandr Ishchenko** [00:05:41 - 00:07:02]: Хорошо. Значит, по твоим джемби-айтам ты готов. Окей. Окей. А в головы нам еще не хватает. Семен, пока ты тут. Как раз хотел тебе сказать. Мы в чате откопали где по рекламе на карте. Где ругались на то, что показывают бешеные цифры. 485 дней тому назад и так дальше. Вова предоставил фигму, где вот эти иконки с активных на неактивные переключать нужно. Единственное, что я в чате не нашел. И я в голове не помню. Звучала цифра. Какой вот этот edge за решет, когда мы вот эти иконки переключаем. Сейчас я покажу, о чем речь. Чтобы визуально легче воспринималось. Мне нужна секунда. Ага, вот. Я пошарю? Хорошо. Вот. С активной иконки на неактивную переключать. То есть мы понимаем, но не понимаем когда. Edge за решет нам еще нужно ускаканить. Сегодня я это включил в агенду. Вова сказал, если что, подхватит. В общем, единственное условие, которое мы не понимаем. Когда переключать. И надеюсь, сегодня добьем этот вопрос.

**Igor Skrynkovskyy** [00:08:40 - 00:08:52]: Там Дэн вчера говорил, что он к врачу записан сегодня на утро. И что-то Дэн не отвечает. Возможно, он не присоединится.

**Oleksandr Ishchenko** [00:08:53 - 00:08:59]: Судя по активностям, которые уже сегодня были, не похоже. Но да, может как раз времечко подошло.

**Alex Shulga** [00:09:15 - 00:09:37]: Если Дэн не присоединится, то, пожалуйста, может быть вы не будете очень быстро разбегаться. У нас будет возможность обсудить пару вопросов по фильтру facility. Потому что вопросы как бы есть. Обсудить их нужно. Но пока не было возможности.

**Serhii Kasainov** [00:09:42 - 00:09:48]: Поддерживаем. Но обсуждать их без Дэна не так полезно, как было бы с ним.

**Alex Shulga** [00:09:48 - 00:10:13]: Да, в общем, все не так полезно, как с Дэном. Но я в целом буду признателен за любой фидбэк, который будет. Потому что иногда важно просто знать, что есть люди, которые думают в том же направлении, что и ты.

**Semeyon S** [00:10:17 - 00:10:29]: Алекс, прости, пока Дэна нет. У меня очень важный вопрос. Катерина, и вообще вопрос мобильной команды. Вы готовы что-то показывать с реальными изменениями или нет?

**Kateryna Shevchenko** [00:10:30 - 00:10:33]: Да, сегодня Гаспар попробует сделать демо.

**Semeyon S** [00:10:51 - 00:11:22]: Это огромные проблемы. Если мобильная команда не готова показать что-то хорошее, что сделает Дэна счастливым, лучше не делать это сегодня. Потому что сегодня мы обсудим много разных проблем. Звонок будет эмоциональным. И если вы увеличите температуру, все будут потерять.

**gaspar.eross** [00:11:24 - 00:11:33]: Понимаю, но у нас есть что-то показать. Мы обсудим проблемы, которые были упомянуты. И они не были решены через несколько недель. Поэтому у нас есть что-то показать.

**Semeyon S** [00:11:36 - 00:11:42]: Я надеюсь. Если есть проблемы с мобильной командой, я не буду обвинять.

**gaspar.eross** [00:11:44 - 00:12:08]: Мы хотим сражаться с проблемами, но мы должны улучшить. Если есть критики о нашем работе, это не проблема для меня. Нужно обсудить проблемы, которые не хороши. Но я позитивный с мобильной командой. И я сам буду делать презентацию.

**Oleksandr Ishchenko** [00:12:18 - 00:12:48]: Окей, Дэн, все хорошо.

**Serhii Kasainov** [00:13:18 - 00:14:21]: Игорь Скринковский, Игорь Головцов. Вам обоим вопрос. У нас главное меню, когда делалось, оно не подразумевало под собой, что оно будет хоть как-то ходить в опишечку. Это недочет, его надо переделывать. Но нам сейчас надо быстро решить проблему. Мы можем те же facility и фичу на facility положить в ответ бэка в html? Или какие у нас есть варианты?

**Igor Skrynkovskyy** [00:14:21 - 00:14:59]: Если это критически нужно, и вы по-другому не можете входить, а что остается? Вообще подразумевалось первую версию facility сделать не в меню, а отдельно. Я не знаю, почему у нас дизайн... Вова нету. Вова нету. Почему дизайн все остался на меню? Но если надо, то ребята добавят. Там они добавили уже в профиль API. Видимо, надо туда в другое место.

**Alex Shulga** [00:15:01 - 00:15:13]: Я могу подтвердить, что в профиль API все выводится, но есть блокер, по-видимому, там в случае отсутствующих facility выводятся все.

**Igor Skrynkovskyy** [00:15:16 - 00:15:16]: Это бах.

**Alex Shulga** [00:15:17 - 00:15:21]: Да. Сейчас буду заводить.

**Igor Skrynkovskyy** [00:15:21 - 00:15:38]: Вова, привет. Слушай, а почему у нас facility как это остались сверху в меню, если мы говорили о том, чтобы их положить в первой версии вот здесь в фильтре?

**Vova** [00:15:39 - 00:15:43]: Я не знаю. Вопрос не ко мне.

**Igor Skrynkovskyy** [00:15:43 - 00:15:45]: Подожди, подожди.

**Semeyon S** [00:15:46 - 00:16:08]: Игорь, подожди, подожди. Все правильно, потому что на звонке с Дэном, когда это было в прошлый четверг или даже позапрошлый четверг, он предложил разместить справа. Как в AWS консоли ты выбираешь зоны.

**Igor Skrynkovskyy** [00:16:12 - 00:16:44]: Я помню это. Просто вопрос в том, что мы же говорили, что вот эту версию мы делаем на следующую версию, когда у нас все будет заатрибутировано. Потому что сейчас смотри ситуацию. Мы routes добавили. Routes имеет все с facility. То есть при выборе facility routes будет реагировать. Мы перейдем на orders, та же самая ситуация будет. Но мы перейдем на какой-то другой объект, этих значений не будет. Они не будут использовать facility.

**Semeyon S** [00:16:44 - 00:17:07]: Значит, постепенно будем это делать. Были озвучены все эти доводы. Помню, в том числе ты говорил. Но в конце Дэн сказал вот это. Значит, решение это. Другой вопрос, что выпадает, если честно, чем здесь говеннейшее, почему-то взятое из основных фильтров. По-моему, Вова что-то другое нарисовал.

**Vova** [00:17:09 - 00:17:20]: Да, действительно, у нас с отступами не то. И, возможно, это я недосмотрел. Что здесь не те отступы стоят в выпадайке.

**Semeyon S** [00:17:20 - 00:17:27]: Вова, тут, по-моему, дело не в отступах, а что компонент неправильный. Тебе не кажется?

**Vova** [00:17:27 - 00:18:00]: Компонент правильный. Это фильтр. Только он выровнян неправильно. Сейчас я его быстро подкостылю, чтобы он был нужного размера.

**Serhii Kasainov** [00:18:07 - 00:18:15]: Да, если бы оно было в рамках страницы, это нам немножко... даже не немножко, а сильно бы упростило жизнь.

**Igor Golovtsov** [00:18:15 - 00:18:19]: Тогда по всем страницам надо раскидать былки.

**Serhii Kasainov** [00:18:20 - 00:18:30]: Раскидать ее по всем страницам все равно придется, потому что чтобы оно начало по ним фильтровать, это надо поменять запрос на опишку.

**Vova** [00:18:31 - 00:18:42]: Ну-ка еще раз, уберите здесь галочки сейчас, что произойдет? Последнюю если убрать галочку. Что будет?

**Serhii Kasainov** [00:18:43 - 00:18:47]: Произойдет косяк, давайте так не делать.

**Vova** [00:18:47 - 00:19:02]: Ага, ну вот я и хотел его увидеть. Справа этот компонент. В общем, когда он был слева, это работало, а когда он справа, это уже не работает.

**Serhii Kasainov** [00:19:03 - 00:19:09]: Да, мы только что с Головцовым играми учились, как его встроить в новый вариант.

**Vova** [00:19:09 - 00:19:12]: Надо было сразу идти ко мне.

**Semeyon S** [00:19:13 - 00:19:25]: Ребята, ну вот если посмотреть прототип, а на том звонке Вова тоже был, там банальная выпадайка. Здесь этот компонент вообще плохо подходит.

**Vova** [00:19:27 - 00:19:33]: Он справа плохо подходит. Вообще компонент превосходный.

**Semeyon S** [00:19:33 - 00:19:45]: Вова, смотри, вот эти кнопки здесь, они вообще ни к чему. Как это ни к чему? Это форма быстрого выбора. Я взял дропдаун, нажал чек, никаких аплайов, у меня информация поменялась.

**Vova** [00:19:45 - 00:19:48]: А здесь молча получается, ты можешь один выбрать или много?

**Semeyon S** [00:19:48 - 00:19:52]: Ну пожалуйста, выбрал много.

**Vova** [00:19:52 - 00:19:56]: И каждый раз перезагрузка после каждого клика?

**Semeyon S** [00:19:57 - 00:20:20]: Не после каждого клика, ты уж не передергивай. Есть умная логика для таких поведений. Ребята лучше нас ее с тобой знают. Просто вот эта кнопка аплай, лишние клики. Честно, у меня в фильтрах до сих пор немножко передергиваются вот эти наши лишние клики, но там они хоть как-то оправдаем. И здесь вообще неудобно будет.

**Serhii Kasainov** [00:20:22 - 00:20:27]: Тут только одно оправдание, если у нас очень много фасилити может быть. Да-да-да.

**Semeyon S** [00:20:28 - 00:20:31]: Ну их, знаешь, должно быть так это.

**Vova** [00:20:32 - 00:20:42]: Сотня другая тогда. Нет, я не буду против, если вы сможете гладко это сделать без аплай, чтобы оно динамически переменялось.

**Igor Golovtsov** [00:20:46 - 00:20:57]: Если убрать кнопки reset, cancel, apply и не выводить сбоку выбранные, то это получится компактно и более аккуратно в этом месте тогда эта штука.

**Serhii Kasainov** [00:20:57 - 00:21:08]: Просто кнопочка reset для multiselect, она имеет важный смысл, потому что когда выбирал много, тебе хочется это сбросить одним кликом.

**Vova** [00:21:09 - 00:21:19]: Там есть select all у нас в макете для этих всех вещей, чтобы ты мог uncheckнуть и сбросить, или select all нажать и выбрать все.

**Serhii Kasainov** [00:21:22 - 00:21:30]: Ну а при частичном выделении он начинает прыгать сначала intermediate вариант, потом select all, ну может быть.

**Oleksandr Ishchenko** [00:21:31 - 00:21:34]: Коллеги, к нам Дэн присоединился. Дэн, здравствуй.

**Dan Khasis** [00:21:36 - 00:21:39]: Да, я еще не у компьютера, здравствуй.

**Oleksandr Ishchenko** [00:21:39 - 00:21:42]: Ну тогда пусть ребята продолжат обсуждение.

**Dan Khasis** [00:21:43 - 00:22:26]: Мне просто любопытно, как мы на ровном месте с четкими спецификациями все равно не можем сделать ничего правильно. То есть всегда жалуются, product management нам ничего не говорит, техрайтеры нам ничего не говорят, переводчики неправильно нам дают. Мы видим в реальном времени, что конкретно все было написано и передато, все равно не делается правильно. И тоже неправильно, просто полностью неправильно.

**Igor Skrynkovskyy** [00:22:35 - 00:22:43]: Дэн, а контекст того, что ты говоришь, к чему они все правильно, это у Wavelog или у чем-то другого?

**Dan Khasis** [00:22:44 - 00:23:04]: Десять раз я сказал, что это должно называться RouteMetrics. Все равно мне присылают апдейт сегодня, мы сделали, посмотри, RouteSummary. Какое пизду RouteSummary? Вчера я написал слово summary, это текст, это описание, это description, а метрикс это цифры. Все равно написали RouteSummary и теплое.

**Oleksandr Ishchenko** [00:23:04 - 00:23:08]: В работе, Дэн, в работе.

**Dan Khasis** [00:23:08 - 00:23:16]: За минуту, за секунду, это пять секунд работы, как ты еще в работе. Вот что я не понимаю.

**Oleksandr Ishchenko** [00:23:16 - 00:23:37]: Ну там два запроса от тебя, передвинуть менюшки в гир и перевод. Переводы есть в локалайзе, их все равно нужно выкатить. Все равно какое-то время на фоне занимает, но это сегодня на стидже должно быть. Не перерывай, мы тебе отдельное уведомление либо пришлем, либо еще во время этого демо Юра напишет, что готово, мы тебя уведомим.

**Dan Khasis** [00:23:40 - 00:26:08]: Я пытаюсь сказать другую вещь. Поменять слово summary на метрикс это пять секунд работы. Если потом надо сделать экспорт из локалайз и импорт, окей. Но поменять слово метрикс в английском языке, мне наплевать насчет испанского, китайского, арабского, это должно быть пять секунд работы и пять секунд усилия, а не пять дней работы, как сейчас это произошло. Теперь умножить это на намного сложнее вещи и почему вы ожидаете другие результаты. Понятно, оно было в очереди, сейчас будет, оно будет. Да, но у Линекса и у других систем 50 лет люди исследуют алгоритмы очередей и никто не имеет одну очередь для супер сложных тесок и для супер легких тесок. Там идет парализация. Одна группа или любой джуниор-программист может поменять слово summary на метрикс за пять секунд. Почему это идет в той же очереди, в том же кью, в том же теск-листе, как, например, делать новую архитектуру, это же полностью нелогически и неразумно. Например, у нас есть серьезные проблемы с этими route metrics, у нас есть серьезные проблемы с отсутствием total. Некоторые эти вещи займут тоже 30 секунд сделать. Например, прибавить слово time, сверху групп Но если я должен сказать это, потом идет Артура, потом идет Тикет, потом идет Саша, потом идет QA, потом якобы QA что-то проверяет, когда нихуя все равно не работает, потом идет Вовя, может еще QA сделать, он находит 100 дефектов, вы опять сначала процесс начинаете, проходит 5 недель или 5 месяцев и у нас словом route metrics меняется.

**Vova** [00:26:11 - 00:26:14]: А чего, правильно сказать, никто не ходит больше?

**Oleksandr Ishchenko** [00:26:14 - 00:26:19]: Попробуем ускорить, может Сергей подскажет, теслаколазин не помогал.

**Dan Khasis** [00:26:20 - 00:30:43]: Я запустил route for me в 2008 году, Вова сделал дизайн, я сделал PHP, Игорь подсоединился, ты 34 года, у нас было два сервера, нет, у нас был один сервер, продакшн, я заходил через SFTP, CyberDuck, я у себя писал в Eclipse PHP и я заливал SFTP прямо на живую, на продакшн. Никаких QA, никаких, просто мы заливали на живую, на продакшн, на один сервер SFTP. Потом еще два года прошло, мы прибавили стейджинг сервер, но все равно деплоили просто copy and paste PHP файлы на SFTP. Потом еще два года прошло, иногда, чтобы вы понимали, когда была сделка с клиентом, мы заходили прямо на Shell, я на лету Vim менял в хедере меню на живую, чтобы закрыть сделку, потому что клиент хотел лейбл в каком-то месте, прямо сейчас. Мы не покупаем, если у вас не написано здесь какой-то адрес. Мы приходили и на PHP на живую редактировали output HTML в for loop. Но когда было два опытных программиста, это было возможно. Когда есть 25 программистов разных уровней, это невозможно. Я просто говорю, что если нам надо выбрать, что мы сейчас делаем, и что я описал, как было, нам надо быть ближе, как было, а не как сейчас есть. Потому что мы просто проголим за эти сроки. Из-за этого бага, из-за этих трех багов, что Python неправильно считает время, 15 лет, то есть вообще даже не считал время. Второй баг. Кто-то засунул planned, dynamic, actual время в дэшборд этот говняный, не подчинили его 3 года, плюс отсутствие route matrix, которые работают, плюс неправильная арифметика. Мы должны были несколько тысяч долларов тратить, послать Паркера, Эллена, взять самолет, взять номер, в ресторан вывезти клиентов. Два дня они там в этой пустыне, где там 50 градусов тепла, пробыли, чтобы этих людей успокоить. За пилот они тратят 1500 в месяц. Значит, пилот у них 3 или 4 месяца. Все деньги, которые мы якобы бы заработали на пилоте, мы уже пропили на поездку туда. И эта поездка была только из-за UI-дефектов, связанных с этими тремя вещами, которые, в принципе, я не хочу сказать, что баги не существуют, но как фирма мы только делаем одну вещь. Кто-то заливает маршрут, мы оцениваем маршрут, потом кто-то едет, мы оцениваем, как они объехали, потом мы дельту делаем. Вся сложность это в алгоритме. Нигде в другом месте нет сложности. И на ровном месте мы сделаем все возможные ошибки. Я немножко даже удивлен, что нам другие люди платят деньги. Это просто показывает, какие тупые большинство операторов, что они не замечают, что у нас полностью все неправильно и полностью все коряво. И теперь мы наконец-то набрали правильных сотрудников и желание это починить раз и навсегда. И хуяк это занимает. Людям делают процедуру открытого сердца быстрее, чем мы можем лейбл поменять. Вот в чем проблема. Нам надо постараться сделать так, чтобы мы могли лейблы менять просто в локалайзе без разработчиков. К этому мы были очень близки.

**Serhii Kasainov** [00:30:43 - 00:31:05]: Это все делалось. Просто у нас английский язык все равно подгружается локально из репозитория. Это, я думаю, решит вопрос.

**Dan Khasis** [00:31:08 - 00:31:16]: Да, но даже в репозитории мы делаем commit и pull requests.

**Serhii Kasainov** [00:31:16 - 00:31:34]: Поехали. Ну, как я тебе вчера отписал, что у меня, например, у одного человека, у нас мало у кого есть права деплойть на прод, тем более вне окна.

**Dan Khasis** [00:31:34 - 00:32:28]: А локалайз можно задеплойть относительно безопасно и без админских прав. Да, ты вернулся. Я говорю, что там есть физическое ограничение или философское ограничение? Настройки репозиториев ограничения.

**Igor Skrynkovskyy** [00:32:28 - 00:33:04]: Нет, насчет деплоймента, green window, если ты сделаешь деплоймент, тебе сервер говорит error, что время не совпадает? Нет, это логия, это у нас философское есть ограничение в размере того, что мы делаем деплойменты только в определенное время. Но, скажем так, мы никогда этим не лимитовали и это никогда бы не было проблемой. Но Сергей прав, у него нет целых или полных прав для того, чтобы релизить это в любое время из-за настроек репозитория, потому что релизить могут там только 3 или 4 человека, которые имеют роль релиз-менеджера.

**Dan Khasis** [00:33:04 - 00:33:12]: Окей, но почему они блочат тогда Сергея?

**Igor Skrynkovskyy** [00:33:14 - 00:33:26]: Так они не блочат Сергея. Саша Кафтанов и Миша, они как бы два человека, которые работают онлайн с самого утра до самой поздней ночи.

**Dan Khasis** [00:33:28 - 00:33:38]: Просто Сергей закончил и показал, что он это сделал, и потом на этом дело закончилось. Никто ничего не задеплоил.

**Igor Skrynkovskyy** [00:33:41 - 00:34:06]: Возможно, Саша Кафтанов не знал о том, что нужно что-то деплоить. Мы можем просто очень это сделать супер просто. Мы даем Сергею просто права на релиз вне окна и для всех UI-репозиториев, и у нас все проблемы уходят сразу. Сергей будет релизить, когда ему нужно.

**Dan Khasis** [00:34:06 - 00:34:12]: Если QA подтверждает, и Сергей технически лидит JavaScript, тогда пусть он деплоит JavaScript вещи.

**Igor Skrynkovskyy** [00:34:17 - 00:34:22]: Хорошо, так и сделаем.

**Oleksandr Ishchenko** [00:34:22 - 00:34:27]: Сергей, поздравляю с новыми правами.

**Serhii Kasainov** [00:34:27 - 00:34:32]: С большими правами приходит большая ответственность.

**Dan Khasis** [00:34:36 - 00:35:36]: В отличие от ВИА, в отличие от ВИА, мы будем видеть, кто делает что, так у нас не будет сомнений, кто положил продакшн. Большинство самых крупных клиентов, которые платят большие деньги, они больше рассчитывают на API, чем на фронт-энд. И в Америке большинство юзеров только начинают работать в 6-7 утра. То есть только light and easy в Австралии как-то будет эффективно, но мы не можем всю Америку тормозить или портить из-за каких-то комгарублей. Поэтому мне мое решение про довести до ума localize нравится больше, потому что даже если мы абсолютно правильный JavaScript отправляем на deploy, с учетом особенностей JavaScript и NPM, это менеджер пакетов JavaScript, всегда есть маленькая вероятность, что все пойдет не так, как планировалось.

**Serhii Kasainov** [00:35:36 - 00:36:12]: Поэтому просто подменить JSON на продакшн и вот это вот мне супер безопасно. И мы можем это сделать и очень быстро. И это тогда не только релиз-менеджеры смогут проявить лейпы, а кто угодно, в том числе и с QA.

**Igor Skrynkovskyy** [00:36:12 - 00:36:32]: Сергей, там очень много вопросов встает насчет того, как данные в оригинальном виде или в английский язык должны замениться на что-то другое. Потому что ты же не будешь в localize менять английский на английский или подменять лейпы для этого.

**Dan Khasis** [00:36:32 - 00:36:39]: Меня беспокоит другая вещь, что случается, когда localize лежит. Тогда что?

**Igor Skrynkovskyy** [00:36:39 - 00:36:48]: А у нас эти снапшоты хранятся. То есть мы храним снапшот данных на какое-то время.

**Dan Khasis** [00:36:51 - 00:37:08]: Нам было бы хорошо иметь бокапы всего, что мы поставили этим localize, чтобы когда они прогулят или купят и они цены поднимут 10 раз, чтобы мы не были в неприятной ситуации.

**Igor Skrynkovskyy** [00:37:09 - 00:37:27]: Мы можем дополнительно бокапы делать, но, как я говорю, у нас снапшоты для каждого сервиса, где используется localize, они у нас есть уже. Они разбросаны, но они есть. Но мы дополнительно бокапы сделаем.

**Serhii Kasainov** [00:37:27 - 00:37:39]: И JSON подменяет, если я правильно знаю, наш CI. Поэтому, если localize лежит, он просто не запустится.

**Dan Khasis** [00:37:51 - 00:38:00]: Самая важная, горячая тема сейчас это что с этим временем алгоритмов, Семен? Вы нашли какие-то проблемы там?

**Semeyon S** [00:38:05 - 00:38:27]: Сейчас там перепроверяем. Потому что значение очень странное и QA там какой-то... Короче, я не понимаю. Я вот сижу сейчас, сам воспроизвожу вот тесты вручную сам.

**Dan Khasis** [00:38:27 - 00:38:46]: Потому что я не очень понимаю, что там получилось в QA. Мне любопытно, ты же скачал HWAN, сделал код, который все скачал, там цифры бьются один в один по транзакциям. Потом он улучшил код она с 14 миллисекунд за полторы миллисекунды ранилась с этим.

**Semeyon S** [00:38:46 - 00:38:52]: Но он от DataFrame переписал там логику.

**Dan Khasis** [00:38:52 - 00:39:04]: Ну и теперь так проверь, если твоя старая функция правильно работает. Если она работает правильно, используй ее, потом перейди назад до DataFrame.

**Semeyon S** [00:39:04 - 00:39:17]: Да и, Дэн, я вот сейчас пытаюсь это все просто триггернуть и перепроверить, чтобы я понимал, как проверяю. Потому что, ну...

**Dan Khasis** [00:39:17 - 00:39:48]: У меня еще вопрос насчет этого темы. Не забудь, пожалуйста, что таймштемпы приходят в рандомном порядке. И что может быть ситуация, где вы же имеете какой-то Redis ключ где-то, если правильно помню, не пересчитывать это чаще, чем одно количество раз в какой-то срок времени. Иначе каждый новый реквест будет бомбить сервера. Сейчас оно...

**Semeyon S** [00:39:48 - 00:40:06]: Старая логика работает так, что проверяются обновления, то есть если точка пришла вне в своем порядке, она отбрасывается. А потом исторически все равно берется по сортировке уже на следующих шагах. Да, это хорошо, но в каком...

**Dan Khasis** [00:40:06 - 00:40:12]: То есть в каком шагу это происходит?

**Semeyon S** [00:40:16 - 00:40:19]: Это в потоке происходит, то есть как точки приходят.

**Dan Khasis** [00:40:20 - 00:40:49]: Просто другими словами, если пришло к тебе вот этих 5000 точек, ты же не 5000 раз подскачиваешь 5000 вещ... объектов. 5000, то есть 1000, потом 1001, потом 1002. Мы же, мне кажется, ставили Redis ключ, который имел RouteID, который тогда запрещал пересчет, потому что RouteID полноценный не чаще, чем там количество минут. Логика немножко другая. На N минут такого нет.

**Semeyon S** [00:40:49 - 00:41:24]: Есть, если... Там как работает. Вот поток начинается, и в первый раз идет запрос на Distance, на Dynamo, чтобы выбрать массив точек и сделать первоначальный расчет. Вот. В дальнейшем идет пересчет на лету без похода в Dynamo. В Dynamo моя логика обращается, если возникает слишком большой gap между координатами в 10 километров. У тебя же нету...

**Dan Khasis** [00:41:24 - 00:41:29]: А где ты сохраняешь все эти временные точки в Redis?

**Semeyon S** [00:41:36 - 00:41:56]: Вообще, надо сейчас с этим travel time добить. Вот. Доразобраться. Я вспомню логику, и, возможно, будет это дело пересмотреть кэширование, чтобы меньше запросов было.

**Dan Khasis** [00:41:56 - 00:42:05]: Меня просто беспокоит, что мы будем полить бешеные деньги на ... Ну, запросы к Динамо и трафик особенно бешеный, да.

**Semeyon S** [00:42:05 - 00:42:14]: Вот это прям очень неприятно. Есть там такое.

**Dan Khasis** [00:42:14 - 00:42:23]: Ну и сначала с цифрами разобраться. Если ты не будешь пересчитывать это чаще, чем энное количество минут, тогда этого не будет.

**Semeyon S** [00:42:23 - 00:43:25]: Ну да, я добавлю эту логику, да и все. Так я думал, что она есть. Вот что я пытаюсь сказать. Просто видишь, вот я закладывал большие гэпы где-то в 10 километров. Там получается тогда задержка, она даже не 5 минут, она больше, на 10-15 минут должна. Но что я не делал, я не проверял реальные гэпы, которые получаются. И опять же, вот этот новый кейс, когда у нас диапазон 5 секунд приходят точки, ну это логика, можешь себя повести иначе, не так как я привык. То есть тогда надо убирать вот эту мою проверку на 10 километров и менять тупо на задержку в 5 минут. И все. Упрощать, а упрощать, ну я с радостью. Лишь бы не усложнять.

**Dan Khasis** [00:43:33 - 00:43:34]: Окей, что у нас следующее?

**Oleksandr Ishchenko** [00:43:36 - 00:43:44]: Сергей тогда, не помню, Дженди у нас facility, эти best visibility фильтры, наброски, то что на понедельник готовится.

**Serhii Kasainov** [00:43:44 - 00:44:16]: Да, активно готовим frontend часть приложения для поддержки фильтрации по facility. Вот это мы получили от дизайн команды. Это превратилось вот в соответствующую имплементацию. У меня и у Семена есть сомнения по поводу UI для этой выпадайки, по-моему, она слишком переусложнена, но если facility действительно может быть очень много, то нам нужен серверный поиск.

**Dan Khasis** [00:44:18 - 00:44:56]: Вам всегда нужен серверный поиск, мне кажется. Промолчание надо подгружать первые 5 записей и потом в любые другие мы идем на сервер. Но здесь UI корявый, здесь все равно неправильно. Она слишком неправильная. Она как надутая. Это рыба, которая плавает под водой, которая надувается. Blowfish или Pufferfish. Для меня это так выглядит.

**Vova** [00:44:56 - 00:45:05]: Я точно так же среагировал сегодня 2 часа назад и в макете уменьшил эти гэпы. Они явно здесь слишком большие.

**Serhii Kasainov** [00:45:09 - 00:45:11]: Хорошо. Компонент станет более компактным.

**Dan Khasis** [00:45:11 - 00:45:36]: Если мы говорим прямо сейчас запускать, чтобы это работало, запускайте. Но это просто дохуя дупликации. Зачем вообще иметь? Потому что если список имеет 65 фасилити, тогда надо не забыть, что надо дерево будет по географии. Потому что фасилити проринкованы географией.

**Serhii Kasainov** [00:45:41 - 00:45:42]: А веб-блог нам вообще нужен?

**Dan Khasis** [00:45:45 - 00:45:59]: Только если там 500 фасилити или 100 фасилити и ты сделал поиск и ты выбрал на 57 странице какое-то фасилити теперь и ты уже забыл.

**Vova** [00:46:04 - 00:46:33]: Совершенно верно. Этот UI имеет смысл. Он дает тебе возможность сделать несколько поисков. Сперва поискать 1 фасилити, добавить ее. Потом поискать 2 фасилити, добавить ее. И ты видишь, что ты добавил. Этот UI имеет смысл, когда у тебя больше 20 фасилитис. Если у тебя до 20 фасилитис, то эту панель можно не использовать. И поисков не делать. И просто дать здесь простой список плоских 20 айтемов.

**Serhii Kasainov** [00:46:40 - 00:46:50]: То есть если у нас опишки пришло меньше, чем размер страницы, мы уверены, что фасилити у нас немного и мы упрощаем этот UI до невозможности.

**Vova** [00:46:50 - 00:46:55]: Ну да, поиск не имеет смысла особо, если у тебя меньше 20 фасилитис. Я бы так сказал.

**Dan Khasis** [00:46:56 - 00:47:28]: Если вы хотите сделать покруче, я не говорю это прямо сейчас сделать, я просто вам идею рассказываю. Было бы интересно как-то подсвечивать этим людям, например, текущий статус. Вот у тебя есть красные, у тебя есть зеленые кластера, желтые кластера. Он в хорошем штате, в плохом штате, не в географическом штате, но я имею в виду статус, здоровье кластера.

**Serhii Kasainov** [00:47:40 - 00:47:43]: Это что-то про бкн-инфраструктуру, наверное.

**Dan Khasis** [00:47:45 - 00:48:03]: Это больше насчет, как я показывал, Вова, помнишь, в этом в нетворкинг-сайте там была ситуация, где она показывает, я могу снова показать, если надо, чтобы всем напомнить. Дайте экрану секунду. Да, я понял тебя, о чем ты говоришь. Вот этот сайт, видите, это разные сайты.

**Vova** [00:48:08 - 00:48:12]: Если бы он был красный.

**Dan Khasis** [00:48:12 - 00:56:26]: Теперь это список всех физических локейшенов, они все в рамках дочерней организации. Я могу создать новый сайт. Сайт — это их синоним facility. И потом его можно смотреть так. Когда ты смотришь на сайт, там есть какие-то элементарные данные. Когда мы смотрим на наш facility, ты не понимаешь, какое здоровье facility. Например, текущее. Никого не волнует, что было вчера, например. Но вот сегодня, какой текущий прогресс сегодняшнего дня всех маршрутов? У нас же есть это. У вас есть group by date и у вас есть filter by facility. Например, здесь написаны другие данные насчет ... Мне, например, критикал какой-то флаг, что-то running behind. Например, в updates выключил ... retries, wi-fi, сколько guests. ISP, в нашем случае, это может быть accountable человек. IP-адрес выключим. Status, operating normal и так далее. Теперь я вижу 55 своих facilities. Я вижу, что мой или ... какая метрика мне важна? Например, какой процент маршрутов еще не начали ехать? Для меня это важно. Например, started. Я ожидаю уже, что на этот текущий момент 99% уже было started. Сколько у меня сегодня водителей активных? Потому что у меня есть уже пролинковано, сколько у меня есть активных этих. Смотри, я могу сделать уже. У нас это невозможно. У меня маленький экран, я хочу компактнее. И потом провалиться можно в любой из этих facilities. То есть прямо сейчас я могу видеть drivers, vehicles и routes на текущий день. Текущий статус. Мне неважно, сколько работает, мне неважна аналитика, мне неважны сложные тренды. Я говорю просто прямо сейчас, сколько signed vehicles, сколько signed. И у нас это есть. И ISP это accountable человек. Ты знаешь прямо сейчас ответственный за этот. В принципе, этому человеку можно позвонить. В принципе, этому можно сделать ссылку на телефонный номер в WhatsApp. В принципе, можно на Slack ссылку поставить. А статус это может быть интерпретация всех других вещей. Например, running behind. Потому что сейчас очень они поздно начали. Но если у меня было много географии, потому что у нас будет география, facilities внутри географии, тогда идет группировка по географиям. И у меня теперь на уровне географии такие же метрики, как и здесь. Водители, маршруты, вехалы. Опять все уже есть в текущей базе. Стрейчки не нужно, BigQuery не нужен. И ты можешь фильтровать по сайт групп. Это и есть география, в принципе. И отсюда ты кликаешь, ты можешь переходить здесь. Здесь Network. А здесь, например... Кстати, видите, как стриминг у них идет. Это как я всегда рассказываю, что мы должны сделать. Прежде мы это не сделали. Если у тебя за рулем 100 водителей, значит у тебя километраж и время так же двигается. Но мы это не показываем. Таким образом. И можно переключаться сразу. Если это Network, ты можешь переключиться, например... Есть топология этой сети. Сейчас найду. И видно... Вот это моя география, это мой регион, это мои водители, то есть машины. Потом в машине сидит этот водитель. Я кликаю на любой объект, он открывается моментально. В зависимости от типа объекта. Контроль, панель, динамически показывают разные вещи. Ссылки всегда синие. Обыкновенные вещи. Темно-серые. Немножко яркие синие. Здесь дефект, мне кажется. Неправильный фон. И кстати, насчет Вова, твоей идеи, что в машине. Если они загрузили что-то, можно машину показывать, правильно? Что в машине и где лежит. Потому что можно видеть, никто это не имеет сейчас. Из конкурентов. У меня в этой географии, в этом складу, есть такая-то машина с таким водителем, и в той машине лежат эти вещи. Это, например, ордер-лист. И ты видишь описание всех этих вещей, и ты можешь конкретно эту вещь как-то редактировать. Индивидуально. И конечно, там есть VIN number и фильтрация. Покажи мне все электрические машины, покажи мне все газовые машины, покажи мне все машины, которые имеют мало топлива, много топлива, большой двигатель, маленький двигатель. Максимальная скорость такого типа. Фильтрация. И можно переключиться на другой use case моментально. То есть ты хочешь перейти на режим камер, ты переходишь на режим камер, и ты видишь сразу, что там происходит. Потом ты кликаешь на вещи, она зумин делает. И ты можешь зумин делать. И там рассматривать. У тебя есть 100 водителей, ты кликнул на любую вещь, ты видишь камеру всех водителей, ты видишь одометр всех водителей, ты видишь там такометр всех водителей. Почему? Потому что Telematic все это показывает. И все моментально одним кликом работает. Где есть движение или алерт, она начинает подсвечивать. Короче, мы это показывали раньше уже. Ну это экземпляр, как это все гладко идет. Ты кликаешь, и ты можешь моментально между facilities прыгать. Ты видишь, вот группы, вот группы, all sites, tempo и так далее.

**Vova** [00:56:29 - 00:56:50]: Идея показать overall facility score или какой-то performance или health facility прямо на верхнем уровне, чтобы ты уже еще до того, как ее выбрал, уже увидел ее health. Прекрасная идея такая, мы ее пока что не считаем. Но нарисовать я уже могу ее.

**Dan Khasis** [00:56:50 - 00:58:41]: Мы можем сделать какую-то элементарную версию этого health скоро. Просто считать, сколько количество маршрутов начались или прогресс. У тебя есть n количество destination, какой процент всех destination ты объехал. И это для первой версии не проблема. 90% людям это самое важное. Кстати, мне надо через час и пять минут уезжать. Мы можем быстро идти, но у меня есть час и пять минут у компьютера. Если здесь посмотреть на routes list, я уберу это и уберу это. Я зашел под этим человеком в его аккаунт. И, например, у меня прогресс важнее всего, я двигаю прогресс сюда. Она идеально все показывает. Теперь я включаю группировку, но почему-то отсутствует facility. Представьте себе, что он был. Давай сделаем status и представим, что это facility. Уже все есть. Давай на сегодня перейдем. Сегодняшняя дата я бы увидел на списке своих facility, что у меня есть столько маршрутов started, planned, извиняюсь, неправильно, planned, started, completed. И вот мы говорили насчет route metrics, мы уже две недели, говорим, поменять цвет этого.

**Vova** [00:58:43 - 00:58:44]: У нас пейджонги уже поменяли.

**Dan Khasis** [00:58:46 - 00:59:56]: Почему они на продакшене? Не знаю. И все, теперь просто берется, что здесь есть какое-то количество destinations и visited destinations. И мы видим, что прогресс на уровне facility это просто сумма всех этих destinations и сумма всех visited marked as completed руками. И все, и это уйдет на уровне facility. Такой же progress bar, все то же самое. И счетчики эти элементарные, которые уже у нас есть. Вон они, прямо здесь.

**Vova** [01:00:00 - 01:00:08]: Окей, хорошо, мы туда вставим маленький прогресс барчик в этот facility selector.

**Dan Khasis** [01:00:09 - 01:00:23]: Да, но вы можете этот прогресс бар вставить на уровне агрегации, прямо сюда, потому что вот скажи мне, какой процент started маршрутов progressive?

**Vova** [01:00:25 - 01:00:26]: Мы рисовали.

**Dan Khasis** [01:00:26 - 01:00:28]: Или сюда поставим?

**Vova** [01:00:29 - 01:00:50]: Да, в макетах самых начальных, которым уже два года, вот здесь должны были выводиться метрики группы. Но это никогда не было имплементировано. И еще здесь должно было быть меню группы, чтобы можно было взять и сделать какие-то bulk actions сразу с группой целые.

**Dan Khasis** [01:00:50 - 01:01:19]: Балк actions с группой критическая вещь, потому что если я хочу взять все эти вещи в этой группе, я не могу. Да. Если я хочу посмотреть на все вчерашние маршруты, я должен мучиться. Если их было 50 штук, я должен кликать каждую. Но это уже чувствуется намного более гладко, но теперь я не могу двигать левее. Это слишком много места, меняет компактность. Она портит мне возможность видеть все критические метрики.

**Vova** [01:01:20 - 01:01:24]: Это происходит, потому что у нас группировка неправильно сделана.

**Dan Khasis** [01:01:26 - 01:01:31]: Это происходит, потому что callspan minwidth настроен неправильно.

**Vova** [01:01:32 - 01:01:41]: Да, у нас сделана callspan группировка. Это должны были быть настоящие ряды в таблице. В общем.

**Serhii Kasainov** [01:01:42 - 01:01:48]: Я все-таки думаю, что это просто minwidth для колонки routeName, потому что она бывает достаточно длинной.

**Dan Khasis** [01:01:48 - 01:01:54]: Так сделай minwidth просто 100 пикселей, а не 250 или 75.

**Serhii Kasainov** [01:01:58 - 01:02:00]: Зафиксировался, не сделаем.

**Dan Khasis** [01:02:13 - 01:02:59]: Наверное, еще в другом месте тоже. Видишь, call fixed. Я не знаю, что это значит, но это может значить, что если ты двигаешься налево-направо, он frozen. Окей, тебе виднее, как это улучшить. Но теперь вы видите. И вот тоже самое здесь. Где наш выбор facility? Вот у нас есть facilities. Давай возьмем и...

**Vova** [01:02:59 - 01:03:03]: Здесь facilities, я не могу...

**Dan Khasis** [01:03:03 - 01:03:27]: Ну, точно так же, как и assign user должен работать, да? Да, так же. Цвет неправильный, здесь цвет неправильный. Опять возвращаясь на 5-секундную модификацию, это же неправильный цвет.

**Vova** [01:03:28 - 01:04:05]: Я, Дэн, топлю за то, чтобы сделать синий дефолтный цвет, потому что этот цвет максимально контрастный со всеми элементами на карте. Отлично видно. Зеленый не такой контрастный, поэтому я хочу планированные маршруты сделать синими. Цвет запланированного маршрута. А цвет проеханного маршрута просто... Та же синяя линия, она становится полой, незаполненной. То есть ты проезжаешь, она гаснет по мере того, как ты проезжаешь. Участок, который ты проехал, становится погасшим. Я покажу. Я покажу.

**Dan Khasis** [01:04:05 - 01:04:13]: Синий цвет такого типа лучше для дефолта. Как гугл делает, когда ты проехал, он становится серым. Да-да.

**Vova** [01:04:13 - 01:04:35]: Но мы будем делать не серым, мы будем оставлять его синим, того же тона, потому что у нас есть Multiple Roads Map, там где все роуты разноцветные. Мы будем оставлять тот же цвет, просто убирать заливку из этой линии. Или белые, более жирные бордеры, но окей. Я могу пошарить экран и показать, как мы это нарисуем.

**Dan Khasis** [01:04:36 - 01:04:38]: Здесь намного все понятнее стало.

**Vova** [01:04:41 - 01:05:03]: Здесь я бы немножко тоже поговорил. Я тебе кидал, ты игнорировал мой макет. У нас была похожая система, только здесь вот был... Здесь не было Plant, здесь был Actual, и процент разницы между Plant и Actual. Мне кажется, этот процент гораздо важнее, чем сравнивать просто Plant и Actual, да?

**Dan Khasis** [01:05:04 - 01:05:26]: Что нам нужно сделать, это сделать вот это немножко пошире, немножко пошире. И прибавить новую колонку Delta, и здесь поставить проценты в эту колонку. Взять в символ математический Delta и конкретно написать здесь вот эту Delta.

**Vova** [01:05:26 - 01:06:03]: Давай я покажу тебе очень быстро, что мы нарисовали. Ты мне просто скажешь, нравится тебе или нет. У нас это было нарисовано вот таким образом. Destinations – это маршрут не начатый. Destinations Distance Duration разбито по частям. Минимальное количество лейблов – все очень непонятно.

**Dan Khasis** [01:06:03 - 01:06:06]: Не, мне это непонятно.

**Vova** [01:06:06 - 01:06:19]: Нам нужно три колонки. Но этот маршрут еще не начался, здесь три колонки, смысла у них нет. Здесь еще нет Actual никакого. Дальше маршрут начался.

**Dan Khasis** [01:06:19 - 01:07:13]: Не, мы не хотим это. Ты пытаешься продавать, что мы не хотим. Мы не хотим это. Мы хотим столбик. Столбик. Неужели оставшиеся 25 человек на звонке мозги не начинают утомляться, делать парсинг, децентрализацию у себя в голове, сплит, этот стринг на слэш, в голове строить эти три колонки, потом сравнивать это. Нет. Сделай просто третью колонку с процентом. Мне нравится дерево. Мне нравится дерево. Нам надо его вернуть. Но мне не нравится дюрейшн. Я не знаю. Я не против слова дюрейшн. Но нам везде написано time. Тогда мы опять должны все везде менять. То, как сейчас сделано на продакшене, оно лучше.

**Artur Moskalenko** [01:07:13 - 01:07:25]: Просто немного устарело. То, что на экране. Я в чат скину. Вова, посмотри.

**Vova** [01:07:26 - 01:07:36]: Да нет, я видел. Я видел. Я просто хотел обсудить то, что проценты нам нужны. Потому что, на мой вкус, вот эта информация ключевая, самая важная.

**Dan Khasis** [01:07:36 - 01:07:51]: Я согласен. Но я не хотел Сергея... Бэкэнд должен это считать, а не Сергей. Если бэкэнд это не считает, я не хотел Сергея напрягать, делать это на фронтэнде, потому что это неправильно.

**Vova** [01:07:57 - 01:08:24]: Окей, я услышал. Вот расцветка роутов. Запланированный роут, частично проеханный роут, целиком проеханный роут. И он просто становится... заливка пропадает линией.

**Dan Khasis** [01:08:24 - 01:08:45]: В принципе, мне нравится, но я хочу просто запомнить, что у нас есть база данных скорости. Если человек преувеличивал скорость, мы, может быть, захотим красно подсвечивать. Если он отклонился от маршрута, мы, может быть, захотим иначе это тоже подсвечивать. Но не сейчас, у нас нет времени на сейчас. И у нас нет технологий это сейчас делать.

**Vova** [01:08:45 - 01:08:57]: Вот отклонение от маршрута красное, это у нас тоже уже запланировано. Только у тебя бордер потерялся. Нет.

**Dan Khasis** [01:08:57 - 01:09:09]: Нет, все еще есть. Он не такой контрастный, как красный линий. Но окей, я согласен в теории, как ты это осуществил.

**Vova** [01:09:16 - 01:09:48]: Да, и когда много маршрутов разноцветных на карте, то у них они все... Сейчас я найду это место. Было бы здорово, если бы мы с тобой созвонились, и я тебе показал весь этот файл досконально, чтобы мы прошлись, и ты прокомментировал по всем вещам. Я тебе посылал это через Google Doc, но, видимо, у тебя не нашлось времени все прокомментировать. Мы постарались подробно-подробно расписать, как карты должны работать все.

**Serhii Kasainov** [01:09:52 - 01:09:56]: Давайте вернемся к Facilities, пожалуйста. Это нам нужно уже.

**Vova** [01:09:57 - 01:10:03]: Хорошо. Facilities... Ну, я нарисую. Я услышал весь видбэк, где надо по Facilities.

**Dan Khasis** [01:10:04 - 01:10:39]: Если уже готово у Сергея, запускайте, как есть, когда facility count больше, чем ноль. Если это уже готово, потому что у нас не хватает facility assignment в раут-пленере, у нас не хватает кнопки facility assignment в раут-листе, и у нас не хватает кнопки facility assignment в раут-снэпшоте, и так далее. И отсутствие этого ассаймента, без этого полностью бесполезно иметь выборка Facilities, если нет ассаймента Facilities.

**Igor Skrynkovskyy** [01:10:42 - 01:11:05]: Да, мы, параллельно уже заканчиваем тестирование на стейджинге для четырех сущностей, которые мы договорились. То есть это не только маршрут будет. Ребята, пакет уже как бы все готово сделали, некоторые функции мы уже передали на фронт-энд, чтобы добавлять. Потому оно будет.

**Oleksandr Ishchenko** [01:11:06 - 01:11:10]: Раут-снэпшот, ассайнмент в Facilities обещается. Аккуратный идей на понедельник.

**Kateryna Shevchenko** [01:11:12 - 01:11:17]: А если можно еще, у Саши была рука, у нас вопросы были по Facilities тоже.

**Igor Skrynkovskyy** [01:11:19 - 01:11:26]: У меня тоже еще будут. Саша давно уже ждет.

**Vova** [01:11:26 - 01:11:37]: Я готов подождать, но у нас действительно порядка 20 вопросов, которые нужно обсудить в рамках вот этого вот фильтрации в Facilities. Извини, пожалуйста, Вов. Ничего страшного.

**Dan Khasis** [01:11:38 - 01:11:48]: Мы не можем делать полноценный UI-ревью. Мы делаем на этом звонке и особенно сегодня.

**Vova** [01:11:52 - 01:12:03]: То есть макеты не показывают тебе на Approve? Ты когда UI-ревью говоришь, ты имеешь в виду Approve макетов?

**Dan Khasis** [01:12:05 - 01:12:36]: Если мы говорим насчет макетов прямо сейчас, мой как бы ответ тебе это то, что если программисты копируют опять в тупую, как ты рисуешь, у нас будет проблема, потому что ты уже нарушил неправильными лейблами текст. Если они в тупую это скопируют, мы снова начнем весь процесс этого уродства с лейблами.

**Vova** [01:12:36 - 01:12:41]: Лейблы за скобками, речь о внешнем виде, как это отображать.

**Dan Khasis** [01:12:41 - 01:12:54]: Пиши тогда Lorem Ipsum, потому что я тебе гарантирую, что они будут это копировать. Ты знаешь, сколько крови у нас ушло убрать Destinations Done? И она теперь опять здесь появилась. Потому что я не в курсе, на что поменяли.

**Vova** [01:12:54 - 01:13:10]: Так пиши Lorem Ipsum тогда. Или Metric A, Metric B, Metric C. Хорошо. Но мне бы хотелось быть в курсе все-таки новых терминологий, правильных.

**Dan Khasis** [01:13:10 - 01:14:16]: Это было месяца назад, это не новая вещь. Месяца назад мы это поменяли. На Completed мы это поменяли. Здесь не хватает 2 или 3 уровня, Вова, тоже. Здесь полностью все неправильно. Потому что нам нужна воронка. Воронка значит рядами. Рядами значит, что идет Planned, потом Started, потом Pending, потом Failed, потом Done, потом Total. И на каждом этапе считается процент. Как ты сделал хуй, когда подсчитается процент? Мы автоматически не можем принимать это как решение. Как это было реализовано в RoutesMap раньше, это правильно. Просто там было не перешло на новую выборку колонок, и там математика корявая, и почему-то выключили ее из нового RoutesMap.

**Vova** [01:14:29 - 01:14:47]: То есть мы хотим здесь еще один ряд, и мы хотим здесь древовидную, я понимаю, древовидную таблицу? Или я неправильно тебя понял? Написать здесь Destinations, потом Pending, Completed, Failed.

**Dan Khasis** [01:14:48 - 01:14:51]: Мы хотим, как это было раньше. Больше мы хотим.

**Vova** [01:14:51 - 01:14:57]: Абсолютно так и было. Мы ничего не придумали. Лейблы здесь только неправильные.

**Dan Khasis** [01:15:00 - 01:15:01]: Нет, подожди секунду.

**Vova** [01:15:06 - 01:15:20]: А у меня открыто? Сейчас я шарю. Вот как оно было. Здесь написано Total, дальше Label, Value.

**Dan Khasis** [01:15:22 - 01:15:39]: Я почти уверен, что там было 2 или 3 ряда. Если мы сейчас не можем воспроизвести это, может быть потому, что маршрут не начин, может быть там. Это только было, когда... Да, нужно Legacy открыть. Будет как по старому.

**Artur Moskalenko** [01:15:39 - 01:15:42]: Вот так вот.

**Dan Khasis** [01:15:42 - 01:15:46]: Я открыл Legacy, но я не вижу его, к сожалению.

**Alex Shulga** [01:15:48 - 01:15:57]: Это для, например, маршрутов, у которых есть деманды. Характерно, там есть 3 леткам.

**Dan Khasis** [01:15:57 - 01:16:57]: Да, вот это надо его и напомнить, как это было сделано. Сейчас сделаем скриншот. Другая проблема, Вова, я вчера рассказывал Семенову и Игорю, это посмотри на timeline. Если ты хочешь... Я конкретно выбираю свои слова очень специфически. За следующие 10 миллисекунд скажи мне, сколько миль или сколько минут маршрут на третьем ряду? Время прошло, ответа нет. Потому что надо навести мышку. А сравни первый и третий маршрут. Какой короче? Окей, наводи мышку. Третий, первый, четвертый, седьмой. И ты ни черта не поймешь. Какие-то минимум, метрик самых важных мы должны выводить там, например, время, например, количество заказов, например, прогресс.

**Vova** [01:16:57 - 01:17:01]: Какой прогресс у твоего маршрута?

**Dan Khasis** [01:17:01 - 01:17:56]: Никто не знает. То есть ты хочешь какой-то кастомизируемый колонок сюда еще выводить? Или колонок, или просто write justified. Где route from EQA? Время, или прогресс, или что-то, или шестеренка. Пусть они выбирают. Но проблема, что сейчас никакая непонятна. Ты открыл 20 маршрутов, ты хочешь два маршрута сделать вместе, ты не понимаешь, ты не знаешь, какой эффект будет. Потому что не знаешь даже время или длину ни одного из этих маршрутов. А если ты начнешь смотреть на таблицу сверху, они, во-первых, маршруты могут быть не пошаговые. То есть ты сравниваешь первые, 50-е и 110-е, ты не сможешь одновременно их видеть на одной странице. Я понял проблему.

**Vova** [01:17:57 - 01:18:13]: Не проблема, мы сюда нарисуем пару дополнительных колонок. Вопрос ребятам, как будет просто это имплементировать. Хорошо, значит здесь в этой таблице появится просто второй ряд, потом с процентами.

**Dan Khasis** [01:18:17 - 01:18:21]: Да, нет, это могут быть три ряда. Могут быть три даже.

**Artur Moskalenko** [01:18:21 - 01:18:24]: Посмотри криншот в чате.

**Dan Khasis** [01:18:28 - 01:18:46]: Вова, если речь идет о том, что если речь идет о математике, все должно быть как бы в бухгалтерский режим в столбик. Если речь идет насчет operational view, им только нужно 2 или 3 метрики. Здесь более-менее все правильно, но здесь не хватает available. Здесь должно быть plant, actual, я так понимаю.

**Vova** [01:18:46 - 01:18:51]: Да, Вова прав.

**Dan Khasis** [01:18:51 - 01:19:20]: Давайте двигаться. А не maximum? Maximum – это старая попытка показать, что перед тем, как маршрут начался, какая была максимальная загрузка или максимально достигнута емкость перед актуальной operationalization этого маршрута. Но мы будем делать plant versus actual и в процентном выражении.

**Vova** [01:19:20 - 01:19:31]: У нас будет еще available, если в той машине было столько… Здесь многие метрики не имеют availability к ним неприменимо.

**Dan Khasis** [01:19:31 - 01:19:43]: Окей, это отдельный разговор.

**Oleksandr Ishchenko** [01:19:47 - 01:20:10]: Давайте дальше. Вова, по facility based visibility filter, ты свои 2 вопроса циклил по дизайну, то, что хотел. Сolution, header level, мы можем двигаться с facility дальше. Можно я еще один вопрос задам? Да.

**Igor Skrynkovskyy** [01:20:10 - 01:20:36]: Дэн, смотри, вопрос того, вот Володя показывал дизайн с выпадающим списком facility. Должны ли мы как-то по-другому отображать список facility для людей? Например, есть человек, который у него засанено на 2 facility. Он должен видеть только своих 2 или видеть все facility? Которые он засанен.

**Dan Khasis** [01:20:36 - 01:20:52]: Если он супер администратор, он видит все. Если он обыкновенный route planner и он пролинкован к одному facility, он видит 1 facility. Если он route planner и у него 5 facilities, он видит 5 facilities.

**Igor Skrynkovskyy** [01:20:53 - 01:21:04]: Хорошо. Для primary аккаунта и админ роли мы должны показывать все facility на данный момент или нет? Для администратора? Я не понимаю вопрос. Для кого?

**Dan Khasis** [01:21:04 - 01:21:07]: Администратор плюс есть у нас роль primary аккаунт.

**Igor Skrynkovskyy** [01:21:07 - 01:21:18]: Это главный route аккаунт. И у нас есть администратор. Роль администратора. Я думаю, что пока все администраторы видят все facilities.

**Dan Khasis** [01:21:18 - 01:21:23]: Ок. Значит все мы правильно сделали.

**Vova** [01:21:26 - 01:21:37]: Все. Если на человеке засанена только 1 facility, то это не drop down. То есть он не может switch на другой facility. У него просто будет написано facility такая-то и он не будет ничего с этим делать.

**Igor Skrynkovskyy** [01:21:37 - 01:21:53]: Мы не можем так сделать. Почему?

**Dan Khasis** [01:21:53 - 01:22:35]: Потому что он должен иметь возможность выбрать или текущий scope видимости, то что дерево у нас сейчас, или выбрать facility. Вова имеет ввиду, что UI-контроллер не должен выглядеть, создавать неправильную иллюзию, что его можно как-то модифицировать, если его нельзя модифицировать, потому что размер его набора элементов всегда будет 0 или 1. И какой смысл показывать ему контроллер, который динамический. И в том смысле это просто обыкновенный div отпутать, который стилистически выглядит так же, но без стрелки и без возможности с ним как-то иметь interaction. Вот что Вова имеет ввиду.

**Igor Skrynkovskyy** [01:22:44 - 01:23:18]: Да, но тут вопрос, ему же нужно будет как-то скинуть, потому что вот этот контроллер он меняет поведение, меняет фильтр отображения данных. То есть у него два состояния будет. Или покажи мне то facility одно единственное, которое есть, или покажи мне все так, как я видел до этого. Если мы будем просто показывать здесь типа facility там LA North 1, то он будет только это видеть.

**Vova** [01:23:19 - 01:23:31]: Так это мы и хотим, чтобы ограничить его область видимости этой facility. Если мы назначаем ему область видимости на одну facility, то ничего за ее пределами видеть больше не должен. И не должен иметь возможности выйти.

**Dan Khasis** [01:23:32 - 01:24:24]: Он даже не должен существовать, например, в scope у нас есть репорт, где мы смотрим за рабочих scope их бизнеса, и у нас есть репорт, где они смотрят за рабочих другого бизнеса. И мы не хотим, чтобы они знали, что даже существует в помине репорт, который позволяет нам шпионить на них, сколько они email посылают, кому, как часто, сколько митинги они ходят, сколько зумов они ходят, длина зума, сколько они сессии имеют в приложениях разных. То есть мы знаем, как администраторы, но они не знают, потому что у них нету прав. Так в этом случае здесь просто обыкновенный statement, что если facility count у сессии у этого чувака меньше, чем единица, мы только отпутаем facility, на который он имеет право смотреть. Вот и все.

**Igor Skrynkovskyy** [01:24:29 - 01:24:47]: Окей, я понял. То есть мы, если у чувака есть одна facility, то мы показываем, даем доступ только к одной facility, и сразу ему как бы фильтр навязываем сразу, без возможности переключения. Дэн, подтверди, пожалуйста.

**Dan Khasis** [01:24:47 - 01:25:05]: Это даже не навязка фильтра, вы обязаны динамически пересекать в рамках сессии и реквестов на все ресурсы, вы обязаны накладывать фильтр, если он существует, насчет facility. Нет, смотри, это понятно.

**Igor Skrynkovskyy** [01:25:05 - 01:25:22]: Вопрос в том, что мы меняем текущие, для тех, у кого есть facility, мы меняем текущее поведение, используя деревовидную систему скоупа видимости, на вот эту систему, что мы сразу включаем facility. Володь, вернись, пожалуйста, назад.

**Vova** [01:25:25 - 01:25:27]: Хорошо, секунду.

**Igor Skrynkovskyy** [01:25:27 - 01:25:53]: Правильно, Дэн? То есть мы сразу показываем facility 1, 2, 3, и сразу фильтр применяется на все те объекты или там на ту страницу, которую он смотрит.

**Dan Khasis** [01:25:53 - 01:27:34]: Это верно, но чтобы немножко технологически что-то описать, что вот это не равно enclose. Если говорить на уровне базы данной, если здесь было 500 facilities, здесь должен быть свой собственный статус, который называется all, или какой-то имеет свой уникальный идентификатор. Мы ни в коем случае не хотим делать end, facility, in, и вот этот массив сюда закрывать, потому что если это all, отсутствие фильтра end является полностью открытой видимость на пересечении юзер таблицы плюс facilities без лишних джойнов, потому что у нас много раз на скоупе получалось, где в списке есть тысяча элементов, и какие-то придурки выбирают нарочно 999 элементов, и эти одишки переходят с front-end на back-end, если там нет passing errors каким-то волшебным образом, и если есть и доходит это, тогда query engine начинает еле справляться с enclose, который имеет 999 uuids, и все взрывается к чертовой матери, так мы сделали, что максимальное количество индивидуально выбранных элементов, не более 100 или 500, и после этого ты обязан выбирать all, а all идет прямой join без enclose, потому что это взорвет систему, ты понимаешь? Я понимаю, но all это в случае, если у чувака есть доступ к всем facilities. Нет, нет, больше чем одной.

**Vova** [01:27:36 - 01:27:42]: Нет. All это включить доступ, показать мне данные всех, которым я имею...

**Igor Skrynkovskyy** [01:27:42 - 01:27:54]: А, я понял, я понял, что ты имеешь в виду, окей, окей.

**Dan Khasis** [01:27:54 - 01:29:09]: Потому что у тебя есть первая таблица members, вторая таблица facilities, третья таблица members plus facilities, там member плюс entity type, плюс entity id, в этом случае facilities, и all это просто inner join member и facilities, и это all без никаких and, in фильтров. А если они начинают выбирать индивидуально галочки, тогда мы имеем право вставлять эти параметры сюда. Отсутствие галочек является inner join на facilities. Но супер аккуратно надо сделать, потому что если в аккаунте 0 facilities, а вы включите вот это, тогда у всех взорвется вся система. То есть это только может быть, когда в аккаунте есть более одного facility заактивировано, и может быть даже нам надо настройку сделать в advanced setting, что там позволять или не позволять видимость за границей собственного пролинкованного facility на уровне рута, потому что мы не сделаем один правильный шаг, и все взорвется к чертовой матери. Вся система.

**Vova** [01:29:12 - 01:30:06]: Я еще хотел спросить, когда человек покупает себе addon facilities и включает его, мы же хотим сделать какой-то wizard, наверное, который позволит ему взять и теперь эти facilities внедрить, то есть протегать все сущности, которые есть в системе каким-то образом, или они будут автоматически на какой-то дефолтный facility записываться. Как это будет работать? Сразу после включения модуля facilities. Что произойдет с сущностями? Как они будут затеганы? Или никак они не будут затеганы? Мы хотим, чтобы после включения все было протегано. Желательно, чтобы мы форсили, чтобы все было протегано. Я правильно понимаю? Но как мы к этому придем? От состояния ничего не протегано к состоянию все протегано.

**Igor Skrynkovskyy** [01:30:09 - 01:30:11]: Так они будут сами руками тегать.

**Vova** [01:30:12 - 01:30:24]: Да, но у них будет процесс тогда, если мы дадим им свободу иметь не протеганные вещи, то тогда возникает куча вопросов, а как быть с непротеганными вещами? Кто их видит?

**Serhii Kasainov** [01:30:26 - 01:30:37]: У меня тот же вопрос с одним facility. Он принудительно выбран, а что делать с раутами, которые еще не ассайнуты на facility? Когда их показывать?

**Vova** [01:30:37 - 01:30:52]: Мне казалось, что самым идеальным решением было бы не разрешать этого переходного состояния, когда у тебя частично протегано, частично не протегано. То есть если ты включил facility, значит у тебя автоматически все должно протегаться.

**Igor Skrynkovskyy** [01:30:53 - 01:31:12]: Я потому и говорил насчет вот этого, что меняем ли мы логику, потому что если мы ее не меняем и мы вставляем типа покажи мне facility или выключи facility, но оставь мне тот набор тегов, которые я сейчас видел. Или там те правила.

**Dan Khasis** [01:31:28 - 01:35:42]: Опять возвращаясь к ситуации, что есть ситуация, мы говорили раньше насчет accountability и visibility. Я покажу вам на скопе через секунду. Accountability это кто ответственный? Visibility это кто имеет право видеть? Экземпляр. Florida ответственный за все операции Tampa, Miami, Tallahassee и Jacksonville. Все бухгалтерские вещи, все отчеты, все убытки, все доходы ответственны Mr. или Mrs. CFO Florida Executive Vice President, например. Потом в Нью-Йорке есть, потом в Калифорнии есть. Если вы думаете, что эти люди смотрят на какой-то заказ чьей-то бабушки каких-то цветов, это не происходит. Там есть ярхия, правильно? Там есть route manager, там есть dispatcher, под dispatcher есть водитель, потом идет destination, потом идет заказ, потом идет order line item, потом идет на заказе бабушка. И сумма всех этих вещей снизу наверх, в какой-то момент этот человек ответственный за performance его отделов, его складов, сколько денег они платят, как они наторговались на аренду, вовремя ли его водители и их менеджеры приходят на работу, правильно? Там же больше, чем только маршруты происходят в этом бизнесе. А здесь visibility это уже рядовые люди. Имеет ли этот человек право смотреть на это? Да, он имеет. Будет ли он смотреть? Нет, он не будет. Потому что это не его задача, это не его работа. Он бизнес аналист или он executive vice-president, не смотрит на это. Он смотрит на SLA, он смотрит на percentages и так далее. Visibility это имеет ли этот человек право смотреть на эти транзакции? Возможно, кстати, даже в рамках HIPAA аккаунта, что бухгалтеры не имеют права смотреть на медицинские данные. Например, в случае выборки facilities, если ты линкуешь в какую-то сущность, в какой-то другой сущности, мы тебе даем право. Это почти как еще один пивот в архе нашего team management, что это почти как сказать, что team management теперь не выглядит как юзер под юзером под юзером, а team management выглядит как facility и другой facility, и один юзер может быть двумя facility одновременно, и в одном facility могут быть разные юзеры, но одновременно этот юзер может быть родительский юзер других юзеров, потому что это менеджер, это route planner, это водитель, но иногда этот водитель помогает работать в другом складу по субботам, заработать лишних денег, потому что у них не хватает водителей. У него есть видимость в обоих facility, потому что или они руками включают субботу видимость на этот facility, и он берет и получает маршрут, а маршрут может быть пролинкован к одному facility в одно время, и юзер линкуется к маршруту, но если этот маршрут внутри facility, а тот юзер не имеет доступа на тот facility, он не в режиме глобальной включенности застройки, там restrict access, restrict user access by facility, по умолчанию вначале она, например, false, они включают галочку, теперь он только видит маршруты, даже если он на него засанен, он его не видит, потому что у него нету пролинковки на тот facility.

**Vova** [01:35:48 - 01:36:20]: Мы получим такую ситуацию, когда кто-то на аккаунте включил facilities, ни одна сущность не пролинкована к facilities, и получится, что все одновременно потеряют визибилити всех сущностей в системе, но этого допустить явно нельзя, поэтому в процессе включения facilities, как будто бы нужно все как куда-то протегать, чтобы люди не потеряли визибилити.

**Dan Khasis** [01:36:33 - 01:45:03]: Да, я покажу вам что-то. Workspace, мы идем на accountability, что мы видим автоматически, что у нас отсутствует. Во-первых, сколько людей или сколько сущностей имеют линковку или не имеют линковку. Я много раз говорил, повторю опять, без этих дэшбордс большим бизнесом полностью наплевать насчет, что мы делаем. У тебя есть столько-то водителей без facilities, у тебя есть столько-то route-менеджеров без линковки на бизнес-юнит, у тебя столько есть машин, которые не пролинкованы на бизнес-юнит. И потом ты на любой из этих цифр кликаешь и ты видишь, что у меня есть столько-то географии, которые не пролинкованы к юзерам. Почему у меня юзер не пролинкован к географии? Я должен знать, сколько у меня водителей во Флориде, и я не знаю. И когда меня спросят бизнес-хозяева, я ни черта им не отвечу, я не знаю, сколько водителей во Флориде. Теперь я вижу всех водителей в этой географии, которые ... Сколько географий без водителей или наизнанку, мы и то, и то поддерживаем. Можешь делать активные сущности, все сущности с Accountable или без. И теперь ты можешь кликнуть и провалиться. Покажи мне всех юзеров без родительского юзера, например. У этого человека 47 ролей, и у него нет родительского юзера. Это проблема. Давай я починю эту проблему. Вот я ее могу починить здесь. Ок. Я кликаю на человека. Теперь есть метрики насчет юзера. Этот юзер пролинкован к 5 фасилитетов, 7 географий, 7 бизнес-юнитов, 5 line of business, столько-то скиллов, столько-то driver profiles, и все идет по датам. То есть чувак имел driver profile или driver скиллы в прошлом году такие-то, но теперь у него он получил больше квалификаций. Так теперь у него старые квалификации закрылись, открылись новые. И начинается по времени, что окей, у этого в этой географии я выбираю. Теперь дерево. У нас по-прежнему нет дерева, к сожалению. Теперь с такого-то дня до какой-то день и потом кто ответственный и за что он ответственный. За performance, за топливо, за покупку инструментов, возобновление инвентарии в машинах и так далее, выбирается. И теперь существует линковка. Теперь все репорты по пересекаются с таймштемпами этих сущностей. И говорят, что да, сегодня этот человек в facility 1, но когда performance у facility 2 было говно, это было из-за этого человека. Но мы сейчас делаем линковку неправильно. Мы говорим, что человек пролинкован к этому facility. Если он между facilities прыгает постоянно, по разным причинам, ты никогда не будешь знать, что было в том facility на тот момент, если у тебя нет эффективной даты начала и конца связи. Это показывает текущую иерархию. Но все записывается на уровне по таймштемпу. Аккаунтабилити, это мы говорим насчет ответственности. Кто ответственный и за что. И на какой момент этот человек был ответственный за это. И можно выбрать очень низкий уровень или можно более высокий уровень. И теперь ты выбираешь, что этот человек был ответственный. Когда ты смотришь на репорты, ты можешь увидеть, что если ты делаешь группировку по facility и accountable person, что за один год ты группирован по месяцу, ты можешь видеть пять разных имен, потому что в январе был один человек, во феврале другой, в марте третий и так далее. Почему? Потому что все идет по таймлайну. Без таймлайнов это все детский сад. Почему? Потому что они наняли нового директора. Этот человек шикарный. Они не могут доказать, что performance улучшился с этим человеком. Почему? Потому что все исторические транзакции теперь привязаны к нему. у нас есть bulk режим тоже. То есть ты можешь прибавить отдел, например, operations, fleet management, driver safety. У нас ничего этого нет. И здесь ты можешь множество одновременно наращивать. И это очень важно, потому что все репорты. Теперь, когда люди будут заходить в систему, когда они уже зайдут в систему, у них динамически поменяется по умолчанию. Они имеют право, может быть, видеть много, но по умолчанию у них выбираются только те, на которых у них есть accountability. То есть, если я ответственный за 500 докторов, я по умолчанию выбираю 500, которые на меня пролинкованы. Но, в принципе, как суперадминистратор я имею право видеть все. Так теперь я выбираю все, она мне покажет все моментально. Как она это сделает? Она это сделает, потому что у меня есть право видеть все, но я пролинкован к более узкому субсету всего. Что это значит? Это значит, что по дереву юзеров подо мной 500 юзеров. Я имею право видеть все их данные, но я только пролинкован к двумя facilities. В режиме строго facility линковки я только вижу пересечение юзеров и facilities, которые на меня пролинкованы. Потому что эти юзеры тоже пролинкованы к facilities. А в расслабленном режиме, с которым мы запускаемся оригинально, по умолчанию галочка выбирает два facilities, но я имею право видеть все facilities, потому что я как бы в shared организации. Это почти то же самое, как slack каналы. Похитрее, но почти то же самое. И опять видите, что по умолчанию никто не показывает транзакции, как мы показываем маршруты. Показываются агрегаты. Сегодняшние маршруты, вчерашние, завтрашние и их статус. Сколько было сделано, сколько было сделано, сколько было не сделано. По разному типу. Started, in progress, completed, orders, notes и так далее. И потом только ты уже углубляешься и видишь список этих маршрутов или заказов и так далее.

**Vova** [01:45:12 - 01:45:22]: Это все прекрасно. Мне интересно, мы этим путем идем или нет? Игорь, у нас так это все имплементировано?

**Igor Skrynkovskyy** [01:45:23 - 01:45:46]: На данный момент нет. Но у нас есть возможность вот этот расслабленный мод делать и второй. У нас сейчас типа два мода. Мы видим то, что на facility назначено и второй мод это то, что мы видим то, как было до этого для того, чтобы можно было делать assignment.

**Vova** [01:45:47 - 01:45:52]: Assignment у нас имеет дату эффективно?

**Igor Skrynkovskyy** [01:45:53 - 01:45:55]: Нет, конечно нет.

**Dan Khasis** [01:46:01 - 01:47:25]: А должны? Это это это стандартная практика SCD называется slow data warehousing slowly changing dimensions. И у нас сейчас сделана реализация неправильно. Это хороший график, который это объясняет, что fixed dimension override, add new row, add new attribute and history. Мы сделали номер 2. Может быть, что-то между 0.2 и 0.3. Но ты фиг поймешь, кто был ответственный за самый худший месяц в истории фирмы. Ты никогда это не поймешь. Особенно если администраторы бесконечно будут менять людей. override, override, override, override. Окей, у нас есть 15 минут.

**Igor Skrynkovskyy** [01:47:25 - 01:47:27]: Я записал.

**Dan Khasis** [01:47:27 - 01:47:28]: Скорее говорите.

**Vova** [01:47:30 - 01:47:58]: Если можно, Жень, ты покажешь маплееры. Можно я покажу вещь, которую нужно в девелопмент отдать, чтобы Дэн быстро сказал свое да. Это макет для драйвера, который выгружает машину. Он приехал на дестонейшн и он выгружает мороженое. Макс уже отнес эти макеты, показал мини-мелдсу и им понравилось. Теперь осталась отмашка от Дэна.

**Dan Khasis** [01:48:00 - 01:48:03]: Почему он показывает им, чтобы они запробовали?

**Vova** [01:48:06 - 01:48:14]: Хороший вопрос. Мне не было возможности показать, а им нужно было срочно что-то показывать. Я предложил им дать наши готовые макеты.

**Dan Khasis** [01:48:20 - 01:48:26]: Я не знаю. Здесь, во-первых, по-прежнему сверху неправильный дизайн.

**Vova** [01:48:26 - 01:48:30]: Вот это неправильно.

**Dan Khasis** [01:48:30 - 01:48:36]: Ты хотел тень добавить сюда. Да, но я столько раз уже сказал, что это просто...

**Vova** [01:48:39 - 01:48:45]: Тень добавим. Хорошо. Это я услышал, это мы еще не успели сделать. Просто по всем макетам разнести.

**Dan Khasis** [01:48:45 - 01:48:51]: Здесь нет заказа. Где здесь информация насчет заказа?

**Vova** [01:48:51 - 01:49:00]: Да, у них нет заказа как такового. У них есть кастомер, к которому они приехали и они приезжают туда без заказа. Это не совсем правда.

**Dan Khasis** [01:49:00 - 01:49:03]: Иногда они имеют заказ, иногда они его обрабатывают.

**Vova** [01:49:03 - 01:50:10]: Здесь, может быть, тогда просто будет прописано какой-то ордер. И у них... Насколько я понял, их use case, они приезжают, у них нет конкретной цели, что привезти. Они узнают, что нужно выгрузить, на месте уже приехав. И их задача в том, чтобы начать выгрузку. После этого запускается сканер. Когда ты сканируешь банки, коробки с мороженым, и у тебя автоматически счетчик находит это в inventory, находит цену и считает, сколько ты выгрузил. И считает total. И ты ходишь, сканируешь эти коробки одну за другой, и у тебя набивается список вещей, которые ты выгрузил. Потом ты нажимаешь done, заканчиваешь сканирование. Ты можешь еще по входу, по мере сканирования, если тебе, например, нужно выгрузить много однотипных, ты нажимаешь плюс-плюс-плюс, или нажимаешь на цифру и вводишь просто с клавиатуры количество. И таким образом у тебя автоматически ты можешь ввести лог того, что ты выгрузил.

**Dan Khasis** [01:50:12 - 01:50:16]: Здесь мы должны отдельно обсудить.

**Vova** [01:50:16 - 01:50:21]: Здесь есть проблема.

**Dan Khasis** [01:50:21 - 01:50:50]: Когда мы можем это сделать? Я не знаю, Вовик. Мы отдельно обсудим это. У нас проблема не с мобильным приложением. Кстати, а что backend поддерживает ноль из всего, что ты предлагаешь? Просто ноль.

**Igor Skrynkovskyy** [01:50:50 - 01:50:54]: Это неправда.

**Dan Khasis** [01:50:54 - 01:50:59]: Конкретно то, что Володя сделали, мы 2-3 недели назад сделали под это API.

**Igor Skrynkovskyy** [01:50:59 - 01:51:37]: Вы даете прайсинг уже? Вы даете прайсинг? Нет, но мы на уровне destination даем возможность. Как он будет читать деньги без прайсинга? Дэн, когда мы получим запрубленную таблицу, которой мы будем скачивать данные, мы просто свяжем все нити. Сейчас, на данный момент, у нас разные части готовы, но они не связаны. Вот эта часть, которая здесь есть, она уже имеет связь с destination, с order, с этим item, который, в свою очередь, имеет связь с внутренней ценой. Они все не синхронизируются, но это все есть возможность добавлять.

**Dan Khasis** [01:51:37 - 01:51:51]: Я могу это детально рассказать отдельно, чтобы не тянуть всех. Так давай отдельно вернемся к этому.

**Vova** [01:51:54 - 01:51:58]: Чтобы закончить показывать, дальше водитель берет автограф.

**Dan Khasis** [01:51:59 - 01:53:27]: Я просто пытаюсь сказать, что это неправильный подход. Если кратко описать, почему это неправильный подход, потому что мы возвращаемся почти к той же проблеме, которая была на левом меню route snapshot, что ты пытаешься сделать почти как игру для бухгалтерского workflow. Когда у тебя есть 50 вещей, и они в этом корявом списке, и она не выглядит как будто она в столбик прибавляется, это начинается супер неудобно или неприятно. Здесь это не выглядит как финансовый workflow, хотя это финансовый workflow. Потом я бы не делал супер сложный один workflow в том же визуальном как здесь. Я бы сделал первый шаг, ты сделал это, ты закончил, ты идешь на второй шаг, ты идешь на третий шаг. Как этот чувак будет знать, у него в списке будет теперь 77 объектов, и он будет иметь скроллить хуй знает сколько, и потом в конце он увидит в самом-самом низу после скроллить бесконечно вот это. Нет, это неправильно. Это взрывается после пяти строк. Нет, здесь можно сделать какой-то дополнительный.

**Vova** [01:53:28 - 01:53:34]: Я понял. Если здесь очень много вещей, можно это все схлопнуть в отдельный уровень.

**Dan Khasis** [01:53:35 - 01:53:55]: Я бы сделал как виза сверху. Первый шаг, ты физические объекты обрабатываешь. Второй шаг, ты начинаешь какие-то тески делать бизнесовые. Третий шаг, ты закончил, и вот это превью. Ты готов? Да, я готов. Поехали. Ты готов? Я закончил. Да, окей, принт.

**Vova** [01:54:05 - 01:54:38]: Я услышал. Я услышал. Но визард-версия сюда натягивается отлично. Это не будет несложно сделать. Почему мы сделали так? Потому что я знаю, что в некоторых use-кейсах мы не знаем заранее секвенс, в котором нужно действие делать, и кто-то может сперва взять оплату, потом ее выгружать. А в другой ситуации сперва выгружаешь, потом оплату берешь.

**Dan Khasis** [01:54:40 - 01:54:42]: Я не знаю ответ на этот вопрос.

**Vova** [01:54:42 - 01:54:45]: Возможно, нам нужно будет сделать конфигурацию этого визарда.

**Dan Khasis** [01:54:46 - 01:55:02]: У этих людей, как их звать, у них все есть договоры, контракты. То есть оплату они не берут никакую. Они... Я уже понял.

**Vova** [01:55:02 - 01:55:10]: Сорри, что перебил. У нас есть 7 минут, мы не покрыли 95% вещей.

**Dan Khasis** [01:55:10 - 01:55:26]: Наверное, нам будет завтра опять соединиться. Саша молчит, как рыба. Уже полтора часа. Саша, говори.

**Oleksandr Ishchenko** [01:55:26 - 01:55:36]: Четыре раза пробовал вернуть к адженде, но у вас время закончилось. Я говорю, Алик Шулга Извините. Тут Саша много.

**Alex Shulga** [01:55:36 - 01:55:57]: У нас действительно большая адженда. Я думаю, что Игорь и Сергей Костянов смогут проконсультировать меня по многим аспектам фильтрации facilities, которые нам нужны. Поэтому давайте продолжим с аджендой, а если вы позволите, мы останемся и дообсудим 20 вопросов, которые остались. Все равно за 7 минут не успеем. Извиняюсь.

**Oleksandr Ishchenko** [01:56:00 - 01:56:20]: Да, если за 7 минут не успеем, тогда возможно завтра в то же время, плюс-минус, окей? Просто наперед договориться. Хорошо. Тогда по адженде, если пробуем 7 минут разбить, у нас еще мобилочки есть, но перед этим хотелось быстренько показать, Жень, покажешь мап лейра на Abiclache и там будет один вопросик. Я его задам в конце.

**Eugene** [01:56:21 - 01:56:54]: Хорошо, то есть мы занимаемся сейчас унификацией карты как уже бизнес-компонент, а не просто как компонент, который отрисовывает слы и какие-то маркеры, а еще добавляем сюда бизнес-логику, так чтобы это можно было уже высокоуровнево переиспользовать в других местах, где у нас есть эта карта и соответственно мы тоже позволяем, будем позволять и уже частично позволяем это быстро и легко конфигурировать. Вот, то есть это вихи-кла страница здесь, это сейчас экспериментально первая версия вот такого компонента используется. И да, Саш, вот эти лейра, которые здесь есть.

**Oleksandr Ishchenko** [01:56:55 - 01:57:06]: UserCustomerLocation, мы говорили, да. Да, UserCustomerLocation. Не, в один зон, то все, что есть сейчас на проде мы не смотрим, наверняка все-таки новое посмотрим и к вопросу давай подойдем аккуратно.

**Eugene** [01:57:07 - 01:57:17]: Так, у нас есть юзера и сейчас у нас проблема заключается в том, что юзера отрисовываются тем же маркером, что и vehicles. Сегодня Вова показал нам, как это нужно правильно сделать, мы это сделаем.

**Oleksandr Ishchenko** [01:57:17 - 01:57:22]: Разделение по цвету на две разные иконки, да.

**Eugene** [01:57:22 - 01:57:32]: Мы сделаем разделение по цвету на две разные иконки, мы сделаем разделение по цвету для активных и неактивных юзеров и vehicles. И вопрос наш был по поводу отсечения last update даты.

**Oleksandr Ishchenko** [01:57:34 - 01:58:03]: Давайте тогда я тут вопрос задам. Дэн, мы помним твои запросы по поводу, ну тебе не нравилось, когда мы пишем 585 дней last update. И Вова нам решение тогда дал, все-таки у нас будут иконки активные, вот эти пульсирующие, меняться на неактивные. Единственное, что я в наших чатах упоминания о чем не нашел, это этот age threshold last update, то есть когда менять иконку на неактивную, 5 дней, 8 дней, 30 дней, вот не нашел я эту информацию, подскажи, пожалуйста.

**Vova** [01:58:04 - 01:58:13]: Я предложил 30 минут, если машина не двигалась 30 минут, то мы считаем, что ее позиция, что она уже стоит.

**Oleksandr Ishchenko** [01:58:14 - 01:58:27]: Дэн, ты тем временем покажи ту иконку, чтобы визуально было сразу видно и понятно, о чем речь. Вот.

**Dan Khasis** [01:58:27 - 01:59:14]: Вот на эту пульсирующую, на эту серенькую непульсирующую когда менять? Какой возраст данных должен быть, чтобы мы считали, что это устарело? Мы опять в замкнутом круге, мы не решаем эти вещи, мы решаем дефолтное разумное значение, потом юзеры должны это решать или в advanced конфиге, или в аккаунт настройках. Посмотрите на любую платформу, они должны решать, но здесь есть еще одна вещь, вы слишком свободно пользуете слова неактивно, и это очень опасно, потому что неактивный юзер, это юзер, который не билуется в бухгалтерской системе, в аккаунтинге, в Redash. Что? Мы про vehicles сейчас, про юзеров. А мы также с vehicles, у нас биллинг идет и по юзерам, и по vehicles.

**Vova** [01:59:17 - 01:59:29]: Саша говорит под неактивным, Саша, я имею ввиду vehicles, location которого последний раз мы получали сколько-то времени назад?

**Oleksandr Ishchenko** [01:59:29 - 01:59:31]: 800 дней назад.

**Dan Khasis** [01:59:33 - 02:00:20]: 800 дней назад, почему? Я бы, во-первых, некоторые данные хорошо пользуются визуально, некоторые данные хорошо пользуются в режиме таблиц. Если у меня есть тысячи водителей, и из них 900 неактивные, я в помине не хочу их видеть на карте, если их не было 5 лет. Иногда люди не стирают vehicles, потому что они боятся состирать какой-то tracking history или что-то такое, или потому что telematics не десинхронизировала этих машин. То есть по умолчанию мы обязаны показывать активные машины из vehicles, которые marked as active. У нас есть архивация vehicles, можно его не удалять, а можно его заархивировать, и тогда он убирается с карты.

**Vova** [02:00:20 - 02:00:36]: Вот почему я говорю, что если посмотреть на их экран, проблема с их экраном это то, что, во-первых, как всегда, нет запятых в цифрах больше тысячи. Вы были в разговоре с Вова, мы согласовали эти правила, все равно мы их нарушаем в settings.

**Dan Khasis** [02:00:36 - 02:01:24]: Открой map шестеренку, кликни на users, например. Вот здесь должна идти фильтрация по статусам, как следующий этап дерева. И тоже самое с vehicles. А кстати, а где vehicles на карте vehicles? Почему здесь users? Где vehicles?

**Oleksandr Ishchenko** [02:01:24 - 02:01:45]: Из-за того, что это vehicles страница, vehicles по дефолту показываются. Если мы users отключим, то только vehicles будут. Да, но это непонятно, это супер кряво. То есть добавить, чтобы это было selectable, unselectable, и где vehicles на странице.

**Dan Khasis** [02:01:45 - 02:01:51]: Правильно я понял? А как ты выберешь пять vehicles? Покажи мне только пять vehicles, как ты это сделаешь?

**Oleksandr Ishchenko** [02:01:51 - 02:01:55]: На карте. Упущение, Дэн.

**Vova** [02:01:56 - 02:02:03]: Через галочки это должно быть. То есть, если ты здесь выбираешь пять vehicles, у тебя будет пять vehicles введены на карте.

**Oleksandr Ishchenko** [02:02:03 - 02:02:07]: Дэн ведет к тому, что там должно быть под map gear.

**Vova** [02:02:07 - 02:02:15]: Вот здесь есть фильтр vehicles. Ты можешь поискать конкретно vehicles, сделать фильтр, ты увидишь только то, что отфильтровалось.

**Dan Khasis** [02:02:17 - 02:02:31]: Другими словами скажу, что Вова прав, и не прав. Вова прав технически, но здесь получается супер запутанно. Если на то пошло, не делайте...

**Vova** [02:02:34 - 02:02:47]: Я бы написал здесь additional map layers. Это дополнительный, то есть основная сущность, на которую ты смотришь здесь, это vehicles. А это дополнительные сущности, которые ты можешь также, кроме vehicles, на этой карте увидеть.

**Dan Khasis** [02:02:52 - 02:06:34]: Смотрите, что я хочу просто сказать. Vehicle, asset, который мы прибавим, facility, user, trailer, генератор, который это tip asset. Они все имеют одну вещь. Две вещи, правильно? Может, три вещи. Таймштемп, скорость и позиция. И в одном месте, в одной карте, в одной системе, я не знаю, как это назвать, но скажем, что это какая-то новая страница, new page, имеется список, если пользовать термины база данных, которые делает union all по всем этим типам сущностям, где у тебя SAP приходит в одном идентифицированном API-респонсе. Tip, позиция, скорость, таймштемп, tip, vehicle, user, territory, asset, trailer и так далее. Плюс фильтры по этим же вещам. И теперь на этой карте у тебя есть все типы из этих вещей. И, кстати, территория тоже такой тип. Просто tip, position, территория, полигон, а не cut long. И теперь у вас есть в одном инструменте возможность любые типы сущностей любым способом. Покажи мне все машины или все юзеры, которые двигаются быстрее, чем 100 миль в час, которые не двигались больше, чем за 30 минут, меньше, чем 30 минут не двигались в одном экране. А если речь идет насчет vehicles, да, здесь все правильно, но здесь неправильно, что критических полей по умолчанию не видно. Например, last location, это нам нужен адрес, last time stamp. И когда речь идет насчет vehicles в режиме обсмотра vehicles, наша проблема другая. Наша проблема еще, что как вам сказать? Одну секунду. Я должен отключаться через минуту. Если вам надо еще говорить, я могу говорить, но отключаться я должен от компьютера. Что когда ты смотришь на vehicles, это как ты играешь в какую-то как StarCraft. Ты должен моментально понять, где они, какого они типа, где они находятся, их статус, их здоровье, топливо или аккумулятор и так далее. Если мы посмотрим здесь, ты ни один из этих вопросов не ответишь. Ты только ответишь может быть вопрос, если ты платишь за эту машину или нет. Потому что статус, это описывает статус оплаты, а не статус движения или где они находятся, или где они не должны находиться, или здоровье машины. И теперь, если мы в кучу будем перемешивать биллинг статус и актуальный operational статус, у нас будет три статуса на одном экране, это опять люди чокнутся. Так же, как они чокнулись недавно с дистанцией, с таймом и так далее.

**Oleksandr Ishchenko** [02:06:39 - 02:07:48]: Я тогда предлагаю, ну, раз тебе нужно бежать, то мы завтра просто продолжим с этой ажендой. Мы закончили на Виклс, мы еще тут продолжим один момент подэмить завтра. И дальше по гене будет Гаспар. В сегодняшней суммаре, перед тем, как тебя отпустить 30 секунд, значит, тут, как минимум, две вот эти колонки добавят, которые это я писал. Last location, last timestamp. И в суммаре по, господи, как его, по last updated мы услышали дефолтное какое-то значение и должно быть user configurable. Тут наверняка, Вова, ты нам подскажешь, как это, да, нарисовать и потом отпустить на имплементацию. А ответ ты на этот вопрос дал. То есть не будет с решилда какого-то, а будет user configurable штука. Все остальное по мере того, как будет идти, будем показывать. Предлагаю туда завтра продолжить. И, ну, если ты не будешь у компа, презентация Гаспара наверняка не будет иметь смысла. Там нужно вот визуально сидеть и смотреть будет. Вот. У меня тогда все. Большое спасибо.

**Dan Khasis** [02:07:54 - 02:09:09]: Я смотрю на все через линзы юзкейса или paintpoint юзера. Если юзера, его задача на списке vehicles моментально увидеть людей, которые прямо сейчас работают, или моментально увидеть ресурсы, которые прямо сейчас можно использовать для какой-то задачи. Как мы решаем эти два вопроса, показывая чуваку список 5000 машин? Нам нужно переходить на semantic filtering. Как мы сделали, например, в списке routes или в списке dispatch, mode или order. Semantic filtering это, например, покажи мне все машины, которые сейчас не активны. Покажи мне все машины, которые сейчас не на маршруте. Покажи мне все машины, которые сейчас на маршруте. Покажи мне все машины, которые на маршруте, которые уже на 95% закончены. Почему? Потому что я теперь знаю, что они почти закончились с маршрутом. Я могу что-то с ними сделать. То есть shortcut'ы на фильтры, которые имеют бизнес-мысл.

**Vova** [02:09:15 - 02:09:16]: Звучит как V-model.

**Dan Khasis** [02:09:21 - 02:09:37]: Да, это V-model. Окей, тогда я Игорю и Семену отдельно перезвоню насчет метрик сервиса через несколько минут.

**Oleksandr Ishchenko** [02:09:40 - 02:10:15]: Хорошо, я тем временем тогда создаю встречу на завтра. Спасибо. Так, Гаспар, first of all, what we just agreed that your agenda item will go for tomorrow's call, same time. So we'll just at the very beginning of the meeting we'll finish with the speech. And then all the time is yours. Right after we'll just review your agenda items that are left under the design section. So that's about it.

**gaspar.eross** [02:10:15 - 02:10:19]: Okay, that's fine for me.

**Oleksandr Ishchenko** [02:10:21 - 02:10:41]: Okay. Any other questions? У нас есть что-нибудь еще тут обсудить? Я предлагаю, как обычно, когда мы что-то не успеваем задемить, то мы демим для самих себя, но раз мы уже договорились про завтра колл, предлагаю не тратить время на двойное демо, а завтра таки продолжить. Как вы на это смотрите?

**Kateryna Shevchenko** [02:10:42 - 02:10:48]: Да, тогда на завтра, получается. У нас, правда, опросы по facility, то что, Саша?

**Alex Shulga** [02:10:48 - 02:10:54]: Если можно, Игорь, не уходи далеко, помогите, пожалуйста, разобраться.

**Oleksandr Ishchenko** [02:10:55 - 02:11:00]: Давай, тогда если тут можно без Дэна что-то обсудить, то давай, Саша, сделаешь.

**Alex Shulga** [02:11:00 - 02:12:04]: Я думаю, базовые вещи мы можем обсудить и без Дэна. Я все-таки хотел бы уточнить, что именно мы поняли из того, что сказал Дэн. Значит, насчет того, какие facility должны быть доступны для пользователя, для сабьюзера, который атрибутирован, например, с одной facility или с двумя facility, он должен видеть только эти facility. Я так интерпретировал слова, потому что мы делаем сейчас strict режим, правильно? Или мы все-таки делаем relaxed режим, когда пользователь, который атрибутирован фактически с двумя facility, видит все facility и мы при этом на всех страницах, если пользователь просматривает не те страницы, с которыми он атрибутирован, не те facility, с которыми он атрибутирован, этот пользователь будет видеть read-only режим этих страниц. Помогите, пожалуйста.

**Vova** [02:12:05 - 02:12:14]: Я понял, так что он этих страниц видеть не должен. Он должен видеть только то, что атрибутировано с ним. Окей.

**Igor Skrynkovskyy** [02:12:14 - 02:12:20]: Только свое. Тогда мы на одной волне. Первая версия должна быть расслабленной.

**Alex Shulga** [02:12:21 - 02:12:29]: То есть, что мы, давайте посмотрим. То, что сейчас работает.

**Igor Skrynkovskyy** [02:12:29 - 02:12:38]: Как оно сейчас работает? То, что сейчас, как мы показываем данные, на базе дерева пользователей.

**Alex Shulga** [02:12:38 - 02:13:13]: Это расслабленная версия. Значит, будет вот этот все-таки селектор. По дефолту тут будет какое-то значение, которое называется facility non или что-нибудь в этом роде. И по дефолту у нас будет дерево, привычный визибильный телескоп. Дальше пользователь имеет возможность выбрать facility, с которыми он ассоциирован, с которым он атрибутирован. И если он выбрал здесь какие-то facility, значит дерево перестает отображаться, отображается только плоский режим по facility. Понял. Понял, супер.

**Igor Skrynkovskyy** [02:13:13 - 02:13:18]: Значит, мы понимаем, как этот режим без facility будет называться?

**Alex Shulga** [02:13:18 - 02:13:26]: Он же должен быть в том же самом дропдауне. Как он называться будет?

**Igor Skrynkovskyy** [02:13:30 - 02:13:37]: Я предлагаю написать, что non или unselect или как-то там facility non.

**Alex Shulga** [02:13:39 - 02:13:48]: Артур, Алекс Ищенко, вы больше всего работали с текстами, которые Dan поставлял. Ваше мнение?

**Oleksandr Ishchenko** [02:13:49 - 02:13:52]: Откуда-то вам сказано больше всего.

**Alex Shulga** [02:13:52 - 02:14:01]: Я помню жалобы Dan на non и всякие такие штуки. К чему вы обычно приходили? На что Dan меньше жаловался?

**Vova** [02:14:02 - 02:14:07]: У нас на некоторых местах существует сейчас non, и Dan не жалуется.

**Oleksandr Ishchenko** [02:14:08 - 02:14:15]: По-моему, non мы меняли на что-то default или что-то вот такое. Надо сейчас на каких-то страницах посмотреть.

**Vova** [02:14:16 - 02:14:30]: И там это выглядит ужасно. Сейчас на странице routes группировка non называется группировка routes. Значит, route группированный по раутам. Это глупость какая-то.

**Oleksandr Ishchenko** [02:14:30 - 02:14:33]: Не знаю, но default мне больше нравится. Дефолт.

**Alex Shulga** [02:14:33 - 02:14:40]: Окей. Возможно, это дефолт организации.

**Igor Skrynkovskyy** [02:14:40 - 02:14:45]: В общем, нужно я глубоко уверен, что здесь конкретно в группировке нужно писать non вместо route.

**Vova** [02:14:45 - 02:15:13]: Потому что группировка, по сути, отключена. Группировки нет. А мы каким-то образом зачем-то показываем здесь group by route, когда группировки никакой нет. И группировка по рауту вообще невозможна, потому что это как можно рауты группировать по раутам? Абсурдная.

**Alex Shulga** [02:15:13 - 02:15:30]: Я бы, извиняюсь, не зацикливался именно на этом селекторе. Давайте поговорим конкретно про facility. Что приемлемо здесь может быть? Кроме non. Меня устраивает non, но может быть дана не устроит.

**Maksym Silman** [02:15:33 - 02:15:39]: Группировка by none есть сейчас на веклах страницы. Можно посмотреть.

**Igor Skrynkovskyy** [02:15:42 - 02:15:53]: Смотрите, нам надо явно указать, что группировки, не группировки, а выбранной facility нет. Или что у нас там расслабленный какой-то...

**Vova** [02:15:53 - 02:16:08]: По сути, это отсутствие фильтрации. Вот эта штука, это фильтр. И здесь ты либо включаешь фильтр, либо отключаешь фильтр. И здесь может быть ситуация, когда просто можно сделать switch.

**Alex Shulga** [02:16:08 - 02:16:10]: Игорь, пожалуйста, не уходи.

**Vova** [02:16:11 - 02:16:13]: Отключение фильтрации по facility.

**Alex Shulga** [02:16:14 - 02:17:02]: Давайте тогда дальше пройдемся. Важные вопросы. Что нам делать с снапшотами? У нас есть страница снапшотов, извиняюсь, на некоторых из этих страниц есть таблица. На таблице есть маршруты. Когда мы выбираем какое-то значение фильтра, а значит ли это, что мы должны фильтровать внутренние таблицы в снапшотах. Ведь снапшот — это страница со связями с теми сущностями. Одной сущностью со всеми другими. Как будто бы это проблема, потому что фильтр может быть неприменим. Но у нас есть возможность явно фильтровать.

**Vova** [02:17:02 - 02:17:12]: Отсюда фильтрация facility пропадает, потому что она переезжает туда на верхний уровень. То есть если мы уносим ее отсюда туда, фильтр по facility.

**Alex Shulga** [02:17:13 - 02:17:36]: Но все же, если у меня есть такой вид, и я здесь применил фильтр по facility return, это значит, что у меня только один маршрут здесь будет показан. В то же время этот снапшот связан с тремя маршрутами. Не будет ли это неявно? Не будет ли это конфузить?

**Vova** [02:17:42 - 02:18:12]: Этот vehicle для этой facility проехал один маршрут только. Остальные маршруты к этому контексту нерелевантны. Поэтому мы их здесь не показываем. Этот фильтр указывает на контекст, в котором ты смотришь на всю систему. То есть я хочу смотреть на снапшот в контексте какой-то facility. Это значит, что я должен видеть там только релевантные к этому контексту вещи.

**Serhii Kasainov** [02:18:14 - 02:18:39]: А снапшот? Что-то мне так не везет сегодня. Снапшот это не такая штука, которую диспетчер может, допустим, обнаружив проблему, просто сбросить кому-то в иерархии постарше и сказать вот смотри у нас. И человек должен открыть вот эту вот ссылочку, которая у нас прям статическая, и увидеть тот же результат, который увидел тот, кто скинул.

**Alex Shulga** [02:18:41 - 02:18:42]: Но это все равно не работает у вас.

**Vova** [02:18:42 - 02:18:45]: Не, не так это работает, да. Это не так.

**Serhii Kasainov** [02:18:47 - 02:18:54]: Нет, но если они в рамках одной компании, у них есть доступ к айдишнику к одному и тому же, потому что твоя иерархия выше, то это должно так работать.

**Vova** [02:18:55 - 02:19:00]: Но тот человек, у которого доступ выше, он может увидеть больше, чем тот человек, у которого иерархия ниже.

**Alex Shulga** [02:19:06 - 02:19:51]: Окей. Давайте пойдем дальше. Я пока что услышал, что лучше оставлять фильтрацию, и скорее всего такое дефолтное поведение у нас и будет, потому что таблица одна. Дальше у нас на таблице есть где-то будет facility и будет input, в котором можно будет это выбрать.

**Vova** [02:19:53 - 02:19:57]: Назначать можно на те facility, которые тебе доступны, я так понимаю.

**Alex Shulga** [02:19:57 - 02:20:14]: Да, но как это будет работать в случае с вот этим фильтром facility? То есть, вне зависимости от ситуации, будет нормально, что мы отображаем все facility в фильтре, позволяем атрибутировать, не отключаем этот input, да?

**Vova** [02:20:16 - 02:21:03]: Если у тебя только одна facility доступ есть, например, то ты по идее можешь только ее и назначить. Ты вообще по идее ничего за пределами, что на этом facility не назначено, ты не увидишь. Если твоя область видимости ограничена на этом facility, то ты атрибут этого вещь не увидишь. Ты увидишь только вещь, которая атрибучена на facility, который ты назначил. Если ты назначен на две facility, в таком случае ты сможешь менять атрибуцию между теми facility, которыми у тебя есть доступ, но не за пределы своей видимости. Если нужно вынести за пределы своей видимости, то нужно обращаться к тому, у кого есть такие права, выше по иерархии.

**Alex Shulga** [02:21:04 - 02:21:24]: Окей, да, я извиняюсь, значит, у нас просто был разговор сегодня с Сергеем о том, что мы делаем read-only вид страниц в случае, если применен фильтр по facility. Это полностью, ну, это не так, я так понимаю, в каких-то контекстах, да? Или это все еще так?

**Vova** [02:21:26 - 02:21:28]: Первые террасы.

**Serhii Kasainov** [02:21:28 - 02:21:30]: Самые первые.

**Alex Shulga** [02:21:31 - 02:21:50]: Самые первые. И в этом случае мы как бы даже и на странице соцнапшотов мы должны как бы отключить все активные элементы, все активные инпуты, которые позволили бы переассайнить или переатрибутировать маршрут, да?

**Vova** [02:21:50 - 02:22:12]: Я не говорю про первую итерацию, я говорю вообще про туда, куда мы хотим прийти. Хотим мы прийти туда, где люди смогут в рамках своей зоны ответственности делать свою работу. И в том числе они будут перекидываться вещи из одной facility в другую и назначать водителей. Все это им нужно будет.

**Alex Shulga** [02:22:12 - 02:22:24]: Да, я хотел бы сейчас разобраться именно с первой итерацией. Все-таки если в первой итерации мы делаем read-only режим, то и на сапшот он тоже распространяется, да?

**Vova** [02:22:31 - 02:22:47]: Я не очень... Мы же хотим сделать не просто первую итерацию, а mvp первую итерацию, правильно? Которая минимально полезна юзерам. И будет ли польза от read-only? У меня есть сомнения.

**Alex Shulga** [02:22:48 - 02:23:02]: Я не знаю. Я вижу только то, что люди начали расходиться, в том числе Игорь, который мог бы прокомментировать. И это меня немножко огорчило. Честно говоря...

**Kateryna Shevchenko** [02:23:02 - 02:23:04]: Можем попробовать на завтра.

**Alex Shulga** [02:23:05 - 02:23:07]: Я не знаю, короче. Вот.

**Kateryna Shevchenko** [02:23:08 - 02:23:13]: Потому что это хорошо, на самом деле, ответы, что мы получили.

**Vova** [02:23:17 - 02:23:34]: У Дэна какое-то очень сильно более продвинутое видение того, что должно получиться, чем то, что мы пытаемся сделать. Явно. Я сегодня увидел это. Что он вообще мечтает о гораздо более серьезном Rocket Science, чем мы делаем поделку.

**Alex Shulga** [02:23:35 - 02:25:02]: Я вижу только то, что сегодня четверг. До понедельника у нас фактически остается восемь часов. В лучшем случае мы можем выжать еще восемь за выходные, умноженные на количество QA. Требований нет. Фактически ничего не имплементировано. Ответить на вопросы некому, потому что мы не выделили достаточно ресурсов на это. Включая, есть фундаментальный вопрос, и я сразу озвучу это. Про пушер, про реалтаймовые апдейты. Мы предполагаем, это не точно, потому что у нас нет референсной имплементации на стейджинге, на которой можно было протестить это. Но мы предполагаем то, поскольку пушер на странице раутлиста подключается через приват канал, по member ID. Возможно, что все реалтаймовые апдейты через пушер идут по иерархии пользователей. Это значит, что если применен будет фильтр по facility, фактически мы лишим пользователя реалтаймовых апдейтов. Мне кажется, это надо решить до того, как мы какую-то первую версию запустим, потому что ожидания могут быть совершенно другие от этого продукта. Я могу ошибаться, но, по-моему, пушер с отправкой по иерархии, он настолько в раутлисте и есть.

**Alexandr Kovtunov** [02:25:02 - 02:25:15]: Ты говоришь не только про раутлист, а вообще про все остальные. Мне кажется, у нас нигде больше нет пушера нормального, кроме как на раутлисте. На остальных я бы сказал, что там по руту.

**Alex Shulga** [02:25:15 - 02:25:24]: Там канал, приватный канал по root member. Понял.

**Alexandr Kovtunov** [02:25:24 - 02:25:29]: Окей.

**Alex Shulga** [02:25:29 - 02:25:52]: Я могу ошибаться, может быть и здесь по руту. Я не проверил это так. Окей. В принципе, если у нас по руту на раутлисте подключается к reindex routes, то у нас не будет проблем, я так понимаю, с реалтаймовыми апдейтами. Так?

**Alexandr Kovtunov** [02:25:52 - 02:26:44]: Как раз... Короче, я знаю точно, что в раутлисте, точнее в routes мы отсылаем пушер. У нас есть два канала, они работают параллельно. Один канал, который работает по руту, и он был всегда еще на старом раутлисте. Никто не заморачивался с тем, чтобы по конкретным мембрам отсылать. Потом было требование сделать рассылку по конкретным мембрам, которые как раз спорят с Hierarchy. То есть этот мембр ID и его owner, его owner, вверх и вниз. И там посылается сообщение пачки в пользу.

**Alex Shulga** [02:26:44 - 02:27:04]: Кто их использует и как, я не могу сказать. Вот это по Hierarchy пушер, он точно используется мобильными клиентами, но я вот сейчас зашел под сабом и под сабом точно используется приватный канал с мембр ID саба, а не рут мембра. Поэтому на раутлисте эта проблема, скорее всего, актуальна будет.

**Vova** [02:27:06 - 02:27:39]: По сути, event и пушер должны быть тем же фильтром, отфильтрованным, которым аксессом этого юзера. Если юзер имеет аксесс к каким-то facilities, соответственно, к каким-то сущностям в этих facilities, и об этих же сущностях event он и должен получать из пушера. А о том, к чему он доступа не имеет, update он не получает. По сути, пушер должны фильтровать точно так же, как и все остальное.

**Alex Shulga** [02:27:42 - 02:29:06]: Окей. Ну, это, видимо, требует Игоря. Я сейчас ему уличку напишу. Интересуюсь. Если можно, еще пару вопросов давайте рассмотрим. Мы говорили сегодня на звонке с Алексом Ищенко, что изначально предполагается имплементация на четырех страницах. Раутс, ордерс, кастомер локейшнс, что-то еще. Кастомерс. Я хотел бы отметить, что на страницах юзерс и vehicles и оптимизейшн профайлс у нас тоже есть атрибуция с facilities. На юзерс и vehicles есть фильтр по facility, вроде бы должен быть. А, нет, его нету, фильтр по facility. Ну, в общем, он точно есть в Эдите. У нас есть facility вот здесь. И мне не до конца очевидно, как бы, первое, если мы будем делать опять же read-only, то я так понимаю, что мы должны дизайвлить тоже и на этих страницах всю логику Эдита, да? Значит, подтвердите, пожалуйста.

**Serhii Kasainov** [02:29:10 - 02:29:12]: Юзерс мы пока не фильтруем, по-моему, вообще по facility.

**Alex Shulga** [02:29:13 - 02:29:42]: Юзерс по facility мы, кстати, не фильтруем, да, но вот в Эдит дроуэре есть facilities, да? И есть возможность, как бы, редактировать этого пользователя. Это значит, что если мы вот эту вот логику read-only будем имплементировать, я все еще не до конца въезжаю, как бы, какой MVP вы хотите, честно. Но если мы будем read-only в первой версии делать, read-only страницы, то вам нужно расширить просто скоп на юзерс и vehicles и optimization profiles, видимо.

**Serhii Kasainov** [02:29:48 - 02:30:00]: Я тоже не до конца понимаю, скажу честно. Но, опять же, первая итерация, это будет все под фичой. Проблем будет много. Тут я вот с чем согласен, это факт.

**Alex Shulga** [02:30:00 - 02:30:42]: И, пожалуйста, последний вопрос на сегодня. Значит, да, извиняюсь, я потерял. Значит, вот в этом фильтре по facilities. Значит, я просто хочу обознать, что мы отображаем в списке facilities с любым статусом. И active, и archived. Значит, это может вызвать confusion. И, возможно, нам нужна какая-то плашка или какой-то признак в этом списке, в этом dropdown, который бы позволил отличить archived от active. Есть у нас это в дизайне?

**Vova** [02:30:42 - 02:30:45]: В дизайне нет, но идея правильная.

**Alex Shulga** [02:30:46 - 02:30:57]: Можно тогда как-бы это как-то до завтра отобразить? Может быть, короче, это получится. Я не уверен. Окей.

**Serhii Kasainov** [02:30:57 - 02:31:02]: Повторите, пожалуйста, еще раз. Что мы делаем с архивированными facilities в этом списке?

**Vova** [02:31:02 - 02:31:12]: Ничего не делаем. Они отображаются и позволяют атрибутировать любые сущности и фильтровать любые сущности по архивированным facility.

**Serhii Kasainov** [02:31:13 - 02:31:14]: Мы на них не можем оттаять.

**Vova** [02:31:15 - 02:31:27]: Нет, мы можем все делать. Не должно быть. Архивированная facility, она должна быть. Ее нельзя использовать. На нее можно смотреть, но ее нельзя применять.

**Alex Shulga** [02:31:27 - 02:32:07]: Сейчас пока что можно применять. Игорь говорил, что архивные facilities будут использоваться для аналитики. Чтобы смотреть. И у нас большая проблема с тем, что такие архивированные facilities, их атрибуция не убирается с других сущностей, когда эти facilities становятся архивными. Это значит, что маршруты будут атрибутированы с архивными facilities. Это значит, что какие еще сущности?

**Vova** [02:32:08 - 02:32:23]: Это правильно. Если эта сущность принадлежит к facility, который заархивировали, то маршрут получается заархивированный с этой facility. Маршрут находится... Этот маршрут это уже история.

**Alex Shulga** [02:32:24 - 02:32:35]: Нет, ты не понял. Новые маршруты, которые создаются пользователями, которые атрибутированы с архивированной тоже будут атрибутированы с этой фасилити.

**Vova** [02:32:35 - 02:32:51]: Вот эти пользователи, они после этого уже не должны иметь возможность что-либо атрибутировать этой фасилити, которая заактивирована. Потому что это абсурд. Как ты можешь...

**Alex Shulga** [02:32:54 - 02:33:11]: Практика сейчас такая, что мы это делаем все равно. Более того, неважно, делаем мы это сейчас или нет, мы говорим о фильтре. Вот есть фильтр, и он должен как-то позволять выбрать архивированные фасилити, но мы просто не показываем, какие.

**Vova** [02:33:12 - 02:33:42]: Тут я целиком согласен. Потому что это речь о том, на какие ты смотришь. И смотреть ты должен в том числе на архивированные. Показать здесь признак, что она архивированная, хорошее. Я думаю, мы сделаем здесь категории. Две группы. Будут Active и Archived. Или может быть будет какая-то галочка, в которую включаешь и видишь в том числе Archived. А по умолчанию Archived будет скрытой, например.

**Alex Shulga** [02:33:46 - 02:33:55]: Извиняюсь, еще один маленький вопрос. Должны ли выбранные фасилити сохраняться на сессию или после перелоги? Самообязательно.

**Vova** [02:33:57 - 02:33:59]: Обязательно.

**Alex Shulga** [02:33:59 - 02:34:03]: Окей. Сергей, это технологически возможно?

**Serhii Kasainov** [02:34:08 - 02:34:10]: Возможно. Все просто больно.

**Alex Shulga** [02:34:12 - 02:34:31]: Супер. Окей, спасибо, что проконсультировали. Тогда на завтра у меня буквально 2-3 вопроса будет. А вопрос по пуферу я сейчас Игорю отпишу. И буду надеяться, что он проконсультирует меня про сейчас.

**Oleksandr Ishchenko** [02:34:31 - 02:34:46]: И, Саша, там я еще на всякий случай скинул нашу встречу с бакенд-командой за вчера. В фасилити по Финтрам. Думаю, там тоже что-то может интересное найдешь. Там все были.

**Serhii Kasainov** [02:34:46 - 02:34:54]: Дима, Саша, Игорь, Сергей. Если мы завтра это сможем все Дэну озвучить, что мы там делаем, будет прекрасно.

**Oleksandr Ishchenko** [02:34:54 - 02:35:02]: Давайте Дэну скинем запись прошлого звонка. Я шутку не обзенил.

**Artur Moskalenko** [02:35:04 - 02:35:07]: Можно будет в самморе какой-то в тех лиц скинуть.

**Alex Shulga** [02:35:09 - 02:35:46]: Ну, это, кстати, очень хорошая идея. Мне очень она нравится. Я бы, возможно, даже... Проблема в том, что саммори очень плохо позволяет на примерах объяснять. Потому что я пытался примеры добавлять, но с примерами очень длинно выходит. А без примеров Дэн не понимает некоторые вещи. Ну, так как и я, например, не понимаю некоторые вещи. Если ты можешь написать такое саммори, было бы просто отлично. Можно же вопросы так сформулировать.

**Artur Moskalenko** [02:35:49 - 02:35:53]: Можем попробовать.

**Alex Shulga** [02:35:53 - 02:36:04]: Окей, я извиняюсь, что я вас задержал. Спасибо огромное. У меня вопросов нет.

**Kateryna Shevchenko** [02:36:05 - 02:36:06]: Тебе спасибо, Саша.

**Oleksandr Ishchenko** [02:36:07 - 02:36:09]: Спасибо тебе, Саша.

**Kateryna Shevchenko** [02:36:10 - 02:36:15]: Тогда всем пока. Да, давайте готовимся к завтрашнему Дэну. Пока-пока.

**Oleksandr Ishchenko** [02:36:16 - 02:36:18]: Генерим агенду. Всем большое спасибо.

**Kateryna Shevchenko** [02:36:19 - 02:36:20]: Всем пока.

---

## Статистика

### Участники

- **Dan Khasis**: 454 сегментов, 01:06:45 (42.8%), точность 94.6%
- **Vova**: 167 сегментов, 00:21:38 (13.9%), точность 92.1%
- **Alex Shulga**: 114 сегментов, 00:14:48 (9.5%), точность 94.9%
- **Igor Skrynkovskyy**: 96 сегментов, 00:10:03 (6.5%), точность 94.6%
- **Oleksandr Ishchenko**: 79 сегментов, 00:08:21 (5.4%), точность 92.7%
- **Semeyon S**: 55 сегментов, 00:05:27 (3.5%), точность 94.6%
- **Serhii Kasainov**: 54 сегментов, 00:05:56 (3.8%), точность 94.8%
- **Alexandr Kovtunov**: 12 сегментов, 00:01:09 (0.7%), точность 95.0%
- **Eugene**: 11 сегментов, 00:01:03 (0.7%), точность 81.7%
- **Kateryna Shevchenko**: 11 сегментов, 00:00:26 (0.3%), точность 93.3%
- **Davron Usmonov**: 8 сегментов, 00:00:33 (0.4%), точность 92.6%
- **Artur Moskalenko**: 8 сегментов, 00:00:25 (0.3%), точность 95.5%
- **gaspar.eross**: 5 сегментов, 00:00:34 (0.4%), точность 73.2%
- **Igor Golovtsov**: 2 сегментов, 00:00:15 (0.2%), точность 95.0%
- **Maksym Silman**: 2 сегментов, 00:00:06 (0.1%), точность 95.0%

### Качество выравнивания

- Высокая уверенность (time-based): 1056 (98.0%)
- Разрешено через LLM: 13 (1.2%)
- Fallback: 9 (0.8%)
- Средняя уверенность: 93.8%
- [!] Низкая уверенность (<70%): 30 сегментов (2.8%)