# Product Review 31 July 2025
- Facility-Based Visibility Filter [Serhii Kasainov](mailto:kserhii@route4me.com)
- Route Snapshot. Add facilities input
- Route Editor. Add facilities input
- Vehicles [Davron Usmonov](mailto:davronu@route4me.com)
  - Fuel level filter added [Davron Usmonov](mailto:davronu@route4me.com)
  - Vehicle columns header truncated [Davron Usmonov](mailto:davronu@route4me.com)
  - Map Vehicle layer [Eugene Bondarenko](mailto:eugene.bondarenko@route4me.com)???
- Customer Location [Davron Usmonov](mailto:davronu@route4me.com)
  - Added Parent Location column
  - Fit map entities into viewport (+ on filtering)
  - Map shape/territory selected locations counter
  - Map territories table select all checkbox
  - Text consistency (drawer facility section, empty page placeholder)
  - Default columns
  - Rename Upload Locations modal title
- Address Book [Davron Usmonov](mailto:davronu@route4me.com)
  - Add Customer Name column (Dan’s request)
- Disabled Print Manifest
Design [Vladimir Zhakhavets](mailto:vova@route4me.com)
- Mobile Login/Signin
- RR / CL Schedule Editor and Preview
- Route Loading Flow
Problems
Overlapping service time for bundled destinations
Removing destinations with not-loaded items
Handling navigation in out-of-sequence orderRecording:
[https://route4me.zoom.us/rec/share/4sawGZNK-3zs8WVsI-i1RVF_xEiQJrdsKytCKoYB5_uR5ILDzgBppWFUNffr-R3f.v1q_hn55lniKr3b3](https://route4me.zoom.us/rec/share/4sawGZNK-3zs8WVsI-i1RVF_xEiQJrdsKytCKoYB5_uR5ILDzgBppWFUNffr-R3f.v1q_hn55lniKr3b3)
Passcode: ?PTzXBp5
### Отчет по итогам стратегической встречи с CEO
Дата: 31 июля 2025 г.Присутствовали: Ден (CEO), и члены команды разработки, включая Сергея, Игоря, Артура, Владлена, Алекса, Семена, Владимира и др.Цель встречи: Обзор текущего статуса ключевых проектов, решение критических проблем, утверждение технических и продуктовых решений, а также обсуждение стратегического видения развития продукта.
#### 1. Инцидент с модулем Compliance и отсутствие логов
- Ответственный: Ден, Игорь Скринковский, Артур Москаленко
- Время обсуждения: 24:50 - 35:49
- Краткое описание контекста/цели обсуждения: CEO Ден поднял критический вопрос о том, как у клиента, которому было категорически запрещено использование модуля Compliance, этот модуль оказался снова включен. Основная проблема усугубляется полным отсутствием логов, которые могли бы помочь в расследовании инцидента.
- Основные моменты обсуждения и предложения команды:
  - Игорь Скринковский подтвердил, что в текущей системе нет логов по изменению фич для аккаунтов. Трафик логгируется, но без содержимого запросов (body), что делает невозможным отследить, кто и когда изменил настройку.
  - Артур изначально предложил "посмотреть в логике", что вызвало резкую реакцию Дена из-за очевидного отсутствия таковых.
  - Семен отметил, что согласно админ-панели, модуль Compliance уже включен у 13 клиентов (включая реальных платящих), и простое отключение "нерабочего алгоритма" может вызвать негативную реакцию.
- Ключевые указания, мнения и решения Дена:
  - Ден выразил крайнее недовольство ситуацией, охарактеризовав её как "прыжок Всегда как Всегда то же самое". Он подчеркнул, что отсутствие логов — это следствие пренебрежения задачами по безопасности и аудиту в угоду скорости выкатки фич.[[1](https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQHkas0atOaxHaLjDrcntnjo_8hpi31q7-JngWU2wspaYTp2ADV__F81dzEFnYNXjZgwu2Ob6bVbKodlT90iexVoguYOUdt10SUCUuHE0ryAgN-87mlCedJJfb2DbH7RQYk3pXLq322dJDpCdBIg7xKVKch1YDyAEUXkZiAgPIoj8OCxYJND7GCdEgp1PFAPaeiR1vM22uW105JDa6D6tCHHLTNXdrky)]
  - Директива: Немедленно включить глобальное логирование всех действий по изменению настроек аккаунтов. Игорь Скринковский должен заняться этим вопросом.
  - Ден раскритиковал UI админ-панели для модуля Compliance, указав на то, что в одном списке без фильтров и какой-либо агрегации смешаны демо, QA и реальные клиентские аккаунты.
  - Он предположил, что проблемы с производительностью у крупнейшего клиента в Австралии напрямую связаны с этим "сломанным" модулем, который создает избыточную нагрузку.
  - Касательно клиентов, использующих сломанный функционал, Ден занял жесткую позицию: "У них все Не работает Так какая Разница... если Там грифов мне оптимально все это Делает тогда это просто выброшенные на нагрузки деньги".
- Принятые решения и Задачи/Следующие шаги:
  - Задача (Игорь Скринковский): Включить на глобальном уровне систему логирования, которая будет фиксировать все изменения настроек аккаунтов, включая информацию о том, кто и когда внес изменение.[[2](https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQFwG0vdx_Kha4Fuqj6zPDNVDiQqlpAH7PvAPc5FHQQhZJpICaf6iMvLDsMHZkC2aCD4XGnumIb3ZsovZoR7JTxZJRa3g_5VszDp-2AFLFioKP8zLlN65OmHEBLshXvISMJbHtlDxNCWPVJEqjxQyg==)][[3](https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQHz03uhXq3bdkCzP8Oe0IROuXmjJbK-I_XtaG09fQRMl3CF8SDb98d82o0-V6DCblrb0xiD47-Y-Cp17wpwFeNW7DyRKbEelsDCVbXVdOlX3h5eu1TqK1SB2cdaAfPCn5m0NUpgTwKJG4FH4VxAU2TZHhE2dtHpi4HmAY5HHw==)]
  - Задача (Игорь Скринковский): Провести ретроспективный анализ по глубоким логам, чтобы попытаться найти информацию об инциденте.
  - Задача (Семен): Проанализировать список клиентов с включенным модулем Compliance для понимания масштаба проблемы.
- Итоговое саммари по теме: Обсуждение выявило критическую уязвимость в системе — отсутствие аудита действий пользователей в админ-панели. Ден жестко потребовал немедленно внедрить систему логирования для предотвращения подобных инцидентов в будущем. Было принято решение, что неработающий функционал не несет ценности для клиентов, и его наличие создает больше проблем (нагрузка, риски), чем пользы.
#### 2. Обсуждение и корректировка логики расчета метрик (Actual, Plan, Unattributed Time)
- Ответственный: Ден, Игорь Скринковский, Вова
- Время обсуждения: 36:17 - 1:09:25
- Краткое описание контекста/цели обсуждения: Команда продемонстрировала новую функциональность с метриками (плановое и фактическое время), готовую к релизу. Ден инициировал глубокий разбор логики расчета фактического времени в пути (Actual Travel Time), что выявило фундаментальное расхождение в подходах.
- Основные моменты обсуждения и предложения команды:
  - Команда изначально рассчитывала Actual Travel Time как разницу между общим временем маршрута (Actual Route Duration) и суммой времени на остановках (Actual Service Time).
  - Вова и Игорь выражали сомнения по поводу отрицательных значений в колонке Unattributed (неучтенное время), которое получалось, если сумма Service Time и Travel Time превышала общую длительность маршрута.
  - Обсуждалась проблема "бандлов" (сгруппированных доставок), где сервис-тайм считается одновременно для нескольких точек, что может искажать общую сумму.
- Ключевые указания, мнения и решения Дена:
  - Ден был категорически против подхода команды. Он многократно и настойчиво объяснял, что Actual Travel Time должен рассчитываться исключительно на основе данных GPS-треков из "metrics service", а именно, как сумма временных интервалов, когда скорость автомобиля была выше порогового значения (например, > 0.1).
  - Он подчеркнул, что Actual Route Duration (время от "старт" до "стоп" маршрута) и сумма компонентов (Travel Time, Service Time и др.) — это две независимые величины. Цель всего отчета — показать разницу между ними.
  - Директива: Unattributed Time — это и есть эта разница (Actual Route Duration минус сумма всех Actual компонентов). Это значение МОЖЕТ и ДОЛЖНО быть отрицательным, если водитель потратил на компоненты больше времени, чем длился маршрут (например, забыл нажать "end route"). Именно показ этих расхождений и является ценностью для клиента.
  - Время, когда машина стоит (на светофоре, в пробке), но не находится на сервисном обслуживании, должно попадать в Idle Time, а не в Travel Time. Travel Time — это время фактического движения.
  - Ден лично в Google Sheets продемонстрировал на выгруженных GPS-треках, как правильно считать Actual Travel Time (сумма дельт между таймстемпами, где скорость > 0), и показал, что текущие цифры в системе "липовые" и "придуманы из ...".
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Изменить логику расчета Actual Travel Time. Он должен базироваться на суммировании интервалов движения из GPS-треков, а не на вычитании из общей длительности.
  - Решение: Unattributed Time рассчитывается как Actual Route Duration - (Actual Travel Time + Actual Service Time + Actual Wait Time + Actual Break Time). Отрицательные значения являются валидными.
  - Задача (Игорь Скринковский и команда): Срочно внести изменения в логику расчета в соответствии с указаниями Дена.
  - Задача (Игорь Скринковский): Развернуть исправление на продакшн в кратчайшие сроки (в течение нескольких часов после звонка).
- Итоговое саммари по теме: Это была ключевая и наиболее напряженная часть встречи. Ден выявил и скорректировал неверную логику расчета основных метрик производительности, которая могла бы полностью обесценить новую функциональность. Были даны четкие и недвусмысленные указания по исправлению, которые команда обязалась немедленно реализовать и выкатить на продакшн.
#### 3. Проблемы и улучшения страницы "Оптимизация"
- Ответственный: Ден, Игорь Скринковский, Артур, Вова
- Время обсуждения: 1:17:23 - 1:25:20 (первая часть), 2:27:54 - 2:45:00 (вторая часть)
- Краткое описание контекста/цели обсуждения: Ден проанализировал текущий пользовательский сценарий работы с результатами оптимизации и выявил ряд критических недостатков в логике и UI, которые разрывают связь между планированием и исполнением.
- Основные моменты обсуждения и предложения команды:
  - Артур и Игорь подтвердили, что по текущей логике маршруты "отвязываются" от родительской оптимизации после определенных действий (например, назначения водителя). Это сделано для того, чтобы избежать сложностей при повторной оптимизации.
  - Игорь упомянул, что в базе данных есть два поля: optimization_id (которое затирается) и original_optimization_id (которое сохраняется).
  - Команда показала макеты, где карта и сводка по оптимизации вынесены в отдельные вкладки.
- Ключевые указания, мнения и решения Дена:
  - Проблема: Отвязка маршрутов от оптимизации недопустима. Пользователь должен всегда видеть, из какого "батча" оптимизации были созданы маршруты, чтобы анализировать план/факт на уровне всей группы.
  - Решение/Директива: Не менять сложную логику на бэкенде, а добавить в UI фильтр/переключатель: "Show Original Optimization Routes" / "Show Current Optimization Routes". По умолчанию всегда показывать маршруты из оригинальной оптимизации, используя поле original_optimization_id для фильтрации.
  - Критика UI:
    - На странице со списком оптимизаций отсутствуют итоговые метрики (тоталы).
    - На странице самой оптимизации (снепшоте) нет никакой информации о входных параметрах (какой profile использовался, какие vehicles, настройки и т.д.). Название "Plan Details" неверное, должно быть "Optimization Metrics" или "Summary".
    - Кнопка "View on Map" ведет на старый legacy интерфейс и пытается загрузить все маршруты сразу, что приведет к сбою при большом их количестве. Она должна вести на новую карту с пред-установленным фильтром по optimization_id.
  - Стратегическое видение: Ден озвучил требование перейти от выбора конкретных машин для оптимизации к использованию "профилей" и "количества/коэффициентов". Пользователь должен указывать "мне нужно 10 машин типа А и 50% от доступных машин типа Б", а система сама подберет оптимальные маршруты.
- Принятые решения и Задачи/Следующие шаги:
  - Задача (Бэкенд/Фронтенд): Реализовать на странице списка оптимизаций возможность фильтрации по original_optimization_id, управляемую через новый UI-переключатель.
  - Задача (Фронтенд/UI): Добавить на страницу снепшота оптимизации вкладку с картой (в read-only режиме) и вкладку с входными параметрами оптимизации.
  - Задача (Бэкенд/Фронтенд): Исправить ссылку "View on Map", чтобы она вела на новую карту с корректным фильтром.
  - Задача (Продукт/Архитектура): В будущем спроектировать и реализовать механизм оптимизации на основе профилей и коэффициентов, а не выбора конкретных единиц.
- Итоговое саммари по теме: Ден выявил серьезный разрыв в пользовательском сценарии, из-за которого теряется ценность анализа результатов оптимизации. Были предложены конкретные и реализуемые в короткие сроки решения (использование original_optimization_id), а также дано направление для более глубоких архитектурных изменений в будущем.
#### 4. Обсуждение UI/UX-философии и глобальных улучшений
- Ответственный: Ден, вся команда
- Время обсуждения: 1:35:50 - 1:55:25, 3:19:30 - 3:25:00 (и другие моменты)
- Краткое описание контекста/цели обсуждения: Ден неоднократно в ходе встречи пытался донести до команды свое видение того, каким должен быть современный и конкурентоспособный B2B-продукт, приводя в примеры интерфейсы из игровой индустрии (StarCraft) и финансовых платформ.
- Основные моменты обсуждения и предложения команды:
  - Команда в основном работала в рамках текущих парадигм (таблицы, стандартные фильтры).
  - Обсуждались макеты для вертикального и горизонтального отображения метрик.
- Ключевые указания, мнения и решения Дена:
  - Основной тезис: Продукт не должен выглядеть и ощущаться как "скучный enterprise софт". Необходимо смотреть на лучшие практики из других областей, в частности, из стратегических игр, где пользователь управляет множеством юнитов в реальном времени.
  - Конкретные идеи и аналогии:
    - Мини-карта и "Юниты": Вместо сухих списков водителей/машин, Ден предлагает использовать пиктограммы, "юниты" с показателями (топливо как "энергия", статус как "здоровье"). Пользователь должен иметь возможность быстро выбирать группы юнитов на карте и отдавать им команды.
    - Информативность: На глобальной карте (например, по "Facilities") должны отображаться ключевые метрики в реальном времени (прогресс, задержки) в виде "барграфов", меняющих цвет (зеленый/желтый/красный).
    - Геймификация: Процесс управления логистикой должен быть интуитивным и визуально понятным, как управление армией в StarCraft.
  - Критика текущего подхода: Ден раскритиковал "захардкоженные" (hardcoded) тексты, лейблы, колонки. Он показал пример системы, где метаданные для каждого поля (название, тултип, формат, права доступа) хранятся в базе и динамически рендерятся в UI. Это позволяет достичь консистентности и гибкости.
- Принятые решения и Задачи/Следующие шаги:
  - Задача (Долгосрочная): Команде необходимо переосмыслить подход к UI/UX, ориентируясь на большую интерактивность, визуализацию данных и геймификацию.
  - Задача (Бэкенд/Архитектура): Начать движение в сторону хранения метаданных (названия колонок, тултипы, форматы) в базе данных, а не в коде. Игорь Скринковский подтвердил, что обсуждение этого уже началось.
- Итоговое саммари по теме: Ден изложил свое стратегическое видение продукта, которое кардинально отличается от текущего состояния. Он призвал команду мыслить более современно и смело, заимствуя лучшие практики из других индустрий для создания более мощного и интуитивно понятного инструмента для клиентов. Это долгосрочное направление, которое должно влиять на все будущие архитектурные и UI решения.
#### 5. Фильтрация по Facility и связанные UI/UX вопросы
- Ответственный: Серhii Kasainov, Alex Shulga, Игорь Головцов
- Время обсуждения: 2:52 - 7:45, 3:09:28 - 3:19:30
- Краткое описание контекста/цели обсуждения: Обсуждение реализации глобального фильтра по "Facility" в шапке приложения и его влияния на различные страницы и таблицы.
- Основные моменты обсуждения и предложения команды:
  - Первоначально был вопрос, нужно ли фильтровать данные в снепшотах по выбранному Facility.
  - Сергей поднял вопрос о необходимости вынести компонент колонки "Assigned Facility" в общий фреймворк для консистентности.
  - Возникла дискуссия о том, как должен работать фильтр при выборе нескольких Facilities (логика AND или OR) и как это изменение должно синхронизироваться между разными вкладками браузера.
- Ключевые указания, мнения и решения Дена:
  - Поведение фильтра: При выборе нескольких Facilities должна применяться логика OR (показывать сущности, принадлежащие любому из выбранных).
  - Синхронизация: Фильтр является глобальной настройкой для сессии пользователя. Изменение в одной вкладке должно (в идеале) отражаться на всех остальных открытых вкладках приложения. Вова привел в пример переключение аккаунтов в Gmail.
  - UI/UX:
    - Опция "Facility: None" должна быть переименована в "None Selected", чтобы не вводить пользователя в заблуждение.
    - Высота выпадающего списка должна быть динамической, а не фиксированной (150px).
    - Необходимо исправить отступы и выравнивание элементов в фильтре.
    - Вложенный фильтр по Facility внутри таблицы должен быть дочерним по отношению к глобальному (показывать только те опции, что выбраны в шапке).
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Глобальный фильтр по Facility работает по логике OR.
  - Решение: Изменение фильтра в одной вкладке должно применяться и к другим (это будет сохраняться на бэкенде или в общем хранилище сессии).
  - Задача (Фронтенд): Переименовать "None" в "None Selected".
  - Задача (Фронтенд): Исправить верстку фильтра (высота, отступы).
  - Задача (Фронтенд): На первом этапе скрыть вложенный фильтр по Facility в таблицах, чтобы избежать конфликтов. Использовать только глобальный фильтр.
- Итоговое саммари по теме: Команда согласовала ключевые принципы работы нового глобального фильтра по Facility. Были приняты решения по логике его работы (OR), поведению в многовкладочном режиме и внесены конкретные правки в UI для улучшения пользовательского опыта.
