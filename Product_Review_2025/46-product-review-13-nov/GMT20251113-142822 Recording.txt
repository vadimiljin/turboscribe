[Speaker 8] (0:06 - 0:07)
Привет, Дэн.

[Speaker 5] (0:09 - 0:09)
Да, привет.

[Speaker 2] (0:16 - 1:54)
Я, пока ты не шел, использовал ребят, чтобы подобрать палитру. Значит, это Customer Allocation Snapshot. Среднестатистический Service Time.

Здесь ты можешь выбрать, на какой тип Service Time ты смотришь. Ты можешь смотреть на Actual, на Plant, на разницу Actual vs Plant или на разницу в процентах. И дальше ты можешь выбрать направление метрики Lower is Beta или High is Beta.

И тебе от этого красится палитра от зеленого к красному или от красного к зеленому. А потом, при наведении на отдельную чайпу, ты видишь состав, сколько всего визитов было в это время, за все время и сколько в среднем. Да, и еще здесь забыли контрол способ, метод Average.

Какой использовать метод для высчитывания медиану или средневзвешенной или с отсечением пиков. Здесь будет еще один контрол для выбирания метода Average. Что думаешь?

И я отдаю экран ребятам.

[Speaker 8] (1:56 - 1:58)
Подожди, ты, Астерик.

[Speaker 1] (2:08 - 2:28)
Я не знаю, что думаю. Я думаю, что это Customer Location, Destination. И это на локации, Customer Location из бука.

Но это, в принципе, можно показывать.

[Speaker 2] (2:30 - 2:43)
То же самое в Route Destination Snapshot, правильно? В Destination Snapshot можно, но это будет относиться тогда не к этому Destination, а к этому адресу.

[Speaker 1] (2:43 - 2:44)
Нет, оно относится к этому Destination.

[Speaker 2] (2:44 - 3:08)
Ну, к этому адресу, потому что Destination – это один визит. Он в одном маршруте, и его два раза не повторяют Destination, но адрес может встречаться несколько раз. На адресе это можно показывать.

То есть, оно можно показывать в Destination Snapshot, но оно будет привязано не к Destination, а к адресу. Потому что Destination – это один визит.

[Speaker 1] (3:14 - 3:23)
Нет, это как в программировании. У тебя есть PassByReference, PassByValue.

[Speaker 2] (3:24 - 3:34)
Но вот Destination – это instance адреса. Один конкретный визит на этот адрес в нашей парадигме, насколько я знаю.

[Speaker 1] (3:35 - 4:02)
И в RouteData может идти Destination, и Destination имеет линковку полноценного CustomerLocation. Когда ты откроешь ServiceTime, если бы я был клиентом, я бы сразу понял, что ты бы подсветил какой-то иконкой, что это ServiceTime. Не этого Destination, а ServiceTime.

[Speaker 2] (4:04 - 4:11)
Статистически. Статистически этого Location, да. Ну просто нужно написать Location, ServiceTime и все, без иконки.

[Speaker 1] (4:12 - 4:14)
Просто надо сделать линковку.

[Speaker 2] (4:33 - 4:34)
Да, это будет там видно.

[Speaker 5] (4:42 - 4:43)
А цвета нравится?

[Speaker 2] (4:50 - 5:12)
Была вторая идея – подсвечивать, дать южеру возможность выбрать, на чем он хочет фокусироваться, на плохом или на хорошем. Если он говорит фокусироваться на плохом, тогда акценты красные на плохих вещах. Если он говорит фокусироваться на хорошем, тогда палитра переворачивается, и здесь становится зеленый к индиферентному.

[Speaker 5] (5:33 - 5:35)
Дэн, ты отвалился вторым устройством.

[Speaker 1] (5:36 - 13:31)
Я не отвалился. Здесь? Я услышал, что Вова сказал, когда я подсоединился.

Вова совершенно прав. Но этот репорт не показывает то, что Вова озвучил. Его надо сделать, немножко продвинуть, чтобы я объяснил, что имею в виду.

У нас есть проблема из-за лэгеси решений, из-за бывших решений. Что если посмотреть на кастомный локейшн в нашей дейтабейс, в UI или в базе данных даже, у нас на уровне кастомного локейшна есть две или три огромные проблемы. Сервис тайм на уровне локейшна, а сервис тайм должен быть на уровне типа обслуживания и локейшна.

Вторая проблема – неправильное предпочтение, что на уровне одного локейшна только есть один тип обслуживания. Это наша вторая проблема. Потому что здесь, как Вова сказал, может быть и delivery, и сервис, и инспекция, и так далее.

И здесь это все меняется пропорционально от этого. Потому что если ты сегодня сделал маршрут, который был, который во время планировки, у нас четвертая проблема. Что выборка destination типа как-то должно интеллигентно происходить, когда ты посылаешь.

У тебя рекурринг расписания есть, а у нас неправильно. Наше рекурринг расписания на уровне локейшна, а рекурринг расписания должно быть на локейшн плюс сервис тайм потенциально. И потом вот этот сервис тайм динамически меняется по дням недели и так далее.

То есть заказанный и актуальный динамически меняются тоже. Но у нас нет поддержки для этого. Так если мы уже это делаем, нам уже просто довести до ума это сделать.

Потому что сейчас говорил с Паркером насчет, почему мы потеряем две сделки прямо сейчас. И это потому, что мы не можем планировать из customer locations. Мы не можем делать планировку из customer locations на как это?

Стратегическую? Стратегическую. Хотя у них есть огромная проблема.

Какая у них проблема у этого клиента? У них проблема, что у них 15 тысяч destination и у них 15 складов, депотов. И Хван руками должен это делать?

Или какой-то помощник Паркера должен руками это делать? Почему нельзя, если у тебя есть одна facility пролинкована к кастомеру, и ты выбрал всех кастомеров в каком-то полигоне? Или ты выбрал, как их звать, на карте начертил что-то, полигон нарисовал.

И теперь ты хочешь взять, ты хочешь сделать strategic? Там может быть промежуточный шаг, который говорит тебе, окей, мы заметили, что ты выбрал там 15, 20, 100 тысяч кастомеров, и мы заметили, что эти кастомеры, которые ты выбрал, они пролинкованы к разнообразным, как их звать, facilities. И теперь наша задача в этом pop-up искать, какие facilities ты бы хотел в этой стратегической оптимизации рассматривать.

И без ограничения, скажем, 500 штук. Окей, 500 штук. И теперь она говорит, а, смотри, у тебя есть...

Мы говорим о for-loop-рэпере, что из-за там пяти for-loop-рэперов мы теряем, можно сказать, миллионы долларов. Если сделать абстракцию на самый высокий уровень этой ситуации, что мы теряем миллионы долларов из-за отсутствия for-loop-ов в асинхронном режиме. Потому что как это бы работало, это чтобы они взяли, залили своих 25 тысяч адресов, которые пролинкованы к facility, выбрали сразу одним махом все адреса.

Адреса подписаны уже чем-то, например, как их звать? Day of week, day of month, service type, service type by day of week и так далее. И потом просто-напросто происходит ситуация, где система говорит, о, смотри, у них есть там 15 депотов.

И она проходит через каждый депот. Она знает, что у этого тысяча клиентов, у этого тысяча клиентов, у этого тысяча клиентов, у этого тысяча клиентов депота. И она просто инициализирует стратегик на каждый депот.

И это решает 80% всех проблем для всех клиентов. Потому что сейчас они высылают свои файлы, которые идут к Богдану или к Хэмлуту или к Владу. Они сидят в Excel, тысяча пятьдесят вариантов этих Excel файлов.

О, покажи мне сервис тайм таким-то, о, покажи мне сервис тайм таким-то. Из-за чего? Из-за отсутствия нового сценария, где мы можем сказать, опять, еще один for loop.

А, поменяй мне сервис тайм плюс-минус 10%, пять интервалов вверх и пять интервалов вниз. Это новый сценарий. Нет, для этого они должны залить 25 или 50 CSV файлов.

Опять из-за for loop. Так теперь получается, что оптимизаторам пофиг же, правильно? Это все.

И алгоритму. Ему только важно инициализировать. Даже distance matrix не надо переделывать, потому что он уже закоширован.

Только меняется сервис тайм какой-то несчастный. Так что я пытаюсь сказать, что вот эта вещь, которую ты нарисовал, она на 90% правильно, но она на 10% полезна для типов клиентов, которые этот Дэвид хочет, чтобы мы могли продавать им. Потому что сервис тайм меняется, как ты сам и сказал.

Типа услуги от времени дня, время дня, сезона и так далее.

[Speaker 2] (13:32 - 13:46)
Если у нас эти destination будут протеганы каким-то образом, когда они делают один тип сервиса, когда они делают другой тип сервиса, тогда мы здесь можем просто дать им возможность выбирать и говорить, какой тип сервиса вы сейчас хотите рассматривать.

[Speaker 1] (13:46 - 14:06)
Совершенно верно. Или все сразу, да. И Артем должен взять, там не хватает в тул-типе одной вещи, что как только мы пишем average, люди, как Дэвид, приемываются к этому.

Это почему вы не пользуетесь линией энергетики, почему вы не пользуетесь этого. Они предполагают, что они статистику знают.

[Speaker 2] (14:07 - 14:21)
Да, вот здесь будет способ, метод averaging, формула математическая выбираться. Какая используется. И там будет несколько опций.

[Speaker 1] (14:22 - 16:03)
Такой, такой, такой. Потому что там есть moving average, exponential moving average, разные варианты есть. Может быть мы даже не опубликовываем, может мы не должны даже говорить наш метод.

Зачем вообще даже писать average? Может мы можем писать service time, detected service time. Зачем даже писать слово average, если на то пошло?

Ну, я думаю, умные ребята захотят знать, какая там математика внутри лежит. Да, так умные ребята, ты кликнешь на ячейку, и ты откроешь scatter plot, или ты откроешь line graph, который будет кривая и по времени, и по выбранному диапазону этого репорта. Эта кривая будет показывать, как в скопе, зелено-желтое-красное диапазоны, и она будет, и кривая будет показывать в рамках тех диапазонов, в рамках той исторической тренд-истории для той ячейки.

Потому что ячейка это же часовой диапазон плюс фактор. Фактор как день недели, фактор как сезон, фактор как квартал, и так далее. Нам нужно посмотреть, если вы хотите, прямо сейчас на custom allocations, прямо сейчас решить или придумать, как сделать наращивание сервиса типа и тайма в custom allocations редакторе.

[Speaker 2] (16:12 - 16:40)
Я подумаю об этом. Если очень быстро, что я сейчас об этом думаю, возможно, это что-то вроде какой-то новой entity, контракт на обслуживание этого customer location, у тебя может быть одновременно несколько контрактов на обслуживание одного и того же location, и каждый из контрактов имеет свое собственное расписание, свои собственные условия, свою собственную частоту визитов и длительность визитов.

[Speaker 1] (16:41 - 16:58)
Да, но даже перед тем, как говорить насчет контракта, мы можем сказать насчет, даже не говорить насчет контракта, а просто прибавить элементарную config table в custom allocations. Самый элементарный.

[Speaker 2] (17:07 - 17:17)
Самый элементарный просто для этого. Ну да, но это просто будет называться не контракт, это будет называться отдельный, я подумаю, как это лучше назвать.

[Speaker 1] (17:18 - 17:36)
Нет, я пытаюсь сказать, что прямо сейчас вы откроете custom allocations, я объясню это. И у нас демонстрация с клиентом начнется в 11.20 американского времени, в 11.15 так я тоже буду отключиться, к сожалению.

[Speaker 2] (17:50 - 18:42)
Вот здесь просто это расписание будет дублироваться, его можно будет создать несколько расписаний для этого, сейчас это неправильно здесь называется business hours, неправильного макета у меня нету под рукой. Но грубо говоря, здесь будет указано одно расписание, и тебе будет возможность создать второе расписание, со своими сервис таймами другими. Это будет расписание, наверное, несколько расписаний на одном location.

Расписание сервиса 1, расписание сервиса 2.

[Speaker 1] (18:42 - 20:25)
Или будет, я не знаю до конца, я думаю, что это должно выглядеть как таблица, как меню, как в Excel. Ты нажимаешь tab, tab, tab, tab, она наращивает ряда, и потом ты просто выбираешь drop down на все наши сервис типы. У нас другая есть проблема, и может быть ее прямо сейчас можно решить.

Мы не можем динамически наращивать сервис типы, из-за нашей базы данных огромной. Сколько мы не перешли на современную базу данных, старая не позволяет нам легко менять некоторые эти настройки. Есть вариант, что некоторые клиенты захотят кастомные сервис типы, но они все могут спокойно промепаться к нашим глобальным сервис типам.

То есть не меняя глобальные, мы сможем все равно удовлетворить их требования. То есть мы должны будем тогда сделать сервис-тайп-редактор. Сервис-тайп будет мэпаться на главный тип, который мы никогда не будем менять, потому что все типы в жизни, там вымыть туалет, или высосать говно из порта-пати, настройках.

Да, контейнер. Они все, или пикап, или все сервис. А мне с Игорем прибавят новое поле, интежер такого типа, мы сделаем за 10 минут.

А менять старое, это может занять 10 недель.

[Speaker 2] (20:25 - 20:33)
Я хотел еще сказать, что наша система текущая, она не подразумевает, что может быть mixed-сервис, когда ты одновременно приехал что-то забрать, что-то оставить.

[Speaker 1] (20:34 - 21:53)
Нет, это другая вещь. Это другая вещь. Ты прав, но это другая вещь.

Это то, что во время оптимизации, если ты кастовый локейшн делаешь по дням недели, если ты наращиваешь, можно сказать, матрицу элементов, ты в той матрице элементов берешь и говоришь, что в такой-то день или по такому-то расписанию происходят такие-то дела. И потом система детекчит это. То есть, если стратегик идет в четверг, он вытаскивает из базы данные, что смотри, по четвергам мы делаем 4 вещи, а в среду мы делаем 3 вещи, а в вторник мы делаем 2 вещи.

И как-то он должен динамически, мы должны это умно передавать туда. Я не знаю как, я не знаю кто, но я знаю, что это надо сделать. Понимаешь?

Или если это идет динамический план, и ты выбрался завтрашний день во время планировки, тогда там появятся эти услуги, которые в этой матрице прописаны.

[Speaker 2] (21:59 - 22:07)
Я подумаю об этом, как это можно сюда организовать, и на следующей неделе покажу, что я придумал.

[Speaker 1] (22:08 - 23:43)
Идея будет, что вместо того, чтобы иметь один сервис, ставим поле в route destination. Да, у нас будет агрегированное поле, но в принципе нам нужно, может быть, с Игорем сделать еще одну дочернюю таблицу, которая звучит и выглядит как order multiline item, но на уровне сервис line item, которая будет описывать все эти вещи. Что вот в этот destination вошло n количество услуг, и что эти услуги пришли от custom location, и что эти услуги, которые пришли от custom location, они имеют какой-то идентификатор.

И потом и водитель, и все другие. Потому что мы встретились с этим landscape клиентом на прошлой неделе. Они посылали 20 работяг в одно место.

И что потом? Потом в итоге они послали 20 работяг, но 20 ребят. Но получилось, что этих 20 ребят, которые они послали, они только там провели час.

И это идиотство. Они провели там один час, потому что их было 20, а рабочих часов было 20, а провели час, потому что 20 ребят. Мы сейчас это не трекаем.

[Speaker 2] (23:47 - 23:49)
Да, мы это обсуждали в прошлый раз.

[Speaker 1] (23:55 - 24:34)
Да, но это немножко другое, что мы на уровне location будем показывать multiple service times по разному типу. И потом в агрегате мы будем теперь показывать статистику по каждому сервис-типу. И когда они планируют маршрут, они должны будут выбрать, что ты планируешь маршрут с этими destination, которые имеют множество сервис-типов.

Хотите ли вы от какой-то один из них отсеять или вы хотите все их оставить включенными?

[Speaker 2] (24:35 - 24:40)
Да, то есть мы не только сервис-тайм, но и man-hours тоже на статистику собираем.

[Speaker 1] (24:40 - 24:45)
Ну по сервис-типам, потому что мы задетектировали разные сервис-типы.

[Speaker 2] (24:58 - 25:06)
Окей, я отдам экран ребятам, чтобы они смогли показать тебе вещи. Бонар, ты начнешь?

[Speaker 1] (25:08 - 26:54)
Самое важное в стратегии краудпленера это вести до ума и закончить все эти малюсенькие вещи, потому что просто систему невозможно пользоваться серьезным людям. Если бы я вам сказал, как индивидуальным предпринимателям, дай мне 25 тысяч американских долларов в месяц за эту систему, и я бы потом в кавычку сказал, все твои скорости из Telematics будут в два раза с половиной неправильные, все твои эти. Ты будешь руками планировать все маршруты рекурринг и никогда не сможешь больше, чем один склад одновременно анализировать.

Ты должен будешь в Excel делать агрегацию всех сервис-таймов, потому что мы не сможем для тебя это сделать. Ты должен будешь руками по разным сезонам все делать. Ты должен будешь иметь 50 вариантов одного CSV файла, потому что мы не позволяем тебе сохранять идеи или варианты или сценария.

Потом территории мы тебе не даем модифицировать в стратегике никак. Предлагать территории в Customer Locations мы тебе никак не позволяем. Сохранять из Location списка территорий, которые связаны или пролинкованы к депоту, мы тебе не дадим делать.

Так за что я плачу четверть миллиона долларов в год, если я ничего не могу делать полезного? Я просто имею рэпер на обыкновенный оптимизатор. Правильно?

[Speaker 8] (27:03 - 27:07)
Анат, Жень, пошарите экран.

[Speaker 5] (27:12 - 27:13)
Мне начать, да? Или как?

[Speaker 8] (27:13 - 27:14)
Да, да.

[Speaker 5] (27:16 - 28:30)
Да, там как раз Location, который упоминали. В работе пока выберу. Мы добавили создание оптимизации.

Это пока все драфтово. Первая версия. Чтобы можно было увидеть.

Это список Customer Locations. Их можно тут фильтровать. В зависимости от того, как мы хотим.

Также можно их просто выбрать. То есть он либо на основе фильтра будет работать, либо на основе Selected Mode. Допустим, вот выберем, не знаю, пять Locations.

Он по ним создаст нам оптимизацию. Также мы добавили небольшой шаг, чтобы можно было создать имя, потому что у нас уже файла нет. И название файла не подойдет.

С оптимизацией пользователь может создать, как захочет. Также обязательная вещь — это депоты. То есть их может быть несколько или может быть один.

Он также у нас.

[Speaker 1] (28:32 - 28:42)
А как берется депот? А почему вы даете произвольный выбор депота, если мы говорили, что их надо из Facilities галочки выбирать?

[Speaker 6] (28:44 - 29:05)
Дэн, мы об этом прекрасно помним на следующих шагах. Monar вообще показывает локальную свою копию. Этого еще на стейджинге даже нет.

А пишечка есть? UI еще нет. Но мы помним об этом, что из Facilities надо брать в первую очередь.

Но надо же оставить пользователю возможность.

[Speaker 1] (29:06 - 29:09)
Я бы сделал эти выборки радио-баттены для этого.

[Speaker 6] (29:12 - 29:17)
Я думал, внутри автокомплита можем радио-баттены сделать.

[Speaker 1] (29:17 - 30:11)
Нет, я имею в виду, что пусть они выберут типификацию поиска. Или в скоупе есть multi-personality поиск, где ты можешь видеть, как бы она классифицирует по рядам из разных источников или типов. То есть автокомплит один тип.

Я просто не уверен, что это правильно, потому что у них фиксированное количество складов. Почти у серьезных людей. Каждый раз им руками печатать адрес – это коряво.

Только если они хотят купить новый склад, им любопытно впечатать адрес. Но почти все другие сценарии начинаются в фиксированном списке адресов.

[Speaker 6] (30:12 - 30:17)
Откладов может быть много или произвольное количество.

[Speaker 2] (30:17 - 30:56)
На первой версии, что я предлагаю сделать. Здесь ставишь фокус, открывается drop-down, в котором все твои facilities, из которых промечено, что они депот. Ты можешь начинать печатать, и этот список фильтруется.

Если ничего не найдено, тогда начинается геокодинг этого адреса. И ты можешь ввести сюда либо что-то из этого автокомплита, какую-то facility, либо геокодженный адрес. И этот автокомплит делится на две секции.

Первая секция у тебя – facilities, а вторая у тебя – геокодженные варианты, опции, что геокодер предлагает.

[Speaker 1] (30:58 - 31:26)
Я хочу сказать, что вы сделали все правильно. Меня просто возмущает, что вы постоянно мучаете людей. Почему context support to learn how to add multiple deposits?

Для меня это звучит, что у человека нет этого модуля включено. Эти слова очень странные.

[Speaker 5] (31:26 - 31:33)
Это все локально. Это временно. Я взял из обычной оптимизации.

[Speaker 1] (31:43 - 31:49)
Нам нужно не забыть, что мы карту будем видеть промежуточную, правильно?

[Speaker 6] (31:50 - 32:10)
Да. С локейшенов в следующих итерациях карта будет. Дэн, мы о каком количестве складов говорим?

Это единицы, это сотни, это тысячи? На какое количество ориентироваться?

[Speaker 1] (32:12 - 32:32)
Ориентироваться на список в табличке, которые они будут галочки выбирать. Окей, понял. Если single depot, они выберут.

Зачем даже спрашивать галочки multiple depot? Показывай список facilities. Если они выбрали больше чем один, значит это multiple depot.

Правильно?

[Speaker 6] (32:32 - 32:45)
Я понял, да, мы facilities здесь выведем, но на следующих итерациях. Я уловил идею.

[Speaker 4] (32:46 - 32:55)
То, что у нас сейчас локейшен может быть отмечен как из депо, это не касается...

[Speaker 1] (32:55 - 33:55)
Это касается, это может быть депо клиента, а мы говорим о депо твой. А твой депо является в списке depo. Я думаю, что вы сделали 95% все правильно, но потом маленькие эти занозы с этим запятой нету.

Окей, так они выберут или они выберут список этих депотов галочкой, или они радиобаттонов выберут автокомплит такого типа.

[Speaker 5] (33:56 - 34:02)
Но здесь должен быть, правильно? Прямо на этом становится отдельно, не там, не в той таблице.

[Speaker 1] (34:04 - 34:39)
Если радиобаттон включен на депоты, тогда они выбирают на списке своих депотов, и они имеют право делать фильтрацию по типу депота, по региону депоту, по классификации депота, потому что они захотят... О, я хочу сделать только свои склады, которые собирают мусор, а теперь я отдельно хочу сделать те, которые сжигают мусор, те, которые delivery делают, те, которые maintenance делают.

[Speaker 5] (34:48 - 34:54)
Со списком сейчас все посмотрим. Но точного количества нам не известно на данный момент, то есть это как-то в рейнде.

[Speaker 1] (34:54 - 37:09)
В рейнде я могу сказать, что там будет погенация с поиском. Я бы сказал 100 обслуживает почти все сценарии жизни. 100 сценарий, 100 facilities выборка.

Представь себе, что ты выбрал 100 facilities, и потом после этого, после выборки этих 100 facilities, и это... как это слово? Еще сделал service time плюс-минус 5 минут в направлении 5 минут по шагу вверх, 5 минут по шагу вниз.

Это уже сколько? Это 5 вверх, 5 вниз, 10. Это тысяча уже сценарий.

Правильно? 100 этих facilities и 100 на 10. И теперь ты еще хочешь сказать, я хочу с минимизацией, я хочу без минимизации, я хочу с балансировкой, я хочу то, так теперь у тебя сколько?

5000 сценарий. И здесь мы поимеем наших конкурентов, потому что после агрегата 5000 сценарий отпадет мусор, и мы в скеттерплате покажем и в разных инструментах статистический анализ. И они увидят и посмотрят, и выберут.

Самый интересный или самый подходящий ответ, который им нравится. И они могут, они визуально этот ответ выберут, несмотря даже на список. И 90% этих идей будет мусор полный.

Как они вытаскивают золото, правильно? 99% полный мусор. Или больше, там 99,99% полный мусор.

И потом все другое, это золото.

[Speaker 5] (37:18 - 37:27)
Окей. И дальше остается как обычно, то есть тут ничего не менялось, все пошло.

[Speaker 2] (37:28 - 37:31)
Здесь анимацию забыть, нужна анимация.

[Speaker 5] (37:34 - 37:36)
Может быть это у кого-то в другом этом?

[Speaker 1] (37:38 - 38:10)
Мы текст должны вам новый дать. Мы не пишем слово комплекс. Люди обсыраются, когда они видят это слово.

Было бы хорошо по этой анимации, которую Вова описывает, описать, например, количество комбинаций, которые мы рассматриваем. То есть мы...

[Speaker 2] (38:10 - 38:19)
А там так и есть, там этот прогресс бар поделен на сосиски, и каждая сосиска это отдельный сценарий. Нет, нет, нет.

[Speaker 1] (38:19 - 38:50)
Я имею в виду, что если мы хотим похвастаться клиенту, сколько для него мы делаем работы, пока он выкуривает сигарету и пьет кофе, там огромным 50-м или 75-м размером фона, что там писано, мы сейчас равняем 197 тысяч комбинаций в вашем анализе, и цифры бегут вверх. Да, ставь твой прогресс бар, пусть они поймут, что они бы никогда бы это самостоятельно не сделали.

[Speaker 6] (38:52 - 39:22)
Кстати, Дэн, важный вопрос есть. Там сейчас пока оптимизация этого сольвера все еще в процессе. Бывают случаи, когда какая-то оптимизация отрабатывает часами.

Соответственно, какой максимальный порог по времени, сколько мы можем ждать, чтобы сделать стратегическую оптимизацию максимально?

[Speaker 1] (39:22 - 39:27)
На уровне одной инициализации Dayman в ERP?

[Speaker 6] (39:29 - 39:42)
Для пользователя. Только сколько мы можем заставлять ждать пользователя, прежде чем ему скажем, что все, что-то сломалось, попробуй позже.

[Speaker 1] (39:43 - 39:49)
Мы же делаем паршал, я думаю, во-первых, паршал, а не мандаторий в полный.

[Speaker 6] (39:53 - 40:03)
Паршал делается, да, он там есть. Но мы же тоже должны основываться на каких-то цифрах, если мы возьмем и засунем комбинацию членов.

[Speaker 1] (40:03 - 40:31)
Давай начнем с другого подхода. Когда мы извлекаем ERP, ERP ранается в Nginx. В Nginx там есть свой тайм-аут, клиент тайм-аут и так далее.

И в том тайм-ауте он все равно не будет раниться 5 часов. Он никогда в жизни не будет раниться 5 часов. Потому что Nginx вырубится, и AppStream вырубит перед тем, как он закончат.

[Speaker 3] (40:32 - 40:37)
Дэн, там давно уже Nginx нет, и если нужно, он будет 5 часов ждать.

[Speaker 1] (40:37 - 40:41)
Как вы извлекаете сольверы?

[Speaker 3] (40:42 - 40:48)
Там давно стоит FastAPI с SO-модулем C++.

[Speaker 1] (40:50 - 40:51)
Он всегда был C++.

[Speaker 3] (40:52 - 41:01)
Но только сейчас стоит FastAPI питоновый, который показал себя в 2 раза быстрее и в 3 раза меньше памяти жрать начал.

[Speaker 1] (41:01 - 41:10)
Имеешь ввиду, что сделали новый рэпер сольвера? Который не пользует метод хттп рэпера?

[Speaker 3] (41:10 - 41:12)
Да, мы от него отказались.

[Speaker 1] (41:12 - 41:14)
Он сокет пользует или что он пользует?

[Speaker 3] (41:14 - 41:32)
Да, да. Не, он не сокет пользует. Он пользует shared memory между тем, что пришло в запрос к питону и то, что сольвер запускает.

То есть сольвер это просто как библиотека с билдинга. Он больше не как демон работает.

[Speaker 1] (41:33 - 42:20)
Просто я тебе скажу почему. Вот почему меня, Семен, вопрос немножко сбил. Потому что мое мнение, что инициализация одного сольвера никогда не должна раниться более 5 или 10 минут.

Если это происходит, там какой-то дефект. Это значит, что кластеры неправильного размера, это значит, что constraints какие-то непонятные. Потому что 5 минут на железе, который мы имеем, мы говорим о миллиардах или десятках миллиардов прогонов.

Правильно?

[Speaker 3] (42:21 - 42:41)
Да, но только, Дэн, надо учесть, смотри, вот этот планер, который strategic optimization, он еще не до конца оптимизирован. И условно те задачи, которые там на 2.5 и на 5 тысяч, то, что мы пробовали последние, они рануются на 25 минут.

[Speaker 1] (42:42 - 42:46)
Окей, но это предполагает, что мы не сделаем оптимизацию?

[Speaker 3] (42:47 - 42:48)
Не до конца, да.

[Speaker 1] (42:48 - 42:56)
Да, но вы сказали недавно, что вы с 10 минут и 20 минут уже понизили до 5 секунд некоторые вещи.

[Speaker 3] (42:57 - 43:07)
Да, это так, но если мы накидываем еще дополнительных constraints на уровне сольвера, у нас количество операций, которое обрабатывается, оно немножко увеличивается.

[Speaker 1] (43:09 - 43:17)
Кто может посчитать количество итераций ориентировочно, чтобы мы могли клиента подразнить этим?

[Speaker 3] (43:18 - 43:44)
У нас есть все эти цифры, то есть мы все количество вот этих операций от количества этих constraints мы можем умножать на коэффициент и показывать число. И плюс добавлять там попутно еще дополнительные вещи типа матриц и так далее.

[Speaker 1] (43:46 - 43:48)
Окей, у них митинг начался.

[Speaker 6] (43:48 - 44:00)
Ну, Дэн, ты можешь хотя бы цифру назвать, на которую ориентироваться, а потом еще уточним с тобой.

[Speaker 1] (44:11 - 44:31)
Я бы сказал, чтобы ответить на Игоря вопрос, если у вас больше чем 2000 адресов одной оптимизации, это значит, что ваши кластеры не работают. Потому что кластеры не должны позволять такое большое количество адресов в одном геодезическом полигоне.

[Speaker 3] (44:33 - 44:38)
Это отдельный вопрос. Это отдельно я могу прокомментировать.

[Speaker 1] (44:39 - 45:10)
Меня не беспокоит inter-cluster swapping на этом этапе. Но, и что FedEx делает и так далее. Но, окей, если оптимизация у нас еще до конца не доделана, значит, Макс, и ты говоришь, что нам нужно 25 минут, значит, поставь максимум 30.

Но наша долгосрочная цель, Семен, это будет максимум 5-10. Окей, понял. Максимум 5, я думаю.

[Speaker 6] (45:14 - 45:17)
Хорошо, пока промежуточное 30.

[Speaker 3] (45:18 - 46:12)
Смотри, я хочу просто еще прокомментировать, что когда мы делали для FedEx вот эти все работы, у них было там много адресов, у них и 10, и 15 тысяч было. Мы всегда считали, что верхняя граница работы вот этой оптимизации общей, это типа 30 минут. То есть, если больше 30 минут там на матрицу, на все другие вещи, то мы считали, что это проблема.

Но, Дэн, я помню просто когда-то ты говорил о том, что мы хотим как бы стратегию оптимизации сделать, чтобы она, во-первых, была быстрая, но, с другой стороны, мы должны иметь режим, когда мы типа запустили условно на ночь, и она там себе колбасится. Там, не знаю, час, два, пять часов и так далее. Мы вообще планируем это делать где-то в будущем для сложнейших кейсов или нет?

[Speaker 1] (46:13 - 46:37)
Если ваша архитектура это позволяет, но мое мнение просто, что если у тебя есть 100 тысяч адресов, они не могут быть все в одной территории. Значит, ты делаешь тогда сразу параллельно 100 задач. И это делается не за 10 часов, а за 10, разделенное на 100.

Каждая 10 минут работает.

[Speaker 3] (46:38 - 47:07)
Нет, Дэн, мы с тобой с самого начала говорили, что мы без кластеринга не обойдемся, потому что нам все равно нужно одна регионы разбивать. То, что ты говоришь, 2000 лимит, у нас 1500 лимит, и мы автоматически на МП включаем кластеризацию. То есть просто на регионы без депо разбивки.

Но тут вопрос того, а хотим ли мы всегда разбивать на территории, или у нас будет условно...

[Speaker 1] (47:07 - 47:36)
Мы хотим заранее разбивать на территории. Одна из вещей, которую вы сделаете в следующей версии того, что вы сейчас показываете, это промежуточный выбор настроек территорий. И они будут как входные параметры приходить в Strategic Solver.

[Speaker 3] (47:37 - 47:39)
Там ребята карту еще не показали.

[Speaker 1] (47:39 - 47:46)
Я понимаю, я должен двигаться, они меня ждут.

[Speaker 6] (47:58 - 47:59)
Окей, спасибо.

[Speaker 1] (48:03 - 48:09)
Если они хотят быстро показать карту, окей. Покажи, пожалуйста, карту.

[Speaker 5] (48:13 - 48:46)
Адрес BookMap. Да-да, секунду. Буквально две минуты.

Так, удалось оптимизировать изначальную загрузку адрес BookMap при десятках тысяч адресов. Раньше загрузка полная занимала до минуты для клиента. Из них примерно 30 секунд загрузка адресов.

Сейчас адреса загружаются в 8 секунд.

[Speaker 1] (48:48 - 48:54)
Почему этот клиент имеет столько вещей? Что-то же неправильно тогда.

[Speaker 5] (49:01 - 49:10)
Это не сам аккаунт клиента, это тестовый аккаунт. Тут много адресов, много территорий, на котором мы тестируем загрузку. Насколько понимаю, у клиента снова...

[Speaker 8] (49:10 - 49:11)
Да, я понял.

[Speaker 3] (49:15 - 49:22)
Тут, Дэн, хорошо бы было, чтобы мы перешли на калистеризацию, потому что ребята сейчас по старой логике бомблят.

[Speaker 1] (49:22 - 49:28)
Они даже не должны пользоваться. Адрес Book старый, это просто шумошествие, что мы его прежнее пользуем.

[Speaker 5] (49:29 - 49:39)
Нет, Дэн, мы оптимизировали еще с целью, что ты эту страницу используешь иногда на демо, чтобы она тоже быстрее грузилась и работала.

[Speaker 1] (49:42 - 49:47)
Я ее использовал на демо, потому что мы сделали Search Groups. Да, да.

[Speaker 5] (49:51 - 49:54)
Два вопроса сложились в один, поэтому сделали.

[Speaker 1] (49:55 - 50:02)
Окей, я понимаю. Сделали так, сделали. Спасибо.

Там была проблема с Backend Performance, а не Frontend Performance.

[Speaker 5] (50:05 - 50:06)
Фронтенд тоже хромал.

[Speaker 3] (50:06 - 50:09)
Да, там две проблемы были.

[Speaker 5] (50:15 - 50:24)
Так, поэтому вопрос у меня взял. Так, Игорь, ты говоришь еще карту на стратегике показать?

[Speaker 3] (50:26 - 50:28)
Я так понял просто то, что Монар показывал.

[Speaker 5] (50:29 - 50:31)
Нет, там таблица была. С фильтром? Уже нет.

[Speaker 3] (50:31 - 50:41)
Там только таблица, там только таблица, правильно? Без карты. Потому что я иконку карты видел сверху для Customer Location.

[Speaker 6] (50:41 - 50:47)
Это артефакты, это недоделки просто в процессе.

[Speaker 5] (50:50 - 50:52)
Артур, ты успеешь задать вопрос свой?

[Speaker 4] (50:56 - 51:32)
Да. Давай. Ты в чате ночью писал, что лимит 100 веклов на аккаунт, он не правильный.

У нас это дефолтный лимит на организацию, на родственную организацию 100 веклов. И потом мы через Admin панель можем увеличивать его. Может его нужно тогда поднять этот лимит?

[Speaker 1] (51:36 - 52:04)
Мы с Игорем говорили на эту тему, и мы с ним обои немножко в шоке о чем вы говорите, о чем мы говорим. Мы говорим насчет, что там конкретно написано максимум 100. И потом ты заходишь в Admin панель, и там есть секция, где ты можешь поднять со 100 на 500 или на 1000.

И ты где-то сделал, что-то не поднялось, значит настройка...

[Speaker 4] (52:06 - 52:09)
Это да, это другая проблема, это кэш.

[Speaker 1] (52:11 - 52:12)
Нет, там нет кэша.

[Speaker 3] (52:15 - 52:34)
На самом-то деле там есть кэш, и он действительно не скидывается. Ребята сделают утром, но там действительно проблема с кэшом. То есть это еще старый кэш, который не тот, который обновляется постоянно при изменении.

Там действительно была проблема с кэшом.

[Speaker 1] (52:38 - 52:39)
И что, он сбросился?

[Speaker 3] (52:40 - 53:10)
Ну он сейчас будет сбрасываться. После каждой манипуляции с этими полями он будет сбрасываться. А не просто у нас две модели кэшируются.

Одна сбрасывается, а другая кэшируется. Завтра мы до демо, до вашего звонка, это все будет на продакшне.

[Speaker 4] (53:27 - 53:53)
Ну для патча этого клиента я вижу, он уже скинулся. То есть уже этого лимита там нет. Тут вопрос, кроме фикса с кэшем, возможно этот лимит нужно увеличить?

[Speaker 1] (54:05 - 54:26)
Проблема там это то, что человек пошел, соединился, и потом после соединения он не видит ни одной машины. Как будто бы до лампочки вся эта была интеграция.

[Speaker 4] (54:31 - 54:42)
Да, то, что дефолтный фильтр не включал пендинг, это тоже, если еще не исправлено, вот скоро будет.

[Speaker 1] (54:43 - 54:48)
User's Vehicles ты включил теперь во все новые пакетики по умолчанию?

[Speaker 4] (54:48 - 54:56)
Вот эти чекбоксы, да. Чекбоксы это map players, map settings.

[Speaker 1] (55:08 - 55:29)
Как только человек имеет Telematics Gateway, как мы не можем по умолчанию иметь дочернюю модуль, dependency модуль, что тебе нужен вехал, как только тебе нужен вехал трекинг, ты включил Telematics Gateway?

[Speaker 4] (55:40 - 56:25)
В какой-то момент при манипуляции с map players, при перепривязке к фичам, вот эти User's и Vehicles чекбоксы, их привязали к фиче, и она не была добавлена в пакеты по дефолту. Но тут другая проблема еще есть, что для routes лист карты, для страницы routes, нету Tracking History, как у Route Editor.

[Speaker 1] (56:29 - 56:30)
Я не понимаю, что мне ждут.

[Speaker 4] (56:34 - 56:54)
В Route Editor мы можем смотреть трекинг пасс, когда у нас breadcrumbs соединяются в маршрут, как ехал водитель. А вот для карты списки маршрутов, этого нет еще.

[Speaker 1] (56:54 - 57:11)
А зачем это надо? Я говорю насчет, ты открываешь список vehicles, и там нету Vehicles Map, ты открываешь Vehicles Snapshot, и в Vehicles Snapshot там нету ничего.

[Speaker 4] (57:12 - 57:45)
Вот, для страницы routes вот эти чекбоксы Vehicles Users включил, а для страницы Users, для страницы Vehicles, карты не включались, там было по багу, который сейчас их приоритизировали. В общем, оно не было доделано, чтобы это включить всем, потому что там не показывались все водители или все машины.

[Speaker 1] (57:45 - 58:31)
Я пытаюсь тебе сказать, что если ты откроешь Vehicles Snapshot, у нас есть API 15 лет, который отпутает Vehicle Location. Кстати, для Вадима, который с нами на звонке первый раз, я хочу сказать, что наши конкуренты, некоторые говняные, говорят, что у нас нет Vehicle Tracking, и они правы, хотя он у нас есть, потому что мы его не включили. У нас Vehicle Tracking только в контексте линковки к маршруту, а когда ты смотришь независимо на Vehicle, ты не увидишь, где твои машины и где они были.

[Speaker 8] (58:35 - 58:35)
Понял.

[Speaker 1] (58:37 - 58:42)
Контроль тоже самое, карта тоже самая, все то же самое, а ни черта не видно.

[Speaker 7] (58:43 - 59:15)
Хочу дополнить, у нас уже давным-давно записываются все истории машин. Игорь, может, поправишь меня, там нет полилайнов в этом ответе, конкретно по машинам и по юзерам. По раутам у нас есть полилайны, по машинам и юзерам нет.

Но при этом есть точки, сырые точки, которые мы можем, конечно, стритлайнами нарисовать, но это будет некрасиво, поэтому надо, во-первых, добавить на плакате полилайны, квиклайны и юзерам.

[Speaker 1] (59:15 - 59:20)
По какому мнению они некрасивы? Они точки из точки, они соединяются.

[Speaker 7] (59:20 - 59:21)
Стритлайны, я имею в виду.

[Speaker 1] (59:21 - 59:48)
Так наша задача отпутать точки. Это в первую очередь. А в вторую очередь это уже генерировать полилайны.

В третью очередь это что-то другое делать. Там приходит каждый 30-60 секунд с такими точками линия будет адекватная. У них есть локальная буферизация, у них есть локальная кэш.

У них, когда нет связи 5 часов, все равно придут все координаты.

[Speaker 3] (59:51 - 59:59)
Мы, кстати, начали собирать для маршрута полную полилинию уже этих девайсов.

[Speaker 1] (59:59 - 1:00:01)
Ты имеешь в виду Trips или Telematics?

[Speaker 3] (1:00:03 - 1:00:06)
Нет, с Telematics и Trips у нас уже давно есть.

[Speaker 1] (1:00:07 - 1:00:08)
Это в UI нет.

[Speaker 3] (1:00:09 - 1:01:08)
У нас в UI ее нет, да. Там нужно еще API закончить и будет в UI. Я говорю насчет того, что нам сейчас девайсы, телефоны присылают полилайны.

Прям не точки раз в 10, раз в минуту. Они нам присылают полилайны. Прям полный детальный путь того, как проехала машина.

То есть мы начали сейчас с Андрея, он занимается анализом этих данных и применением compliance алгоритм. Если все будет хорошо, то мы будем эти данные выводить в маршрутах. Но я не думаю, что мы там сможем как-то для машины одну такую длинную-длинную колбасу сделать, driving direction того, что он проехал за все время, для машины, для юзера и так далее.

Потому лучше точки для этого использовать.

[Speaker 1] (1:01:30 - 1:01:57)
Окей, я опаздываю на этот митинг очень. Там нет информации. Окей, я должен идти опять, я очень опаздываю.

[Speaker 8] (1:02:03 - 1:02:04)
Тогда пока.

[Speaker 1] (1:02:04 - 1:02:05)
Спасибо, пока.

[Speaker 5] (1:02:11 - 1:02:16)
Семен Манат, пока вы оба тут, давайте пока не убежали. У меня остался вопрос о...