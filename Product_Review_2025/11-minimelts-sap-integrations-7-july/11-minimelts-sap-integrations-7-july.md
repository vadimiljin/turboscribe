Green - Done   Blue - In Progress   Grey - No Discussion Needed   Orange - BackEnd   Yellow - Design
[https://route4me.zoom.us/rec/share/g3dwUc4KtDcrT7QqkfA75zM0d6sx1Lg3pau5KFQt-u8jwMsVnfmM9Plocpw_EY5k.s82uRrz28ULgoGWo?startTime=1751896142000](https://route4me.zoom.us/rec/share/g3dwUc4KtDcrT7QqkfA75zM0d6sx1Lg3pau5KFQt-u8jwMsVnfmM9Plocpw_EY5k.s82uRrz28ULgoGWo?startTime=1751896142000)
Passcode: ?S!Bz6D2
### Отчет по стратегической встрече с CEO
Дата: 07.07.2025Участники: Dan Khasis (CEO), Alexey Afanasev, Mihail Krivulya, Vova, Semeyon S, Alex Shulga, Serhii Kasainov, Igor Golovtsov, Anton Khavanskii, Kateryna Shevchenko, Oleksandr Ishchenko, Alexandr Kovtunov, Alexander Dylevskiy.Цель встречи: Обсуждение и принятие решений по ключевым направлениям развития продукта: архитектура ценообразования, генерация инвойсов (включая офлайн-режим), улучшение аналитики и устранение критических пробелов в функциональности по сравнению с конкурентами.
### 1. Архитектура ценообразования и себестоимости (Pricelists)
- Ответственные: Mihail Krivulya, Vova
- Время обсуждения: 00:00 - 15:15
- Краткое описание контекста/цели обсуждения:Пересмотр текущей модели хранения данных о ценах и себестоимости. Текущий подход, где цена хранится как атрибут товара, признан неверным и негибким. Цель – разработать новую, масштабируемую архитектуру.
- Основные моменты обсуждения и предложения команды:
  - Необходимо обновить структуру данных на основе решений предыдущей встречи (00:50).
  - Vova предложил концепцию Прайс-листов (Pricelists) как отдельной сущности, которая может иметь временные рамки (даты начала и окончания действия) и условия применения (например, для конкретного клиента или группы клиентов) (12:21).
  - Предложено реализовать редактирование цен в виде таблицы (spreadsheet-like UI), что позволит массово и быстро изменять цены для множества товаров и клиентов (11:15, 12:46).
- Ключевые указания, мнения и решения Дена:
  - Фундаментальное различие: Четко разделил понятия: "стоимость" (cost) – себестоимость, "прайс" (price) – цена продажи, "дельта" (delta) – прибыль или убыток (00:02).
  - Архитектурная директива: Категорически запретил хранить стоимость/цену на уровне основной сущности товара. Цена должна быть вынесена в отдельную, связанную таблицу (00:38).
  - Историчность данных: Каждое изменение цены должно создавать новую запись в базе данных, а не обновлять существующую. Необходимо хранить полную историю изменений с указанием даты, времени и автора изменения. Это критично для аналитики и аудита (03:57).
  - Ценообразование для клиентов: Система должна поддерживать разные цены на один и тот же товар для разных покупателей. Это необходимо реализовать через связь прайс-листа с клиентом (07:51).
  - Простота первой версии: В первой версии не нужно реализовывать сложные условные скидки (например, "если клиент купил на >$50k и вовремя оплатил счета"). Достаточно простой привязки "клиент -> товар -> цена" (15:30).
  - User Experience: Поддержал идею табличного интерфейса для редактирования цен, чтобы избежать "болезненного" процесса изменения цен для каждого клиента вручную (11:02).
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Перейти на новую архитектуру хранения цен. Цены и их история будут храниться в отдельной таблице.
  - Задача [Mihail Krivulya]: Перепроектировать схему БД для Inventory и создать новую схему для Pricing, обеспечивающую хранение истории изменений и привязку цен к клиентам.
  - Задача [Команда]: Проанализировать данные, чтобы выяснить, используются ли уже разные цены для разных клиентов.
  - Задача [Vova, Semeyon S]: Включить в бэклог разработку UI для массового редактирования цен в табличном виде.
- Итоговое саммари по теме:Принято стратегическое решение о полной переработке архитектуры хранения цен. Новая модель будет основана на отдельной, исторической таблице, что обеспечит гибкость (цены для разных клиентов), версионность и основу для будущей аналитики. Это фундаментальное изменение, направленное на устранение архитектурного долга.
### 2. Генерация инвойсов и работа в офлайн-режиме
- Ответственный: Semeyon S, Anton Khavanskii (Mobile)
- Время обсуждения: 21:20 - 58:02
- Краткое описание контекста/цели обсуждения:Определение технического подхода к генерации инвойсов, особенно в мобильном приложении водителя, которое может работать без стабильного подключения к интернету. Главный вызов — обеспечить корректность расчетов и целостность данных.
- Основные моменты обсуждения и предложения команды:
  - Backend vs Frontend: Обсуждались два подхода: вся логика на бэкенде или дублирование логики на мобильном устройстве для офлайн-режима (23:42).
  - Кэширование: Для работы офлайн мобильное приложение должно кэшировать у себя данные (прайс-листы, инвентарь) (28:53).
  - Технические решения:
    - Предложено использовать SQLite на мобильном устройстве. Бэкенд будет генерировать упрощенную схему и SQL-запросы для расчетов, которые мобильное приложение будет просто выполнять (28:14, 47:24).
    - Рассматривались варианты с Firebase или Cloudflare Workers как единой средой для выполнения логики, доступной и для бэкенда, и для мобильных клиентов (49:27, 50:41).
  - Безопасность: Поднят вопрос о защите от подмены данных. Предложено шифровать SQL-запрос или использовать чек-суммы для проверки целостности при синхронизации (54:50, 57:00).
- Ключевые указания, мнения и решения Дена:
  - Приоритет UX: Для водителя процесс должен быть мгновенным, без задержек, независимо от наличия интернета. Локальное кэширование и расчеты — обязательны (34:21).
  - Финальная проверка на бэкенде: Несмотря на расчеты на клиенте, бэкенд должен проводить финальную перепроверку данных после их получения (34:40). Если цены изменились, пока водитель был офлайн, инвойс на сервере должен быть скорректирован.
  - SQL как универсальный язык: Поддержал идею использования SQLite и передачи SQL-запросов с бэкенда. Это избавляет мобильных разработчиков от необходимости реализовывать сложную бизнес-логику. "Сиквел для этой задачи идеальный супер быстро лежит" (48:15).
  - Простота и надежность: Отклонил сложные решения. Логика должна быть простой, чтобы ее можно было легко воспроизвести. В первой версии нет нужды в сложных проверках актуальности кэша; по умолчанию доверяем данным на устройстве (37:00).
  - Уникальный идентификатор: Каждая транзакция, созданная офлайн, должна получать уникальный ID (например, UUID v4) на стороне клиента, который затем будет использоваться для ее идентификации на сервере (1:36:46).
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Для офлайн-расчетов используется SQLite на мобильном устройстве. Бэкенд предоставляет данные для кэширования и готовые SQL-запросы для вычисления суммы инвойса.
  - Задача [Backend Team, Mihail]: Разработать API, которое будет отдавать упрощенную схему данных и SQL-запросы для мобильного приложения.
  - Задача [Mobile Team, Anton]: Реализовать механизм кэширования данных в SQLite и выполнения полученных SQL-запросов.
  - Задача [Semeyon S]: Продумать и описать механизм защиты от подмены данных при синхронизации (шифрование/подпись пейлоада).
- Итоговое саммари по теме:Выбран гибридный подход к генерации инвойсов, сочетающий скорость на клиенте и надежность на сервере. Мобильное приложение будет работать с локальной копией данных (SQLite) и выполнять SQL-запросы от бэкенда для мгновенных расчетов. Это минимизирует дублирование бизнес-логики и обеспечивает отличный пользовательский опыт для водителя.
### 3. Пользовательский сценарий водителя: выполнение заказа и печать чека
- Ответственный: Vova, Anton Khavanskii
- Время обсуждения: 1:00:50 - 1:36:40
- Краткое описание контекста/цели обсуждения:Детальное обсуждение UI и UX водителя в мобильном приложении в момент доставки: модификация заказа, подтверждение, получение оплаты и печать физического чека (инвойса).
- Основные моменты обсуждения и предложения команды:
  - Водитель должен иметь возможность модифицировать заказ: менять количество товаров (больше/меньше), добавлять новые позиции, которых не было в изначальном заказе (1:05:13).
  - Подтверждение количества может происходить через сканирование штрих-кодов или ручной ввод (1:18:55).
  - Vova предложил идею визуализации расположения груза в кузове, чтобы помочь водителю быстрее находить нужные коробки (1:20:14).
  - Предложено печатать чек на внешнем Bluetooth-принтере, который будет содержать детали заказа (наименование, кол-во, цена, сумма) и уникальный QR-код или ID транзакции (1:14:15, 1:35:30).
- Ключевые указания, мнения и решения Дена:
  - Гибкость настроек: Администратор системы должен иметь возможность настраивать права водителя:
    - Разрешать или запрещать модификацию заказа (1:04:33).
    - Разрешать или запрещать продажу большего количества товара, чем есть на борту (должна быть настройка, т.к. иногда товар могут довезти другие машины) (1:26:01).
    - Требовать или не требовать обязательное сканирование для подтверждения (1:31:19).
    - Определять, можно ли выполнить заказ только целиком или частично ("fill or kill") (1:28:40).
  - Печать — критически важна: Отметил, что без возможности распечатать физический чек/инвойс вся система практически бесполезна для многих бизнесов. Это "машина без руля". Печать – это не опция, а необходимость (1:15:22).
  - Данные на чеке: На чеке должен быть уникальный идентификатор транзакции (UUID), который можно представить в виде штрих-кода, для легкой идентификации в системе (1:37:37).
  - Подпись: Подпись покупателя важна как доказательство для бухгалтерии компании-клиента, а не для самого подписавшего. Возможность включать/отключать подпись в чеке должна быть настраиваемой (2:32:38).
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Функционал инвойсинга будет включать гибкие настройки прав водителя на модификацию заказа.
  - Решение: Печать чеков на Bluetooth-принтере является обязательной частью функционала.
  - Задача [Mobile Team, Anton]: Реализовать UI/UX для модификации заказа (счетчики, добавление товаров) и интеграцию с Bluetooth-принтерами для печати чеков.
  - Задача [Backend Team]: Добавить в настройки аккаунта/ролей флаги, управляющие правилами модификации заказов водителем.
  - Задача [Vova]: Проработать дизайн чека, включив в него все необходимые поля и UUID в виде штрих-кода.
- Итоговое саммари по теме:Проработан детальный сценарий работы водителя на точке, который включает гибкую модификацию заказа и обязательную печать чека. Ключевым является введение настраиваемых правил, которые позволят адаптировать приложение под разные бизнес-процессы клиентов, от строгих до более гибких.
### 4. Устранение системных пробелов: Линковка данных и Аналитика
- Ответственный: Вся команда
- Время обсуждения: (обсуждалось на протяжении всей встречи, особенно 2:40:00 - 3:04:30)
- Краткое описание контекста/цели обсуждения:Ден выразил крайнюю неудовлетворенность текущим состоянием аналитики и отсутствием базовых связей между ключевыми сущностями, что делает систему непригодной для крупных клиентов и не позволяет получать элементарные бизнес-инсайты.
- Ключевые указания, мнения и решения Дена:
  - Критический недостаток: Отсутствие фильтрации и группировки по Складу/Филиалу (Facility) на всех основных экранах (Карта, Маршруты, Заказы) — это "сумасшествие" и главный блокиратор для любого серьезного клиента с несколькими складами (2:39:36, 2:44:15).
  - Необходимые связи:
    - Route должен быть жестко привязан к Facility.
    - Order должен быть привязан и к Customer, и к Customer Location, и к Facility. Это должно быть записано на момент транзакции, чтобы избежать проблем при последующем изменении данных (например, продаже локации другому владельцу) (2:52:05, 3:30:36).
  - Простые, но важные KPI: Система не может ответить на элементарные вопросы:
    - Покажи все маршруты, которые сейчас опаздывают (2:42:38).
    - Покажи все заказы для клиента X или со склада Y (3:37:54).
  - Агрегация вместо списков: Длинные списки маршрутов или заказов бесполезны. Нужна агрегированная информация: дэшборд, сгруппированный по складам, показывающий ключевые метрики (кол-во маршрутов, % опозданий, кол-во заказов) для каждого склада (2:45:40).
  - Сравнение с конкурентами: Конкуренты решили эти проблемы 10-15 лет назад. Их интерфейс может быть уродливым, но он предоставляет функциональность, которую ожидают клиенты (1:50:50).
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Приоритетно реализовать полноценную привязку сущностей (Route, Order) к Facility и Customer.
  - Задача [Backend Team, Alexander D., Alexandr K.]: Обеспечить, чтобы API возвращало информацию о привязках (Facility, Customer) в эндпоинтах Route и Order. Проверить и доработать таблицу meta-data.
  - Задача [Frontend Team, Semeyon S.]: Добавить фильтр по Facility на верхний уровень интерфейса на страницах Карты, Маршрутов и Заказов для быстрого доступа.
  - Задача [Backend/Frontend]: Добавить вычисляемое поле "Опоздание старта" (Actual Start Time - Planned Start Time) и возможность сортировки/фильтрации по нему.
  - Задача [Mihail Krivulya]: Предоставить команде информацию об API эндпоинте, который возвращает метаданные (связи сущностей), чтобы его можно было использовать во фронтенде.
- Итоговое саммари по теме:Это был самый критический блок встречи. Принято решение о необходимости срочного устранения фундаментальных пробелов в архитектуре данных и аналитике. Без надежной привязки к Складам и Клиентам и без базовых агрегированных отчетов продукт неконкурентоспособен. Эти задачи являются высокоприоритетными.
### 5. Запрос от BloomNet: White-Label Брендинг
- Ответственный: Alexandr Kovtunov, Alex Shulga
- Время обсуждения: 3:45:16 - 3:48:40
- Краткое описание контекста/цели обсуждения:Обсуждение статуса по задаче для клиента BloomNet, которому срочно требуется продемонстрировать возможность White-Label брендирования (отображение их логотипов) в Order Snapshot.
- Основные моменты обсуждения и предложения команды:
  - Команда сообщила, что функционал находится в разработке, но еще не готов для демонстрации на продакшене. Генерация тамбнейлов для API v4 еще не завершена.
  - Предложено выкатить предварительную версию на стейджинг, чтобы Ден мог показать ее клиенту.
- Ключевые указания, мнения и решения Дена:
  - Требуется срочно показать клиенту прогресс, даже если это будет на стейджинге и с "липовыми" иконками.
  - Необходимо подготовить аккаунт на стейджинге с включенным функционалом Attachments и загруженными логотипами.
- Принятые решения и Задачи/Следующие шаги:
  - Задача [Команда разработки]: Включить wardrobe для аккаунтов BloomNet и Planeta на стейджинге.
  - Задача [Команда разработки]: Загрузить на стейджинг примеры логотипов в Order Snapshot.
  - Задача [Команда разработки]: Предоставить Дену доступы к готовому для демонстрации аккаунту на стейджинге к завтрашнему звонку с клиентом.
  - Кастомный Link на приложение в email темплейте Invite Whitelabel [[Alexey Afanasiev](mailto:alexey@route4me.com)]
- Итоговое саммари по теме:Команда обязалась подготовить демонстрационную среду на стейджинге, чтобы показать клиенту BloomNet функционал White-Label брендинга и снять напряжение в коммуникации.
