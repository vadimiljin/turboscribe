# Транскрипт встречи (Summary)

**Дата:** 2025-07-07 13:49
**Длительность:** 03:48:55
**Участники:** 12
**Точность:** 93.5%

---

**Dan Khasis** [00:00:00 - 00:00:20]: Кост — это стоимость, а прайс — это сколько ты продал, а дельта — это прибыль или убыток. Понимаешь разницу?

**Mihail Krivulya** [00:00:21 - 00:00:23]: Да, понимаю.

**Dan Khasis** [00:00:25 - 00:00:46]: В принципе, мы даже не хотим это мэппить, потому что это неправильно там мэппить. Я напомню сейчас, почему это неправильно. Это неправильно, потому что стоимость должна в другом месте быть. Стоимость не может быть в...

**Mihail Krivulya** [00:00:50 - 00:01:07]: Да, здесь надо обновить на основании пятничного звонка. Там был этот комментарий про кост и прайс.

**Dan Khasis** [00:01:21 - 00:01:53]: Ситуация в том, что мы не имеем права сохранять больше кост и прайс на уровне сущности самого энтити. Мы должны сделать дочернюю таблицу, которая будет на уровне товара иметь историю цены изменений. Понимаешь?

**Mihail Krivulya** [00:01:54 - 00:01:55]: Да, понимаю.

**Dan Khasis** [00:01:56 - 00:02:55]: Чтобы это сделать, мы должны сделать отдельную таблицу на уровне рута. И на уровне рута там будет эта информация. И там будет имя товара, и потом... То есть item type, и потом дефолтная стоимость, и потом информация насчет, кто это ввел в систему. Или юзер, или внешний сервис, аккаунт ID, и так далее.

**Mihail Krivulya** [00:03:01 - 00:03:03]: Это понятно, да.

**Vova** [00:03:13 - 00:03:17]: И аналогично не только кто ввел, но кто потом обновлял, когда обновлялось.

**Dan Khasis** [00:03:21 - 00:05:03]: Нет, это неправильно. Потому что с точки зрения бизнеса это правильно, с точки зрения интерпретации программистов это неправильно. Потому что каждую модификацию мы не имеем права. Это экземпляр, почему проект менеджеры, я не говорю тебе, Вове, в целом не могут быть проект менеджеры. Или играться, что они архитекторы, потому что информация... Это то, что каждая модификация обязана иметь свой ряд в базе данной. И потом там будет эффективная дата той модификации и история всех предыдущих значений. Если поменять старое значение на новое значение в этом переменном, и только писать таймштемп, тогда все потеряется, вся история.

**Mihail Krivulya** [00:05:03 - 00:05:28]: Мы обязаны иметь все в правильном методе, в правильной ситуации. И в этом случае это множество рядов на уровне одного айтема, и как цены меняются по времени.

**Dan Khasis** [00:05:54 - 00:08:01]: Потом нам нужны цены. Цены идут во вторую таблицу. То есть первое ты создаешь инвентарий, потом ты берешь цену. Кост нас не беспокоит в первой версии, забудьте кост. И в принципе, как они кост считают других проблем, это то, что проблема в других системах, я имею ввиду, это стоимость начальных сущностей и их кост, которые входные компоненты этой другой системы. И тогда сумма запчастей является настоящей стоимостью запчастей и труда. В нашем случае нам только кост нужен. Но пока в первой версии нам только нужен сейл прайс. Если речь идет насчет сейл прайса, самое важное для сейл прайса, нам нужно проверить, если у них есть разные цены этого же товара для разных их покупателей. Мы знаем, если это есть или нет.

**Mihail Krivulya** [00:08:06 - 00:08:18]: Если только данные смотреть с одинаковыми айтами.

**Dan Khasis** [00:08:22 - 00:11:28]: Просто они по разным ценам продают разным людям. Было бы хорошо, чтобы мы это исхватили, потому что второй тип сущностей называется кастомерс. Было бы хорошо, я думаю, загнать в эту базу и потом сделать элементарный квери. В этом квери взять и посчитать среднюю стоимость этих товаров. В какой-то момент, если у нас будет item snapshot, мы какую-то элементарную аналитику сможем показать. Например, среднее количество, сколько ты продаешь, каким клиентам, за какие деньги. Чтобы на одном экране было элементарно видно какие-то вещи насчет этого. Потому что сейчас, например, если мы откроем кастомер, и у тебя прайс-щит, и мы сделаем синг-прайс-щит, как люди будут видеть прайс-щит. Я вообще предлагаю прайс-щит сделать, как вы сделали тот компонент. Этот компонент, который вы подобрали, Семен, для recurring schedule optimization. Тот компонент идеально бы подошел для большего режима обновления этого прайс-щита, где они могут моментально включить или выключить, или поменять цифры, множество рядов, или drag-and-drop вниз, и copy-and-paste 50 рядов по кастомеру. Иначе, если они не увидят мастер прайс-щит по всем кастомерам в одном месте в режиме прайс-щита, они должны руками заходить в 50 мест и менять. Это очень болезненно для многих, для всех.

**Semeyon S** [00:11:31 - 00:11:37]: Ты имеешь в виду in-line редактирование, массовое редактирование, вот такие штуки?

**Dan Khasis** [00:11:38 - 00:12:18]: Да, в первой версии даже без масса, просто in-line, как вы сделали с тем же компонентом, где просто выбирается, ты выбрал, ты прыгаешь с ячейки в ячейку, она прыгает вниз, и ты за 30 секунд поменял стоимость одного товара у 25 клиентов, и ты не кликнул ни разу. В отличие от, давай, я кликну на клиента, я кликну на товар, я кликну на стоимость, я кликну на товар, я увижу стоимость этого товара по клиенту. То есть это все уже есть в этом базе.

**Vova** [00:12:19 - 00:13:27]: Я представил себе, что price list – это будет отдельная сущность, ты ее создаешь, в нее заносится либо балком автоматически, либо можно выборку сделать руками, какие товары ты хочешь в этот price list добавить. Можешь либо сразу все добавить, которые у тебя есть, либо частично, по какому-то фильтру, например. После того, как ты добавил туда товары, ты можешь расставить им цены. И редактирование price list в Excel в подобном виде, где ты можешь множество ячеек in place редактировать. А потом у этого price list у него есть имя, у него есть диапазон дат, когда он вступает в силу, когда он заканчивает действовать, и у него могут быть conditions, при каких условиях он должен применяться. Ну, conditions мы не делаем в первой версии. Да, в первой версии мы не делаем, но потом во второй версии можем делать простейший condition. Это, например, customer name или группа кастомеров condition. Простейший condition.

**Dan Khasis** [00:13:34 - 00:13:44]: Condition будет нам неприятно делать в режиме batch, потому что если там есть pricing conditions, тогда batch не будет работать, потому что он более примитивный spreadsheet.

**Vova** [00:13:44 - 00:14:36]: Condition будет целиком на весь price list распространяться. Если ты хочешь несколько разных conditions, то ты делаешь несколько price lists на каждый свой condition. Не на отдельный товар в condition, а на целый price list. Если тебе нужен conditional цена на один товар для одного клиента, то ты делаешь специально price list на один товар для одного клиента. Я могу показать черновик.

**Dan Khasis** [00:14:36 - 00:14:51]: Я понимаю, что ты говоришь, что здесь вопрос времени. Если это плохо, то это неплохо. Просто в первой версии нам надо...

**Vova** [00:14:51 - 00:15:12]: В первой версии у нас будет один единственный price list, и не будет его возможности заставить второй. У тебя просто будет один price list, который ты задаешь параметры. Как только мы хотим override для каких-то клиентов, разная цена для разных клиентов, тогда мы добавляем conditions и возможность делать несколько price lists одновременно.

**Dan Khasis** [00:15:13 - 00:15:21]: Нет, мы не должны conditions делать.

**Vova** [00:15:21 - 00:15:29]: Мы можем просто сказать, что какой-то customer для такого-то товара имеет какую-то цену, потому что есть default цена и есть customer specific цена.

**Dan Khasis** [00:15:29 - 00:16:42]: Да, вот это и есть condition. Для какого customer применяется эта цена? Это не condition. Для меня condition это, если чувак заказал 50 тысяч таких объектов за последние 30 дней и заплатил вовремя свой предыдущий счет, и у него еще есть 50 тысяч новых на заказе, тогда я хочу ему дать скидку. Это как SAP поддерживает, но мы не хотим же это поддерживать. Нам нужна элементарная арифметика, что чувак платит столько-то за яблоки. Проблема в том, что серьезные фирмы никогда не перейдут на нашу систему для биллинга. Это вообще немножко даже дикость, что фирма как Minimalist хочет пользовать нас, генерировать invoice, а не SAP, который авторитет во всем мире для финансирования финансов. Понимаешь, что я имею в виду?

**Vova** [00:16:43 - 00:16:52]: Я понимаю, они хотят на уровне operations генерировать invoice, а ERP делает на более высоком уровне.

**Dan Khasis** [00:16:53 - 00:17:04]: Нет, ERP делает по всем уровням. Да? Да. Они просто почему-то боятся это делать там.

**Vova** [00:17:04 - 00:17:13]: Там нет мобильного приложения. Вот почему. Ну да, я понимаю, что они хотят, чтобы драйвера генерировали invoice, а ERP такого не делает.

**Dan Khasis** [00:17:13 - 00:17:25]: Они пользователи должны купить систему, называется DSD. Direct Store Delivery. И она уже у себя это делает. Но RoadNet это тоже 20 лет делает.

**Vova** [00:17:35 - 00:17:46]: Возвращаясь к кондиционерам, ток, на кого цена распространяется, это тоже условие. Неважно, называть его кондиционер или не кондиционер. Это просто какая-то метка.

**Dan Khasis** [00:17:46 - 00:17:49]: Для меня это relationship, а не condition. Вот в чем разница.

**Vova** [00:17:52 - 00:17:55]: Ну да, неважно, как это называется.

**Dan Khasis** [00:17:55 - 00:18:01]: Relationship это отношение, а condition это зависимость. Или какие-то...

**Vova** [00:18:01 - 00:18:14]: Но по-русски это условия. На каких условиях этот пресс-лист вступает в силу? И кто клиент, это одно из условий, которые возможны.

**Dan Khasis** [00:18:16 - 00:18:28]: Нет, в этом... Это уже более философский разговор. Так следующая наша вещь какая?

**Semeyon S** [00:18:42 - 00:19:08]: Мы же хотели вроде mapping обсудить. И структуру базы данных. Но структура, я так понимаю, это уже на завтра. Или все-таки, Миша, ты можешь сейчас вытащить из моделек быстренько? Или анасера еще не готова?

**Dan Khasis** [00:19:10 - 00:19:15]: Если он пришел с SQL, мы пришлем редактированный SQL.

**Mihail Krivulya** [00:19:19 - 00:19:40]: У нас, как сказать, по тем моделям, которые уже существуют, по ним уже есть база данных. Ну вот Facilities, например. По Inventory я тоже брал ту текущую. Но, как я понял, она...

**Dan Khasis** [00:19:40 - 00:19:46]: Я говорю насчет pricing и inventory. Больше чем Facilities. Facilities мы не меняем.

**Mihail Krivulya** [00:19:47 - 00:20:06]: Ну вот, да. По Inventory я понял, что нужно переделать. По pricing, как я понимаю, это вообще новая таблица. То есть ее нужно создавать, да, с нуля. Ее пока нет.

**Dan Khasis** [00:20:11 - 00:20:19]: Окей, что следующее? Ты завтра черновик сделаешь? Или нам надо сделать отдельно вместе с тобой?

**Mihail Krivulya** [00:20:21 - 00:20:43]: Черновик сделаю. Ну, черновик, как сказать, по всем вообще возможным. То есть сначала этот черновик надо по маппингу. То есть то, что мы вначале обсуждали, поля маппить. По Inventory...

**Dan Khasis** [00:20:44 - 00:20:52]: Окей, мы тебе пришлем SQL на pricing. Давай, чтобы... Окей, мы тебе пришлем.

**Mihail Krivulya** [00:20:52 - 00:21:02]: Окей, что следующее тогда? У меня или вообще? Вообще.

**Dan Khasis** [00:21:13 - 00:21:41]: Семен, следующее это у нас... Как мы будем генерировать этот сам invoice. Давай представим, что у нас есть готово полностью этот... Полностью готовый. Все таблицы идеальны. Как мы invoice строим?

**Semeyon S** [00:21:46 - 00:24:49]: Все таблицы идеальны. Этот интерфейс со списком у нас invoice тоже какая-нибудь базовая табличка, допустим, есть. Синхронизация с сапом у нас тоже должна быть. Соответственно у нас возникает вопрос именно с генерацией самого invoice. Нужен ли нам PDF в этом случае? Вот. То есть прямо сейчас, я так понимаю, он не нужен. Но в будущем мы просто через сервис или через библиотечку питанячую будем генерировать invoice. При этом у нас в настройках должна храниться информация базовая для кастомизации invoice. То есть стандартные вещи для клиента. Лого как минимум должно быть опционально. Это должны быть контакты базовые, чтобы мы взяли какой-то invoice стандартный, общепринятый из ERP. И его имплементировали. Смотреть в HTML, если честно, я в современных системах как-то особого смысла не вижу. Разве что психологически как-то, чтобы посмотреть. А вот PDF, чтобы его можно было куда-то переслать, это может пригодиться. И еще такой вопрос есть. У нас же, но это не сколько минималца касается, сколько других систем, если я правильно понимаю. Что мы делаем с invoice с мобильного девайса? То есть мы делаем по паттерну, что мобильный девайс у себя накапливает данные, а потом с нами синхронизирует с бэкэндом? Или все-таки полагается полностью на генерацию от бэкэнда? Я, честно говоря, под минималц я бы все сделал пока что со стороны бэкэнда для упрощения и ускорения. Но в будущем на мобилочке может понадобиться создание invoice и синхронизация, потому что банально пользователь может находиться с плохим интернетом. Вкратце я это вижу так. Алекс, ты что-то добавить хочешь по поводу invoice?

**Alex Shulga** [00:24:49 - 00:24:53]: У меня и тут есть, и насчет facilities еще будет вопрос.

**Semeyon S** [00:24:53 - 00:24:54]: Давай насчет invoice.

**Alex Shulga** [00:24:55 - 00:25:47]: Да, насчет invoice, конечно. Первый вопрос насчет подписей. Я не совсем хорошо понимаю этот use case. Правильно ли я понимаю, что когда мы говорим invoice, мы говорим о том, чтобы сгенерировать его, но его подтверждение, подпись на нем, это другой процесс. Он будет проводиться на бумаге или через какие-то сервисы подписей. Или же мы говорим о том, как у нас недавно был пример PDF генератора для какого-то клиента, связанного с анализами. Когда они загружали подпись на стекле, на девайсе они расписывались, и мы генерировали invoice уже с подписью. Можете, пожалуйста, раскрыть вот этот момент. Нужна ли подпись?

**Dan Khasis** [00:25:47 - 00:28:52]: Я хочу сказать несколько слов насчет всего этого. Наша задача — это генерировать JSON. А как мы будем рендерить JSON, это уже другая вещь. Если мы будем рендерить headless кромом, чтобы PDF генерировать, у нас на скопе есть код, как мы это делаем. И он генерирует идеально в режиме PDF. Это первый пункт. Самое важное, что JSON-логика правильно генерируется. Вторая вещь — это да, нам нужно все правила и эвалюации делать на сервер-сайде. Но есть третий вопрос насчет того, что происходит на клиент-сайде, когда нет интернета. И мы должны аккуратно об этом подумать, потому что логика должна быть такая легкая и простая, что она не может иметь такие навырочки, например, conditional pricing и bulk discounts, которые придут с сервера на клиент-сайд, и потом Java и iOS должны будут расшифровывать все эти правила и потом зеркально делать им реализацию этих алгоритмов на обоих приборах. То есть, если мы должны идти на поверхность, то в первой версии у нас все идет через сервер-сайд, тогда все идет через сервер-сайд. Вторая идея — это можем ли мы написать эту логику и эти правила как бы... Окей, я дам две или три идеи. Первая — это идея насчет SQLite. Если мы как-то можем сгенерировать SQLite схему, тогда мобильщики смогут эту схему у себя синкнуть. То есть, мы на backend сделаем схему, которая будет более упрощенной версией нашей схемы, и по этой схеме мы дадим им SQL queries. Понимаете?

**Semeyon S** [00:28:54 - 00:29:01]: Чтобы они могли воспроизвести логику, плюс кэшировать данные у себя необходимые.

**Dan Khasis** [00:29:01 - 00:31:57]: Да, и тогда они не должны... Это один вариант. Второй вариант — это связан с... Сейчас, секунду. Можем ли мы написать это на каком-то стандартизованном языке или в стандартизованном подходе, где мы будем логику как-то писать или где-то будем логику как-то стерилизовать в режиме, где наши Java и iOS ребята смогут просто эти вещи скачать, как прайсбук. Это я послал в главном чете вчера насчет сервиса Titan, что они хвастаются, что у них есть прайсбук и прайсщит. И мы сейчас говорим, что у нас есть прайсбук и прайсщит. В принципе, они его называют прайсбук, прайсбук про. Мы можем посмотреть на это через секунду, прайсбук про. Но идея в том, что... Сейчас, секунду. В этом прайсбуке есть стоимость по разным товарам. По покупке и по продаже. Но с моей точки зрения, этот прайсбук мы должны кэшировать как-то у себя, у них на приборе. Но там будут проблемы. Например, какая проблема? Мы сделали эту фигню, и потом стоимость поменялась. Кто-то на сервере что-то поменял. Они в оффлайн режиме. Они сделали какую-то транзакцию. Транзакция пришла на бокенд после их модификации. Будем ли мы проверять еще один раз после трансмиссии, что действительно чексумы или другие вещи не поменялись?

**Semeyon S** [00:32:08 - 00:33:11]: Или нет? Я просто осмысляю. Тут вопрос важности. Например, можно на уровне настройки в аккаунте форсить. То есть, когда мы сохраняем какие-то такие важные действия, чтобы все-таки интернет был, и мы убедились, что были свежие цены на этот момент, если связи не было больше какого-то окна. Либо давать все-таки некоторую логику, что все-таки операция будет происходить по той цене, которая была на девайсе у человека. Правда, я не знаю, как клиенты отреагируют на такое.

**Dan Khasis** [00:33:12 - 00:33:58]: Нет, но идея в том, что если есть интернет, мы скачиваем с интернета. Если нет интернета, мы кэшируем локально. Если мы кэшируем локально, мы даем им всю схему, чтобы они могли себя аккуратно кэшировать без никакого усилия. Чтобы они могли сиквелом, кейс-стейтментом. Потому что даже если у нас будут диапазонные скидки, о которых Вова описывает, это все равно кейс-стейтмент, что когда кейс-каунт такого-то, больше такого-то, тогда такой-то, и эта сумма легко вычисляется.

**Semeyon S** [00:34:02 - 00:34:07]: Но еще мы должны предусмотреть, сколько мы кэшу этому верим.

**Dan Khasis** [00:34:08 - 00:36:04]: Правильно, вот почему я говорю, что после того, как мы получим данные, если наша задача, чтобы водитель мог моментально получить информацию, которая ему верна, без никаких задержек с интернетом или без интернета, тогда это легко, мы просто доверяем это. Но потом мы делаем финальную проверку. В итоге когда-то придет эта транзакция к нам. И когда она к нам придет, на тот момент мы сможем взять и проверить еще один раз, что цифры все сходятся на бокенде. И на инвойсе, на шаблоне они напишут, что цены какие-то as of this date, а date это будет дата таймштемпа, кэша. И если там что-то поменяется, значит кто-то все равно сможет в любую секунду это поменять. Экземпляр этих сценарий – это ATM-машины, где банкоматы получают информацию иногда пять дней после транзакции. А если у тебя не было денег на счету, когда ты делал транзакцию, тебя просто оштрафуют, и у тебя в минусы пойдет счет. Но на момент, когда это все было, и на момент, когда это все работало, когда транзакция происходила, на тот момент это все годилось? Или правильно было?

**Semeyon S** [00:36:15 - 00:36:50]: Да. То есть мы вот эту логику зафиксируем. Каких-то видеосхемок постараюсь описать. Но все равно нам же надо будет на уровне мобилочки добавить информацию, что вот у тебя кэш не обновлялся уже сутки или восемь часов, и блокировать работу этого функционала пока…

**Dan Khasis** [00:36:52 - 00:37:22]: Я думаю, что мы должны просто настройку сделать. По умолчанию пусть они пользуются старой версией. Я не думаю, что это так трагически. Плюс у нас кроме минималца желающих еще нет, пользовать этот функционал, так я бы не усложнял это, но мы можем с ними поговорить и какие-то сказать, что это констрейнты на первую версию.

**Semeyon S** [00:37:29 - 00:37:41]: А кстати, может, этой проблемы-то особой нет с интернетом? Может, минималц работает в тех территориях, где со связью все в порядке?

**Dan Khasis** [00:37:42 - 00:38:17]: Нет, со связью все в порядке, но иногда связи нет. Например, они пошли в подвал завести… Я не говорю, что это… Мы должны, даже если мы не делаем реализацию, мы должны сделать реализацию кэша с точки зрения… Мы должны просто какой-то минимум сделать для первой версии.

**Semeyon S** [00:38:24 - 00:38:36]: Ну да, потому что и просто перебои могут быть со связью, и водитель там может авиарежим случайно нажать. Это в мобилке всякое бывает.

**Dan Khasis** [00:38:40 - 00:39:24]: Есть третий вариант. Например, есть прогрессы в webapps и так далее, или native webapps, которые… Можем ли мы написать это не на PHP или что-то такое, а на Backend? Можем ли мы написать это на Backend в Node.js или в каком-то языке, в котором та система, те системы имеют возможность динамическую интерпретацию делать этой логике, чтобы они просто могли… Ты знаешь, как мы в Python можем сделать embed C++? Или в PHP можем embed сделать C++?

**Semeyon S** [00:39:31 - 00:42:22]: Я помню, что PWA… Сергей, я сейчас скажу, а ты меня поправишь. У PWA есть режим, когда они могут в локальном браузере и на мобильном устройстве, когда ты сохраняешь через Shortcut. Кэшировать свой исходный код на девайсе на какое-то время. Там в файле Manifest прописывается список файлов с данными. Можно сделать такую логику, которая у нас будет работать с invoice. И PWA эту логику подтягивает и уже ребята через WebView ее будут вызывать. Я не помню, что касается хранилища на мобильных девайсах, но на тестктопах, я знаю, можно данные хранить в индексе DB. Она там страшная, но есть всякие оберточки, которые упрощают, и мы там такую квази SQL запустить сможем. Есть, конечно, всякие еще экзотические варианты, типа попробовать SQLite через Wasm запустить, но это надо проверять, насколько стабильно будет работать, особенно на мобильных девайсах. Я же так понимаю, у нас задача не просто логику, но нам же еще данные где-то надо хранить на следующий, если у нас проблемы будут со связью. А если мы считаем, что у нас связь есть всегда, то это PWA, кэшируем код в WebView, просто показываем, и через вызовы WebView, наверняка есть механизмы взаимодействия с основным кодом, просто передаем данные, взаимодействуем с обычной мобилочкой. Так SuperApp сейчас некоторые работают. Ты там в нем лазаешь, у тебя все нативное, потом нажимаешь на какую-нибудь иконку, а у тебя просто видно, что появился WebView, потому что у тебя интерфейс поменялся, отзывчивость стала чуть хуже. Такие подходы, особенно на хорошей сети, активно сейчас используются в приложениях. Ты, Сергей, как-то дополнить здесь можешь?

**Serhii Kasainov** [00:42:25 - 00:42:50]: Там с PWA много чего интересного можно делать. Можно делать очереди этих запросов. Пока API не воскреснет, но в любом случае это решение на случай коротких перебоев связи. То есть полноценно пользоваться приложением ты не можешь. Ты просто не получаешь ошибку с потерей данных, а данные твои ждут, пока API не пришлет ответ.

**Semeyon S** [00:42:53 - 00:43:01]: У нас invoice, то есть это набор line-items и посчитать общую сумму. Данных-то немного.

**Serhii Kasainov** [00:43:03 - 00:43:35]: В плане, что последние изменения в этом invoice, они не исчезнут просто так, и пользователь не застрелит свой девайс. Но опять же, оно все модулирует, что приложение не умерло. Но по факту без доступа к API, оно все равно не совсем живое. Поэтому оно просто ждет и держит в себе все данные, пока API не пришлет ответ. И тогда оно их в порядке очереди обрабатывает и, соответственно, присылает корректные ответы пользователю.

**Semeyon S** [00:43:36 - 00:43:44]: А что с индексом DB, с этими решениями? Индекс DB вообще может очень много данных хранить, гигабайты.

**Dan Khasis** [00:43:44 - 00:43:49]: У нас invoice с 1000 рядов максимум.

**Igor Golovtsov** [00:43:52 - 00:44:09]: Нет, если я правильно помню, индекс DB доступен в процентах от общего объема диска. И там что-то в духе гигабайтами это исчисляется. Это не как local storage, который 4 мегабайта и все.

**Semeyon S** [00:44:10 - 00:44:13]: То есть там тысячу записей мы точно засунем.

**Dan Khasis** [00:44:13 - 00:44:17]: Какой local storage? Мы только говорим о мобильном приложении. Там нет...

**Igor Golovtsov** [00:44:18 - 00:44:27]: Должно получиться. Там хром он инкогнито, по-моему, несколько сотен мегабайт дает. А в полноценном браузере...

**Dan Khasis** [00:44:27 - 00:44:33]: Мы не говорим о вебе. Нам веб ноль. Нам полностью наплевать насчет веба.

**Igor Golovtsov** [00:44:34 - 00:44:36]: Вебвью, это же есть браузеры.

**Dan Khasis** [00:44:38 - 00:47:37]: Мы никогда... Как мы можем пользоваться вебвью, embedded в мобильном приложении, и потом кэшировать их результаты? Они же не имеют доступ, наверное, в embedded, isolated контроллер. В embedded в каком-то внешнем хроме, который они за фреймом якобы вставили. Мы супер-пересложняем. У нас будет... Та же самая pricing schema синкнута на прибор. Мы уже синкаем на прибор постоянно... Как их звать? Align items? Ордера? Локации? Нет, локации мы... Нет, label scanning. Каждый вечер, если у тебя есть label scan для сорт скана, мы сканируем. Иногда сохраняем десятки миллионов или как минимум миллионы записей. Миллионы записей. Иногда. На SQLite. И там просто не было индекса. И они медленно работали. Но в итоге мы прибавили индекс и помогли... помогли ему с этим. Окей? Я нашел с 2016 года запись продакт-демонстрации Роуднета. Ого. Я пришлю его. Все, что нам нужно сделать, это... Они будут ее синкить у себя локально. SQL мы им напишем. SQL будет один в один. Просто будет select, count, сумма, сумма, сумма, и счетчик. Возвращается функция. И поехали. Они локально смогут посчитать у себя стоимость.

**Semeyon S** [00:47:37 - 00:47:46]: То есть останавливаемся на первом варианте? Если мы не хотим, чтобы они сами считали стоимость, мы можем даже SQL в payload им возвращать тоже.

**Dan Khasis** [00:47:46 - 00:48:09]: Чтобы вообще они не думали насчет логики. Давай им SQL будем возвращать с бэкэнда тоже. Пусть они кэшируют и SQL. И все. И они просто делают свой execution на своей стороне.

**Semeyon S** [00:48:10 - 00:48:14]: Собственно SQL будет нашим универсальным языком по логике.

**Dan Khasis** [00:48:15 - 00:48:21]: SQL для этой задачи идеально и супер быстро решит.

**Semeyon S** [00:48:21 - 00:48:27]: Отлично решено.

**Dan Khasis** [00:48:27 - 00:49:26]: Если мы хотим еще больше играться, мы можем пытаться через CDN это делать тоже. Но это не совсем правильное решение, потому что если у каждого клиента будут свои правила в итоге, в какой-то будущий момент, мы не сможем это кэшировать. Но если бы у всех были такие же правила, тогда бы мы могли это делать. Просто засунуть всю логику на Edge. Cloud Flare Edge Computing, где ламбда функция, ты вставляешь массив, она возвращает ответ. И наш backend пользует, и мобильно все пользуют. Если такие технологии, я не знаю, вы знаете лучше, чем я уже. Где универсальный engine можно внедрить в трех местах. Может быть это Node, может быть это что-то другое.

**Semeyon S** [00:49:28 - 00:49:51]: У Cloud Flare есть эти варкера. Хорошо поддерживается JavaScript, TypeScript. Другие языки поддерживаются, но плохо. Плюс у них сейчас есть хранилище. Я вот буквально на днях смотрел D1. Это по сути SQLite.

**Dan Khasis** [00:49:52 - 00:49:53]: Да, я смотрел тоже.

**Semeyon S** [00:49:53 - 00:50:17]: Распределенный. Эти Durable Objects, это документно ориентированная такая штука, тоже достаточно простая. И KValue хранилище, а-ля Redis, тоже попроще распределенное на CDN. Варкера в связке с D1 работают очень хорошо.

**Dan Khasis** [00:50:19 - 00:50:47]: Может быть там даже есть такая логика хорошая в этом. Как это называется? Firebase. Может быть Firebase имеет тоже хорошее кеширование, если мы их будем пользовать как Storage.

**Semeyon S** [00:50:51 - 00:51:00]: Firebase, они же, по-моему, за каждый запрос идут. Ну, они-то очень дешевые, копеечные.

**Dan Khasis** [00:51:00 - 00:51:04]: И мы будем только иногда делать этот запрос.

**Semeyon S** [00:51:20 - 00:51:27]: А насколько IOS с Firebase? Ну, Android, понятно он там про интеграцию.

**Dan Khasis** [00:51:27 - 00:51:29]: Он хорошо, у нас есть интеграция, он хорошо.

**Semeyon S** [00:51:29 - 00:51:30]: Уже есть интеграция, да?

**Dan Khasis** [00:51:30 - 00:51:31]: Да.

**Semeyon S** [00:51:32 - 00:51:51]: Уже SDK 7 лет пользуем. Плюс 6-7 лет. А для BackEnd и для FrontEnd там тоже все хорошо. Я когда-то давно смотрел из любопытства. Тоже может быть хорошим универсальным хранилищем.

**Dan Khasis** [00:51:51 - 00:51:55]: У них уже может быть кешинг, Capabilities какие-то.

**Semeyon S** [00:51:57 - 00:53:38]: Ну, возможно. Надо смотреть. Я смотрел их хранилище, как оно работает. Эти инкременты, распределение работает быстро, хорошо. Тарификация меня только тогда сильно напрягла. В принципе, тоже телодвижение минимальное. Рестапишечка есть из коробки. И, скорее всего, есть еще какой-то стриминг. Руки тогда не дошли его посмотреть. Мы с BackEnd асинхронно просто можем в ту базу данных настройки складывать в виде JSON объектов. И уже может подтаскивать мобилочка, коли SDK уже все проинтегрированы. Но мне какое-то решение... И тут с ребятами с мобилок надо пообщаться, что они скажут. Лично мне Cloudflare решения как Edge Computing нравятся больше. Они попроще, у них возможностей меньше. Но за счет этой простоты оно все очень хорошо и надежно работает. И предсказуемо. Но я только что попал на Firebase. Из-за популярности оно может работать на масштабе лучше. Плюс Cloudflare в Google оденет больше. Банально. Такие технологии.

**Dan Khasis** [00:53:42 - 00:54:10]: Это просто такой же sync метод, как и другие типы upload. Просто в этом режиме это sync payload JSON. И он висит в кэше, пока нет интернета. Интернет не вернулся, и на этом дело заканчивается.

**Semeyon S** [00:54:15 - 00:54:31]: Когда настолько простая штука, нам на самом деле даже все равно, что использовать. Лишь бы это было в договоренности одно место. Что прекрасно будет работать и на Cloudflare, и с R2.

**Dan Khasis** [00:54:33 - 00:55:19]: Просто мы должны будем какие-то минимальные защиты вставить. Чтобы у нас не было потеря некоторых типов данных. Например, мы должны будем делать ш1, шексум или что-то на SQL query. Чтобы какой-то умник не пытался поменять query, и сумма была все нули. Если, например, он хэкнет через Charles или что-то payload, перепишет SQL, SQL перешел. И теперь функция суммы всегда ноль, и invoice всегда ноль.

**Semeyon S** [00:55:25 - 00:55:43]: В смысле, мы пропускаем запрос у себя, считаем шексуму. Потом, когда к нам приходит результат, и сравниваем с шексумой результата, это имеешь в виду?

**Dan Khasis** [00:55:43 - 00:56:08]: Или шексумой результата. Не забудьте еще о том, что даже с кэшом, то есть если интернет есть, то очень медленно работает. Очень медленно все работает, если каждую маленькую вещь делать на этом через интернет. Правильно?

**Semeyon S** [00:56:09 - 00:56:58]: Ну да. Особенно, если данные большой объем гонять. Нет, они сжатые. Единственное, мы когда шексуму считаем, мы же не знаем заранее, какие айтемы соберет пользователь на мобильном девайсе. Здесь с шексумой результата у нас может быть расхождение, и расхождение нормальное. Надо будет немножко подумать, как вот эту вещь закриптовать, чтобы прогонять как-то универсально.

**Dan Khasis** [00:56:58 - 00:57:09]: Или ездить на шексуму пикриптом, где только ключ расшифровки годен на ту сессию, там JWT или чем-то таким. Что-то такое, да.

**Semeyon S** [00:57:11 - 00:58:02]: На короткую сессию. И в принципе такую логику можно запихнуть куда угодно тогда. А потом уже синхронно с нашей базой ее синхронизировать. Я завтра с утречка посижу на свежую голову, схемку набросаю взаимодействия. Вот еще немножко поковыряюсь насчет этого. По инвойсам мне все более-менее понятно.

**Dan Khasis** [00:58:04 - 00:58:15]: А может быть Антону пригласить на дзвонок? Он сейчас на интернете, потому что там есть хитрая.

**Semeyon S** [00:58:16 - 00:58:26]: Да, сейчас ему скину дзвонок. Ну, я вообще ребят спрашивал, придете, не придете. Смежную вещь будем обсуждать.

**Kateryna Shevchenko** [00:58:26 - 00:58:29]: Он сейчас в сети, давай я могу написать ему.

**Semeyon S** [00:58:31 - 00:58:33]: Давай, напиши.

**Oleksandr Ishchenko** [00:58:33 - 00:58:38]: Сделал прямой этот. Спасибо большое.

**Semeyon S** [00:58:38 - 00:58:45]: Он, оказывается, умеет. Да. Ну, что-то тогда постеснялись, а вообще дальше буду по умолчанию добавлять, да и все.

**Anton Khavanskii** [00:58:53 - 00:58:56]: Всем привет. Что за митинг? Он не завтра?

**Semeyon S** [00:58:58 - 01:00:49]: Мы обсуждаем интеграцию с сапом и инвойсинг. И, как следствие, на мобильных девайсах часть логики тоже должна быть реализована. То, что касается сборки и генерации инвойса, но и, соответственно, потом синхронизации этих данных с сервером. Мы только что варианты об этом обсуждали, что, скорее всего, маленький рекап, будем передавать на мобилочку данные для синхронизации на случай потери связи и, в принципе, для быстрого респонсив. И вместе с данными будет передаваться сиквел, как логика расчета конечных цифр для инвойса. И мы будем, скорее всего, этот сиквел отдельно внутри Payload шифровать бэкриптом с временной солью, чтобы уменьшить вероятность подмены при обратной синхронизации. И, в принципе, проект очень приоритетный, поэтому логику реализовывать будем оперативно. Соответственно, если у тебя есть какие-то срочные вопросы и все, что связано с инвойсами, мы сейчас можем обсудить.

**Dan Khasis** [01:00:52 - 01:03:47]: Пока, честно говоря, нет. Окей, Антон, я тебе расскажу кратко ситуацию. Первый пункт. У нас Вова нарисовал макет несколько месяцев назад, может даже год назад, как должен выглядеть экран, где водитель может собирать деньги у покупателя и получать данные насчет покупки каких-то товаров, которые были в заказе. Есть три главных сценария. Что заранее знали, что в заказе, и там будет список, черновик, всех вещей, которые на той остановке. Второй вариант, что водитель приехал заранее, не было заказа, и он может набросать черновик в мобильном приложении и выбирать. Не забудь еще другой пункт, Семен. Инвентария должна кэшироваться локально тоже, чтобы они моментально могли выбрать инвентарий, тип, который они продают. Там будет несколько сущностей, упрощенных для ваших целей, Антон. Представь себе, что ты делаешь миниатюрный Amazon Shopping Cart, где ты можешь продать только то, что твоя фирма продает. Если твоя фирма продает, например, велосипеды, которые ручного производства, у тебя не будет 27 тысяч вариантов, у тебя будет 20 или 30 вариантов. И вот этот список этих вариантов мы должны на прибор закэшировать. Потом, когда это все произойдет, мы возьмем и все это свяжем вместе. И там, когда будет выборка этих вещей в UI, эта выборка динамически будет как калькулятор считать, как превью, и показывать и продавцу, и покупателю текущую черновик инвойса. Сумма, running total, в зависимости от входных параметров, которые у них есть. Пока все понятно?

**Anton Khavanskii** [01:03:47 - 01:03:58]: Да, пока понятно.

**Dan Khasis** [01:03:58 - 01:05:00]: Следующая вещь, что мы берем, и когда они закончили покупку, они могут или больше, или меньше, или меньше, или больше. Как было оригинально, все зависит от настроек хозяина. Если хозяин в настройках сказал, что они могут модифицировать объемы, тогда мы это делаем. Если они сказали, что они не могут, то они не могут. Все зависит от того, что администратор заказал. И мы будем модифицировать фронт-энд, чтобы фронт-энд поддерживал это.

**Vova** [01:05:06 - 01:05:31]: Грубо говоря, у тебя на destination есть заказ, что ты должен был привезти. Ты можешь отдать товары целиком, все, что было заказано. Можешь отдать частично, можешь отдать больше, чем было заказано. Или можешь даже добавить новые вещи, которых не было в заказе, и отдать их тоже. И тебе динамически посчитается цена.

**Dan Khasis** [01:05:31 - 01:05:36]: Окей.

**Anton Khavanskii** [01:05:48 - 01:05:50]: Пока понимаю, Данте.

**Dan Khasis** [01:06:38 - 01:11:37]: Бринт — это инвойс, да? Да, после того, как все посчиталось и сделано, нам нужно сделать распечаток инвойса. Давай посмотрю, если я смогу найти на YouTube конкурента. Вот это total... А, я нашел. Чтобы сократить время, вы просто посмотрите на фильм самостоятельно. Потому что там открыты многие наши вещи. Эта фирма пользует нашу технологию, чтобы делать их маршруты. У них UI крявый, как будто бы эта хуйня была сделана в Азии слепыми индусами. Видишь, в комментарии один чувак спрашивает интересный вопрос. Какая будет цена по умолчанию? Последняя из предыдущего продажи, транзакций продажи или... Надо с нуля вписывать опять это. У них есть еще видео на принтинг 10 лет назад. Я пытаюсь вам сказать, кстати, представьте такой сценарий. И опять, Антон, это важно мобильщикам тоже. У тебя пришло 50 посылок, 100 посылок. Кто-то сделал оптимизацию. Как люди знают? Какая коробка, какая посылка, какая машина, что идет, куда идет, как идет? Никто никуда не знает. У вас есть уже short scan и load scan. У вас есть уже вся база данных. У вас есть уже все подряд. Но если мы не можем сделать распечатывание чего-то, как люди смогут что-то или как-то это использовать? Они же никак не могут с нашей системой, никак. Посмотрите на наших конкурентов, чтобы вам лучше это было понятно. Ни один из конкурентов не делает invoicing. Ни один из конкурентов не делает facilities, кроме Роднета и Декарта. Ни один из конкурентов не делает short scan, никто не делает load scan. Они только делают proof of delivery. И 100% никто не делает распечатки, ничего. Как ты можешь обслуживать склад или что-то, если там нет бар-кода или QR-кода? Это же невозможно. Правильно или неправильно? У тебя может быть самая лучшая оптимизация в мире, но если у тебя нет возможности распечатать, тогда что?

**Anton Khavanskii** [01:11:37 - 01:11:45]: Ты же ничего не сможешь сделать.

**Dan Khasis** [01:11:45 - 01:12:10]: Понимаешь, о чем я веду? Да, я понимаю. Мы получаем все прайсы, все это с бакленда приводим?

**Vova** [01:12:10 - 01:12:18]: Да.

**Dan Khasis** [01:12:18 - 01:13:30]: Самое важное – это найти какой-то SDK, который как-то нам сможет подключаться к топовым принтерам, где мы можем по правильному размеру это все вставлять. Да, не проблема. Напечатать мы будем фактически чек, я правильно понимаю? Да, совершенно верно. Другими словами, если даже сказать по-черному, если бы у нас не было просчета, если бы у нас не было вопросов насчет связи, а мы просто хотели сделать самый элементарный принт Hello World, я думаю, что 90% удачи это будет принт Hello World. Если мы уже сделаем принт на топовом принтере, который они пользуют, Zebra или другой, который они пользуют. И это уже докажет, что это есть. Ну, конечно, они в меню этот говняный малюсенький все засунули. Видишь, смотри, lines 3, subtotal на ту линию, quantity sold 13, что они купили, дата, счетчик, сумма.

**Vova** [01:13:49 - 01:13:50]: Ну, это каша, это невозможно воспринимать.

**Anton Khavanskii** [01:13:51 - 01:13:53]: А можешь сказать, как у них чек-то в итоге выглядел?

**Vova** [01:13:55 - 01:13:57]: Нет, в этом видео нету.

**Anton Khavanskii** [01:13:58 - 01:13:59]: Сейчас в другом видео.

**Vova** [01:14:00 - 01:14:55]: Вот у них внешний Bluetooth принтер, на который они законнектировались. И вот они жмут print order, и вот у них вылазит чек. И это как в ресторане чек. Что здесь? Все разгружено. Ну, это прям стандартный ресторанный чек. И вот здесь еще unit, в котором измеряется оз. То есть наименование товара, единица измерения, сколько штук, цена за штуку, total.

**Dan Khasis** [01:14:59 - 01:17:43]: Вы понимаете, ребята, что когда мы ходим в рестораны или входим в магазины, и все здесь ходят в магазины или в рестораны, видели миллион раз эти чеки, уже десятки тысяч раз в своей жизни. И у нас есть все на планете, самые мощные алгоритмы, хуй знает что, SDK, API, интеграция. Но это как машина без руля. Это Ferrari без руля, без self-driving. Это все бестолку. Если у нас нет вот этого функционала, так же, как если у нас нет recurring routing. Люди откладывают, вычистят шкаф годами. Надо просто сделать кровь-взнос через силу и забыть об этом. Вова, подними. Я думал, что у тебя был другой UI, где там был зеленый плюсик или минус или что-то. Да, это было.

**Vova** [01:17:43 - 01:19:24]: Это когда уже конкретно ты хочешь модифицировать item, ты можешь делать long tap сюда на любой item, и тогда у тебя открывается другой UI. Это редактирование quantity. Если вдруг ты хочешь добавить какой-то item в заказ, то ты выбираешь его, находишь и меняешь quantity на желаемое. Модифицируешь таким образом заказ. Расчаряешь его. Но, с другой стороны, если тебе нужно выкинуть заказ не целиком или перевыполнить заказ, то ты просто сканируешь какое-то количество раз товара, и у тебя считается, сколько раз ты его отсканировал. То есть при выгрузке ты сканируешь баркоды. Если же ты при выгрузке не сканируешь баркоды, а просто ставишь галочку, тебе нужно указать другое количество, то тогда вот альтернативный способ, чтобы поменять количество без подтверждения... А так, в нормальной ситуации ты должен сканером количество подтверждать. Но если ты, например, нечаянно сканировал два раза вместо одного...

**Dan Khasis** [01:19:24 - 01:19:32]: Ты делаешь одну коробку 35 раз, и не будешь 35 раз сканировать.

**Vova** [01:19:32 - 01:20:26]: Ты сканируешь один раз, потом удерживаешь кнопку и здесь вводишь число просто с клавиатуры. То есть в Quantity можно... Во-первых, считаются баркод-сканы, сколько раз ты посканировал, а во-вторых, можно пойти и его модифицировать руками. Либо ввести с клавиатуры, либо кнопками нажимать здесь. Больше-меньше. В пятницу ты показывал место, где загружен товар в машине, место в кузове. Вот так мы это нарисовали.

**Dan Khasis** [01:20:26 - 01:20:28]: Да, это непонятно для меня.

**Vova** [01:20:30 - 01:21:24]: Я думаю, что для водителей. При загрузке приложение тебе будет предлагать место в машине в виде квадрата на основании того, где в маршруте находится заказ. Ты можешь либо это предложение принять, либо выбрать другое место. И когда ты загружаешь машину, ты помечаешь, куда ты что положил. А потом, когда ты разгружаешь, у тебя есть маленькая непонятная иконка, которая тебе показывает, где оно в кузове искать. Я не раз видел, как курьеры страдают от того, что приезжают, и у них полгрузовика коробок, и они залазят в кузов и 10 минут ищут, где лежит.

**Dan Khasis** [01:21:24 - 01:21:32]: Я понимаю, но я не думаю, что это правильный подход. Мы все равно это не делаем в первой версии.

**Vova** [01:21:32 - 01:21:36]: Ты думаешь, что это недостаточно понятно, недостаточно интуитивно?

**Dan Khasis** [01:21:36 - 01:21:44]: Я не знаю, где начало, где конец машины. Где символ для салона?

**Vova** [01:21:46 - 01:21:54]: Мы упростили максимально. Здесь, может быть, плохо видно. Это такая буква P. Подразумевается, что здесь дверь сзади.

**Dan Khasis** [01:21:54 - 01:22:01]: Да, но это непонятно. Я не знаю, где водитель или где двери.

**Vova** [01:22:01 - 01:22:12]: Ты предлагаешь нарисовать маленькую кабину здесь еще. Ну, это мелочи.

**Dan Khasis** [01:22:13 - 01:22:35]: Мы придумаем что-нибудь с этим. Может быть, лучше... Есть два варианта. Вертикальный и горизонтальный.

**Vova** [01:22:41 - 01:22:46]: И сделать 3D рендеринг.

**Dan Khasis** [01:22:58 - 01:24:34]: И она покажет им 3D, блядь, коробку. Я думаю, это Overkill. Первый сценарий. Заранее заказали какое-то количество товаров какому-то кастомеру, который в рауте имеет Destination. Попросили 7, 8, 9, 10 товаров. Если есть конфигурационный флаг у администратора, позволяет модифицировать заказы, значит, человек может плюсиком или минусом регулировать с нуля до какого-то максимума. Если есть еще одна настройка, может ли максимум быть выше, чем количество товаров, которое было on-hand? Мы это не в первой версии не должны сделать, но max salable. Сколько мы можем продать. Как чувак может написать 1000, если в складу и в машине только 5? Правильно? Мы знаем, в какой машине. Если мы знаем, в какой машине. Если мы знаем, из какого facility он поехал. On-hand здесь и on-hand здесь, значит, цифра может быть больше, чем это. Это один вариант. Другой вариант, что если он на будущее заказывает, а не что он привез прямо сейчас.

**Vova** [01:24:34 - 01:24:40]: У меня нет ответа на это.

**Dan Khasis** [01:24:57 - 01:25:14]: Вы понимаете первый пункт, что нельзя продать больше, чем у нас есть. В некоторых бизнесах, если речь идет насчет товара, как ты продашь 10 тысяч апельсинов, если у тебя только есть 1000 апельсинов? Само собой вы разумеете.

**Vova** [01:25:15 - 01:25:46]: Когда машина выезжает из склада, мы знаем, сколько на складе есть on-hand. При загрузке в машину товаров мы их сканируем. Мы знаем, на складе стало меньше, сколько теперь в машине лежит. Он приезжает на место. На каждой кнопке мы знаем, сколько он где выгрузил. Мы знаем, сколько в машине осталось в любой момент времени. И не можем разрешить ему продать больше, чем у него есть. Мы ему показываем. Я совершенно согласен. В любой ситуации показываем, сколько у него осталось в кузове.

**Dan Khasis** [01:25:46 - 01:26:01]: Ты прав, ты прав. Но здесь есть проблема небольшая, Вова. Что некоторые люди скажут, продай 500 штук, и позвони на телефоне, Вася и Вова привезут тебе еще 200. И вот почему я говорю, что это должна быть настройка.

**Vova** [01:26:03 - 01:26:22]: В таком случае получается, что ты видишь, у меня в машине 10 штук, но если я хочу продать 500, то я 10 отдам сейчас, а 490 пойдут в следующий заказ. И этот следующий заказ приедет сегодня на сегодня или завтра на завтра.

**Dan Khasis** [01:26:23 - 01:27:42]: Это не следующий заказ. Опять здесь идет вопрос, до какой степени мы хотим делать... Это идеально. Если бы я это делал, как немцы делают в SAP, я согласен с тобой. Но мы не живем в том мире, в SAP. Мы живем в мире, где еще две машины подъедут через 20 минут с оставшимися апельсинами. Так нам надо просто сделать настройку там. Allow more items than on hand. И она по умолчанию будет true. Если кто-то постоянно видит, что водителя эту хуйню, водители хуево это делают, значит, они включат это. Второй пункт. Если у них рядовый режим Anton в настройках и не имеют права делать плюс или минус, то там есть другая проблема. Они должны подтвердить как-то, сколько они действительно привезли. То есть отличается, сколько заказано и сколько актуально доставлено. Это отличается немножко от… Это как planned versus actual.

**Vova** [01:27:59 - 01:28:22]: В одном случае это модификация заказа, в другом случае это actual, который отличается от planned. По-моему, как раз UI наш, который мы нарисовали, все это в него заложено. Мы сейчас не говорим насчет UI, мы говорим насчет… Концептуально.

**Dan Khasis** [01:28:22 - 01:33:36]: Мы говорим о том, что программисты должны быть готовы резервировать переменные, которые контролируются бэкэндом, что некоторые клиенты просто-напросто не хотят. Окей, на бирже есть понятие fill or kill, имеет синоним all or nothing. Экземпляр. Я имею миллион акций Google, каждая акция стоит 200 долларов, это у меня будет 200 миллионов долларов акций Google. Я хочу продать все акции. Когда ты продаешь 200 миллионов акций, то есть миллион акций за 10 долларов, и плюс у меня есть лимит, что я не хочу продать ни одну из них дешевле, чем доллар 99. Извиняюсь, что 99 долларов и 50 центов. Система начнет искать, если достаточно есть людей, которые хотят продавать за эту цену, и она будет делать то, что я обязан продать все миллионы акций или ноль. Потому что я закончил с Google, я продал все свои акции, я не могу остаться, потому что юридически я закончил. Я уже буду в понедельник опубликовывать, что я закончил инвестиции в Google. Например, all or nothing, я не хочу частично продавать, я обязан все продать, понимаешь? И теперь получаю, но не дешевле, чем эта цена, например. То же самое здесь. В одном случае хозяин бизнеса захочет или хочет, чтобы ты привез, ты делаешь или все, или ты делаешь модифицированную версию. И они обязаны контролировать это. Что здесь происходит с аннотацией? Или у меня интернет сломан? У меня интернет ёрзает опять, потому что они не проложили провод до конца. All or nothing или optional. Если optional, то до какой степени? Только вверх, только вниз, или все к чертовой матери. Нам нужно просто заранее вложить эти настройки. Даже если они возвращаются всегда true. Если all or nothing, вопрос тогда, обязаны ли они все сканировать, или они могут просто руками это вставить. Если modified, обязаны ли они сделать все товары, но самым минимум единичка, или они должны сделать... Имеют ли они право удалять товары. Потом есть финальный вариант. Что... Финальный вариант это... У них нет черновика. Ноль. Здесь draft, здесь ноль. Если был draft, мы говорим, окей, они делают all, или они имеют право модифицировать. Если у них было заложено ноль, и теперь они могут, они должны просто наращивать автокомплитом товар в quantity, товар в quantity, товар в quantity. Потом это идет в черновик объекта invoice. Это все входные линии дочерней в этот invoice на уровне этого customer, на уровне этого destination, на уровне этого маршрута. И теперь это идет в местное хранилище, очередь. Сохраняется черновик постоянно. В какой-то момент они могут это распечатать, и когда они говорят save или finish, она уже идет на сервер. Пока она не... сервер удачно не вернул назад это все, она лежит в этом временном хранилище, как всегда, как сейчас.

**Vova** [01:33:38 - 01:33:45]: А мы не должны распечатку привязать к сохранению, чтобы нельзя было распечатать несохраненные вещи?

**Dan Khasis** [01:33:45 - 01:34:28]: А все сохраняется автокомплитом. Должно сохраняться автокомплитом. Если нет интернета, с точки зрения водителя, давай не будем думать как инженеры, но с точки зрения водителя, ты приехал, ты отдал пиво, они заплатили тебе в руки деньги, иногда. Иногда они подписались на этой бумаге карбонной, как я рассказывал в прошлый раз. И теперь наступил момент, что ты поехал к другому, и потом тебе звонит начальник и говорит, слушай... Я понял.

**Vova** [01:34:29 - 01:34:37]: После того, как распечатка произошла, нельзя, чтобы водитель больше модифицировал что-либо в этом заказе, потому что он уже распечатал.

**Dan Khasis** [01:34:38 - 01:34:50]: Нет, но я думаю, это другой вопрос, я даже не подумал об этом, это хорошее замечание. Но насчет этого замечания, я бы тебе сказал... В принципе, может быть, что надо будет делать.

**Vova** [01:34:50 - 01:34:53]: Но нужно будет аннулировать тогда распечатку.

**Dan Khasis** [01:34:55 - 01:35:29]: Потом надо решить, что в этом распечатке будет. Будет ли в этом распечатке кто-то или нет. Например, баркод. Если будет баркод, то что будет в этом баркоде? То есть распечаток без информации какой-то бесполезен всем. Я имею в виду баркод. Что мы можем делать, если айпи мы не можем? Потому что у них... Эта хуйня будет меньше.

**Vova** [01:35:30 - 01:35:38]: А у нас есть трекинг-пейдж, и мы можем распечатать на чеке линк на трекинг-пейдж, а в трекинг-пейдже потом точно так же показывать этот чек.

**Dan Khasis** [01:35:38 - 01:37:38]: Нет, нет, нам надо писать туда invoice или... invoice id этот. У нас же есть invoice id. Так зачем нам придумывать трекинг-пейдж, если у нас есть... Там мы можем зашить баркод, мы должны сделать какой-то... Мы знаем, что будет уникальный, до 200 миллиардов комбинаций. Поэтому мы должны все улоконять перед тем, как он придет на сервер. Потому что они не смогут распечатать, если нет связи на сервере. То есть мы согласим какой-то uuid режим v4 или что-то. Потом мы локально сохраняем этот uuid. И в баркоде мы зашиваем uuid.

**Vova** [01:37:38 - 01:37:46]: Чтобы можно было индексифицировать транзакцию.

**Dan Khasis** [01:37:46 - 01:38:04]: Потом на фронт-энде нам надо будет сделать новый снапшот какой-то по сущности invoice. Там должен быть секвенция invoice.

**Vova** [01:38:05 - 01:39:43]: Это может быть частью кастомер портала. Может ли водитель модифицировать заказ? Если может, то как? Может расширять или может уменьшать количество товаров в заказе? Вторая часть. Может ли он комплетить заказ частично или только целиком? И вторая часть. Это то, что мы печатаем и все что мы распечатали мы обязательно заносим на сервер. С уникальным uuid, по которому потом можно эту транзакцию идентифицировать по чеку. Мы печатаем этот uuid на чеке и клиент может пойти на наш веб и найти эту транзакцию и увидеть подтверждение онлайн. И общаться с саппортом уже о конкретной транзакции.

**Dan Khasis** [01:39:47 - 01:40:43]: Я хочу посмотреть на секунду. В 2019 году RoadNet выпустил версию 5.4, которая если ты кликнешь на ссылку позволяла тебе человеку модифицировать заказы в рамках остановки. Давай посмотрим, что у них там было. Там есть возможность модифицировать. Я не понимаю, как у них все через жопу так сделано. Но продавцы знают шикарное.

**Vova** [01:41:33 - 01:41:36]: Здесь какая-то огромная куча настроек.

**Dan Khasis** [01:41:42 - 01:43:36]: Настройки есть, например, регионы, например, бизнес-юниты, о которых мы говорили только-только. Они это уже делают 20 лет. Посмотри на секцию Multiple comments not supported for HOS logs. Она там 5-10%. Existing region. Немножко вниз. Видишь, там есть predefined. Там написано, что в зависимости от контекста, это не совсем в нашем случае, но в зависимости от типа пользователя, приложения, которые пользуются системой, хотите ли вы давать им возможность сделать как бы или фиксированное что-то, или динамическое что-то? То есть в нашем случае, если мы говорим насчет модификации заказов, мы говорим насчет позволять, хотите ли вы давать им возможность, например, свободно прибавлять новые товары в заказ, которые не были оригинально задуманы. И отдельное разрешение на удаление позиции заказа. Да, но в RoadNet, я помню, мне Дэвид Пэлли говорил, он бывший хед-продакт, что... Удаление туда не надо? Нет, не то, что это. То, что у них возможность, ты приехал, ты можешь модифицировать.

**Vova** [01:43:51 - 01:44:04]: Но даже без модификации заказа, ты его можешь все равно перевыполнить. То есть даже не модифицируя заказ, ты все равно можешь его больше выполнить, сделать больше, чем был план.

**Dan Khasis** [01:44:05 - 01:47:00]: Да, это... Спустись немножко вниз, то видишь, то, что у нас есть, семь лет нам заняло это сделать, мы по-прежнему не сделали. Что у одного аккаунта может быть организация, как бизнес-юнит, и у них есть группировка по организации или по водителю, или по региону. И тогда все репорты или виды витрины меняются на... Если ты еще спустишься вниз немножко, мы это называем оптимизацией, они это называют routing session. Спустись вниз немножко, еще немножко. Там есть секция, называется routing session, ты пропустил только что. Вниз немножко. Да. У нас это в принципе оптимизация, мы это называем оптимизацией. Может быть, нам лучше поменять на оптимизация session, сколько это сессия оптимизации. А входные параметры это как бы входные данные на момент той сессии. Потому что это не полноценная оптимизация, это больше как сессия оптимизации с данными, которые на тот момент сессии были актуальны. Если еще немножко спустишься, ты увидишь на уровне заказа модификатор редактора заказа. Мне просто любопытно, если они с того... Нет, нет. Наверх побольше. Если они починили этот дефект или нет. Где... Ни капельку вверх еще. Вот. Видишь, они имеют такую же ошибку. А, кстати, это важный момент. Что если идет возврат и кто-то хочет забрать что-то назад? Видишь, пикап не все клиенты только доставляют что-то. Если ты делаешь, выкачиваешь употребленное мясо, отжарки, фрэнш-фрайз, чтобы проделать biodизель, твоя задача это пикап сделать, а не дроп-поп.

**Vova** [01:47:01 - 01:47:49]: Да, но это все равно... В общем, мне кажется, что order type очень странная вещь, потому что ордер может состоять из абсолютно разных вещей. Из пикапов, из дроп-попов, из услуг каких-то. Все они могут измеряться в разных вещах и ограничивать, писать, что это какой-то тип конкретный ордера Немножко странно. Потому что тип ордера описывается его составом. Может быть... А мы почему-то просим юзеров указывать тип. Если мы можем определить его по типу вещей внутри. Когда у нас будут light items, нам не нужен будет тип, по идее.

**Dan Khasis** [01:47:50 - 01:49:48]: Мы сможем динамически его определять. Это немножко другая вещь, мне кажется. Подожди секунду. Я думаю, что нам надо просто... Кликни на эту ссылку. Спустись до секции historical travel. Вот historical travel speed. Видишь? Они по дням и по диапазону времени дают тебе возможность модифицировать override. Потом это сохранят в routing engine. У нас есть в routing engine эта возможность. И накладывается коэффициент этой скорости на тот сегмент. И потом routing engine возвратит с замедленной скоростью эти все данные.

**Vova** [01:49:48 - 01:49:58]: То есть важно еще не только время и день недели, еще важно location. Потому что в одном location будет замедление, а в другом не будет.

**Dan Khasis** [01:49:59 - 01:50:11]: Нет, ты не прочитал деталь. Они выбирают сегмент на карте. Видишь? И потом вот эти данные наращивают на тот сегмент. Я понял.

**Vova** [01:50:11 - 01:50:47]: То есть это привязано к географии. Для одной улицы они делают. Это круто.

**Dan Khasis** [01:50:47 - 01:51:01]: И потом у них есть множитель для каждой улицы. Да, но у них есть кластеризация и все эти вещи. Мы говорим об этом, как будто мы какие-то умные. Они это сделали 20 лет назад. Вот почему они продают и выигрывали весь бизнес.

**Vova** [01:51:18 - 01:51:31]: Бизнес юнит, да. Видимо, facility. Да, у нас бизнес юнит, у них есть другая секция, которая называется setting default line item type for business unit.

**Dan Khasis** [01:51:31 - 01:52:06]: То есть если ты продаешь в одном бизнес юнит и сервисы, а в другом delivery, она автоматически это будет выбирать. У них worker costs на уровне facility определяются. Это может хорошо, может плохо, но...

**Vova** [01:52:08 - 01:52:17]: И routing options на уровне facility. Надеемся.

**Dan Khasis** [01:52:19 - 01:53:35]: Это редактирование региона. У них импорт был... У них импорт тоже умный. Они показывают многие вещи, которые мы спорили давным-давно насчет как тайм зоны показывать, как брейки делать, если ты спустишься на следующей секции. Adding routing information. У них есть другой фильтр, очень умный тоже. Показать машины, которые еще в гараже. Или показать машины, которые не в гараже. То есть когда ты делаешь планировку маршрутов, она тебе только покажет те, которые в маршруте или не в маршруте. Это metadata summary, наверное. Но потом там есть карта, которая показывает статус маршрута на карте. Или есть, я не пойму. Стартед есть у нас статус?

**Vova** [01:53:37 - 01:53:44]: Для маршрута статус есть, но на карте я не уверен, что мы отображаем. Иначе стартед маршруты.

**Dan Khasis** [01:53:45 - 01:54:41]: Я не знаю. Короче, вот ты посмотри отдельно, я посмотрю отдельно. Но чтобы закончить, если ты посмотришь, эти чуваки дофига вещей вставили в эту штуку. У них есть conditional workflow tasks тоже. Что происходит, когда перед маршрутом, после маршрута, на остановке, на заказе, на дочерней заказе, линии в заказе, в любое время, синхронизацию машину к трейлеру, трейлер к машине, что, какие товары в трейлере, какая машина сейчас забрала эти товары.

**Vova** [01:54:46 - 01:55:49]: Я видел у какого-то из наших конкурентов такую штуку, что ты, если у тебя есть заказ, для которого нужно что-то взять на складе, то есть ты планируешь маршрут просто этих заказов, и у тебя автоматически формируется список на загрузку и формируется, добавляются destination складов в маршрут в оптимальном порядке, чтобы водитель заезжал за загрузкой на эти вещи. И может быть такая ситуация, что он едет, например, как челнок несколько раз по городу, по разным складам, собирает на разных складах вещи, которые ему нужны для какого-то заказа. То есть от состава заказа зависит маршрут, куда нужно заехать. И загрузка — это в общем-то пикап, а депот — это обычный destination, который просто имеет загрузку, на котором ты загружаешься.

**Dan Khasis** [01:55:51 - 01:55:57]: Мы посмотрим на это. Спустись наполовину на экран, наполовину.

**Vova** [01:56:01 - 01:56:04]: Немножко еще.

**Dan Khasis** [01:56:04 - 01:56:08]: Трейлеры.

**Vova** [01:56:08 - 01:56:11]: Еще немножко.

**Dan Khasis** [01:56:11 - 01:56:52]: Еще. Вот. Видишь? В регионе они позволяют, они это называют регион, но в принципе они как будто бы на уровне каждой территории, или географии, или организации имеют настройки. А, вот, я нашел текст. В верхнем правом углу, ты видишь, там написана галочка? Вот. Вот это, как они его называли. OSD. Over, Short and Damaged. Видишь? Угу.

**Vova** [01:56:54 - 01:56:59]: Short — это не хватило в машине, Over — это, типа, передал больше, чем заказывали.

**Dan Khasis** [01:57:03 - 01:57:59]: Да, и теперь галочки говорят, что обязываем водителя выбрать, сказать причину, почему, вот, если было меньше, больше, или плохо, или испорчено, заставить водителя описать это. Почему не просто модифицировать, но еще описать. Например, здесь показать историю, кто имел это раньше. Signature capture required. Allow workers to skip signature capture. Order level signatures. Например, ты поехал в destination, у тебя в одну большую площадь госпиталь для пожилых людей, и лаборатория какая-то. И у тебя есть три заказа в один адрес.

**Vova** [01:57:59 - 01:58:20]: В каждом заказе есть три начальных элемента. Ну, в нашем случае это группированные дестонейшены. То есть группированные заказы в один дестонейшен.

**Dan Khasis** [01:58:20 - 01:58:26]: Мы поддерживаем же три заказа на один дестонейшен, и в каждом заказе у нас есть line-items, правильно?

**Vova** [01:58:26 - 01:58:32]: Да.

**Dan Khasis** [01:58:32 - 01:58:50]: И ты можешь, если ты на такой группированный дестонейшен приезжаешь, ты три раза проходишься по заказам. И вот в этом случае они говорят, что или ты можешь делать подписку на этом этапе, или на этапе каждого заказа подпись, подпись и подпись. Мы думаем, мы хотим это, правильно, на уровне каждого заказа, а никогда не на уровне.

**Vova** [01:58:50 - 01:58:59]: Это у нас уже, в общем-то, есть. А вот на уровне дестонейшена, на уровне группы у нас такого сейчас нет.

**Dan Khasis** [01:58:59 - 02:00:52]: Посмотри еще, что у них здесь. Немножко спустись вниз, как они мобильное приложение сделали. Спустись вниз немножко, ты увидишь интересную фигню. Во-первых, они покажут иконку, если есть связь или нет. И потом поехали, у них есть в особом порядке при delivery, stop check-in, manager check-in, signature, verify. И если спустишься вниз, посмотри на этот корявый UI. При delivery. Поехали, order, bottles, cases, pallets. У нас этого нет. Если ты больше чем тот тип преувеличиваешь, спустись вниз, там у тебя удовлетворение. Потом там есть возможность множество заказов обрабатывать баркодами. Короче, нам надо сидеть неделями, прочитать все, что у них есть, и думать насчет этого. Я не хочу сказать, что это выглядит как insurmountable. Но это немножко выглядит инициальными впечатлениями insurmountable.

**Vova** [02:01:00 - 02:01:22]: Мне это выглядит как будто бы у них какая-то каша. То есть как будто бы они наворачивали к ним приходил заказчик, говорил, ой, нам нужна такая вещь. Они такие, без проблем, мы сейчас добавим для вас галочку. И у них в итоге накопилось здесь вот это безумное количество галочек. И систему в этом проследить довольно сложно.

**Dan Khasis** [02:01:23 - 02:03:14]: Мы видим, что они даже архитектурой системы неправильно сделали, потому что, например, у них зафиксировано количество полей на некоторые настройки. Это, знаешь, кто-то в таблице захаркоджил эту хуйню и неправильно сделал архитектуру. Вот что это значит. Например, если ты поднимешься наверх, где там еще ста пяти и так далее, это вместо того, чтобы сделать редактор шаблонов по роли и потом выбирать какой шаблон по умолчанию в какой странице для какой роли в каком дашборде, они просто делают галочку. Но у них есть новый релиз, там есть теперь баркод. Вот если ты пойдешь, это 5.4 ты смотришь, а если ты кликнешь стрелочку вверх, пойди на самый верх. Это 2019 год, 5.3. А если ты кликнешь на самый верх, там будет стрелка превиаз. Кликни превиаз. 5.4 SR, это для систем администраторов, мне кажется. Но 5.4 они теперь включают там output, UPC и SKU. И теперь они так же, как мы говорили в пятницу, если поднимись на самый верх. 5.4 SR, это предпоследняя версия. Next, кликни next. Она идет или нет?

**Vova** [02:03:16 - 02:03:26]: Кликаешь next, она идет назад. На SR или куда?

**Dan Khasis** [02:03:26 - 02:05:52]: Вот 5.3.SR. И твой экран не показывает SR. Он показывает просто 5.4. А 5.3 SR, нет. Здесь ничего нет. Нет, там вверху SR должно быть. Да, теперь я и тут, видимо. Вот, вот, да. Видишь? Теперь они начали выводить SKU. Смотри на дату, 2018 год, 7 лет назад. И потом, если ты вернешься теперь на 5.5, они теперь тебе дают, например, maintenance, они тебе позволяют заливать upload заказов без метаданных, а только customer ID, чтобы ты мог планировать адрес Book ID, импорт мобильных ордеров по многим регионам, а не только в один регион. Потом, диагностику мобильных приборов, чтобы там, они понимали, что там происходит. SKU ID and description теперь они позволяли делать. Потом, сколько топлива было употреблено на какой-то остановке. Теперь, cancel, uncancel and unassign orders, даже если маршрут был dispatched. Compliance, driver, license plate, и так далее. Mobile, теперь они могут видеть контактные данные на service location, чтобы не прыгать между экранами. Мы это говорили Антону, Гаспару, если помнишь, Антон. Проводить кастомными настройками из backend, выбирать на frontend, если показывать какие-то более удобные поля на frontend на мобильном приложении, в главном списке destination, чтобы не надо углубляться в destination, увидеть какие-то метаданные.

**Anton Khavanskii** [02:05:54 - 02:05:55]: Да, было такое.

**Dan Khasis** [02:05:56 - 02:09:01]: Потом они сделали barcode scanning. Ты сосканировал баркод, и она тебе подсвечивает, на какой остановке это. Ты посылку нашел, ты сканируешь это. Потом дать водителю модифицировать маршрут остановки. Остановки в маршруте. Потом они сделали order bundling и aggregation. Когда это был релиз, там тоже они описывают order 5.5, 5.4. Я не понимаю вообще тогда, почему люди бы покупали нашу систему. И у них версия 5.3 в 2019 году уже была. Они включили редактор permissions на паролям, которые у нас по-прежнему нет. Verification history, Вова, они включили. Это где когда ты сканируешь для пикапа или дропоффа, там есть доказательства, что это произошло или нет. Кто сосканировал, когда и что. Это на секции релиз 55, 5.5, ближе к верху там есть. Driver payroll, это оплата водителям за их работу. Посмотри на секцию RoadNetMobile, Вова. Viewing contact names and collecting signatures. Что они делают? Viewing contact, напиши просто. Вот, видишь, как они показывают?

**Vova** [02:09:18 - 02:09:30]: Это дичайший UI, бедные водители, но функционала много, конечно.

**Dan Khasis** [02:10:11 - 02:12:17]: Наш вопрос, как сделать, что у них есть, намного проще и легче для пользователей. Потому что если мы этим занимаемся 17 лет уже, 16 лет, это для нас каша. Представьте себя, как несчастные водители себя чувствуют. Спусти, или водители, администраторы. Спустись, Вова, на секцию посередине, называется Preventing Workers. Это наш рядовый режим. Может быть, они у нас его спиздили. Я не знаю. Спустись немножко вниз еще. Standard Properties. Смотри. Они дают... Смотри, как они хитро назвали секцию Confidential Costs. Почему они так назвали? Чтобы никто не сомневался, что покупатель увидит это. И посмотри, как они это разбили. Regular Pay Rate, Overtime Pay Rate. Per Stop Rate, Per Distance Rate. Per Size Over Minimum, Overtime Hours. Сколько часов в день, после которого начинается вот это. Ок, это потом помощник. Потом Fixed Route Cost, Minimum Distance, Minimum Size, Minimum Time, Minimum Stops. Равно на водителя сумма плюс множество водителей. И это твой Report Payroll. А это датчик его, идентификатор его датчика, Bluetooth или так далее, который он пользуется, чтобы открывать машину или Telematics и так далее.

**Vova** [02:12:17 - 02:13:22]: Номер контракта. И все это выглядит как UI для какого-то одного очень специфического кейса. А как только этот кейс чем-нибудь отличается, то этот UI уже начинает быть абсолютно непригоден. То есть они заточились под очень узкий какой-то одного клиента. Под нужды какого-то конкретного клиента. И здесь нет никакой особенной кастомизации. Как бы она ни выглядела, как будто бы здесь что-то кастомизируется, это конкретно галочки для того клиента. Смотри, они запрещают менять секвенс остановок.

**Dan Khasis** [02:13:22 - 02:14:16]: Это рядовый режим, это наш рядовый режим для водителя. Они имеют право заказы обрабатывать, они имеют право маршрут объезжать, они просто не имеют права модифицировать порядок остановок. Кстати, посмотри на это. Авто, геофенс, авто триггер они поставили сюда почему-то. Если ты спустишься еще вниз, эта секция очень интересная, связана с нашим разговором с предыдущей пятницей четверга, предыдущего четверга. Спустись еще вниз. У нас есть этот функционал. Сейчас, кстати, Антон, сканировать баркод, чтобы найти в каком маршруте или порядке находится. Да, у нас это есть.

**Vova** [02:14:16 - 02:14:22]: Но он доступен каким-то особым типам работников.

**Dan Khasis** [02:14:22 - 02:14:28]: Надо подумать, как это в рядовом режиме включить водителю, помогать.

**Vova** [02:14:53 - 02:15:00]: Они спрашивают, не прибыл ли ты случайно. Ты засканировал какую-то коробку, не находишь ли ты случайно уже здесь.

**Dan Khasis** [02:15:02 - 02:15:19]: Да, кстати, напомните мне перед концом разговора, что мы должны сделать новый дизайн-скрин для скенинга и лукапа, чтобы мы не забыли. Он очень легкий, но его надо сделать. Спустись еще вниз немножко, Вова.

**Anton Khavanskii** [02:15:20 - 02:15:22]: Дэн, ты имеешь в виду экран лоудинга?

**Dan Khasis** [02:15:25 - 02:18:27]: У нас есть три экрана, лоуд, сорт и информейшн. Мы же прибавили недавно лукап, просто информейшн, правильно, Антон? Нам нужно сделать как-то внутри какой-то объединенный view, где можно группировать по статусу, чтобы они могли видеть, покажи мне все, которые лоудят, все, которые скенд, all или unscanned и unloaded счетчиками, чтобы они могли моментально прыгать между вот этими тремя-четырьмя фильтрами. В версии 5.6 они прибавили приоритет. В версии 5.6 они прибавили шаблонизацию маршрутов и так далее. В версии 5.6 они сделали strategic planner. О, суки. О, strategic planner, смотрите, вот это копия нашего routing. И посмотрите, как они сделали, так я вам сказал, агрегации, scoreboard. По умолчанию они показывают score, а потом они показывают детализацию в левой вкладке. Помнишь, мы говорили насчет принтинга? Они придумали подписку на reset распечатывать тоже. Мы, кстати, об этом не подумали насчет этого. Вернись на секунду в 5.5. Я хочу показать тебе что-то важное для нас. Они в версии 5.5 описывают поведение Telematics. Помнишь, мы говорили насчет поведения, которое нас интересовало с Telematics? Поведение связано после того, как маршрут синхронизируется к системе. Помнишь, у нас было... Мы хотели решить, как и что делать assignment и куда. У них есть настройка, по какому полю делать assignment синхронизированного маршрута.

**Vova** [02:18:39 - 02:19:15]: Это какая-то дичь. А у них находится эта настройка внутри auto-arrived assignment.

**Dan Khasis** [02:19:19 - 02:19:48]: Они говорят, что теперь ты видишь, как я чувствую, когда мы вставляем узнать что в какое-то подменю, которое никак не связано с чем. Видишь, у них есть интересный пункт early route departure tolerance. Это насколько раньше, чем начало маршрута, допустимая погрешность начала авто-начала. Я думал, что у нас есть что-то такого рода.

**Vova** [02:19:49 - 02:19:59]: Нет, мы вообще даже на данный момент даже не считаем delay, сколько прошло времени между планированным временем начала маршрута и фактическим временем начала маршрута.

**Dan Khasis** [02:20:00 - 02:20:02]: У нас нет такого. Нет, у нас есть авто.

**Vova** [02:20:02 - 02:20:22]: У нас есть какое-то авто-начало. У нас есть авто-начало, да, но у нас там какие-то еще проблемы с тем, что мы делаем авто-начало и потом трекаем маршрут на протяжении длительности маршрута, а потом почему-то мы перестаем собирать данные, несмотря на то, что маршрут может затянуться дольше.

**Dan Khasis** [02:20:28 - 02:21:19]: Нет, мы говорим о разных вещах. У нас есть какой-то функционал, что если водитель случайно забыл кликнуть start route или begin route, что мы автоматически на его авто-начале откладываем. И они говорят, что если водитель, например, они пишут в этой ситуации, если водитель за 3 часа ехал раньше, это проблема, но если он ехал за 5 минут раньше, тогда это допустимо. Понимаешь?

**Vova** [02:21:20 - 02:21:32]: Да, по идее эти верхняя и нижняя границы допустимости, они должны быть для любой КПИ.

**Dan Khasis** [02:21:34 - 02:21:43]: Не КПИ, они связаны к какому-то действию, к какой-то вещи, которая происходит.

**Vova** [02:21:43 - 02:22:04]: Это применимо к любой абсолютно метрике. Если ты для метрики выставляешь минимальный допуск, максимальный допуск, и потом ты можешь оценивать ее, находится ли она в рамках этих допусков. Нет, подожди секунду.

**Dan Khasis** [02:22:04 - 02:23:38]: Ты путаешь две разные вещи. Как ты это описываешь, это для репортинг-анализа. А как я это описываю, это в рамках мобильного приложения или telematics engine, где как только через live activity стрим проходит дофига данных и data stream и так далее. Когда в этом реке сигналов приходит сигнал, который интересен, там миллионы сигналов проходят. А теперь пришел route start, route id, route time, drive time и так далее. Event type, Geofence Departed или Geofence Departed. Если какие-то настройки закашированы на каких-то root аккаунтов, которые с этим связаны. Есть? Окей. И тогда это пишется в базу. Это две разные ветки. Одна это аналитика, а вторая это event processing.

**Vova** [02:23:38 - 02:23:46]: И вот это, я не знаю, если это описывает аналитику или event processing, но это две разные вещи.

**Dan Khasis** [02:23:46 - 02:25:11]: Аналитика может смотреть на actual versus planned, как ты описал, но аналитика может смотреть на actual versus event processing тоже. Event processing отличается от actual. Если вы помните, что мы недавно сделали для Bluemnet, они это сделали в версии 5 и 6 тоже. Вот эта секция, когда идет через Telematics Gateway Connection, и у Telematics есть Vehicle, и Route, и Order, и Driver, и Asset. Вот эта секция отписывает в обоих направлениях, по какому совместному ключу синхронизация должна происходить по Vnumber, по Driver, или вообще выключено. То есть, если пришел из Geotab маршрут, и в том маршруте он пролинкован к водителю, они дают им возможность выбрать. А по умолчанию By Equipment, значит By Vehicle ID. Но они его называют Equipment, а не Vehicle. Это, кстати, очень мудро, потому что Equipment, это может быть мотоцикл, это может быть... Мне рассказывали в какой-то момент, что UPS в Венеции делает доставку лодкой. Лодка это не совсем Vehicle.

**Vova** [02:25:16 - 02:25:54]: Сейчас работами еще будут доставку делать. Дронами. Где-то я читал, что кто-то пытается сделать такую штуку, что дирижабль прилетает. Маленький. И у него на борту дроны, и он прилетает в какую-то локацию, и дроны летят, доставляют товары, потом возвращаются на дирижабль, и дирижабль летает.

**Dan Khasis** [02:26:24 - 02:28:56]: Да, так они все фичи на планете сюда засунули. Я смотрю на их репорт в Telematics, там есть все диагностики, там есть cost, стоимость маршрута, чистый грязный доход, навигация. Они дохуя вещей сюда вставили. Я просто ищу, если у них есть что-то для ордера, что мы пропустили. Мне любопытно, что они сделали за последние семь лет, если это все уже так давно у них есть.

**Vova** [02:29:00 - 02:29:23]: У них есть Waypoint, можно построить маршрут из Waypoint, когда проезжаешь мимо просто. Должен проехать мимо, и RoadNet, Applications, RoadNet, 5.6.

**Dan Khasis** [02:29:23 - 02:31:52]: Окей, мы отдельно тогда покопаемся. А, Omnitracks 1 теперь они это называют, интересно. Сейчас, секунду. Ага, 2022 год я нашел. Они перешли на here.com и Geocoding. Локально они считают стоимость по правилам, которые мы им даем. Потом подписывает покупатель что-то. У меня не всегда есть подпись, у Minimals не всегда есть подпись, потому что иногда сам водитель делает доставку, когда никого другого нету. Понимаешь?

**Vova** [02:31:54 - 02:33:08]: Да, я понимаю, но у нас есть уже взять автограф Proof of Visit Task. По идее мы просто сейчас здесь вместо Payment поставим Print. Если подпись была собрана до принта, то мы можем ее в чек включить в подпись. Если мы хотим, чтобы обязательно мы можем сделать тогда зависимость и сказать, что принт не может делать, пока не собрал Signature. Может быть это настройка? Я не верю в то, насколько важно пользователю самому смотреть на свой автограф в чеке. Я, честно говоря, не помню ни разу такого. Это автограф покупателя, а не его. Да, но чек же отдается покупателю. Ты печатаешь чек, чтобы отдать его как подтверждение покупателю.

**Dan Khasis** [02:33:14 - 02:33:20]: Покупатель подписывается, ты ему даешь в письменной форме, не цифровой output.

**Vova** [02:33:22 - 02:33:40]: Но ему не нужно смотреть на свою подпись, потому что он уже подписался, а ему нужна просто другая информация о том, что там и конкретно ему оказали, какой набор услуг. Подписался он в мобильном приложении, и ему нет особой необходимости смотреть на свой автограф. Он знает, как он выглядит и так.

**Dan Khasis** [02:33:40 - 02:34:23]: Кто знает? Сам подписавшийся знает. Кто сам подписавшийся? Подписавшийся Вова это 90% случаев, это не хозяин бизнеса, это какой-то служащий. Так он берет этот чек, доказать своему начальнику, чтобы начальник имел у себя в документации это. Это не принципиально, но надо опять сделать резервацию кастом настройки, что, например, позволяет ли ты принять принт?

**Vova** [02:34:30 - 02:34:32]: Это будет настройка принт-экшена.

**Dan Khasis** [02:34:33 - 02:36:40]: Да, я покажу что-то, что Scope недавно сделали. Они сделали первую версию административной панели, чтобы администратор мог всю организацию свою редактировать, но одновременно, чтобы индивидуальный юзер мог свои личные настройки модифицировать. Они теперь заходят и по секции MR treatment notes туда-сюда модифицировать. Или если ты как супер администратор хочешь модифицировать все точерние организации, которые под тобой. Например, у нас сейчас большая проблема, ты не можешь делать логин как администратор организации. И теперь ты смотришь и поехало. Теперь весь список. Ты модифицируешь настройки того инстанса Telematics Connection того инстанса, например, MR Connection и ты модифицируешь настройки, которые тебе нравятся или не нравятся на уровне этой конкретики. И потом Badge Update тоже полностью неправильно сделан, но тем не менее попытка первая. Есть.

**Vova** [02:36:47 - 02:37:06]: Ты редактируешь на наш язык? Ты как аккаунт-оунер редактируешь разные или, например, других юзеров? Или это админская панель, где ты кастомеров управляешь?

**Dan Khasis** [02:37:10 - 02:37:30]: В принципе, то и то. Ты знаешь, что в Bloom.Net есть организация, например, у них есть 200 или 300 root аккаунтов.

**Vova** [02:37:35 - 02:37:45]: Но мы же планируем эти root аккаунты потом завести под один аккаунт и сделать из этого facilities или какие-то регионы?

**Dan Khasis** [02:37:48 - 02:38:39]: Или нет? Или я неправильно понимаю политику партии? Что есть какая-то сущность, у той сущности есть какие-то атрибуты. Те атрибуты могут быть дочерние сущности, и они категоризованы по каким-то типам. Эти типы динамически задаются на разных сущностях.

**Vova** [02:38:42 - 02:38:45]: У тебя есть централизованное место менять настройки на всех сущностях?

**Dan Khasis** [02:38:46 - 02:39:08]: Да. Если ты посмотришь на Bloom.Net, я хочу показать один из наших самых больших недостатков. Я не предлагаю его сейчас менять, потому что наши клиенты не такого типа крутые. Но если у тебя действительно есть 50 регионов или 50 складов, ты должен как лог заходить. Логиниться на 50 аккаунтов.

**Vova** [02:39:08 - 02:39:12]: На 50 аккаунтов.

**Dan Khasis** [02:39:12 - 02:40:33]: А почему это есть? У FedEx это была такая же проблема. Когда у нас был FedEx Canada, они не могли зайти в один аккаунт и просто моментально. Это достаточно важно, что здесь должна быть индивидуальный дропдаун для фасилити. Фасилити такая важная вещь, которая по-прежнему здесь отсутствует. Это же сумасшествие, что она отсутствует здесь. Потому что каждый маршрут пролинкован к фасилити. Ни один серьезный бизнес нихуя не купит без фасилити. У него есть 50 складов, как у Matthews. Найди мне все маршруты в New York City фасилити. Прямо сейчас. И ты ничего не найдешь. Например, мы только что считали, что в RoadNet есть функционал делать сортировку по маршруту в зависимости от того, как опаздывает этот маршрут. Прямо сейчас. Где route.actual.starttime? Где route.actual.starttime? Есть ли он или нет? Должен быть, наверное.

**Vova** [02:40:33 - 02:40:37]: Здесь даже не грузится.

**Dan Khasis** [02:40:37 - 02:40:42]: Может быть, это у меня с интернетом проблема.

**Vova** [02:40:51 - 02:40:52]: Сейчас я проверю.

**Dan Khasis** [02:41:04 - 02:42:05]: Короче, вот actual.starttime. Вот, видите, есть actual.starttime. Actual.starttime. Включили actual.starttime. Где здесь сортировка по actual.starttime? Есть? Есть. Так теперь 2 из 3 вещи есть. Третья вещь. Давай отсортируем от всех маршрутов, которые отчаяли поздно. И вот, мне кажется, от этого это все взорвется. Дельта между actual.starttime и planned.starttime. Правильно, элементарная арифметика, но ее нет. Вещь здесь есть arrived early и arrived late. А где наш route.started late? route.started early. Вещь опять. То есть мы это делаем 18 лет, но мы элементарно есть.

**Vova** [02:42:05 - 02:42:21]: Это то, о чем я говорил. У нас нет дифференса. Мы не храним дифференс между actual и planned.starttime. Если бы у нас был дифференс, тогда бы мы могли показать такую колонку и посортировать по ней.

**Dan Khasis** [02:42:22 - 02:42:25]: Окей, Семен, вы можете, пожалуйста, записать, прибавить это?

**Semeyon S** [02:42:26 - 02:42:29]: Да, мы это сейчас все фиксируем. Мы попросим...

**Dan Khasis** [02:42:29 - 02:42:36]: Вы согласны, что это просто как бы dead simple?

**Semeyon S** [02:42:36 - 02:42:37]: Это бизнес вопроса.

**Dan Khasis** [02:42:38 - 02:44:06]: А как еще ты будешь... Покажи мне все маршруты, которые прямо сейчас опаздывают. Ты даже не можешь выбрать здесь show route status, кого идет started. Мне нужно, как бы, started on time, early, late. Но у нас есть уже custom selector такого типа. Покажи мне все маршруты, которые опоздали больше, чем на 25 минут. Поехали. Решай все вопросы. И мы поменяли адресбук также на customer, как я помню. Здесь опять screen truncation. Но супервысокое меню по-прежнему. Окей, так возвращаюсь. Нам нужны какие-то хатки, где ты можешь моментально менять между facilities. Это достаточно важная вещь, что это должно быть на самом высоком этапе. И то же самое у orders, где текст опять корявый. Где facility здесь?

**Alex Shulga** [02:44:09 - 02:44:13]: У orders пока еще нет атрибуции с facility.

**Dan Khasis** [02:44:16 - 02:46:17]: Надо сделать null field preferred facility. Иначе у тебя 50 складов. Давайте делаем арифметику. 50 складов, 10 водителей в каждом, 500 водителей в день, 500 прошуттов в день минимум, каждый водитель минимум 10 заказов, 5000 заказов в день. Теперь покажи, что ты сделаешь с писком 5000 заказов? Как ты будешь знать, какой склад имеет проблему? Мы говорим, я помню, в 2002 году мы пользовали вот этот Nagios и MRTG, чтобы смотреть на хит-мэпы. И все было просто идеально понятно. У меня есть такие-то кластеры, у меня есть такие-то сервера, у меня есть такие-то географии. И вот эти все склады, все зеленое, все шикарно, но вот этот склад, группа facility номер 7 имеет духу. Все сегодня отчалили поздно. Почему? И вот этот summary у нас по-прежнему нет. Это элементарная агрегация, где по умолчанию список это бесполезно видеть. Надо видеть агрегацию. Вы видели в их strategic route planner, что агрегация в первую очередь идет, а потом идет summary. Конечно, полный релиз они сделали. Это просто сумасшествие, что они это запустили так. Но запустили тем не менее.

**Vova** [02:46:24 - 02:46:45]: Ну вот у них здесь есть метрики, по которым можно оценивать. И когда у тебя есть эти метрики, ты их можешь сравнивать. А у нас дело в том, что мы эти метрики даже пока что не имеем. Мы имеем, мы имеем. По идее, на каждой источнице должна быть набор health метрик, который показывает, насколько все в порядке с этим объектом.

**Dan Khasis** [02:46:46 - 02:46:50]: А почему ты говоришь, что у нас нет, если ты кликнешь на этот маршрут?

**Vova** [02:46:53 - 02:47:01]: У нас есть все сырые данные, которые необходимы маршруте, а нет никаких показателей, которые бы могли говорить.

**Dan Khasis** [02:47:01 - 02:47:02]: Нет, посмотри.

**Vova** [02:47:02 - 02:47:15]: Если там задержка, какой там масштаб задержки, какой там процент out of sequence, какой там... Этих всех вещей у нас как-то нету пока что. Мы их довольно давно нарисовали, а они не имплементированы до сих пор.

**Dan Khasis** [02:47:15 - 02:47:59]: Подожди секунду. Если мы посмотрим здесь, у нас есть вот, кстати, 12-летняя версия имеет in-product upsell с этими крестиками. У нас была секция, куда-то пропала, которая описывала stops for on-road hour. Кто ее выключил без разрешения, я не знаю. Но куда она пропала, я не знаю. Может быть, потом ее выключили без разрешения из этого метрика. Где этот route metrics? Внизу должен был быть, куда он пропал. Ты говоришь про density опции, да?

**Vova** [02:47:59 - 02:48:09]: На routes list, на routes map, да, есть. Да, но он должен быть в route editor тоже.

**Semeyon S** [02:48:12 - 02:48:15]: Да, она просто не зарелижена.

**Dan Khasis** [02:48:15 - 02:48:29]: Ну, на аккаунте у Дэна ее нет, значит. Вот, здесь нету density. Вот эти density, у нас они были 15 лет, потом их вырубили без разрешения.

**Vova** [02:48:29 - 02:48:34]: Я, мне кажется, совсем недавно видел.

**Dan Khasis** [02:48:34 - 02:48:49]: Может, у тебя на аккаунте... Если ты здесь, на этой карте, нам моментально надо выбрать facility. Вот ты должен прямо здесь мы должны иметь возможность хуяк, ты выбрал facility, ты прыгнул в тот facility прямо сейчас.

**Vova** [02:48:49 - 02:48:59]: Ну, это фильтрация по facility, да. Просто ты предлагаешь вынести фильтрацию facility на верхний уровень.

**Dan Khasis** [02:48:59 - 02:49:04]: Она такая важная, это как прыгать с аэропорта на аэропорт, когда ты работаешь на государство федеральное.

**Vova** [02:49:05 - 02:49:11]: Да, но мы же хотим сделать, кроме facility, хотим еще сделать другие измерения для атрибуции, да?

**Dan Khasis** [02:49:12 - 02:52:40]: Нет, ты путаешь три темы сейчас, три темы к минимуму. Их штука здесь, это для recurring route planning. Вторая вещь, это внутри business insights. Третья вещь, это внутри snapshot объекта, который мы агрегацией нарисовали. Как только они закончат все вкладки, мы их внедрим. И четвертая вещь, это прямо здесь никому не нужно здесь смотреть среднее количество миль между остановками в режиме routes. Это просто немножко jerking off. Это бесполезно. У них нет average service time. У этих придурков, у них нет average time per route. У них дохуя ничего нет. Но опять не забудьте, что это 7 лет назад они могли это уже починить. Я просто имею ввиду то, что они сделали это изначально правильно, как покупатели ожидают. Вот и все, что я пытаюсь сказать. Возвращаясь к нашей ситуации, это то, что нам нужно на label поле фильтрацию по facility. И orders, в принципе, должен быть пролинкован customers. У нас есть линковка customers здесь, кто-то знает? Кстати, здесь супер неудобно, что я должен двигать. Я галочку здесь выбрал. Если я хочу увидеть что-то здесь, она прыгает, как всегда. Edit order. Где customer? К какому customer этот order принадлежит?

**Semeyon S** [02:52:40 - 02:52:47]: Customer линковки еще нет.

**Dan Khasis** [02:52:47 - 02:52:55]: Она в работе.

**Semeyon S** [02:52:55 - 02:53:42]: Ордера еще не залинкованы. Целый раздел customer, конечно, намекает, что линковка обязана быть. Я бы предлагал заканчивать уже. Нам еще это завтра все обработать надо еще за пятницу.

**Dan Khasis** [02:53:43 - 02:54:40]: Мы summary делаем, и как бы все, что у нас осталось из предыдущей недели, потому что тема широкая, глубокая, но... Вот видишь, здесь есть... Здесь опять неправильно, это не vehicle. Vehicle мы говорим, значит, equipment. Нам надо, я думаю, переменять с vehicle на equipment. Вот этот цикл-это не vehicle. Но в любом случае, давай представим, что это у нас.

**Vova** [02:54:40 - 02:54:53]: Вот, например, вот это у нас это это это это это это это это это это Потому что это… Я так и не понял.

**Dan Khasis** [02:54:54 - 02:54:56]: Это не пика. Вот в чём проблема.

**Vova** [02:54:57 - 02:55:20]: Вот если у меня была загрузка машины. В начале маршрута я поехал, выехал, например, загруженный. Потом я выгрузился, потом я что-то загрузил. Потом я что-то выгрузил, что-то загрузил. Я еду по маршруту, у меня ступеньками всё. И на каком-то этапе машина была загружена на 90% максимум. На максимальном моменте.

**Dan Khasis** [02:55:21 - 02:55:42]: Как это называется, вот эта линия? Всё зависит от какого природы твоего бизнеса. Если твой бизнес – дистрибьюшн, я бы, может быть, подумал, согласился, что это пик ютилзейшн. А что, если ты стариков туда-сюда по докторам возишь?

**Vova** [02:55:43 - 02:55:51]: Значит, сколько максимально в машине сидело на самом загруженном участке стариков в машине?

**Dan Khasis** [02:55:52 - 02:56:03]: Да, но звучит ли это как правильный перевод, как Пушкин перевод на китайский, потом на испанский, потом назад на английский? Звучит ли это как пик ютилзейшн? Я потом спрашиваю.

**Vova** [02:56:04 - 02:56:08]: По-русски это пиковая нагрузка, но я не знаю, как по-английски правильно.

**Dan Khasis** [02:56:10 - 02:57:33]: Вот почему я предлагаю, я не имею ответа, я подумаю. В любом случае, я бы не показывал это как дерево. Я тебе скажу, почему. Потому что для меня это числитель, знаменатель и пропорция их вместе. И потом у нас есть третья колонка, которую мы, к сожалению, плохо делаем, и это available. То есть actual и planned мы делаем более-менее хорошо, но у нас нет available. Хотя vehicle имеет данные насчет available. Что это значит? Это значит, что это все бесполезно. Почему это бесполезно? Потому что вы сравниваете пиковую нагрузку с планированным или задуманным из optimization profile. То есть если в optimization profile максимальная граница была, скажем, 10 единиц, вы посадили 9 стариков, а машина имеет автобус с 30 сидениями, так у вас нагрузка что, 90%? Или одна треть? Или 33%? Для меня она 33%.

**Vova** [02:57:33 - 02:57:53]: Это availability. Есть actual availability, сколько в данный момент свободных мест в машине. Есть всего, объем машины, это availability в целом, сколько в машине помещается. И есть planned availability на каждой из остановок.

**Dan Khasis** [02:57:53 - 02:58:29]: И когда мы пишем просто available или просто planned, то непонятно на какой из остановок. Ты все правильно перечислил, но потом ты опять себя запутал. Давай я по-другому скажу. Если мы откроем vehicles, как team vehicles, я не понимаю. Окей, мы опять все переделаем. Я подумал, vehicles, который мы переименуем, например, на equipment. Equipment type будет vehicle. Окей, например. И теперь я открываю equipment.

**Vova** [02:58:41 - 02:58:53]: У equipment есть простые понятные свойства. Да, у него есть capacity по всем параметрам. Тут проблемы нет. Как только мы начинаем планировать маршрут под этот конкретный equipment, то у нас...

**Dan Khasis** [02:58:53 - 02:58:59]: Подожди, вот vehicle. Окей, во-первых, здесь нет никаких данных насчет vehicle.

**Vova** [02:58:59 - 02:59:02]: Они все в park capacity профайле находятся.

**Dan Khasis** [02:59:02 - 03:00:02]: Нет, это неправда. Вот этих данных нет. Регистрации, vehicle info. Volvo, где здесь написано Volvo? Вот я открою снова snapshot. Здесь нигде не написано Volvo. Это имя, это адрес, это не тип. Окей, Семен запишет к себе в свою библию наших погрешностей это все. Это супер легко вывести. Что я пытаюсь сказать, другую вещь, Вова. На этом этапе vehicle профайл. Окей, давайте скажем, например, что там будет capacity профайл. Кстати, неужели вас не беспокоит... А, нет, все правильно. Почему это странное поведение? Смотри, vehicle profile details, это что? Этот самый профайл называется vehicle profile details? Какой есть профайл? Судя по всему, да. Да, интересно.

**Semeyon S** [03:00:02 - 03:00:05]: Окей.

**Dan Khasis** [03:00:05 - 03:00:27]: Значит, capacity профайл я выбрал. Я редактирую vehicle capacity profiles. Где? Я даже не знаю, как выйти, блядь, на vehicle capacity profiles. Сюда, из меню. Как туда попасть? Вы видели на цвет.

**Semeyon S** [03:00:30 - 03:00:42]: Где? Сейчас через drawer. Внутри vehicle там, там, где ты выбираешь capacity profile, там есть линка на полноценную.

**Dan Khasis** [03:00:42 - 03:09:23]: Нет, вот я на vehicle. Здесь нет никакого метода, кроме как через редактор зайти. Ну да, через редактор. Если помните, как было у SAP, там были настройки, в настройках была секция, все возможные вещи. Вот почему я предлагаю settings, просто сделать settings, сделать ближе к scope, что вот у тебя будет секция здесь vehicle profiles, то-то-то-то-то, ты выбираешь, и она прыгает на ту секцию в более fullscreen режиме. Но в итоге все в централизованном месте, а ты vehicles, vehicle profiles, ты даже не можешь найти редактор vehicle profiles или optimization profiles. Ты никак его не найдешь, не знаешь о нем ничего. Так, возвращаясь к money shot, вы прибавите ссылки, любой человек это может делать, это нехуй делать. Facilities вы пролинкуете к заказу, и это тоже решит вопрос. Route вы пролинкуете. Вот если мы вернемся на routes, где здесь assignment facility? Почему его нету? Потом ты идешь на редактор маршрута, open route settings, где здесь facility? Его тоже нету. Так как будет аналитика работать? Никак. Где business unit? Его нету. Как она будет работать? Никак. Почему это важно? Почему это суперэлементарное graph relationship важное? Потому что никто не может быстро менеджировать фирму, которая имеет 50 складов. В принципе, если мы посмотрим на фильм, который я показал в гавчете, почему я как бы нервный, это потому что у нас сделано 99,9% всего, но из-за отсутствия каких-то суперэлементарных линковок у нас вся задуманная система, вся логика не работает. Из-за суперэлементарных линковок. Потому что если бы у нас был facility, мы бы, когда ты зашел в экран, ты бы увидел список facilities, сколько маршрутов прямо сейчас on time, late, departed, ты бы уже знал. Сколько заказов на сегодня, ты бы знал. Сколько водителей, ты бы знал. Сейчас у нас этого нет. Этого нет. Потому что из-за элементарной линковки, данных route с facility и customer facility. Это редактор facilities. То есть смотрите, что мы опять натворили. Что facilities есть в режиме редактора, но как бы snapshot facility нет. А в snapshot facility и правильное место, куда выводить все заказы этого facility, которые есть. Как вкладка. Так же, как здесь. Все destination этого facility, все маршруты этого facility. Шаблон такой же. API такой же. Просто фильтр меняется. Но вот если теперь мы откроем этот фильм с BloomNet, извиняюсь, с RoadNet, с 2016 года, я просто не понимаю даже, почему мы до конца не поняли. Это их старая версия. Это одна из самых больших фирм окон в мире. Производитель окон. Смотри, как удобно. Ты видишь список по категории facility, в этом случае delivery и так далее. И ты видишь импорт шаблоны. Шаблон импорт. У нас этого не было до 2-3 лет назад. Теперь у них есть загрузка. И вот я, когда я смотрю на routes list, мне бы важнее даже иметь список, как дерево facility с левой стороны или сверху, где не должен даже клик и клик два раза. А я клик один раз, и я прямо провалился в тот facility моментально. Потому что я должен в нашей системе кликать фильтр. Я должен кликнуть drop-down, я должен выбрать facility, я должен кликнуть save. Три раза я должен кликнуть. Так в итоге после этой всей загрузки у них есть... Кстати, мы не должны делать, но я хочу показать вам одну вещь. Видишь, у них есть выборка времени перед маршрутом и после маршрута. Это суммируется... Вот если есть route service time, travel time суммарно, и теперь у них есть перед маршрутом время и после маршрута время. Например, на инспекцию, на помыть, если ты кур развозил или ты петухов развозил, они обосрали все, надо помыть. Сколько это занимает? Час. Окей, ты работаешь максимум 8 часов в день. И они в оптимизацию включают это тоже. Потом... Мы говорили насчет этого раньше, у нас тоже этого нет. Водитель первый, водитель второй и есть команда, team. Окей, мы еще забываем об этом тоже. Расслабление временных окон. Ну вот это список destination, который у нас только мы прибавили несколько месяцев назад. У них это есть, посмотрите. Список destination. Ордер, кастомер. Сейчас у нас нет кастомера, у них есть. И вот это маршрут с левой стороны, так они выбирают drill down. Организация идет на business unit, идет на facility, идет на route, идет на destination, идет на заказ. У нас должен быть snapshot для каждого. Сейчас этого нет, сейчас этого нет. И в принципе order line item и под order line item есть wrapper invoice. Пока тоже нет, но будет. Вот это routing sessions, это как они называют оптимизации. Так возвращаясь к invoicing, invoicing почти бесполезно без звенковки кастомер, потому что не будешь знать сколько денег у кого собирать. Возвращаясь к самого начала разговора линковки из SAP, мы должны синхронизировать facilities, customers, orders, inventory. Без этой линковки мы ничего не можем считать, потому что мы не знаем какому кастомеру этот invoice привязывать. Понимаете? Без кастомера это все бестолково.

**Vova** [03:09:23 - 03:09:29]: Очевидно.

**Semeyon S** [03:09:35 - 03:10:12]: С линковками, причем в таком большом количестве, надо поднимать схему базы данных и смотреть на связи, потому что с этими серьезные проблемы. Вот. Короче, надо там принимать какое-то решение. Потому что мы с AP и с этими дополнительными связями постоянно их ждем, постоянно их выбиваем, а до какого-то кардинального решения руки не доходят.

**Dan Khasis** [03:10:15 - 03:10:21]: А кто у Игоря ведущий AP-разработчик об Акенде? С раутами и так далее?

**Semeyon S** [03:10:27 - 03:10:55]: С раутами... Саша... Ну я подразумеваю, что это Александр Кавтанов. Александр может подтвердить или перенаправить. Мы тебя не слышим. Или это меня не слышит? Нет, Саша.

**Alex Shulga** [03:10:55 - 03:11:04]: Да, сори. Я могу подсказать, что, наверное, это Александр Дылевский. Я не знаю, он сегодня с нами или нет.

**Semeyon S** [03:11:08 - 03:11:09]: Ну я его с вами.

**Alex Shulga** [03:11:09 - 03:11:10]: А, да, сори.

**Semeyon S** [03:11:15 - 03:11:24]: Сейчас. Кто у нас ведущий разработчик? Все, что касается маршрутов.

**Dan Khasis** [03:11:27 - 03:11:35]: Не оптимизация маршрутов, а сохранение, обработку APv5, раут и оптимизация APN-поинтами.

**Alexandr Kovtunov** [03:11:35 - 03:11:40]: Извините, у нас сохранение по качеству розины v4 происходит.

**Dan Khasis** [03:11:43 - 03:11:47]: v4, v5, кто самый-то ведущий или знаток большой?

**Alexander Dylevskiy** [03:11:49 - 03:11:52]: В зависимости от темы.

**Semeyon S** [03:11:53 - 03:11:55]: Рауты, маршруты.

**Alexander Dylevskiy** [03:11:57 - 03:12:01]: Нет, я имею в виду в зависимости от subtopic по маршруту.

**Semeyon S** [03:12:02 - 03:12:04]: Ну, чтение, создание.

**Alexander Dylevskiy** [03:12:07 - 03:12:12]: v4 больше ко мне, v5 новые APN-поинты ко мне, старые к автонову.

**Dan Khasis** [03:12:18 - 03:12:36]: Окей, v5 у вас есть. У вас есть... Мне Игорь, мне кажется, говорил, что вы уже сделали новую таблицу, которая сохраняет метаданные линковка между business unit, facility, object type и object id.

**Alexander Dylevskiy** [03:12:37 - 03:12:38]: Есть такое.

**Dan Khasis** [03:12:39 - 03:13:06]: Почему мы не подскажем нашим сотрудникам, как использовать это, чтобы выводить эти данные на уровне раут-снапшота и customer-снапшота и facility-снапшота? Ты можешь, пожалуйста, подсказать, какой APN-поинт возвращает это или это возвращается как метаданные, обогащенные внутри раут-аппент-поинта?

**Alexander Dylevskiy** [03:13:08 - 03:13:12]: Возможно, я не понял вопрос. Мне показалось, что...

**Dan Khasis** [03:13:13 - 03:14:44]: Детально, у тебя есть раут при создании маршрута. Ты обогащал, кто-то обогащал эти вещи и сказал, например, что это маршрута facility1 и business unit2. Теперь это сохранилось в базу данных, в новую таблицу. Там есть новая таблица metadata, metadata линкует какого-то object type, какой-то id и какой-то metadata. Почему мы это сделали? Потому что в raw data таблице сотни миллионов записей, maintenance болезненно, прибавить еще одну колонку все равно неправильно, потому что там есть энное количество многомерных relationships. Значит, мы согласовали, что мы сделаем дочернюю таблицу, которая многим описывает метаданных при записке, при создании, или при пути, или обсертии. И теперь любая сущность, например, раут, можно на нее наращивать facility и business unit, и вопрос был, возвращаются ли вот эти метаданные в своем независимом API, independent, или они возвращаются только в режиме route API, например, v4 или v5, или и то, и то.

**Alexander Dylevskiy** [03:14:47 - 03:14:52]: Насколько я знаю, такого API в принципе не существует, это чисто техническая реализация на данный момент.

**Dan Khasis** [03:14:54 - 03:15:13]: Я думаю, что все в кавычках техническое. Ты имеешь в виду, что она для бизнес инсайта, для аналитики, для Артема уже сделана и пользуется, но redundant API не существует, чтобы выводить эти данные каким-то другим пользователям или системам.

**Alexander Dylevskiy** [03:15:14 - 03:15:23]: Насколько мне известно, да, но эту задачку делал Михаил, он больше в контексте Михаил Кривуля, может подскажет нам.

**Dan Khasis** [03:15:25 - 03:15:45]: Давайте мы попросим Михаил Кривулю, если вы передадите ему коллективно, что ему нужно показать нам API endpoint, который возвращает в redundant режиме эти метаданные насчет любого такого типа объекта.

**Mihail Krivulya** [03:15:47 - 03:16:08]: Я здесь, да. Я делал таблицу, которая связывает маршрута с каким-то объектом, но он используется для reindex, в данном, ну в конкретном случае я делал для связи маршрута с strategic optimization.

**Dan Khasis** [03:16:09 - 03:17:00]: Да, но это неправильно, она даже не, значит тебе неправильную информацию дали. Я не думаю, что, я думаю, окей, одну секунду, я открываю Business Insights, у нас есть Facility группировка, если бы не было той таблицы, которую я писал, это бы не существовало, значит она сохраняется, маршрут, линковка к Facility.

**Alexandr Kovtunov** [03:17:06 - 03:17:10]: Комбайны API возвращает Facility с Facility IDs.

**Alex Shulga** [03:17:13 - 03:17:30]: Сори, я могу еще немножко контекста добавить, у нас есть отдельный API, действительно, который возвращает сущности по Facility ID, сущности атрибутированы с этой Facility, но там поддержки маршрутов еще пока нет, там есть поддержка только

**Dan Khasis** [03:17:30 - 03:18:20]: на изнанку, меня интересует на изнанку, что ты постучался, сказал дай мне насчет route ID единички, дай мне все мета-данные и один из начальных элементов этих мета-данных, это все предыдущие, которые всегда были, плюс attribution данные из attribution таблицы, но это было задумано, что это на уровне entity type, где entity type route это динамичная сущность, и там могут быть order, там могут быть route, там могут быть customer, мы сделали с Игорем это гибко, так теперь ты не просто спрашиваешь route, ты можешь спросить насчет заказа, насчет customer, customer менее важно, потому что customer тоже более структурировано, но route и order точно, это было задумано.

**Mihail Krivulya** [03:18:28 - 03:18:33]: Я нашел модуль, сейчас пытаюсь найти, есть ли свагер для этого?

**Dan Khasis** [03:18:34 - 03:18:42]: Давайте предполагать, что он существует, или если он не существует, это одна линия SQL кода, скачать список.

**Mihail Krivulya** [03:18:43 - 03:18:49]: 100% существует, я нашел таблицу и модуль, где это используется.

**Dan Khasis** [03:18:50 - 03:23:30]: Да, так теперь он существует, значит, когда мы откроем маршрут, мы будем выводить вот эти критические данные attribution сюда, и все, но нам надо будет включить в первой версии read-only, во второй версии assignment надо будет включить, assign facility, и на уровне заказа assign customer, и на уровне destination assign customer, но на уровне destination уже есть customer, просто нету другой важной вещи, здесь нету полноценной линковки к Address Book ID, это customer override, а где customer is a customer location? Почему это так важно? Потому что, чтобы закрыть этот круг замкнутый, что ты придешь сюда в Business Insights, и ты откроешь invoices, или ты откроешь customers, и на уровне invoices ты по дням будешь видеть сумму всех заказов, потому что мы знаем все invoices, мы знаем все заказы, мы знаем все деньги, мы можем сделать сумму, ты пойдешь на customer, ты увидишь customer, первый, второй, третий, ты увидишь количество invoices, ты увидишь количество визитов, departure, ты увидишь количество invoices, заказов, invoice я уже сказал, invoice line items, например, orders, order line items, и сумму по деньгам, сколько было pick-up, сколько было drop-off, сколько было services, delivery, pick-up, Вова категоризирует это все, и потом ты кликаешь export, ты можешь выставить счет, потому что ты же делаешь группировку по неделе, и ты можешь выставлять счет теперь, или за месяц, выставить счет, сумму всех invoices, сгруппированную по customer, и потом будет еще одно, вы только что закончили экспорт агрегации в zip файле, по custom поля, так если бы у нас был price sheet, и там было поле, выкачал 10 галлонов говна, 20 галлонов газа, 30 галлонов чего-то другого, и мы платим за это 10, 20, 30 долларов, это все в price sheet, customer теперь может выставить счет сразу, правильно, своим клиентам, вот почему мы сделали агрегацию, ну в агрегации сейчас у нас есть секция счетчиков, у нас есть секция денежной, а секция денежная это price sheet, который мы сегодня обсуждали, и price sheet это является вот этим spreadsheet большим, что у тебя есть какой-то item type, у этого item есть тип, мы типы уже описали, это service, это raw good, это i-product, например, и так далее, правильно, и потом у нас есть следующая вещь, которая перемножает теперь, в одном случае это перемножается, что водитель запустил, как бы через order экран сделал, а в другом случае это умножается, что водитель сделал через custom форму, и вот на выходе это все выглядит, как столько-то единиц, измеренных таких типов единиц, умноженное на количество денег на единицу равно сумма на ту строку, и сумма всех сумм, это сгруппировано по customer, это счет, который ты должен выставить, и мы сэкономили 200 часов работы в месяц, и за это мы можем брать любые деньги, но без линковки ни черта не получится, вот почему нам критически важно прибавить линковку на order, customer, если ее уже нет, если ее еще нету.

**Vova** [03:23:50 - 03:23:57]: Я, честно говоря, удивлен, что ее еще нет, не понимаю, как так могло получиться, что ее нету.

**Dan Khasis** [03:24:01 - 03:24:20]: Не, не, order. Customer, order. Понял. Ну, а PIP динамически это поддерживает, мы с Игорем часами это обсуждали, и Семен тоже на этих звонках был.

**Alexander Dylevskiy** [03:24:21 - 03:24:28]: Нет, customer и order прилинкованы, но прилинковать еще сюда маршрут, это немножко отдельная история.

**Dan Khasis** [03:24:29 - 03:30:20]: Да, но забудь на секунду о маршруте, потому что маршрут имеет дочерний элемент orders, не проблема, мы все равно бы смогли без facility это сделать, но вот здесь надо прописать срочно customer в attributes, или здесь, в customer секции. У нас же есть два типа customer, вот что меня возмущает. У нас же должно быть, в принципе, два типа customer. Один тип customer, это те, которые резервированы в системе, что мы вот новую штуку сделали в этом году, customers. Это универсальный список customers, который мы синхронизируем или из ERP, или из CRM, или из Telematics, и это все мэпается к нам, синхронизируется в customers. И вот это все сделано идеально. Теперь, но не все бизнесы имеют ERP, или CRM, или Telematics. Большинство бизнесов просто делают как бы ad hoc customer. Правильно, просто произвольно, экспромтный customer list. Так наша задача, это перейти с режима экспромтного customer списка на режим, где это делается, customer order. Вот это все сейчас, это экспромтный customer данные. И это label code, я даже не думаю, что он должен быть здесь, но мы можем завтра созвониться опять и обсудить, после того, как у вас уже поздно. Это больше как ad hoc metadata. Более правильно это то, что есть действительно линковка к полноценному customer сущности. А это меняется больше не customer, а это больше, как звучит, как custom data какого-то типа. XYZ, я не знаю, как это правильно назвать. Но это является и custom data, потому что это не полноценный customer. Это просто custom другой, это как бы гибридная custom data, где вот это полноценное custom data, key value pairs, а вот это полурезервированное custom data, статические, зарезервированные поля, reserved fields, полностью dynamic fields. Но у нас же есть настоящий customer сущность. И вы заметите другую вещь интересную, что у нас же есть еще customer locations сущность тоже. Если вернемся сюда, посмотрите на сюда customer locations. Customer location имеет дочернее отношение к customers. Правильно? Что здесь произошло? Это permissions error или действительно на продакшене. Мы притворяемся, что это бы открылось, вот этот список. Видишь, customer locations. Здесь не хватает change, если на то пошло customer. Как выбрать customer, бля? Видишь, customer. Вот это должна быть выборка, nullable выборка на уровне заказа. Когда я выбираю customer, она должна подтягивать из того autocomplete на уровне заказа. Но просто так customer не совсем правильно, потому что возвращаемся назад в business insights. Иногда мы хотим проверить, их называют same store sales. Это метрика, люди трекают. У меня есть человек, у него есть 50 макдональдсов. И они хотят проверять не суммарно сколько было продано денег во всех макдональдсах, потому что чем больше у тебя макдональдсов, чем больше у тебя будет продаж в принципе, суммарно. А в тех же магазинах, там советская улица против Ленина и так далее. Правильно, плюс, плюс, плюс. Как они увеличились year over year или period over period. Так чтобы это делать на уровне ордера, нам нужно иметь этот... Это все идет как бы в ad hoc от customer данные. Сюда вставляются два поля nullable, customer из автокомплита и customer location. Теперь, когда мы идем в business insights, если мы его найдем...

**Alexander Dylevskiy** [03:30:26 - 03:30:36]: У нас на данный момент заказ линкуется к customer location и сквозь customer location заказ линкуется к customer. По-другому оно пока не работает.

**Dan Khasis** [03:30:37 - 03:32:01]: Надо поменять, я тебе скажу почему. Потому что customer location можно перемапать в любой секунду новый customer. Если мы не запишем как на тот момент времени транзакции, какая была атрибуция, тогда, когда поменяется location... Что это значит? У тебя есть, например, регион 1, регион 2. И есть франшайзы в Америке, очень популярно. У нас есть с детьми в школу ходит один чувак, индус, у него... Здесь лежит этот сервис. У него, мне кажется, 250, Dunkin' Donuts, Wendy's, McDonald's, все подряд. Там бешеные деньги зарабатывают. Ну что, если ему один район больше не нравится или один ресторан больше не нравится, так теперь он продаст тот магазин другому чуваку. Но если мы продолжаем обслуживать тот McDonald's, потому что мы там сделали договор с ними на несколько лет, но теперь кастомер другой. И получается то, что мы никак не сможем это сделать, потому что как только ты поменяешь кастомера, вся аналитика полетит. Значит, нам надо записывать на уровне объекта на тот момент времени правильную атрибуцию.

**Alexander Dylevskiy** [03:32:02 - 03:32:17]: Я понял, да, оно так и записывается. Я с бизнесовой точки зрения обозвал это линковкой сквозь. По факту мы в момент линка записываем в заказ, пролинковываем кастомер, который был на момент сохранения в Customer Location.

**Dan Khasis** [03:32:18 - 03:32:19]: Да.

**Alexander Dylevskiy** [03:32:19 - 03:32:20]: Это уже так.

**Dan Khasis** [03:32:20 - 03:34:53]: Как соседняя или дочерняя. Ливен пошел, сукин сын, из ведра. Так теперь здесь будут кастомеры, и потом может быть Invoices, и потом Customer Locations. И теперь мы можем любыми комбинациями считать, сколько денег люди должны иметь. И потом в Route Destination мы должны тоже сохранять, конечно, Customer и Customer Location на том дестинейшене. Но это мы должны с Игорем обсудить. Я думаю, что финальный шаг, чтобы заканчивать Invoices, это обсудить и согласовать, в каком формате API будет возвращать что мобильщикам, чтобы мобильщики полностью подтвердили их понимание всего этого. Потом согласовать, что они будут назад нам посылать на API, как API будет подтверждать им, сколько денег и так далее. И любые какие-то нарушения или погрешности, которые сервер нашел или обнаружил при этом submission.

**Semeyon S** [03:35:07 - 03:35:39]: Окей. Сегодня-завтра с этим разберемся. Плюс завтра, чтобы у тебя была структура данных на ревью SQL с этим связанная. И вторым пунктом мы еще завтра поразбираем вопрос со связями и тоже постараемся какие-то артефакты тебе скинуть на ревью. Но это уже будет второй, третий приоритет.

**Dan Khasis** [03:35:47 - 03:36:11]: У вас есть какие-то... Мы покрыли сегодня полезную информацию или мы просто болтали? Я не пытаюсь, чтобы в кавычек жопу целовали, но я просто хочу понять, что мы вкладываем время в полезное, а не просто жгем время всех людей.

**Vova** [03:36:15 - 03:36:24]: Мне лично был полезен сегодняшний разговор. Мы говорили много вещей. Для меня много action points.

**Semeyon S** [03:36:30 - 03:36:47]: Я уже неоднократно говорил, что эти звонки очень полезны, но в этот раз я хотел бы, чтобы еще кто-то из разработчиков высказался. Саша, Миша, Сергей, Игорь.

**Alexandr Kovtunov** [03:36:51 - 03:37:01]: Полезно для меня, я считаю, в плане того, что мы рассматриваем конкурентов. Со судьбы мы черпаем много интересного, много полезного.

**Dan Khasis** [03:37:09 - 03:38:59]: Мне полезно с вами обсуждать, чтобы вы понимали business use case, потому что мне кажется, что отсутствие разговоров с вашими полноценными продакт-менеджерами, которых, в принципе, у нас настоящих нет, кроме в этой группе, не всегда вам понятно, какие люди... молоток без ручки, пила без зубов. Когда мы говорим об этих вещах, я думаю, вам должно становиться очевидно, как болезненно или неприятно людям покупать. Они даже не могут покупать, потому что не могут даже посмотреть все заказы по кастомеру. Это просто смешно. Это не показатель отсутствия технических мозгов. Это, мне кажется, провал нашего бизнеса и продакт-менеджмента, что мы делали вещи или не заказывали правильные вещи, и теперь мы смотрим как бы под микроскопом, и самые важные вещи пропущены, а хуй знает, что есть. Потому что клиенты не умеют это описывать, а саппорт нифига не умеет это описывать. Саппорт когда-нибудь просил эти вещи? Потому что если они не просили, это проблема. Это как экземпляр. Что мне нужно? Если кто-то может, пожалуйста, загрузить экземплярный Strategic Route Planner в мой аккаунт или дать мне доступ на любой другой аккаунт, который имеет Strategic Route Planner.

**Alex Shulga** [03:39:02 - 03:39:08]: Делаем. У нас есть на аккаунте Артура, по-моему, эти данные, но в любом случае загрузим на твой.

**Semeyon S** [03:39:12 - 03:39:18]: Да, зальем. Игорь еще что-то хотел сказать. Игорь, давай.

**Igor Golovtsov** [03:39:18 - 03:39:55]: Я хотел сказать то, что Дэн последнее сказал. То, что было непонимание, как куски нашего приложения должны быть связаны. Потому что с точки зрения пользователя сложно посмотреть на ситуацию, на продукт, если ты никогда не работал в этой сфере как директор какой-то фирмы. С точки зрения директора фирмы или простого какого-то линейного оператора, что может быть полезно, а что бесполезно для пользователя?

**Dan Khasis** [03:39:58 - 03:40:42]: Из одного или двух полей мы можем сделать автоматизацию, которая сэкономит нашим клиентам тысячу часов в год. И, по большому счету, их не бьет, как мучаются эти водители. Их больше беспокоят, как их внутренние белые воротнички. Потому что они стоят в пять раз дороже. Ты плачешь его купить за тысячу год, сидеть за компьютером, инвойсы делать, или ты плачешь водителю 25 тысяч год, чтобы он за рулем сидел с папиросой.

**Semeyon S** [03:41:02 - 03:41:09]: Окей. Еще кто-нибудь что-то сказать хочет по поводу полезности звонков?

**Alex Shulga** [03:41:12 - 03:41:31]: Могу выразить свое мнение и, вероятно, мнение Артура. Очень полезно. Нужно больше таких звонков. Практически в отсутствии требований это единственный способ узнать, как правильно должно быть построено приложение.

**Semeyon S** [03:41:32 - 03:41:36]: Их сформулировать можно на основе этих звонков. Это правда.

**Alexandr Kovtunov** [03:41:39 - 03:42:01]: Я бы добавил, что еще наше присутствие здесь позволяет получить информацию более с первых рук, что что-то может дойти и, например, не совсем в полном виде, потому что все-таки звонки долгие, что-то может потеряться.

**Dan Khasis** [03:42:04 - 03:43:32]: Когда мы выйдем, я думаю, на наш целевой этап готовности, у нас просто сейчас огромный движок, чтобы закрыть эти финальные дельты между что нужно и что есть. И думаю, что как только мы доведем до ума вот эти несколько вещей, что у нас намного меньше, о чем будет говорить, с точки зрения длины разговоров будет намного короче. Плюс мы покрываем сразу все темы одновременно, UI и базу данную, и архитектуру, и API, и мобильное. Большинство других фирм имели 25 звонков с каждой специальностью отдельно. Окей, тогда давай завтра продолжим разговор. Только у меня звонок завтра уже есть. Мы можем его сделать короче, но...

**Semeyon S** [03:43:34 - 03:43:49]: Что если мы сделаем завтра звонок короткий и целенаправленный по базе данных? Потому что мы предыдущие звонки, если честно, до конца еще обработать просто не успели.

**Dan Khasis** [03:43:50 - 03:43:58]: Насчет базы данных, мне лучше тогда, чтобы мне пришла схема, которая задуманная, и потом я пройдусь через них. Тогда без звонка никого.

**Semeyon S** [03:43:59 - 03:44:11]: Тогда, может, мы лучше в четверг посмотрим наработки и дальше продолжим обсуждение. А базу данных скинем в виде текста.

**Dan Khasis** [03:44:13 - 03:44:49]: Меня просто в финальный этап всего это соединение возмущает. Связан с линковкой этого... Объектов. Финальная классификация инвойсов и сохранение этих данных в базу. Если мы не соглашуем поведение, может быть, это просто... Может быть, Вова, я и мобильщики.

**Semeyon S** [03:45:01 - 03:45:06]: Давайте завтра соберу звонок с упором на...

**Dan Khasis** [03:45:08 - 03:45:38]: Я освобожусь завтра. Blumenet очень ждает, чтобы мы все затормозили им, связанное с white-лейболингом. Они наплакали к этому. Паркеру явно, чтобы мы срочно с ними обсудили эту тему завтра. Кстати, есть какие-то апдейты насчет этих несчастных логотипов или что? Они мне мозги... Они все кровь выпьют завтра. Ордер снапшот мы запускаем.

**Semeyon S** [03:45:44 - 03:45:52]: Александр Делевский, там доделали по снапшоту на четвертой версии там нейлы эти несчастные?

**Alexandr Kovtunov** [03:45:54 - 03:46:16]: По-моему, не нужно будет на четвертой делать, мы сделаем через Redux. То есть у нас через DirService с v4 приходят ивенты, что нужно обновить. Мы на своей стороне будем в это время генерировать там нейлы, если они еще не сгенерированы. То есть в v4 людей ничего не должно делать. Модерн сегодня должен...

**Dan Khasis** [03:46:16 - 03:46:22]: Я бы мог показать им завтра ордер снапшот с экземплярными пиктограммами, они бы успокоились.

**Alexandr Kovtunov** [03:46:23 - 03:46:29]: Но мы вообще на завтра выкатку как раз спланировали.

**Alex Shulga** [03:46:34 - 03:46:59]: Извиняюсь, я хотел бы уточнить, что это предварительная версия, потому что там есть еще замечания от нас и по тому, какие там нейлы генерируются. И вот, собственно говоря, насчет генерации через API v4, который используют большинство наших приложений. Это еще не было передано в тестирование, насколько я знаю.

**Alexandr Kovtunov** [03:47:02 - 03:47:06]: Оно уже должно работать. Нет, извини.

**Alex Shulga** [03:47:06 - 03:47:28]: В любом случае, завтра мы просто с утра сможем выкатить предварительную версию и, может быть, мы сможем договориться насчет того, чтобы выкатить чуть позже вот эти вот фиксы насчет сам нейлов для v4. Да, потому что мы только включим это.

**Dan Khasis** [03:47:28 - 03:47:37]: И даже если это будут фотки без там нейлов, или даже если мне нужно что-то показать ему хоть на стейджинге или где-то, что-то не выкатывается, потом они все.

**Semeyon S** [03:47:37 - 03:47:47]: Надо для Bluemet включить и для Bluemet White Label, да? Да.

**Dan Khasis** [03:47:50 - 03:47:57]: Да, просто не выключать старый. Там сломается старый аппарат.

**Semeyon S** [03:47:58 - 03:48:03]: Нет, мы просто snapshot родеров включим для аккаунтов и все.

**Dan Khasis** [03:48:03 - 03:48:07]: Там уже есть этот редактор родеров в новом формате?

**Semeyon S** [03:48:07 - 03:48:19]: Еще нет. Вот этот drawer, который у тебя включен и ты открывал, он еще не опубликован.

**Dan Khasis** [03:48:19 - 03:48:25]: Мне нужно хоть на стейджинге залитые липовые пиктограммки, чтобы я мог показать ему, даже если это не на проде.

**Semeyon S** [03:48:26 - 03:48:29]: На стейджинге мы ордер snapshot, в котором...

**Dan Khasis** [03:48:29 - 03:48:37]: Пиктограммками? Да, да. Окей, так пришлите мне аккаунт и тогда...

**Semeyon S** [03:48:37 - 03:48:41]: Окей, завтра ребята как зальют, мы подготовимся и перешлем тебе.

**Dan Khasis** [03:48:42 - 03:48:50]: Окей, я должен отключиться сейчас. Я тогда с вами завтра соединюсь. Любые идеи, я пришлю вам тогда песню на видео.

**Semeyon S** [03:48:51 - 03:48:52]: Хорошо, договорились.

**Dan Khasis** [03:48:52 - 03:48:55]: Окей, спасибо, пока. Счастливо.

---

## Статистика

### Участники

- **Dan Khasis**: 944 сегментов, 02:26:54 (64.2%), точность 94.0%
- **Vova**: 165 сегментов, 00:24:57 (10.9%), точность 92.6%
- **Semeyon S**: 95 сегментов, 00:21:21 (9.3%), точность 92.6%
- **Alex Shulga**: 21 сегментов, 00:02:40 (1.2%), точность 95.9%
- **Mihail Krivulya**: 19 сегментов, 00:02:38 (1.2%), точность 87.0%
- **Alexander Dylevskiy**: 12 сегментов, 00:01:04 (0.5%), точность 92.7%
- **Igor Golovtsov**: 9 сегментов, 00:01:05 (0.5%), точность 95.9%
- **Anton Khavanskii**: 8 сегментов, 00:00:29 (0.2%), точность 86.3%
- **Alexandr Kovtunov**: 7 сегментов, 00:01:13 (0.5%), точность 88.4%
- **Serhii Kasainov**: 2 сегментов, 00:00:57 (0.4%), точность 99.0%
- **Oleksandr Ishchenko**: 2 сегментов, 00:00:04 (0.0%), точность 95.0%
- **Kateryna Shevchenko**: 1 сегментов, 00:00:03 (0.0%), точность 66.0%

### Качество выравнивания

- Высокая уверенность (time-based): 1273 (99.1%)
- Разрешено через LLM: 9 (0.7%)
- Fallback: 3 (0.2%)
- Средняя уверенность: 93.5%
- [!] Низкая уверенность (<70%): 42 сегментов (3.3%)