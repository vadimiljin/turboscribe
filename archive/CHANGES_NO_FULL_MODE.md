# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ standardize_product_reviews.py

**–î–∞—Ç–∞:** 2025-11-15  
**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç–∫–ª—é—á–∏—Ç—å Full Mode –∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. –û—Ç–∫–ª—é—á–µ–Ω Full Mode (`standardize_file_full`)

**–ë—ã–ª–æ:** –§–∞–π–ª—ã < 50KB –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å —Ü–µ–ª–∏–∫–æ–º - –≤–µ—Å—å —Ç–µ–∫—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–ª—Å—è –≤ LLM

**–°—Ç–∞–ª–æ:** 
- Full Mode –æ—Ç–∫–ª—é—á–µ–Ω
- –¢–∞–±–ª–∏—Ü—ã –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- –û–±—ã—á–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Chunked Mode

**–ö–æ–¥:**
```python
def standardize_file_full(self, file_info: Dict) -> bool:
    """
    –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–∞ —Ü–µ–ª–∏–∫–æ–º (–µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ–±–æ–ª—å—à–æ–π).
    –û–¢–ö–õ–Æ–ß–ï–ù: –¢–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º chunked mode.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True –ø—Ä–∏ —É—Å–ø–µ—Ö–µ.
    """
    try:
        # –ß–∏—Ç–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª
        with open(file_info['source'], 'r', encoding='utf-8') as f:
            original_content = f.read()
        
        print(f"   [INFO] Full mode –æ—Ç–∫–ª—é—á–µ–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤ chunked mode", flush=True)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —Ç–∞–±–ª–∏—Ü–µ–π
        is_table_document = bool(re.search(r'\|[^\n]+\|\s*\n\s*\|[-\s:]+\|\s*\n\s*\|', original_content, re.MULTILINE))
        
        if is_table_document:
            # –¢–ê–ë–õ–ò–¶–´ –û–°–¢–ê–í–õ–Ø–ï–ú –í –û–†–ò–ì–ò–ù–ê–õ–¨–ù–û–ú –í–ò–î–ï
            print(f"   [INFO] –î–æ–∫—É–º–µ–Ω—Ç - —Ç–∞–±–ª–∏—Ü–∞, –∫–æ–ø–∏—Ä—É–µ–º –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π", flush=True)
            
            # –ü—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª –∫–∞–∫ –µ—Å—Ç—å
            with open(file_info['target'], 'w', encoding='utf-8') as f:
                f.write(original_content)
            
            print(f"   [OK] –¢–∞–±–ª–∏—Ü–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: {file_info['target'].name}")
            self.log_progress(file_info, 'success_table_copy', 'Table copied as-is')
            return True
        else:
            # –û–±—ã—á–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤ chunked mode
            print(f"   [INFO] –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ chunked mode...", flush=True)
            return self.standardize_file_chunked(file_info)
```

### 2. –¢–∞–±–ª–∏—Ü—ã –≤ Chunked Mode —Ç–∞–∫–∂–µ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

**–ë—ã–ª–æ:** –¢–∞–±–ª–∏—Ü—ã —Ä–∞–∑–±–∏–≤–∞–ª–∏—Å—å –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –∏ –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞—Å—å LLM

**–°—Ç–∞–ª–æ:** –¢–∞–±–ª–∏—Ü—ã —Å—Ä–∞–∑—É –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ö–æ–¥ –≤ –Ω–∞—á–∞–ª–µ `standardize_file_chunked`:**
```python
# –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —Ç–∞–±–ª–∏—Ü–µ–π
is_table_doc = bool(re.search(r'\|[^\n]+\|\s*\n\s*\|[-\s:]+\|', original_content[:5000], re.MULTILINE))

if is_table_doc:
    # –¢–ê–ë–õ–ò–¶–´ –û–°–¢–ê–í–õ–Ø–ï–ú –í –û–†–ò–ì–ò–ù–ê–õ–¨–ù–û–ú –í–ò–î–ï
    print(f"   [INFO] –î–æ–∫—É–º–µ–Ω—Ç - —Ç–∞–±–ª–∏—Ü–∞, –∫–æ–ø–∏—Ä—É–µ–º –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π", flush=True)
    
    # –ü—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª –∫–∞–∫ –µ—Å—Ç—å
    with open(file_info['target'], 'w', encoding='utf-8') as f:
        f.write(original_content)
    
    print(f"   [OK] –¢–∞–±–ª–∏—Ü–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: {file_info['target'].name}")
    self.log_progress(file_info, 'success_table_copy', 'Table copied as-is')
    return True
```

### 3. –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ LLM

**–ë—ã–ª–æ:**
```python
**–ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏–∏:**
{original_content}  # ‚Üê –í–ï–°–¨ —Ñ–∞–π–ª, –º–æ–≥–ª–æ –±—ã—Ç—å –¥–æ 50KB!
```

**–°—Ç–∞–ª–æ:** –≠—Ç–∞ —á–∞—Å—Ç—å –∫–æ–¥–∞ —Ç–µ–ø–µ—Ä—å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Ç.–∫. Full Mode –æ—Ç–∫–ª—é—á–µ–Ω

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:

### –¢–µ–ø–µ—Ä—å —Å–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:

```
–§–ê–ô–õ
  ‚îÇ
  ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞: —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞?
  ‚îÇ   ‚îú‚îÄ> –î–ê ‚Üí –ö–û–ü–ò–†–û–í–ê–¢–¨ –ö–ê–ö –ï–°–¢–¨ ‚úÖ
  ‚îÇ   ‚îî‚îÄ> –ù–ï–¢ ‚Üí chunked mode
  ‚îÇ
  ‚îî‚îÄ> Chunked Mode:
      ‚îú‚îÄ> –ó–∞–≥–æ–ª–æ–≤–æ–∫ + Agenda (–ø–µ—Ä–≤—ã–µ 5000 —Å–∏–º–≤–æ–ª–æ–≤)
      ‚îú‚îÄ> –¢–µ–º—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å 15 –ø–æ—Ç–æ–∫–∞–º–∏)
      ‚îî‚îÄ> –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ URLs
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

1. ‚úÖ **–ù–µ—Ç —Ä–∏—Å–∫–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤** - –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–æ–ª—å—à–∏–µ —Ç–µ–∫—Å—Ç—ã
2. ‚úÖ **–¢–∞–±–ª–∏—Ü—ã –Ω–µ –ª–æ–º–∞—é—Ç—Å—è** - –æ—Å—Ç–∞–≤–ª—è–µ–º –∏—Ö –∫–∞–∫ –µ—Å—Ç—å
3. ‚úÖ **–ë—ã—Å—Ç—Ä–µ–µ** - –Ω–µ —Ç—Ä–∞—Ç–∏–º —Ç–æ–∫–µ–Ω—ã –Ω–∞ —Ç–∞–±–ª–∏—Ü—ã
4. ‚úÖ **–î–µ—à–µ–≤–ª–µ** - –º–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM

### –¢–∏–ø—ã —Ñ–∞–π–ª–æ–≤:

| –¢–∏–ø —Ñ–∞–π–ª–∞ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|-----------|-----------|
| **–¢–∞–±–ª–∏—Ü–∞** | –ö–æ–ø–∏—Ä—É–µ—Ç—Å—è –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô |
| **–û–±—ã—á–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (–ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞)** | Chunked mode (–ø–æ —á–∞—Å—Ç—è–º) |

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
cd /home/vadim/Projects/route4me.com/turboscribe
python -m py_compile standardize_product_reviews.py
echo $?  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 0
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π!

---

## üìù –õ–æ–≥ —Å—Ç–∞—Ç—É—Å–æ–≤:

–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ç–∞–±–ª–∏—Ü –≤ –ª–æ–≥ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è:
```json
{
  "status": "success_table_copy",
  "details": "Table copied as-is"
}
```

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:

```bash
# –¢–µ—Å—Ç
python standardize_product_reviews.py --test

# –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
python standardize_product_reviews.py
```

---

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** 2025-11-15  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ READY

