# Product Review 25 Aug 2025 - Ad Hoc Meeting 2
[https://drive.google.com/drive/folders/1UQRocnaux32Cs8409orfKhmIC5JNzjy_](https://drive.google.com/drive/folders/1UQRocnaux32Cs8409orfKhmIC5JNzjy_)
Отлично, вот вторая часть отчета о встрече, основанная на продолжении стенограммы.
### Отчет о стратегической встрече с CEO (Часть 2)
Дата: 2025-08-25Присутствовали: Den (CEO), Игорь Скринковский, Сергей и другие члены команды.Цель встречи: Детальное обсуждение улучшений UI/UX, производительности карт и функциональности Route Editor для повышения операционной эффективности пользователей.
### 8. "What-If" Сценарии для симуляции маршрутов
- Ответственный: N/A
- Время обсуждения: 22:04 – 22:20
- Контекст / Цель: Den озвучил потребность в инструменте для симуляции, который позволил бы пользователям видеть, как изменения (например, время старта) повлияют на маршрут, без необходимости сохранять эти изменения.
- Ключевые тезисы, директивы и мнения Den'а:
  - Den хочет функциональность по типу "что, если?".
  - Директива: "Дай мне возможность посмотреть, как будет меняться маршрут, если меняется start date, но не меняя start date." Это должно быть реализовано в режиме предпросмотра, без изменения исходных данных маршрута.
- Решения и План Действий / Следующие Шаги:
  - Действие: Команде поручено обдумать концепцию и реализацию этого функционала. Конкретных сроков и ответственных не назначено, задача поставлена на проработку.
- Итоговое резюме по теме:Den инициировал разработку функционала для "what-if" анализа маршрутов. Это позволит диспетчерам симулировать изменения в параметрах маршрута и видеть их последствия в режиме реального времени, не затрагивая при этом существующие данные.
### 9. Улучшения Route Editor: Интерактивность и новые сущности на карте
- Ответственный: N/A
- Время обсуждения: 22:30 – 28:50
- Контекст / Цель: Обсуждение глубокой модернизации карты в Route Editor для превращения ее в полноценный операционный центр, где диспетчер может видеть не только маршрут, но и другие важные сущности (техника, склады) и взаимодействовать с ними.
- Ключевые моменты обсуждения и предложения команды:
  - Команда подтвердила, что добавление новых слоев и фильтров — это значительный объем работы, так как карта в Route Editor является самым сложным компонентом в системе.
  - Обсудили, что статусы для объектов (например, "закрыт" для склада) должны приходить из внешних систем.
- Ключевые тезисы, директивы и мнения Den'а:
  - Добавление сущностей на карту: Необходимо добавить на карту в Route Editor слои для Vehicles (машины), Facilities (склады, терминалы) и Assets.
  - Прямое взаимодействие: Пользователь должен иметь возможность взаимодействовать с этими объектами. Пример: при поломке машины диспетчер видит на карте другую свободную машину, кликает на нее правой кнопкой мыши и выбирает опцию "Insert into route" (вставить в маршрут), чтобы добавить ее местоположение в текущий маршрут для перегрузки.
  - Фильтрация сущностей: Простого отображения недостаточно. Den требует добавить возможность фильтрации по типу сущности. Пример: "Покажи мне на карте все терминалы типа 'вывоз мусора' или 'топливный склад'".
  - Визуализация статуса ("Health"): Den привел аналогию с игрой StarCraft, где у юнитов есть полоса здоровья. Он хочет видеть на карте статусы объектов в реальном времени с помощью цветовой индикации (зеленый/оранжевый/красный). Пример: склад, закрытый из-за шторма, должен стать на карте красным.
  - API для статусов: Чтобы это работало, мы должны предоставить клиентам API, через который они смогут в реальном времени отправлять нам статусы своих объектов (складов, терминалов и т.д.). Наша система будет эти статусы визуализировать и позволять по ним фильтровать.
- Решения и План Действий / Следующие Шаги:
  - Действие: Добавить на карту в Route Editor слои для Vehicles и Facilities.
  - Действие: Реализовать контекстное меню для объектов на карте с действиями (например, "вставить в маршрут").
  - Действие: Спроектировать и внедрить механизм фильтрации для новых слоев карты (например, по типу Facility).
  - Действие: Разработать API для приема внешних статусов объектов и реализовать их визуализацию (цветовую индикацию) на карте.
- Итоговое резюме по теме:Den дал указание превратить карту в Route Editor в интерактивный операционный инструмент. Будут добавлены слои с техникой и складами, возможность фильтрации по их типам и прямого взаимодействия с ними. Ключевым нововведением станет система визуализации статусов объектов, работающая на основе данных из внешних систем через специальный API.
### 10. Исправление функциональности "Split Route"
- Ответственный: Сергей, команда разработки.
- Время обсуждения: 30:50 – 34:30
- Контекст / Цель: Den продемонстрировал серьезные проблемы в работе функции разделения маршрута (Split Route), затрагивающие как UX, так и техническую реализацию.
- Ключевые моменты обсуждения и предложения команды:
  - Диагностика бага: Команда (Сергей, Игорь) быстро определила причину ошибки. После разделения маршрута фронтенд немедленно запрашивает данные нового маршрута из ElasticSearch, но индексация из базы данных происходит с небольшой задержкой. В результате API возвращает ошибку, так как данных еще нет в индексе.
  - Варианты решения:
    - Ждать push-уведомления о завершении индексации и только потом запрашивать данные.
    - Создать специальный API-endpoint, который будет запрашивать данные напрямую из базы данных, минуя ElasticSearch, для таких "свежих" сущностей.
- Ключевые тезисы, директивы и мнения Den'а:
  - Проблема UX №1: В окне разделения маршрута отсутствует статус остановок (например, Pending, Completed). Пользователю приходится гадать, какие точки уже выполнены, а какие нет.
  - Проблема UX №2: После разделения нет возможности сразу назначить новый маршрут водителю и машине. Это требует лишних действий.
  - Директива по UX: Сделать выпадающее меню по аналогии с другими компонентами: Split into new route и Split into new route and assign. При выборе второго варианта должен сразу открываться диалог назначения водителя, машины, даты и т.д.
  - Критический баг: Den продемонстрировал ошибку в консоли, которая возникает сразу после разделения маршрута, делая дальнейшую работу невозможной без перезагрузки страницы.
- Решения и План Действий / Следующие Шаги:
  - Действие (Срочно): Исправить критический баг, связанный с задержкой индексации в ElasticSearch. (Ответственный: Команда разработки).
  - Действие: Добавить колонку со статусом остановок в модальное окно "Split Route".
  - Действие: Переработать UI, добавив опцию "Split and Assign" для упрощения рабочего процесса.
- Итоговое резюме по теме:Функциональность "Split Route" требует немедленного исправления критического технического бага и серьезной доработки UX. Пользователи должны видеть статусы остановок при разделении и иметь возможность сразу назначить новый маршрут, что значительно ускорит их работу.
### 11. Производительность карт при отображении большого количества данных
- Ответственный: Игорь Скринковский, Сергей.
- Время обсуждения: 37:30 – 58:00
- Контекст / Цель: Ключевая стратегическая дискуссия о необходимости кардинального повышения производительности карт для работы с клиентами из индустрий с большим объемом данных (например, вывоз мусора), где маршруты могут содержать тысячи точек.
- Ключевые моменты обсуждения и предложения команды:
  - Frontend: Сергей подтвердил, что текущая отрисовка тысяч маркеров "убивает" производительность фронтенда. Он предложил установить порог (например, 500 точек), после которого вместо маркеров будут рисоваться только кружочки, а при еще большем количестве — только линии маршрутов.
  - Backend: Игорь указал на узкое место в текущей архитектуре. Для эффективной отдачи только нужных точек (в пределах видимой области карты) требуется переход с DynamoDB на специализированное гео-хранилище (geospatial storage), что является большим архитектурным решением.
- Ключевые тезисы, директивы и мнения Den'а:
  - Проблема: Мы не можем обслуживать крупных клиентов, так как не способны моментально отрисовать на одной карте 100 маршрутов по 1000 адресов в каждом.
  - Директива №1 (Backend): Упрощение полилиний (Polyline simplification) должно происходить на бэкенде. Фронтенд не должен получать 100,000 точек для обработки. Бэкенд должен получать от клиента viewport (видимую область карты) и отдавать только необходимое количество точек с нужным уровнем детализации в зависимости от зума.
  - Директива №2 (Frontend): При большом количестве адресов (>500-1000 суммарно) маркеры точек не должны рендериться по умолчанию. Должны отображаться только полилинии маршрутов. Необходимо вернуть опцию "Show/Hide all markers", как в старом интерфейсе.
  - Директива №3 (API): Игорь должен предоставить API, который может в пакетном режиме (batch mode) быстро отдавать полилинии для множества маршрутов одновременно.
- Решения и План Действий / Следующие Шаги:
  - Действие (Backend): Игорь Скрыньковский должен проработать вопрос перехода на geospatial storage и реализовать логику polyline simplification на бэкенде.
  - Действие (Frontend): Сергей должен внедрить пороги для отображения маркеров. При большом количестве точек — рендерить только полилинии. Реализовать опцию "Show/Hide all markers".
  - Действие (API): Реализовать batch-endpoint для получения полилиний нескольких маршрутов одним запросом.
- Итоговое резюме по теме:Принято стратегическое решение о переработке архитектуры рендеринга карт для поддержки больших объемов данных. Основная нагрузка по обработке гео-данных (упрощение полилиний) будет перенесена на бэкенд, для чего потребуется смена технологии хранения. Фронтенд перестанет отрисовывать маркеры при большом количестве точек, что кардинально повысит производительность и откроет двери для работы с крупными клиентами.
### 12. Улучшение страницы Optimization Snapshot
- Ответственный: N/A
- Время обсуждения: 58:00 – 01:04:00
- Контекст / Цель: Den выразил крайнее недовольство текущей страницей результатов оптимизации (Optimization Snapshot), назвав ее бесполезной и неинформативной.
- Ключевые тезисы, директивы и мнения Den'а:
  - Главная проблема: Страница не дает никакого операционного понимания результатов оптимизации. Отсутствует карта, сводные метрики, прогресс выполнения и фильтры.
  - Видение Den'а: Эта страница должна выглядеть и функционировать почти так же, как основной Routes Map.
  - Ключевые требования:
    - Карта: Карта должна быть основным элементом, отображающим все маршруты из данной оптимизации (с учетом решения по производительности из п.11).
    - Сводные метрики: Сверху должны быть виджеты с ключевыми показателями по всей оптимизации (аналог "spiders").
    - Прогресс: Должен отображаться общий прогресс выполнения всех маршрутов в оптимизации (например, общий progress bar).
    - Фильтрация и группировка: Необходимо добавить те же мощные возможности фильтрации и группировки, что и в Routes List (по водителю, статусу, дате и т.д.). Пример: "Покажи мне все маршруты из этой оптимизации, которые еще никому не назначены".
    - Интерактивность: Пользователь должен иметь возможность кликать на маршрут в списке и видеть его подсвеченным на карте.
- Решения и План Действий / Следующие Шаги:
  - Действие: Полностью перепроектировать страницу Optimization Snapshot, взяв за основу Routes Map.
  - Действие: Добавить на страницу карту, виджеты с метриками, общий прогресс-бар и инструменты фильтрации/группировки.
- Итоговое резюме по теме:Страница результатов оптимизации будет полностью переработана. Она превратится из простого списка в интерактивный дашборд с картой, сводной аналитикой и мощными фильтрами, что позволит пользователям эффективно анализировать и управлять результатами оптимизации.
### 13. Прочие UI/UX улучшения и приоритеты
- Ответственный: N/A
- Время обсуждения: Разбросано по всей встрече.
- Контекст / Цель: В ходе обсуждения Den указал на множество мелких, но важных недоработок в интерфейсе и поднял вопрос о приоритезации фич.
- Ключевые тезисы, директивы и мнения Den'а:
  - Приоритеты в Route Editor: Den был удивлен, что в редакторе есть слой Avoidance Zones, которым пользуются немногие, но нет слоя Territories, который критически важен для логистики (лицензионные ограничения, контрактные зоны и т.д.). Директива: Приоритеты должны определяться бизнес-ценностью, а не случайными запросами. Territories важнее Avoidance Zones.
  - Фильтры: Отсутствие критически важных фильтров (например, по facility для техники или по user на странице оптимизации) делает работу неэффективной. Фильтр по странам содержит нерелевантные страны (Буркина-Фасо, Палестина) и должен быть упорядочен по приоритету.
  - Интерактивность таблиц: Den требует внедрить навигацию по таблицам с помощью клавиатуры (стрелки вверх/вниз). При выборе строки в таблице соответствующий объект (маршрут) должен динамически подсвечиваться на карте.
  - Техническое: Обсудили использование сжатия Brotli. Игорь Скринковский сообщил, что тесты не показали преимуществ перед Gzip и даже выявили небольшую задержку. Решили включить на стейджинге для дополнительного тестирования.
- Решения и План Действий / Следующие Шаги:
  - Действие: Добавить слой Territories в Route Editor в высоком приоритете.
  - Действие: Добавить недостающие фильтры (по facility, user) на соответствующие страницы. Переработать и упорядочить фильтр стран.
  - Действие: Реализовать навигацию по таблицам с помощью клавиатуры с синхронным обновлением карты.
- Итоговое резюме по теме:Den указал на необходимость более строгой приоритизации задач на основе бизнес-логики и исправления множества мелких UI/UX-недочетов, которые в совокупности сильно ухудшают пользовательский опыт. Команда зафиксировала эти пункты для дальнейшей работы.
