# Product Review 7 Aug 2025

## Agenda
- Facility-Based Visibility Filter [[Igor Golovtsov](mailto:igorgolovtsov@route4me.com),[Alex Shulga](mailto:alexs@route4me.com)]
  - UI Component
  - Routes/Orders/Customers/Customer Locations
- Route Snapshot - Delta Column in Left Panel [[Igor Golovtsov](mailto:igorgolovtsov@route4me.com)]
- Customers / Customer Locations [[Davron Usmonov](mailto:davronu@route4me.com)]
- Create Route Dialog Updates [[Vladimir Fedorov](mailto:vladimirfedorov@route4me.com)]
- BackEnd [[Alexandr Kovtunov](mailto:alexkovtunov@route4me.com), [Alexander Dylevskiy](mailto:alexd@route4me.com),[Igor Skrynkovskyy](mailto:igor@route4me.com)]
- Optional: Data Retention [[Alexey Gusentsov](mailto:alexey.gusentsov@route4me.com)]
- Assignment - Design Updates [[Vladimir Zhakhavets](mailto:vova@route4me.com)]
- Pricing - Design Updates [[Vladimir Zhakhavets](mailto:vova@route4me.com)]
## Progress - All High Priority Tasks 18 Jul - 7 Aug  ([Tasks List](https://route4me.atlassian.net/jira/plans/161/scenarios/161/timeline?vid=234))
| Total | 149 |  |
| --- | --- | --- |
| Done | 119 | 80% |
| To Do | 30 | 25% |
[https://route4me.zoom.us/rec/share/ui5mqvhnxlS8dl3W51qBdIq90EGuH9ZT-yv-hZF5aWtKMBCPqoEAJcll8E3LY6y-.EJoBNwhjdMoty6aD](https://route4me.zoom.us/rec/share/ui5mqvhnxlS8dl3W51qBdIq90EGuH9ZT-yv-hZF5aWtKMBCPqoEAJcll8E3LY6y-.EJoBNwhjdMoty6aD)
Passcode: &a9?M+1!
### Отчет по итогам стратегической встречи с CEO
Дата: 7 августа 2025 г.
Присутствовали: Вова, Семен С., Сергей Касаинов, Даврон Усмонов, Катерина Шевченко, Алексей Афанасьев, Игорь Скринковский, Игорь Головцов, Алексей Гусенцов, Владимир Федоров, Дмитрий Смаляк, Александр Дылевский, Михаил Кривуля, Артур Москаленко, Алекс Шульга.
Отсутствовал: Ден (CEO)
Цель встречи: Провести ревью текущего статуса по внедрению функционала "Facilities", обсудить и финализировать логику расчета метрик в Route Snapshot, а также рассмотреть и утвердить UI/UX улучшения для страницы управления данными (Data Retention) и страницы Customer Locations.
#### 1. Статус и стратегия внедрения функционала "Facilities"
- Ответственный: Семен С., Игорь Скринковский, Вова
- Время обсуждения: 07:52 - 09:02, 12:45 - 15:01, 49:38 - 51:03, 1:04:25 - 1:15:40
- Краткое описание контекста/цели обсуждения: Обсуждение текущего прогресса по одной из самых приоритетных задач — интеграции логики "Facilities" (филиалов/складов) во все части системы. Команда столкнулась с рядом архитектурных и UX-вопросов, требующих согласования.
- Основные моменты обсуждения и предложения команды:
  - Семен подтвердил, что команда полностью сфокусирована на этой задаче, отменив другие встречи. Идет активная работа по атрибуции и фильтрации всех сущностей.
  - Команда создала специальный документ для отслеживания прогресса по каждой сущности (атрибуция, фильтрация и т.д.).
  - Владимир поднял ключевой архитектурный вопрос: могут ли сущности Orders и Customer Locations быть привязаны к нескольким Facilities одновременно, или только к одному. Вова предположил, что мульти-атрибуция должна быть только у Users, но окончательное решение требует подтверждения Дена.
  - Команда обсудила необходимость создания отдельной фичи-флага для нового глобального фильтра, чтобы раскатывать его на клиентов контролируемо и не сломать логику для тех, у кого уже был включен базовый функционал Facilities.
- Ключевые указания, мнения и решения Дена: (Ден отсутствовал, обсуждение велось на основе предыдущих встреч и общих принципов)
  - На предыдущих встречах Ден настаивал на внедрении Facilities как ключевого элемента для сегментации данных и управления доступом.
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Признать задачу внедрения Facilities главным приоритетом.
  - Задача (Алексей Афанасьев, Владимир Федоров): Сформулировать и задать Дену прямой вопрос о допустимости мульти-атрибуции для ключевых сущностей (Orders, Locations, Vehicles и т.д.).
  - Задача (Артур Москаленко, Бэкенд): Создать отдельный feature-flag для нового глобального фильтра Facilities, чтобы обеспечить безопасную и контролируемую раскатку на продакшн.
  - Задача (Команда): Продолжать работу согласно трекинг-документу, фокусируясь на основных сущностях (Routes, Orders, Customers, Users, Vehicles).
- Итоговое саммари по теме: Внедрение Facilities является главным приоритетом команды. Были выявлены ключевые архитектурные вопросы, требующие решения от CEO. Команда приняла решение о необходимости более гранулярного контроля за раскаткой нового функционала через дополнительные feature-flags, чтобы минимизировать риски для текущих клиентов.
#### 2. Финализация логики расчета и отображения Дельты в Route Snapshot
- Ответственный: Игорь Головцов, Вова, Семен С., Алексей Афанасьев
- Время обсуждения: 15:01 - 32:41
- Краткое описание контекста/цели обсуждения: Команда столкнулась с разночтениями в интерпретации требований Дена по расчету колонки "Дельта" (отклонение факта от плана) в Route Snapshot. Цель — прийти к единому, корректному решению перед финальной реализацией.
- Основные моменты обсуждения и предложения команды:
  - Игорь Головцов представил текущую реализацию: Дельта % = (Плановое значение - Фактическое значение) / Плановое значение * 100%. Это показывает процентное отклонение.
  - Вова высказал мнение, что "Дельта в процентах" — метрика с низкой практической пользой. Гораздо важнее для пользователя видеть "Прогресс в процентах" (Факт / План * 100%) и "Дельту в абсолютных значениях" (План - Факт).
  - Возникла сложность с расчетом процентной дельты для временных меток (Start/End Time), так как это не длительности.
  - Семен инициировал поиск первоисточника — сообщения Дена в Slack от 4 августа, чтобы разрешить спор.
- Ключевые указания, мнения и решения Дена: (На основе анализа его предыдущего сообщения в Slack)
  - Из сообщения следовало, что для первой итерации Ден требовал показывать процент выполнения плана (прогресс), а не процент отклонения.
  - Он также указывал, что для unattributed time (неатрибуированное время) процент показывать не нужно.
  - Формула для Start Time была специфической и описывала долю задержки от общей длительности маршрута, что команда сочла слишком сложным и неинтуитивным для первой версии.
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Для всех метрик-длительностей (Duration, Service Time и т.д.) в колонке "Дельта" будет отображаться процент прогресса (Actual / Plan * 100%).
  - Решение: Для временных меток (Start Time, End Time) в процентном режиме будет отображаться прочерк, так как процент для них не имеет ясного бизнес-смысла. В режиме абсолютных значений будет показана разница в минутах/часах.
  - Задача (Игорь Головцов, Фронтенд): Изменить логику расчета в UI в соответствии с принятым решением. Вернуть прогресс-проценты вместо дельта-процентов.
  - Задача (Команда): В Jira-тикете обязательно оставлять ссылку на первоисточник (сообщение в Slack), чтобы избежать повторных неверных интерпретаций.
- Итоговое саммари по теме: Команда провела детальный разбор требований и, обратившись к первоисточнику, скорректировала логику расчета метрик. Было принято решение показывать процент выполнения плана, а не процент отклонения, что является более понятной и полезной метрикой для пользователя. Это позволило разблокировать дальнейшую работу над важным компонентом аналитики.
#### 3. UX и риски на странице управления Data Retention
- Ответственный: Алексей Гусенцов, Вова, Семен С., Игорь Скринковский
- Время обсуждения: 32:41 - 49:38
- Краткое описание контекста/цели обсуждения: Алексей Гусенцов продемонстрировал страницу настроек хранения данных (Data Retention), где пользователи могут задавать срок хранения для различных сущностей. В ходе демонстрации были выявлены критические UX-недочеты.
- Основные моменты обсуждения и предложения команды:
  - Проблема №1 (Визуализация): График использования данных не разделяет фактические (прошлые) данные и прогнозные (будущие) данные. Все отображается одним цветом, что вводит пользователя в заблуждение. Вова и Семен привели в пример Google Cloud, где прогноз всегда визуально отличается (например, серым цветом или пунктирной линией).
  - Проблема №2 (Риск потери данных): Изменение срока хранения в меньшую сторону (например, с 365 до 1 дня) является деструктивной операцией, которая необратимо удаляет данные. При этом в текущем UI отсутствует какое-либо предупреждение или диалог подтверждения.
  - Команда согласилась, что это недопустимый риск. Семен отметил, что в саппорт регулярно приходят запросы из-за случайного удаления данных пользователями.
  - Обсуждалась идея введения минимального порога хранения (например, 7 дней), чтобы защитить систему от сайд-эффектов, связанных с отсутствием недавних данных.
- Ключевые указания, мнения и решения Дена: (Ден отсутствовал, решения принимались на основе лучших практик и оценки рисков)
- Принятые решения и Задачи/Следующие шаги:
  - Задача (Алексей Гусенцов, Вова): Переработать график. Фактические данные должны быть одного цвета, а прогнозные — другого (серого), по аналогии с Google Cloud.
  - Задача (Алексей Гусенцов, Фронтенд): Срочно добавить модальное окно с подтверждением при уменьшении срока хранения. В окне должно быть четкое и недвусмысленное предупреждение о том, что данные, выходящие за новый период, будут безвозвратно удалены.
  - Задача (Игорь Скринковский, Бэкенд): Рассмотреть возможность введения механизма "grace period" (периода отсрочки) в 2 недели перед фактическим удалением данных, чтобы минимизировать риски.
  - Задача (Алексей Гусенцов, Вова): Улучшить тултипы на графике, чтобы они показывали не только стоимость, но и объем данных.
- Итоговое саммари по теме: Ревью страницы Data Retention выявило серьезные риски для пользователей и недостатки в визуализации. Были приняты критически важные решения по добавлению защитных механизмов (диалог подтверждения) и улучшению UX-графика, что сделает функционал более безопасным и понятным.
#### 4. Обновления страницы Customer Locations
- Ответственный: Даврон Усмонов, Вова
- Время обсуждения: 53:22 - 55:27
- Краткое описание контекста/цели обсуждения: Даврон представил последние обновления на странице Customer Locations, сделанные по итогам предыдущих ревью с Деном.
- Основные моменты обсуждения и предложения команды:
  - Была добавлена колонка Parent Location для отображения иерархии.
  - Проведена работа по улучшению UI: унифицированы тексты, поправлены заголовки, ограничена ширина колонок для лучшей читаемости.
  - Реализована кнопка "Assign Route" прямо в таблице.
  - Реализован автоматический зум и центрирование карты на отображаемых точках.
  - Добавлен функционал рисования полигонов на карте для выделения и массовых действий с точками внутри них.
- Ключевые указания, мнения и решения Дена: (Ден отсутствовал)
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Принять выполненные доработки.
  - Задача (Даврон Усмонов): Завершить последние багфиксы и подготовить страницу к релизу на следующей неделе.
- Итоговое саммари по теме: Команда успешно завершила итерацию по улучшению страницы Customer Locations, внедрив ряд важных UX-улучшений, запрошенных CEO. Страница готова к релизу для более широкого круга клиентов.
