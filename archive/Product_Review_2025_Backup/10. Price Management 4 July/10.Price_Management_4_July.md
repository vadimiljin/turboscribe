Green - Done   Blue - In Progress   Grey - No Discussion Needed   Orange - BackEnd   Yellow - Design
[https://route4me.zoom.us/rec/share/sU6PZ-lvbLfZxBuJCNUOTGy6TF2FQMeylr_cMOevbPddzlKsqCGRHQ2lFum5XXQM.2VUTldgLjd3MyMGn](https://route4me.zoom.us/rec/share/sU6PZ-lvbLfZxBuJCNUOTGy6TF2FQMeylr_cMOevbPddzlKsqCGRHQ2lFum5XXQM.2VUTldgLjd3MyMGn)
Passcode: a^%f3^N&
# Отчет по стратегической встрече
Дата: 04.07.2025Время: 13:25 GMTУчастники: Dan Khasis (CEO), Vova, Semeyon S, Oleksandr Ishchenko, Alex Shulga, Alexandr Kovtunov, Artur Moskalenko.Цель встречи: Обсудить архитектуру и реализацию интеграции с ERP-системами (на примере SAP), определить подход к управлению номенклатурой и ценообразованием, а также согласовать видение ключевых элементов пользовательского интерфейса.
### 1. Анализ интеграции с SAP: Демонстрация и обсуждение
- Ответственный: Ден
- Время обсуждения: 02:08 - 15:00
- Краткое описание контекста/цели обсуждения: Ден продемонстрировал Python-скрипт для взаимодействия с реальным экземпляром SAP клиента, чтобы наглядно показать не стандартизированность и сложность данных в ERP-системах. Цель – понять, с какими вызовами столкнется команда при построении универсального коннектора.
- Основные моменты обсуждения и предложения команды:
  - Команда задавала уточняющие вопросы о структуре получаемых данных (например, есть ли там цены, количество на складе и т.д.).
  - Были высказаны предположения о назначении различных полей (например, units для единиц измерения).
  - Команда помогала с отладкой Python-скрипта для получения всех доступных полей из объекта ответа.
- Ключевые указания, мнения и решения Дена:
  - Ден подчеркнул, что каждая инсталляция SAP уникальна. Клиенты создают собственные "витрины" (custom data views) через так называемый Service Layer.
  - Он показал, что для получения даже простого списка товаров (айтомов) необходимо выполнять специфические, заранее подготовленные SQL-запросы (квери).
  - Стандартного, единого API для всех клиентов SAP не существует. Данные по материалам (raw materials), готовой продукции (finished goods) и другим сущностям находятся в разных, кастомно настроенных "витринах".
  - Прямой вывод: создание жесткого, универсального коннектора "один на всех" невозможно. Необходим гибкий механизм.
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Признать, что интеграция с ERP требует индивидуального подхода к каждому подключению из-за отсутствия стандартизации.
  - Задача: Разработать архитектуру, которая позволит гибко настраивать маппинг данных для каждого конкретного подключения.
- Итоговое саммари по теме: Демонстрация работы с реальной SAP-системой подтвердила гипотезу о высокой степени кастомизации ERP у клиентов. Это делает невозможным создание универсального коннектора и требует разработки гибкого механизма маппинга данных на уровне каждого отдельного подключения.
### 2. Архитектура ERP-интеграций и механизм маппинга данных
- Ответственный: Вся команда
- Время обсуждения: 15:01 - 41:00
- Краткое описание контекста/цели обсуждения: На основе выводов из первого пункта, команда приступила к проектированию архитектуры для интеграции с различными ERP-системами (SAP, Dynamics, NetSuite и др.).
- Основные моменты обсуждения и предложения команды:
  - Alex Shulga: Поднял важный вопрос о дедупликации данных при пересоздании подключения клиентом, что иногда рекомендуется службой поддержки.
  - Semeyon S: Предложил в будущем вынести управление подключениями (connections) в отдельный раздел интерфейса, а не держать его в настройках аккаунта, для удобства работы с маппингом.
- Ключевые указания, мнения и решения Дена:
  - Концепция "Маппинг-слоя": Ден ввел понятие "маппинг-слоя" (mapping layer) или middleware, который должен существовать для каждого подключения. Этот слой будет отвечать за трансформацию данных из структуры ERP в структуру нашей системы.
  - UI для маппинга (в будущем): В качестве примера идеального UI для маппинга полей Ден привел Zapier. Пользователь должен видеть поля из исходной системы и поля в целевой системе и настраивать соответствия.
  - MVP без UI: В первой версии (MVP) UI для маппинга не будет. Команда будет настраивать маппинг на бэкенде для каждого клиента. Однако архитектура должна быть готова к появлению такого UI.
  - Дедупликация: Ден категорически отверг практику "удалить и создать заново". Система должна поддерживать редактирование подключения (например, смена API-ключа). Дедупликация должна решаться на уровне базы данных через использование составного первичного ключа: (наш_внутренний_id_аккаунта, внешний_id_сущности_в_erp).
  - Модель данных для подключения: Таблица подключений должна хранить не только креды, но и саму конфигурацию маппинга: external_field_name, internal_field_name, object_type и т.д.
- Принятые решения и Задачи/Следующие шаги:
  - Решение 1: Реализовать гибкий механизм маппинга данных, который будет храниться на уровне каждого подключения к ERP.
  - Решение 2: Обеспечить строгую дедупликацию данных при синхронизации, используя внешние идентификаторы.
  - Задача: Спроектировать и реализовать расширенную модель данных для Connections, включающую таблицы для хранения правил маппинга.
  - Задача: Для MVP реализовать настройку маппинга через бэкенд.
- Итоговое саммари по теме: Принято ключевое архитектурное решение: вместо жестких коннекторов будет создан универсальный шлюз (gateway) с настраиваемым слоем маппинга для каждого подключения. Это позволит работать с разнообразными и кастомизированными ERP-системами, перенося сложность из ядра приложения в конфигурацию подключения.
### 3. Управление номенклатурой (Items/Inventory) в системе
- Ответственный: Вся команда
- Время обсуждения: (фрагментарно) 41:01 - 01:27:00
- Краткое описание контекста/цели обсуждения: Определить структуру, терминологию и функциональность для управления товарами, материалами и услугами в нашей системе.
- Основные моменты обсуждения и предложения команды:
  - Vova: Предложил название Products & Services. Также указал на необходимость хранения веса и габаритов для расчета загрузки.
  - Semeyon S: Считает, что Item Types — наиболее подходящее и общее название. Поднял вопрос о различиях между внутренним кодом (SKU) и универсальным (UPC).
  - Alexandr Kovtunov: Подтвердил, что текущая реализация хранит цену и стоимость в одной таблице с товаром.
- Ключевые указания, мнения и решения Дена:
  - Разделение данных: Ден настоял на архитектурном разделении: основная информация о товаре (мастер-данные) и его цена/стоимость должны храниться в разных таблицах. Цена динамична и зависит от времени и клиента, поэтому ее нельзя хранить в мастер-записи товара.
  - Идентификатор: Приоритет должен быть отдан универсальному коду UPC. Внутренний код SKU должен быть опциональным полем.
  - Терминология и типы: Предложено использовать общее название Item Types. Необходимо поддерживать встроенные ("библиотечные") типы: Inventory, Non-inventory, Service, Spare Part, Raw Material. В MVP кастомные типы не нужны.
  - UI: Необходимо реализовать snapshot (краткую сводку) по товару, где будет видно его наличие на разных складах (on hand, available).
- Принятые решения и Задачи/Следующие шаги:
  - Решение 1: Переименовать сущность в Item Types или аналогичное общее название.
  - Решение 2: Провести рефакторинг базы данных: создать отдельную таблицу для истории цен/стоимости товаров, отделив ее от таблицы мастер-данных.
  - Задача: Реализовать поддержку стандартных типов номенклатуры.
  - Задача: В UI предусмотреть экран-сводку (snapshot) по выбранному товару.
- Итоговое саммари по теме: Модуль номенклатуры будет значительно переработан. Ключевые изменения — переход к более общей концепции "типов номенклатуры", использование UPC как основного идентификатора и, что самое важное, архитектурное разделение статических мастер-данных товара и его динамической, исторической цены.
### 4. Пользовательский интерфейс (UI/UX): Визуализация данных на карте
- Ответственный: Ден (визионер), команда (реализация)
- Время обсуждения: 01:27:00 - 01:43:00
- Краткое описание контекста/цели обсуждения: Ден использовал приложение для отслеживания полетов (FlightAware) как референс, чтобы донести свое видение того, как должна выглядеть и работать карта в системе.
- Основные моменты обсуждения и предложения команды:
  - Команда предположила, что для такой производительности используются WebSockets и бинарные протоколы (Protobuf).
  - Было отмечено использование темной темы, что характерно для диспетчерских.
- Ключевые указания, мнения и решения Дена:
  - Высокая производительность: Интерфейс должен быть мгновенным.
  - Визуальная чистота: Использовать монохромную, десатурированную подложку карты, чтобы маршруты и иконки объектов были контрастными и хорошо читались.
  - Информативность без кликов: Убрать с карты статичные названия. Вся ключевая информация (скорость, статус, высота, имя водителя) должна появляться в tooltip при наведении мыши на объект.
  - Контекстные иконки: Иконки должны визуально представлять тип объекта (грузовик, самолет) и его статус (в пути, опаздывает - красный цвет, на складе).
  - Комбинированное отображение: На карте должны одновременно отображаться все ключевые сущности: транспорт (vehicles), склады (facilities), водители/пользователи (users).
  - "Snapshot" по клику: Клик по любому объекту на карте должен открывать боковую панель с детальной информацией (snapshot).
- Принятые решения и Задачи/Следующие шаги:
  - Решение: Принять продемонстрированный подход к визуализации на карте как целевой стандарт качества и функциональности для платформы.
  - Задача: Команде UI/UX и фронтенд-разработки следовать этим принципам при проектировании и реализации всех интерфейсов с картами.
- Итоговое саммари по теме: CEO установил высокую планку для UI/UX карты, представив четкое видение. Основные требования: максимальная производительность, визуальная чистота за счет десатурации фона и упор на получение информации через наведение мыши, а не клики, чтобы обеспечить эффективную работу диспетчеров.
### 5. Процесс создания инвойсов и управление прайс-листами
- Ответственный: Вся команда
- Время обсуждения: 01:57:00 - 02:14:46
- Краткое описание контекста/цели обсуждения: Определить MVP для функционала ценообразования и генерации инвойсов, отталкиваясь от текущего ручного процесса клиента (бумажные формы и Excel).
- Основные моменты обсуждения и предложения команды:
  - Vova: Предложил поэтапное развитие прайс-листов:
    - v1: Простой, плоский прайс-лист.
    - v2: Возможность переопределять цены для конкретных клиентов (overrides).
    - v3: Сложные скидки, наценки и правила.
  - Semeyon S: Поднял вопрос об уровне агрегации инвойсов: должен ли он создаваться на каждую остановку, на весь маршрут для одного клиента или как-то еще.
- Ключевые указания, мнения и решения Дена:
  - MVP прайс-листа: Ден согласился с поэтапным подходом. Для v1 достаточно простого прайс-листа, который можно загрузить через CSV/Excel. В UI он может быть в режиме "только для чтения".
  - Мобильный флоу: Водитель в мобильном приложении на остановке видит запланированные товары, вводит фактическое количество доставленных товаров. Приложение, используя прайс-лист, рассчитывает и показывает итоговую сумму.
  - Генерация инвойса: После подтверждения водителем, система должна сгенерировать структурированный объект инвойса (JSON), который затем может быть отправлен во внешнюю систему (например, QuickBooks, SAP) через API.
  - Агрегация инвойсов: Ден подтвердил, что это важный аспект. Система должна позволять настраивать, как будут группироваться инвойсы (например, один общий инвойс для всех остановок клиента Seven-Eleven в рамках одного маршрута).
- Принятые решения и Задачи/Следующие шаги:
  - Решение 1: В MVP реализовать "плоские" прайс-листы с возможностью импорта из файла.
  - Решение 2: В мобильном приложении создать интерфейс для подтверждения доставки и расчета итоговой суммы на основе прайс-листа.
  - Задача: Спроектировать API и структуру данных для "объекта инвойса".
  - Задача: Провести отдельную встречу в понедельник с мобильной командой для финализации UI и потока данных.
  - Задача: Продумать механизм конфигурации агрегации инвойсов для будущих версий.
- Итоговое саммари по теме: Команда определила MVP для процесса инвойсинга, который позволит оцифровать текущий ручной процесс клиентов. Он будет основан на простом импортируемом прайс-листе и мобильном приложении для водителя. Более сложные сценарии ценообразования и агрегации отложены на следующие итерации.
